{"version":3,"sources":["redux/actions/articles.ts","redux/actions/category.ts","redux/state.ts","redux/reducers/category.ts","redux/reducers/articles.ts","redux/actions/copy-link-snackbar.ts","redux/reducers/copy-link-snackbar.ts","redux/actions/search-keyword.ts","redux/reducers/search-keyword.ts","redux/reducers/root-reducers.ts","redux/configureStore.ts","theme.tsx","tools/use-lazy-load.ts","tools/copy-to-clipboard.ts","tools/use-debounce.ts","tools/use-swipeable.ts","components/utility-components/swipeable.tsx","components/articles/articles.tsx","tools/get-publish-time.ts","containers/articles-container.tsx","components/attribution.tsx","components/copy-link-snackbar.tsx","containers/copy-link-snackbar-container.tsx","components/analytics/utilitis/use-get-analytics.tsx","components/analytics/utilitis/animation-slide-in.tsx","components/analytics/utilitis/section-wrapper.tsx","d3-charts/pie-chart-d3.ts","components/analytics/styles/analytics-styles.tsx","components/analytics/utilitis/title.tsx","components/analytics/utilitis/content.tsx","components/analytics/documents-by-category-bar-chart.tsx","d3-charts/heat-map-d3.ts","components/analytics/documents-heat-map.tsx","components/analytics/documents-text-summary.tsx","tools/use-sticky.ts","d3-charts/word-cloud-d3.ts","components/analytics/documents-word-cloud.tsx","components/analytics/utilitis/animation-fixed.tsx","d3-charts/stacked-line-chart-d3.tsx","components/analytics/documents-count-stacked-line-chart.tsx","components/analytics/stacked-line-chart-expansion-panel-note.tsx","components/analytics/analytics.tsx","components/utility-components/sticky-component.tsx","components/header/header-search.tsx","components/header/header.tsx","containers/header-container.tsx","components/articles/searched-articles/filters/sort-types.ts","d3-charts/world-map-d3.ts","components/topic/topic-covid19-map.tsx","components/topic/topic.tsx","components/articles/searched-articles/utilities/status.tsx","components/articles/searched-articles/requests/request-search-news.ts","components/articles/searched-articles/requests/use-search-news.tsx","components/articles/searched-articles/utilities/get-date-string.tsx","components/articles/searched-articles/message-components/result-count-message.tsx","components/articles/searched-articles/message-components/loading-message.tsx","components/articles/searched-articles/message-components/load-more-message.tsx","components/articles/searched-articles/message-components/generic-message.tsx","components/articles/searched-articles/highlighted-content.tsx","components/articles/searched-articles/searched-article-card.tsx","components/articles/searched-articles/utilities/scroll-to-top-button.tsx","d3-charts/frequency-chart-d3.ts","components/articles/searched-articles/frequency-chart/keyword-frequency.tsx","components/articles/searched-articles/filters/sort-panel.tsx","components/articles/searched-articles/filters/filter-by-date.tsx","components/articles/searched-articles/filters/filters.tsx","styles/styles.ts","components/articles/searched-articles/searched-articles.tsx","inner-app.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["ArticleActionsTypes","Category","fetchArticles","category","QUERY","dispatch","type","REQUEST_ARTICLES","fetch","encodeURIComponent","then","res","json","errors","IS_ERROR","articles","RECEIVE_ARTICLES","slice","receiveArticles","data","getNews","CategoryActionsType","categories","HEADLINE","BUSINESS","ENTERTAINMENT","HEALTH","SCIENCE","SPORTS","TECHNOLOGY","setCategoryAndFetchArticles","SET_CATEGORY","setCategory","initState","isError","isFetching","copyLinkSnackBar","isActive","searchKeyword","state","action","CopyLinkSnackbarActionsTypes","actions","Object","assign","copyLinkSnackbar","SearchKeywordTypes","CLOSE_SNACKBAR","OPEN_SNACKBAR","SET_KEYWORD","keyword","rootReducers","combineReducers","preloadedState","theme","createMuiTheme","palette","primary","main","contrastText","secondary","responsiveFontSizes","typography","h1","fontFamily","join","fontWeight","fontSize","breakpoints","up","useLazyLoad","ref","triggerPoint","useState","isVisible","setIsVisible","scrollHandlerLastCalledAt","Date","now","checkIsVisible","calledAt","current","rect","getBoundingClientRect","isBefore","top","height","isAfter","window","innerHeight","useEffect","document","addEventListener","removeEventListener","copyToClipboard","string","el","createElement","value","setAttribute","style","position","left","body","appendChild","select","execCommand","removeChild","useDebounce","UseSwipeableDirections","UserAction","debounceInterval","lastExecuted","DEBOUNCER","useSwipeable","threshholdPx","x1","setX1","y1","setY1","NULL","userAction","setUserAction","direction","setDirection","dragDistance","setDragDistance","shouldBeExecuted","touchStartHandler","e","changedTouches","clientX","clientY","touchMoveHandler","currentX","currentY","cancelable","preventDefault","Math","abs","SWIPE","SCROLL","touchEndHandler","RIGHT","LEFT","currentElement","resetSwipeStatus","SwipeableContainer","connect","goPrevious","getState","currentCategory","currentIndex","indexOf","length","goNext","isLast","props","containerRef","useRef","width","transform","children","useStyles","makeStyles","createStyles","wrapper","padding","down","calcHeight","lines","variant","lineHeight","ellipsis","root","content","bottom","right","backgroundImage","zIndex","overFlowHidden","overflow","cardCommonStyles","buttons","imageContain","backgroundSize","backgroundColor","usePrimaryCardStyles","media","skeleton","title","source","articleContent","useSecondaryCardStyles","Buttons","CardActions","className","Link","href","url","target","rel","underline","Button","size","color","onClick","openCopyLinkSnackBar","Article","isTransitionAnimationNeeded","useMediaQuery","useTheme","isPrimaryCard","id","cardPrimaryClasses","cardSecondaryClasses","cardClasses","useMemo","image","urlToImage","CardMedia","component","alt","Skeleton","process","Grid","item","xs","md","Card","raised","CardContent","Typography","gutterBottom","Box","author","date","timePast","getTime","minutes","floor","hours","days","months","years","getPublishTime","publishedAt","replace","Zoom","in","LoadedArticles","map","article","i","key","ArticlesContainer","classes","scrollTo","Array","from","_","maxWidth","container","alignContent","justify","spacing","Attribution","m","Chip","avatar","Avatar","label","clickable","successSnackBar","green","CopyLinkSnackbar","closeHandler","closeCopyLinkSnackBar","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","SnackbarContent","message","IconButton","aria-label","AnalyticsPageStatus","CopyLinkSnackBarContainer","AnimationSlideInDirection","useGetAnalytics","loading","status","setStatus","summaryStatisticsData","setSummaryStatisticsData","console","log","error","totalDocuments","summaryStatistics","earliestDocumentDate","latestDocumentDate","documentsCountByCategory","documentsCountByDay","time","series","count","wordCloud","documentsCountByDayAndCategory","documentCount","loaded","catch","display","flexDirection","alignItems","justifyContent","SectionWrapper","fullHeight","minHeight","PieChartD3","getColor","index","colors","hasAnimated","params","svg","references","this","getParams","d3","append","pieZero","getPieData","pie","totalValue","reduce","a","b","createReferences","startAngle","PI","endAngle","rx","ry","h","ir","d","sort","innerSlice","selectAll","enter","topSlice","outerSlice","text","text1","text2","x","y","attr","darker","toString","pieInner","filter","obj","pieTop","pieOuter","toUpperCase","toFixed","initData","targetData","thisClass","iRaise","textTweenX","t","cos","transition","duration","delay","attrTween","sin","sx","sy","ex","ey","ret","push","_startAngle","_endAngle","pieTransition","styleSvg","drawPie","bigNumber","margin","header","textAlign","textTransform","bigNumberTitle","Title","isArray","str","split","Content","DocumentsByCategoryPieChart","isLoaded","animate","pieChart","setPieChart","barChart","HeatMapD3","dayOfWeekStrings","monthStrings","targetRectSize","rectPadding","scales","axis","getData","getScales","getAxis","r","l","xBands","xScaleDomain","maxRectSize","rectSize","min","chart","domain","range","yScaleDomain","maxCount","tickFormat","xScaleGuide","getUTCMonth","thisOne","tickSize","tickPadding","parseInt","tickValues","_data","compensation","getUTCDay","unshift","timeArray","computedX","getX","computedY","getY","max","apply","xAxis","yAxis","rects","tooltipGroup","tooltipBackground","tooltip","tooltipText1","tooltipText2","remove","bandwidth","on","getAttribute","getUTCDate","getUTCFullYear","bBox","node","getBBox","textWidth","textHeight","tooltipWidth","tooltipHeight","toolTipX","toolTipY","borderX0","borderX1","borderY0","borderY1","styleAxisX","styleAxisY","styleRects","styleTooltip","addMouseEventToRects","prepareForAnimation","DocumentsHeatMap","heatMap","setHeatMap","section","number","DocumentsTextSummary","React","forwardRef","forwardedRef","earliestMs","latestMs","commonProps","config","molasses","total","useSpring","earliest","latest","useCountUpAnimation","p","to","n","dateObj","round","Style","willChange","placeholder","AnimationSlideIn","childrenRef","placeholderRef","dimension","setDimension","start","end","setTarget","xMax","translate","setTranslate","scrollHandler","scrollY","prevTranslate","percentage","WordCloudD3","scale","getScale","bind","counts","words","word","d3Cloud","timeInterval","rotate","random","font","draw","WordCloud","setWordCloud","fixedWrapper","childrenSize","AnimationFixed","fixedWrapperRef","isSet","isFrozen","setIsFrozen","offset","fixedWrapperStyle","getAccumulativeSum","array","result","sumHash","forEach","num","arr","sum","undefined","StackedLineChartD3","getAreaColor","textColor","domainColor","dimensions","axes","shapes","getDimension","axisX","axisY","axisYAreaTitle","axisXHover","axisYHoverText","axisYHoverLines","paths","detectionRects","getShapes","getAxes","convertToPercentage","maxQuantity","quantity","arrayLength","maxS","stackData","svgWidth","svgHeight","chartWidth","chartHeight","xRange","xBand","xPoint","xTickValues","isoString","lastDayQuantities","yAreaTitleTickValues","yAreaTitle","order","xHover","yHoverText","yHoverLines","allAxes","keys","stack","getArea","y0","ease","setTimeout","toggleAllAxes","opacity","updateHoverAxes","percentages","seriesIndex","accumulativeSum","areaMidPosition","_d","_i","tickSizeInner","insert","updateHoverXBg","initSvg","initLineChart","initAxes","initDetectionRects","appendMouseEventToDetectionRects","DocumentsCountStackedLineChart","stackedBarChart","setStackedBarChart","contentParagraphs","boxShadow","rootExpanded","summaryWrapper","line","detailWrapper","StyledExpansionPanelSummary","withStyles","expanded","ExpansionPanelSummary","StackedLineChartExpansionPanelNote","setExpanded","scrollX","ExpansionPanel","onChange","prevState","ExpansionPanelDetails","overflowX","paddingBottom","widthWrapper","Analytics","wrapperRef","bgColorChangeRef","bgBlack","setBgBlack","changeBgColor","CircularProgress","Fade","timeout","getStyle","styleName","FIXED","RELATIVE","useSticky","anchorRef","setStyle","scrolled","fixedStartHeight","offsetTop","offsetHeight","isFixed","StickyComponent","elementRef","offsetWidth","dialog","minWidth","HeaderSearch","goToSearch","setOpen","input","setInput","isEmpty","setIsEmpty","handleClose","Tooltip","TransitionComponent","Dialog","fullWidth","onSubmit","DialogTitle","DialogContent","TextField","autoFocus","helperText","DialogActions","tab","flexShrink","flexGrow","heading","whiteSpace","appBarNoBoxShadow","appBarBottomBoxShadow","trendIcon","Header","headers","goToAnalytics","goToTopic","appBarRef","AppBar","Toolbar","align","appBar","Tabs","indicatorColor","scrollButtons","Tab","SortTypes","HeaderContainer","setSearchKeyword","SEARCH","ANALYTICS","TOPIC","setCategoryIfNeeded","WorldMapD3","themeColor","caseData","red","transparent","getMapColor","grey","mapStrokeNormal","mapStrokeHoverHighlight","case","death","recovered","timeBarHighlight","timeBarNormal","timeBarLight","getStrokeWidth","animations","zoomIn","changeMapColor","timeLapse","timeLapseGap","aggregate","caseMax","pathHighlightGroup","pathHighlight","timeControl","timeBarXScale","timeMax","tooltipData","inputX","inputXSecondary","inputY","inputYSecondary","country","timeoutID","mapX","mapY","mapWidth","mapHeight","module","mapData","default","features","properties","countries","name","cases","bg","tspanCountry","tspanDate","tspanCaseAccumulative","tspanCaseNew","tspanDeathAccumulative","tspanDeathNew","tspanRecoveredAccumulative","tspanRecoveredNew","caseLineChart","deathLineChart","recoveredLineChart","stackBarChartGroup","stackBarChartCase","stackBarChartDeath","stackBarChartRecovered","updateTooltip","currentT","getNew","dateText","getDate","getMonth","getFullYear","deaths","updateTexts","textX","textY","tooltipX","lineChartHeight","xBg","xBgFloored","_inputY","tooltipY","lineChartStartY","stackBarChartY","chartX","stackBarChartHeight","getTooltipsDimensions","updateLineChartsHelper","dataArray","reference","yMax","scaleX","scaleY","datum","defined","lineChartYMax","nullData","updateLineCharts","currentCase","currentDeath","currentRecovered","deathWidth","recoveredWidth","updateStackBarChart","projection","fitExtent","timeControlStartY","timeControlStartX","timeBarStartY","buttonStartY","dateArray","group","selection","timeBarBg","timeBar","buttonGroup","buttonHeight","playButton","startOverButton","caseMaxLog","emptyColor","currentCases","updateMap","updateTimeControl","xSecondary","ySecondary","newCase","_case","isWaitFirstTick","tick","setTimeState","stopTimeLapse","clearTimeout","startTimeLapse","removeHighlightAndMoveTooltip","setToolTipDataState","clonedNode","clone","movedClonedNode","initMap","initTimeControl","initTooltip","mapZoomIn","appendMapPathMouseEvent","appendTimeBarMouseEvent","appendTimeControlButtonEvent","TopicCovid19Map","dataFile","Topic","mx","Status","requestSearchNews","skip","frequency","Promise","resolve","reject","dateComponent","relevance","useSearchNews","LOADING","setData","sortType","setSortType","totalCount","setTotalCount","frequencyData","setFrequencyData","pendingDateFilter","_setPendingDateFilter","dateFilter","_setDateFilter","setLoadedStatus","updatedDataLength","LOADED_NO_MORE","LOADED_EMPTY","LOADED_NORMAL","async","bin","ERROR","newSearch","toggleSort","loadMore","prevData","setPendingDateFilter","setDateFilter","getDateString","ResultsCountMessage","currentLength","dateFilterMessage","LoadingMessage","animation","LoadMoreMessage","disableElevation","GenericMessage","divider","Divider","highlight","light","HighlightedContent","contentArray","escapedKeyword","re","RegExp","cardRoot","cardActionArea","textDecoration","cursor","cardMedia","cardContent","SearchedArticleCard","cardHeight","setCardHeight","heightRef","useGetHeight","CardActionArea","toDateString","smoothscroll","polyfill","modal","transitions","create","ScrollToTopButton","setIsActive","handleScroll","useActivateByScrollY","scroll","behavior","FrequencyChartD3","selector","auxArray","binDate","getBinDateArray","barTransitionDelay","getBarTransitionDelayArray","lightColor","darkColor","dark","primaryColor","TRANSITION_DELAY","BAR_TRANSITION_DURATION","maxFrequency","binLength","argWidth","getDimensions","bars","axisXHoverDate","axisXHoverFrequency","axisYHover","hoverDetection","xHoverDate","xHoverFrequency","yHover","setHoverDetectionEventHandlers","binArray","transitionDelay","frequencyDataArray","chartY","barWidth","barHeight","tickSizeOuter","gridTextBox","hoverDateTextBox","setDate","setSvg","setBars","setAxisX","setAxisY","setAxisXHoverDate","setAxisXHoverFrequency","setAxisYHover","setHoverDetection","KeywordFrequency","ISOString","bindSetDate","capitalizeString","lowercase","toLowerCase","charAt","resetFontSize","SortPanel","FormControl","InputLabel","htmlFor","Select","newType","inputProps","MenuItem","borderRadius","cancelIcon","FilterByDate","chip","onDelete","deleteIcon","disabled","shrink","itemWrapper","Filters","pageRoot","page1000WidthWrapper","SearchedArticles","hasData","notFoundMessage","showChartAndFilters","foundDataOnKeyword","setFoundDataOnKeyword","useShowChartAndFilters","_id","attribution","InnerAppContainer","fetchArticlesAfterMount","store","createStore","applyMiddleware","thunkMiddleware","App","ThemeProvider","CssBaseline","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.99cb7a50.chunk.js","sourcesContent":["import {Action, ActionCreator, AnyAction} from \"redux\";\nimport { Category } from './category';\nimport {State} from \"../state\";\nimport {ThunkDispatch} from \"redux-thunk\";\n\nexport interface Article {\n    source: string,\n    author: string,\n    title: string,\n    description: string,\n    url: string,\n    urlToImage: string,\n    publishedAt: string,\n    content: string\n}\n\n\nexport enum ArticleActionsTypes {\n    IS_ERROR = 'IS_ERROR',\n    REQUEST_ARTICLES = 'REQUEST_ARTICLES',\n    RECEIVE_ARTICLES = 'RECEIVE_ARTICLES'\n}\n\nexport interface ArticlesRequestFailedAction {\n    type: ArticleActionsTypes.IS_ERROR\n}\n\nconst requestArticlesFailed: ActionCreator<ArticlesRequestFailedAction> = () => {\n    return {\n        type: ArticleActionsTypes.IS_ERROR\n    }\n};\n\nexport interface ArticlesRequestAction {\n    type: ArticleActionsTypes.REQUEST_ARTICLES\n}\n\nconst requestArticles: ActionCreator<ArticlesRequestAction> = () => {\n    return {\n        type: ArticleActionsTypes.REQUEST_ARTICLES\n    }\n};\n\nexport interface ArticlesReceiveAction {\n    type: ArticleActionsTypes.RECEIVE_ARTICLES,\n    articles: Array<Article>\n}\n\nconst receiveArticles: ActionCreator<ArticlesReceiveAction> = (articles: Array<Article>) => {\n    return {\n        type: ArticleActionsTypes.RECEIVE_ARTICLES,\n        articles: articles.slice()\n    }\n};\n\nconst NEWS_API = 'https://www.xiaoxihome.com/api/news?query=';\n\nexport const fetchArticles = (category: Category) => {\n    const QUERY = `\n        {\n            getNews(category: ${category}) {\n                source,\n                author,\n                title,\n                description,\n                url,\n                urlToImage,\n                publishedAt,\n                content\n            }\n        }\n    `;\n\n    return (dispatch: ThunkDispatch<State, null, AnyAction>) => {\n        dispatch(requestArticles());\n        return fetch(NEWS_API + encodeURIComponent(QUERY))\n            .then(res => res.json())\n            .then(json => {\n                if (json.errors) {\n                    dispatch(requestArticlesFailed())\n                } else {\n                    dispatch(receiveArticles(json.data.getNews))\n                }\n            })\n    }\n};\n\nexport type ArticlesActions =  ArticlesRequestAction | ArticlesRequestFailedAction | ArticlesReceiveAction;","import {fetchArticles} from \"./articles\";\nimport {ActionCreator, AnyAction} from \"redux\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {State} from \"../state\";\n\nexport enum Category {\n    HEADLINE= `HEADLINE`,\n    BUSINESS= `BUSINESS`,\n    ENTERTAINMENT= `ENTERTAINMENT`,\n    HEALTH= `HEALTH`,\n    SCIENCE= `SCIENCE`,\n    SPORTS= `SPORTS`,\n    TECHNOLOGY= `TECHNOLOGY`,\n    SEARCH=`SEARCH`,\n    ANALYTICS='ANALYTICS',\n    TOPIC='TOPIC'\n}\n\nexport type Categories = Array<Category>;\n\nexport const categories: Categories = [\n    Category.HEADLINE, Category.BUSINESS, Category.ENTERTAINMENT, Category.HEALTH, Category.SCIENCE, Category.SPORTS, Category.TECHNOLOGY\n];\n\nexport enum CategoryActionsType {\n    SET_CATEGORY = 'SET_CATEGORY'\n}\n\nexport interface CategoryActions {\n    type: CategoryActionsType,\n    category: Category\n}\n\nconst setCategory: ActionCreator<CategoryActions> = (category: Category) => {\n    return {\n        type: CategoryActionsType.SET_CATEGORY,\n        category\n    }\n};\n\nexport function goToSearchPanel() {\n    return {\n        type: CategoryActionsType.SET_CATEGORY,\n        category: Category.SEARCH\n    }\n}\n\nexport function goToAnalyticsPanel() {\n    return {\n        type: CategoryActionsType.SET_CATEGORY,\n        category: Category.ANALYTICS\n    }\n}\n\nexport function goToTopicPanel() {\n    return {\n        type: CategoryActionsType.SET_CATEGORY,\n        category: Category.TOPIC\n    }\n}\n\nconst setCategoryAndFetchArticles = (category: Category) => {\n    return (dispatch: ThunkDispatch<State, null, AnyAction>) => {\n        dispatch(setCategory(category));\n        dispatch(fetchArticles(category));\n    };\n};\n\nexport function setNextCategory() {\n    return (dispatch: ThunkDispatch<State, null, AnyAction>, getState: () => State) => {\n        const currentCategory = getState().category;\n        const currentIndex = categories.indexOf(currentCategory);\n        const isLast = currentIndex === categories.length - 1;\n        if (isLast) {\n            dispatch(setCategoryAndFetchArticles(Category[categories[0]]));\n        } else {\n            dispatch(setCategoryAndFetchArticles(Category[categories[currentIndex + 1]]));\n        }\n    };\n}\n\nexport function setPreviousCategory() {\n    return (dispatch: ThunkDispatch<State, null, AnyAction>, getState: () => State) => {\n        const currentCategory = getState().category;\n        const currentIndex = categories.indexOf(currentCategory);\n        const isFirst = currentIndex === 0;\n        if (isFirst) {\n            dispatch(setCategoryAndFetchArticles(Category[categories[categories.length - 1]]));\n        } else {\n            dispatch(setCategoryAndFetchArticles(Category[categories[currentIndex - 1]]));\n        }\n    };\n}\n\nexport function setCategoryIfNeeded(category: Category) {\n    return (dispatch: ThunkDispatch<State, null, AnyAction>, getState: () => State) => {\n        if (getState().category === category) return;\n        dispatch(setCategoryAndFetchArticles(category));\n    };\n}\n","import {Category} from \"./actions/category\";\nimport {Article} from \"./actions/articles\";\n\nexport interface State {\n    category: Category,\n    articles: {\n        isError: boolean,\n        isFetching: boolean,\n        articles: Array<Article>\n    },\n    copyLinkSnackBar: {\n        isActive: boolean\n    },\n    searchKeyword: string\n}\n\nexport const initState: State = {\n    category: Category.HEADLINE,\n    articles: {\n        isError: false,\n        isFetching: true,\n        articles: []\n    },\n    copyLinkSnackBar: {\n        isActive: false\n    },\n    searchKeyword: ''\n};","import {initState, State} from \"../state\";\nimport {Category, CategoryActions, CategoryActionsType} from \"../actions/category\";\n\nfunction category(state = initState.category, action: CategoryActions): State['category'] {\n    switch (action.type) {\n        case CategoryActionsType.SET_CATEGORY:\n            return Category[action.category];\n        default:\n            return state\n    }\n}\n\nexport default category;","import {initState, State} from \"../state\";\nimport {ArticleActionsTypes, ArticlesActions} from \"../actions/articles\";\n\nfunction articles(state = initState.articles, actions: ArticlesActions): State['articles'] {\n    switch(actions.type) {\n        case ArticleActionsTypes.IS_ERROR:\n            return Object.assign({}, state, {isError: true});\n        case ArticleActionsTypes.REQUEST_ARTICLES:\n            return Object.assign({}, state, {\n                isError: false,\n                isFetching: true\n            });\n        case ArticleActionsTypes.RECEIVE_ARTICLES:\n            return Object.assign({}, {\n                isError: false,\n                isFetching: false,\n                articles: actions.articles.slice()\n            });\n        default:\n            return state\n    }\n}\n\nexport default articles;","export enum CopyLinkSnackbarActionsTypes {\n    CLOSE_SNACKBAR = 'CLOSE_SNACKBAR',\n    OPEN_SNACKBAR = 'OPEN_SNACKBAR'\n}\n\nexport interface CopyLinkSnackBarActions {\n    type: CopyLinkSnackbarActionsTypes\n}\n\nexport function closeCopyLinkSnackBar() {\n    return {\n        type: CopyLinkSnackbarActionsTypes.CLOSE_SNACKBAR\n    }\n}\n\nexport function openCopyLinkSnackBar() {\n    return {\n        type: CopyLinkSnackbarActionsTypes.OPEN_SNACKBAR\n    }\n}","import {CopyLinkSnackBarActions, CopyLinkSnackbarActionsTypes} from \"../actions/copy-link-snackbar\";\nimport {State, initState} from \"../state\";\n\nfunction copyLinkSnackbar(state = initState.copyLinkSnackBar, actions: CopyLinkSnackBarActions): State['copyLinkSnackBar'] {\n    switch(actions.type) {\n        case CopyLinkSnackbarActionsTypes.CLOSE_SNACKBAR:\n            return {\n                isActive: false\n            };\n        case CopyLinkSnackbarActionsTypes.OPEN_SNACKBAR:\n            return {\n                isActive: true\n            };\n        default:\n            return state\n    }\n}\n\nexport default copyLinkSnackbar","export enum SearchKeywordTypes {\n    SET_KEYWORD = 'SET_KEYWORD'\n}\n\nexport interface SearchKeywordActions {\n    type: SearchKeywordTypes,\n    keyword: string\n}\n\nexport function setSearchKeyword(keyword: string) {\n    return {\n        type: SearchKeywordTypes.SET_KEYWORD,\n        keyword\n    }\n}","import {CopyLinkSnackBarActions, CopyLinkSnackbarActionsTypes} from \"../actions/copy-link-snackbar\";\nimport {State, initState} from \"../state\";\nimport {SearchKeywordActions, SearchKeywordTypes} from \"../actions/search-keyword\";\n\nfunction searchKeyword(state = initState.searchKeyword, actions: SearchKeywordActions): State['searchKeyword'] {\n    switch(actions.type) {\n        case SearchKeywordTypes.SET_KEYWORD:\n            return actions.keyword;\n        default:\n            return state\n    }\n}\n\nexport default searchKeyword","import {combineReducers} from \"redux\";\nimport category from \"./category\";\nimport articles from \"./articles\";\nimport copyLinkSnackBar from \"./copy-link-snackbar\";\nimport searchKeyword from \"./search-keyword\";\n\nconst rootReducers = combineReducers({\n    category,\n    articles,\n    copyLinkSnackBar,\n    searchKeyword\n});\n\nexport default rootReducers;","import { createStore, applyMiddleware } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport {initState} from \"./state\";\nimport rootReducers from \"./reducers/root-reducers\";\n\n// import { createLogger } from 'redux-logger'\n// const loggerMiddleware = createLogger();\n\nconst preloadedState = initState;\nexport default function configureStore() {\n    return createStore(\n        rootReducers,\n        preloadedState,\n        applyMiddleware(thunkMiddleware)\n        // applyMiddleware(thunkMiddleware, loggerMiddleware)\n    )\n}","import {createMuiTheme, responsiveFontSizes} from \"@material-ui/core/styles\";\n\nlet theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: '#333333',\n            contrastText: '#fff',\n        },\n        secondary: {\n            main: '#1EB980',\n            contrastText: '#fff',\n        },\n    },\n});\ntheme = responsiveFontSizes(theme);\ntheme.typography.h1 = {\n    fontFamily: [\n        'Anton',\n        'sans-serif',\n    ].join(','),\n    fontWeight: 400,\n    fontSize: '2rem',\n    [theme.breakpoints.up('md')]: {\n        fontSize: '2.5rem',\n    },\n    fontStyle: \"normal\",\n    color: \"inherit\"\n};\n\nexport default theme;","import React, {useEffect, useState} from \"react\";\n\n// @param triggerPoint in range (0, 1)\nexport default function useLazyLoad(ref: React.RefObject<HTMLDivElement>, triggerPoint?: number) {\n    const [isVisible, setIsVisible] = useState(false);\n    let scrollHandlerLastCalledAt = Date.now() - 1000;\n\n    function checkIsVisible() {\n        const calledAt = Date.now();\n        if (calledAt - scrollHandlerLastCalledAt < 20) {\n            return\n        } else {\n            scrollHandlerLastCalledAt = calledAt\n        }\n        if (!ref.current) return;\n\n        const rect = ref.current.getBoundingClientRect();\n        const isBefore = rect.top + rect.height < 0;\n        const isAfter = triggerPoint ?\n            rect.top > window.innerHeight * triggerPoint :\n            rect.top > window.innerHeight;\n        if (!isBefore && !isAfter) setIsVisible(true);\n    }\n\n    useEffect(() => {\n        if (isVisible) return;\n        checkIsVisible();\n        document.addEventListener('scroll', checkIsVisible);\n        return () => {\n            document.removeEventListener('scroll', checkIsVisible);\n        }\n    }, [isVisible, ref]);\n\n    return isVisible\n}","function copyToClipboard(string: string) {\n    const el = document.createElement('textarea');\n    el.value = string;\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n}\n\nexport default copyToClipboard;","function useDebounce(debounceInterval: number) {\n    let lastExecuted = Date.now();\n\n    function shouldBeExecuted() {\n        const now = Date.now();\n        if (now - lastExecuted > debounceInterval) {\n            lastExecuted = now;\n            return true\n        } else {\n            return false\n        }\n    }\n\n    return shouldBeExecuted;\n}\n\nexport default useDebounce;","import {RefObject, useEffect, useState} from \"react\";\nimport useDebounce from \"./use-debounce\";\n\nexport enum UseSwipeableDirections {\n    NULL= 'NULL',\n    LEFT = 'LEFT',\n    RIGHT = 'RIGHT'\n}\n\nenum UserAction {\n    NULL = 'NULL',\n    SWIPE = 'SWIPE',\n    SCROLL = 'SCROLL'\n}\n\nconst DEBOUNCER = 10;\n\nfunction useSwipeable(ref: RefObject<HTMLInputElement>, threshholdPx: number) {\n    const [x1, setX1] = useState(0);\n    const [y1, setY1] = useState(0);\n    const [userAction, setUserAction] = useState(UserAction.NULL);\n    const [direction, setDirection] = useState(UseSwipeableDirections.NULL);\n    const [dragDistance, setDragDistance] = useState(0);\n    const shouldBeExecuted = useDebounce(DEBOUNCER);\n\n    function touchStartHandler(e: TouchEvent) {\n        setX1(e.changedTouches[0].clientX);\n        setY1(e.changedTouches[0].clientY)\n    }\n\n    function touchMoveHandler(e: TouchEvent) {\n        if (!shouldBeExecuted()) return;\n        const currentX = e.changedTouches[0].clientX;\n        const currentY = e.changedTouches[0].clientY;\n\n        if (userAction === 'SWIPE') {\n            if (e.cancelable) e.preventDefault();\n            setDragDistance(e.changedTouches[0].clientX - x1);\n        } else if (userAction === 'NULL' && Math.abs(currentX - x1) > Math.abs(currentY - y1)) {\n            setUserAction(UserAction.SWIPE)\n        } else if (userAction === 'NULL' && Math.abs(currentX - x1) <= Math.abs(currentY - y1)) {\n            setUserAction(UserAction.SCROLL)\n        }\n\n    }\n\n    function touchEndHandler(e: TouchEvent) {\n        const currentX = e.changedTouches[0].clientX;\n        const currentY = e.changedTouches[0].clientY;\n        if (\n            Math.abs(currentX - x1) > Math.abs(currentY - y1) &&\n            Math.abs(currentX - x1) > threshholdPx &&\n            userAction === UserAction.SWIPE\n        ) {\n            setDirection(currentX > x1 ? UseSwipeableDirections.RIGHT : UseSwipeableDirections.LEFT);\n        }\n        setDragDistance(0);\n        setUserAction(UserAction.NULL)\n    }\n\n    function resetSwipeStatus() {\n        setDirection(UseSwipeableDirections.NULL);\n    }\n\n    useEffect(() => {\n        const currentElement = ref.current;\n        if (!currentElement) return;\n        currentElement.addEventListener('touchstart', touchStartHandler);\n\n        return () => {\n            currentElement.removeEventListener('touchstart', touchStartHandler);\n        }\n    }, [ref]);\n\n    useEffect(() => {\n        const currentElement = ref.current;\n        if (!currentElement) return;\n        currentElement.addEventListener('touchmove', touchMoveHandler);\n\n        return () => {\n            currentElement.removeEventListener('touchmove', touchMoveHandler);\n        }\n    }, [y1, userAction, ref]);\n\n    useEffect(() => {\n        const currentElement = ref.current;\n        if (!currentElement) return;\n        currentElement.addEventListener('touchend', touchEndHandler);\n\n        return () => {\n            currentElement.removeEventListener('touchend', touchEndHandler);\n        }\n    }, [y1, userAction, ref]);\n\n    return {\n        direction,\n        dragDistance,\n        resetSwipeStatus\n    }\n}\n\nexport default useSwipeable","import React, {useEffect, useRef} from \"react\";\nimport useSwipeable, {UseSwipeableDirections} from \"../../tools/use-swipeable\";\nimport {connect} from \"react-redux\";\nimport {setNextCategory, setPreviousCategory} from \"../../redux/actions/category\";\n\ninterface SwipeableProps {\n    goPrevious: () => void,\n    goNext: () => void,\n}\n\nconst Swipeable: React.FC<SwipeableProps> = (props) => {\n    const containerRef = useRef(null);\n    const {\n        direction,\n        dragDistance,\n        resetSwipeStatus\n    } = useSwipeable(containerRef, 50);\n\n    useEffect(() => {\n        if (direction === UseSwipeableDirections.RIGHT) {\n            props.goPrevious()\n        } else if (direction === UseSwipeableDirections.LEFT) {\n            props.goNext()\n        }\n        return () => {\n            resetSwipeStatus();\n        }\n    }, [direction]);\n\n    return (\n        <div\n            style={{\n                width: '100%',\n                transform: `translateX(${dragDistance}px)`,\n                // it affects snackbar fixed behavior\n                // left: `${dragDistance}px`,\n                // position: 'relative'\n            }}\n            ref={containerRef}\n        >\n            { props.children }\n        </div>\n    )\n};\n\nfunction mapDispatchToProps(dispatch: any) {\n    return {\n        goPrevious: () => dispatch(setPreviousCategory()),\n        goNext: () => dispatch(setNextCategory())\n    }\n}\n\nconst SwipeableContainer = connect(\n    null,\n    mapDispatchToProps\n)(Swipeable);\n\nexport default SwipeableContainer","import React, {CSSProperties, useEffect, useMemo, useRef, useState} from \"react\";\nimport {\n    Box,\n    Button,\n    Card,\n    CardActions,\n    CardContent,\n    CardMedia,\n    createStyles,\n    Grid,\n    Link,\n    makeStyles,\n    Theme,\n    Typography,\n    useMediaQuery,\n    useTheme,\n    Zoom,\n} from \"@material-ui/core\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport useLazyLoad from \"../../tools/use-lazy-load\";\nimport getPublishTime from \"../../tools/get-publish-time\";\nimport copyToClipboard from \"../../tools/copy-to-clipboard\";\nimport {ThemeStyle} from \"@material-ui/core/styles/createTypography\";\nimport Swipeable from '../utility-components/swipeable';\nimport { Article as ArticleType} from \"../../redux/actions/articles\";\nimport {State} from \"../../redux/state\";\n\nconst useStyles = makeStyles((theme) => createStyles({\n    wrapper: {\n        width: '100%',\n        padding: '20px 20px 150px 20px',\n    },\n    [theme.breakpoints.down(\"sm\")]: {\n        wrapper: {\n            padding: '8px 8px 150px 8px'\n        },\n    },\n}));\n\nfunction calcHeight(lines: number, variant: ThemeStyle, theme: Theme): CSSProperties['height'] {\n    return `calc(${lines} * ${theme.typography[variant].fontSize} * ${theme.typography[variant].lineHeight})`;\n}\n\nfunction ellipsis(variant: ThemeStyle, theme: Theme) {\n    return createStyles({\n        root: {\n            position: 'relative',\n            '&:after': {\n                content: \"''\",\n                position: 'absolute',\n                bottom: 0,\n                right: 0,\n                width: '20%',\n                height: calcHeight(1, variant, theme),\n                backgroundImage: 'linear-gradient(to right, rgba(255, 255, 255, 0) , rgba(255, 255, 255, 1))',\n                zIndex: 10\n            },\n        }\n    })\n}\n\nconst overFlowHidden: CSSProperties = {\n    width: '100%',\n    overflow: 'hidden',\n    position: 'relative'\n};\n\nconst cardCommonStyles = (theme: Theme) => ({\n    buttons: {\n        ...overFlowHidden,\n    },\n    imageContain: {\n        backgroundSize: 'contain',\n        backgroundColor: theme.palette.primary.main\n    }\n});\n\nconst usePrimaryCardStyles = makeStyles((theme) => ({\n    ...cardCommonStyles(theme),\n    media: {\n        height: '550px',\n        ...overFlowHidden,\n    },\n    skeleton: {\n        height: '550px',\n        ...overFlowHidden,\n    },\n    title: {\n        height: calcHeight(1, 'body1', theme),\n        ...ellipsis('body1', theme).root,\n        ...overFlowHidden,\n    },\n    source: {\n        height: calcHeight(1, 'body2', theme),\n        ...overFlowHidden,\n    },\n    articleContent: {\n        height: calcHeight(2, 'body2', theme),\n        ...ellipsis('body2', theme).root,\n        ...overFlowHidden,\n    },\n    [theme.breakpoints.down(\"sm\")]: {\n        media: {\n            height: '200px',\n        },\n        skeleton: {\n            height: '200px',\n        },\n    }\n}));\n\n\n\nconst useSecondaryCardStyles = makeStyles((theme) => ({\n    ...cardCommonStyles(theme),\n    media: {\n        height: '200px',\n        ...overFlowHidden,\n    },\n    skeleton: {\n        height: '200px',\n        ...overFlowHidden,\n    },\n    title: {\n        height: calcHeight(2, 'body1', theme),\n        ...ellipsis('body1', theme).root,\n        ...overFlowHidden,\n    },\n    source: {\n        height: calcHeight(1, 'body2', theme),\n        ...overFlowHidden,\n    },\n    articleContent: {\n        height: calcHeight(3, 'body2', theme),\n        ...ellipsis('body2', theme).root,\n        ...overFlowHidden,\n    },\n    buttons: {\n        ...overFlowHidden,\n    },\n    imageContain: {\n        backgroundSize: 'contain',\n        backgroundColor: theme.palette.primary.main\n    },\n    [theme.breakpoints.down(\"sm\")]: {\n\n    }\n}));\n\ninterface ButtonsProps {\n    url: string,\n    className: string,\n    openCopyLinkSnackBar: () => void\n}\n\n\nfunction Buttons(props: ButtonsProps) {\n\n    function copyLinkHandler() {\n        copyToClipboard(props.url);\n        props.openCopyLinkSnackBar();\n    }\n\n    return (\n        <CardActions className={props.className}>\n            <Link href={props.url} target={'_blank'} rel=\"noopener\" underline={\"none\"}>\n                <Button size=\"small\" color=\"primary\">\n                    Learn more\n                </Button>\n            </Link>\n            <Button size=\"small\" color=\"primary\" onClick={copyLinkHandler}>Share</Button>\n        </CardActions>\n    )\n}\n\ninterface ArticleProps extends ArticleType {\n    id: number,\n    openCopyLinkSnackBar: () => void\n}\n\nfunction Article(props: ArticleProps) {\n    const ref = useRef(null);\n    const isVisible = useLazyLoad(ref);\n    const isTransitionAnimationNeeded = !useMediaQuery(useTheme().breakpoints.down('sm'));\n\n    const isPrimaryCard = props.id === 0 || props.id === 1;\n    //@ts-ignore\n    const cardPrimaryClasses = usePrimaryCardStyles();\n    //@ts-ignore\n    const cardSecondaryClasses = useSecondaryCardStyles();\n    const cardClasses = isPrimaryCard ? cardPrimaryClasses : cardSecondaryClasses;\n\n    const content = useMemo(\n        () => {\n            let image;\n            if (props.urlToImage) {\n                if (isVisible) {\n                    image = <CardMedia\n                        component=\"img\"\n                        alt={props.title}\n                        className={cardClasses.media}\n                        image={props.urlToImage}\n                        title={props.title}\n                    />\n                } else {\n                    image = <Skeleton variant={\"rect\"} className={cardClasses.skeleton} />\n                }\n            } else {\n                image = <CardMedia\n                    className={`${cardClasses.media} ${cardClasses.imageContain}`}\n                    image={process.env.PUBLIC_URL + '/xiaoxihome-news.jpg'}\n                    title={'No image'}\n                />\n            }\n\n            return (\n                <Grid\n                    item\n                    xs={12}\n                    md={isPrimaryCard ? 6 : 3}\n                    ref={ref}\n                >\n                    <Card raised>\n                        { image }\n\n                        <CardContent>\n                            <Typography gutterBottom variant=\"body1\" component=\"h2\" className={cardClasses.title}>\n                                <Box fontWeight={700}>\n                                    { props.title }\n                                </Box>\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" className={cardClasses.source}>\n                                <Box component={'span'} fontWeight={700}>\n                                    { props.source ? props.source + ' - ' : props.author ? props.author + ' - ' : '' }\n                                    { getPublishTime(new Date(props.publishedAt)) }\n                                </Box>\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" className={cardClasses.articleContent}>\n                                { props.content && props.content.replace(/\\[\\+[0-9]+\\schars\\]/ig, '') }\n                            </Typography>\n                        </CardContent>\n                        <Buttons url={props.url} className={cardClasses.buttons} openCopyLinkSnackBar={props.openCopyLinkSnackBar} />\n                    </Card>\n                </Grid>\n            )}, [props, isVisible]\n    );\n\n    return isTransitionAnimationNeeded ? (\n        <Zoom in={isVisible}>\n            { content }\n        </Zoom>\n    ) : content;\n}\n\ninterface LoadedArticlesProps {\n    articles: Array<ArticleType>,\n    openCopyLinkSnackBar: () => void\n}\n\nfunction LoadedArticles(props: LoadedArticlesProps) {\n    return (\n        <>\n            {\n                props.articles.map((article, i) => {\n                    return (\n                        <Article {...article} key={i} id={i} openCopyLinkSnackBar={props.openCopyLinkSnackBar}/>\n                    )\n                })\n            }\n        </>\n    )\n}\n\ninterface ArticlesProps extends Pick<State, 'articles'> {\n    openCopyLinkSnackBar: () => void\n}\n\nfunction Articles(props: ArticlesProps) {\n    const classes = useStyles();\n\n    // scroll to top after is category changed\n    useEffect(() => {\n        window.scrollTo(0, 0);\n    });\n\n    let content;\n    if (props.articles.isError) {\n        content = (\n            <div style={{\n                width: '100%'\n            }}>\n                error\n            </div>\n        )\n    } else if (props.articles.isFetching) {\n        content = (\n            <>\n                {\n                    Array.from(Array(10), (_, i) => {\n                        return (\n                            <Grid item key={i}>\n                                <Box width={500} height={300} maxWidth={'100%'}>\n                                    <Skeleton variant={\"rect\"} width={500} height={200}/>\n                                    <Skeleton width={500}/>\n                                    <Skeleton width={500}/>\n                                </Box>\n                            </Grid>\n                        )\n                    })\n                }\n            </>\n        )\n    } else {\n        content = <LoadedArticles articles={props.articles.articles} openCopyLinkSnackBar={props.openCopyLinkSnackBar}/>\n    }\n\n    return (\n        <Swipeable>\n            <Box className={classes.wrapper}>\n                <Grid container direction={\"row\"} alignContent={\"center\"} justify={\"center\"} spacing={2}>\n                    { content }\n                </Grid>\n            </Box>\n        </Swipeable>\n    )\n}\n\nexport {Article, Articles as default}\n","export default function getPublishTime(date: Date): string{\n    const timePast = Date.now() - date.getTime();\n    if (timePast < 0) {\n        return 'now'\n    }\n    const minutes = Math.floor(timePast / (60 * 1000));\n    if (minutes <= 59) {\n        return `${minutes} ${minutes === 1 ? 'minute' : 'minutes'} ago`\n    }\n    const hours = Math.floor(timePast / (60 * 60 * 1000));\n    if (hours <= 23) {\n        return `${hours} ${hours === 1 ? 'hour' : 'hours'} ago`\n    }\n    const days = Math.floor(timePast / (24 * 60 * 60 * 1000));\n    if (days <= 30) {\n        return `${days} ${days === 1 ? 'day' : 'days'} ago`\n    }\n    const months = Math.floor(timePast / (30 * 24 * 60 * 60 * 1000));\n    if (months <= 12) {\n        return `${months} ${months === 1 ? 'month' : 'months'} ago`\n    }\n    const years = Math.floor(timePast / (365 * 24 * 60 * 60 * 1000));\n    return `${years} ${years === 1 ? 'year' : 'years'} ago`\n}","import {openCopyLinkSnackBar} from \"../redux/actions/copy-link-snackbar\";\nimport {connect} from \"react-redux\";\nimport Articles from \"../components/articles/articles\";\nimport {Dispatch} from \"redux\";\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        openCopyLinkSnackBar: () => dispatch(openCopyLinkSnackBar())\n    }\n}\n\nconst ArticlesContainer = connect(\n    null,\n    mapDispatchToProps\n)(Articles);\n\nexport default ArticlesContainer;\n","import React from \"react\";\nimport {Avatar, Box, Chip, Grid, Link} from \"@material-ui/core\";\n\nfunction Attribution() {\n    return (\n        <Box m={2}>\n            <Grid container direction={'row'} spacing={2}>\n                <Grid item>\n                    <Link href={'https://www.xiaoxihome.com/'} target={'_blank'} rel=\"noopener\" underline={\"none\"}>\n                        <Chip\n                            avatar={<Avatar>X</Avatar>}\n                            label=\"🔧 with ❤️ by XiaoxiHome\"\n                            color=\"primary\"\n                            clickable\n                        />\n                    </Link>\n                </Grid>\n                <Grid item>\n                    <Link href={'https://newsapi.org/'} target={'_blank'} rel=\"noopener\" underline={\"none\"}>\n                        <Chip\n                            avatar={<Avatar>N</Avatar>}\n                            label=\"News data courtesy of NewsAPI.org\"\n                            color=\"secondary\"\n                            clickable\n                        />\n                    </Link>\n                </Grid>\n            </Grid>\n        </Box>\n    )\n}\n\nexport default Attribution;","import React from \"react\";\nimport {\n    createStyles,\n    IconButton,\n    Snackbar,\n    SnackbarContent,\n} from \"@material-ui/core\";\nimport Close from '@material-ui/icons/Close';\nimport {green} from '@material-ui/core/colors';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\nconst useStyles = makeStyles(() => createStyles({\n    successSnackBar: {\n        backgroundColor: green[600]\n    },\n}));\n\ninterface CopyLinkSnackbarProps {\n    isActive: boolean,\n    closeCopyLinkSnackBar: () => void\n}\n\nfunction CopyLinkSnackbar(props: CopyLinkSnackbarProps) {\n    const classes = useStyles();\n\n    function closeHandler() {\n        props.closeCopyLinkSnackBar()\n    }\n\n    return (\n        <Snackbar\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n            }}\n            open={props.isActive}\n            autoHideDuration={3000}\n            onClose={closeHandler}\n        >\n            <SnackbarContent\n                className={classes.successSnackBar}\n                message={\n                    <span id=\"client-snackbar\">\n                        Link copied to clipboard\n                    </span>\n                }\n                action={[\n                        <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={closeHandler}>\n                    <Close/>\n                    </IconButton>,\n            ]}\n            />\n    </Snackbar>\n    )\n}\n\nexport default CopyLinkSnackbar;","import {State} from \"../redux/state\";\nimport {closeCopyLinkSnackBar} from \"../redux/actions/copy-link-snackbar\";\nimport {connect} from \"react-redux\";\nimport CopyLinkSnackbar from \"../components/copy-link-snackbar\";\nimport {Dispatch} from \"redux\";\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        closeCopyLinkSnackBar: () => dispatch(closeCopyLinkSnackBar())\n    }\n}\n\nfunction mapStateToProps(state: State) {\n    return {\n        isActive: state.copyLinkSnackBar.isActive\n    }\n}\n\nconst CopyLinkSnackBarContainer = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(CopyLinkSnackbar);\n\nexport default CopyLinkSnackBarContainer;","import React, {useEffect, useState} from \"react\";\n\nexport enum AnalyticsPageStatus {\n    loading='loading',\n    loaded='loaded',\n    error='error'\n}\n\nexport interface SummaryStatisticsData {\n    totalDocuments: number,\n    earliestDocumentDate: string,\n    latestDocumentDate: string,\n    documentsCountByCategory: Array<{\n        count: number,\n        category: string\n    }>,\n    documentsCountByDay: {\n        count: number[],\n        time: number[]\n    },\n    wordCloud: Array<{\n        count: number,\n        word: string\n    }>,\n    documentsCountByDayAndCategory: {\n        documentCount: number[][],\n        series: string[],\n        category: string[]\n    }\n}\n\nconst useGetAnalytics = () => {\n    const [status, setStatus] = useState(AnalyticsPageStatus.loading);\n    const [summaryStatisticsData, setSummaryStatisticsData] = useState<SummaryStatisticsData | null>(null);\n\n    useEffect(() => {\n        fetch('https://www.xiaoxihome.com/api/news-analytics')\n            .then(res => res.json())\n            .then(json => {\n                if (json.status !== 'ok') {\n                    console.log(json);\n                    setStatus(AnalyticsPageStatus.error)\n                } else {\n                    setSummaryStatisticsData({\n                        totalDocuments: json.summaryStatistics.totalDocuments,\n                        earliestDocumentDate: json.summaryStatistics.earliestDocumentDate,\n                        latestDocumentDate: json.summaryStatistics.latestDocumentDate,\n                        documentsCountByCategory: json.summaryStatistics.documentsCountByCategory,\n                        documentsCountByDay: {\n                            time: json.summaryStatistics.series.map((_: string) => (new Date(_).getTime())),\n                            count: json.summaryStatistics.documentsCountByDay\n                        },\n                        wordCloud: json.summaryStatistics.wordCloud,\n                        documentsCountByDayAndCategory: {\n                            documentCount: json.summaryStatistics.documentsCountByDayAndCategory.documentCount,\n                            series: json.summaryStatistics.series,\n                            category: json.summaryStatistics.documentsCountByDayAndCategory.category\n                        }\n                    } as SummaryStatisticsData);\n                    setStatus(AnalyticsPageStatus.loaded)\n                }\n            })\n            .catch(e => {\n                console.log(e);\n                setStatus(AnalyticsPageStatus.error)\n            })\n    }, []);\n\n    return {status, summaryStatisticsData}\n};\n\nexport default useGetAnalytics","import React, {useEffect, useRef, useState} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\nconst easeInQuad = (t: number) => t*t;\n\nexport enum AnimationSlideInDirection {\n    left= 'left',\n    right='right'\n}\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'relative',\n        zIndex: 1,\n        width: '100%',\n    },\n    children: {\n        position: 'absolute',\n        zIndex: -1,\n        top: 0,\n        left: 0,\n        willChange: 'transform',\n        width: '100%'\n    },\n    placeholder: {\n        position: 'relative',\n        zIndex: -2\n    },\n}));\n\ninterface AnimationSlideInProps {\n    direction: AnimationSlideInDirection\n}\n\nconst AnimationSlideIn: React.FC<AnimationSlideInProps> = ({children, direction}) => {\n    const classes = useStyles();\n    const containerRef = useRef<HTMLDivElement>(null);\n    const childrenRef = useRef<HTMLDivElement>(null);\n    const placeholderRef = useRef<HTMLDivElement>(null);\n\n    const [dimension, setDimension] = useState({\n        width: `0px`,\n        height: `0px`\n    });\n    const [target, setTarget] = useState({\n        start: 0,\n        end: 0\n    });\n    const [translate, setTranslate] = useState({\n        xMax: 0,\n        x: 0,\n        y: 0\n    });\n\n    const scrollHandler = () => {\n        const isBefore = window.scrollY + window.innerHeight < target.start;\n        const isAfter = window.scrollY + window.innerHeight * 0.5 > target.end; // center of the element aligns center of the viewport\n        if (!isBefore && !isAfter) {\n            const percentage = (window.scrollY - target.start + window.innerHeight) / (target.end - target.start + 0.5 * window.innerHeight); // window.scrollY subtract isBefore and isAfter\n            setTranslate((prevTranslate) => ({\n                ...prevTranslate,\n                x: prevTranslate.xMax * easeInQuad(1 - percentage)\n            }))\n        } else if (isBefore) {\n            if (translate.x !== translate.xMax) {\n                setTranslate((prevTranslate) => ({\n                    ...prevTranslate,\n                    x: prevTranslate.xMax\n                }))\n            }\n        } else if (isAfter) {\n            if (translate.x !== 0) {\n                setTranslate((prevTranslate) => ({\n                    ...prevTranslate,\n                    x: 0\n                }))\n            }\n        }\n    };\n\n    useEffect(() => {\n        if (!childrenRef.current || !placeholderRef.current || dimension.width !== '0px') return;\n        setDimension({\n            width: `${childrenRef.current.getBoundingClientRect().width}px`,\n            height: `${childrenRef.current.getBoundingClientRect().height}px`\n        });\n    }, [dimension]);\n\n    useEffect(() => {\n        if (!containerRef.current || dimension.width === '0px' || target.start !== 0) return;\n        const rect = containerRef.current.getBoundingClientRect();\n        setTarget({\n            start: window.scrollY + rect.top,\n            end: window.scrollY + rect.top + rect.height * 0.5\n        });\n        const xMax = direction === AnimationSlideInDirection.left ? -(rect.left + rect.width) : rect.right + rect.width;\n        setTranslate({\n            xMax,\n            x: xMax,\n            y: 0\n        })\n    }, [dimension, target, translate]);\n\n    useEffect(() => {\n        document.addEventListener('scroll', scrollHandler);\n        return () => document.removeEventListener('scroll', scrollHandler);\n    }, [target, translate]);\n\n\n\n    return (\n        <div className={classes.root} ref={containerRef}>\n            <div className={classes.children} ref={childrenRef} style={{transform: `translate(${translate.x}px, ${translate.y}px)`}}>\n                { children }\n            </div>\n            <div className={classes.placeholder} ref={placeholderRef} style={{...dimension}}>\n\n            </div>\n        </div>\n    )\n};\n\nexport default AnimationSlideIn","import React, {useRef, useState} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n    }\n}));\n\ninterface SectionWrapperProps {\n\n}\n\nconst SectionWrapper: React.FC<SectionWrapperProps> = ({children}) => {\n    const classes = useStyles();\n    const containerRef = useRef<HTMLDivElement>(null);\n    // const isVisible = useLazyLoad(containerRef, 0.8);\n    const [fullHeight, setFullHeight] = useState(window.innerHeight - 100);\n\n    return (\n        <div className={classes.root} ref={containerRef} style={{minHeight: `${fullHeight}px`}}>\n            { children }\n        </div>\n    )\n};\n\nexport default SectionWrapper\n","import * as d3 from \"d3\";\n\nexport type PieChartData = ArcData[];\n\ntype ArcData = {\n    title: string,\n    value: number\n}\n\nclass PieChartD3 {\n\n    readonly getColor = (index: number) => {\n        // const colors = ['#003f5c', '#374c80', '#7a5195' ,'#bc5090' ,'#ef5675' ,'#ff764a' ,'#ffa600'];\n        const colors = ['#ffa600', '#ff764a', '#ef5675' ,'#bc5090' ,'#7a5195' ,'#374c80' ,'#003f5c'];\n        return colors[index > colors.length - 1 ? 0 : index]\n    };\n    hasAnimated = false;\n    id: string;\n    params: {\n        width: number,\n        height: number,\n        startAngle: number,\n        endAngle: number\n        rx: number,\n        ry: number,\n        h: number,\n        ir: number,\n    };\n    svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n    references: {\n        pie: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        innerSlice: d3.Selection<SVGPathElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n        topSlice: d3.Selection<SVGPathElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n        outerSlice: d3.Selection<SVGPathElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n        text: d3.Selection<SVGTextElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n        text1: d3.Selection<SVGTextElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n        text2: d3.Selection<SVGTextElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n    };\n    data: {\n        pieZero: d3.PieArcDatum<ArcData>[],\n        pie: d3.PieArcDatum<ArcData>[],\n        totalValue: number\n    };\n\n    constructor(id: string, data: PieChartData, width: number) {\n        this.id = id;\n        this.params = this.getParams(width);\n        this.svg = d3.select(`#${id}`).append(\"svg\");\n        this.data = {\n            pieZero: this.getPieData(data.map((_,i)=>({\n                value: i === 0 ? 100 : 0,\n                title: _.title\n            }))),\n            pie: this.getPieData(data),\n            totalValue: this.getPieData(data).reduce((a, b) => a + b.data.value, 0)\n        };\n        this.references = this.createReferences();\n    }\n\n    getParams(width: number) {\n        const height = width * 0.6;\n        return {\n            width,\n            height: height,\n            startAngle: Math.PI,\n            endAngle: Math.PI * 3,\n            rx: width / 2 * 0.8,\n            ry: height / 2 - 0.1 * height,\n            h: 0.1 * height,\n            ir: 0.4\n        }\n    };\n\n    getPieData(data: PieChartData) {\n        const _data =d3.pie<ArcData>()\n            .value((d) => d.value)\n            .sort((a, b) => - a.value + b.value)\n            .startAngle(this.params.startAngle)\n            .endAngle(this.params.endAngle)\n            (data);\n        return _data\n    }\n\n    createReferences() {\n        const pie = this.svg.append('g');\n\n        const innerSlice = pie\n            .selectAll().data(this.data.pie).enter().append(\"path\");\n\n        const topSlice = pie\n            .selectAll().data(this.data.pie).enter().append(\"path\");\n\n        const outerSlice = pie\n            .selectAll().data(this.data.pie).enter().append(\"path\");\n\n        const text = pie\n            .selectAll().data(this.data.pie).enter().append(\"text\");\n\n        const text1 = text.append('tspan');\n\n        const text2 = text.append('tspan');\n\n        return {\n            pie,\n            innerSlice,\n            topSlice,\n            outerSlice,\n            text,\n            text1,\n            text2\n        }\n    }\n\n    // @param x center x\n    // @param y center y\n    // @param rx radius x\n    // @param ry radius y\n    // @param h height x\n    // @param ir inner radius x\n    drawPie(x: number, y: number, rx: number, ry: number, h: number, ir: number) {\n        this.references.pie.attr(\"transform\", \"translate(\" + x + \",\" + y + \")\");\n\n        this.references.innerSlice\n            .style(\"fill\", (d) => d3.hsl(this.getColor(d.index)).darker().toString())\n            .attr(\"d\", (d) => this.pieInner(this.data.pieZero.filter(obj=>obj.index===d.index)[0], rx+0.5, ry+0.5, 0, ir));\n\n        this.references.topSlice\n            .style(\"fill\", (d) => this.getColor(d.index))\n            .attr(\"d\", (d) => this.pieTop(this.data.pieZero.filter(obj=>obj.index===d.index)[0], rx, ry, ir));\n\n        this.references.outerSlice\n            .style(\"fill\", (d) => d3.hsl(this.getColor(d.index)).darker().toString())\n            .attr(\"d\", (d) => this.pieOuter(this.data.pieZero.filter(obj=>obj.index===d.index)[0], rx-.5, ry-.5, 0));\n\n        this.references.text\n            .attr(\"x\",'0')\n            .attr(\"y\",'0')\n            .attr(\"text-anchor\", \"middle\")\n            .style('fill', 'white')\n            .style('opacity', 0);\n\n        this.references.text1\n            .attr(\"dy\",0)\n            .style(\"font-weight\", 700)\n            .text(d => d.data.title.toUpperCase());\n        this.references.text2.attr(\"dy\",'1.2em').text(d => ((d.data.value / this.data.totalValue) * 100).toFixed(2)+'%')\n    }\n\n    pieTransition(rx: number, ry: number, h: number, ir: number, initData: d3.PieArcDatum<ArcData>[], targetData: d3.PieArcDatum<ArcData>[]) {\n        const thisClass = this;\n        const duration = 2000;\n        const raiseDuration = 2000;\n\n        const iRaise = d3.interpolate(0, h);\n\n        function arcTweenInner(d: d3.PieArcDatum<ArcData>) {\n            return (t: number) => thisClass.pieInner(d, rx+0.5, ry+0.5, iRaise(t), ir);\n        }\n        function arcTweenTop(d: d3.PieArcDatum<ArcData>) {\n            const i = d3.interpolate(initData.filter(obj => obj.index === d.index)[0], targetData.filter(obj => obj.index === d.index)[0]);\n            return (t: number) => thisClass.pieTop(i(t), rx, ry, ir);\n        }\n        function arcTweenOuter(d: d3.PieArcDatum<ArcData>) {\n            return (t: number) => thisClass.pieOuter(d, rx-.5, ry-.5, iRaise(t));\n        }\n        function textTweenX(d: d3.PieArcDatum<ArcData>) {\n            const i = d3.interpolate(initData.filter(obj => obj.index === d.index)[0], targetData.filter(obj => obj.index === d.index)[0]);\n            return (t: number) => `${0.5*(1+ir)*rx*Math.cos(0.5*(i(t).startAngle+i(t).endAngle))}`;\n        }\n        function textTweenY(d: d3.PieArcDatum<ArcData>) {\n            const i = d3.interpolate(initData.filter(obj => obj.index === d.index)[0], targetData.filter(obj => obj.index === d.index)[0]);\n            return (t: number) => `${0.5*(1+ir)*ry*Math.sin(0.5*(i(t).startAngle+i(t).endAngle))}`;\n        }\n\n\n        this.references.innerSlice\n            .transition()\n            .duration(raiseDuration)\n            .delay(duration)\n            .attrTween('d', arcTweenInner);\n        this.references.topSlice\n            .transition()\n            .duration(duration)\n            .attrTween('d', arcTweenTop);\n        this.references.outerSlice\n            .transition()\n            .duration(raiseDuration)\n            .delay(duration)\n            .attrTween('d', arcTweenOuter);\n\n        this.references.text.style(\"opacity\", 0);\n        this.references.text\n            .transition()\n            .duration(duration)\n            .attrTween('x', textTweenX)\n            .attrTween('y', textTweenY)\n            .style(\"opacity\", 1);\n        this.references.text1.transition()\n            .duration(duration)\n            .attrTween('x', textTweenX);\n        this.references.text2.transition()\n            .duration(duration)\n            .attrTween('x', textTweenX);\n    }\n\n    pieTop(d: d3.PieArcDatum<ArcData>, rx: number, ry: number, ir: number){\n        if(d.endAngle - d.startAngle === 0 ) return \"M 0 0\";\n        const sx = rx*Math.cos(d.startAngle),\n            sy = ry*Math.sin(d.startAngle),\n            ex = rx*Math.cos(d.endAngle),\n            ey = ry*Math.sin(d.endAngle);\n\n        const ret =[];\n        ret.push(\"M\",sx,sy,\"A\",rx,ry,\"0\",(d.endAngle-d.startAngle > Math.PI? 1: 0),\"1\",ex,ey,\"L\",ir*ex,ir*ey);\n        ret.push(\"A\",ir*rx,ir*ry,\"0\",(d.endAngle-d.startAngle > Math.PI? 1: 0), \"0\",ir*sx,ir*sy,\"z\");\n        return ret.join(\" \");\n    }\n\n    pieOuter(d: d3.PieArcDatum<ArcData>, rx: number, ry: number, h: number){\n        const _startAngle = (d.startAngle < 2 * Math.PI ? 2 * Math.PI : d.startAngle);\n        const _endAngle = (d.endAngle < 2 *  Math.PI ? 2 * Math.PI : d.endAngle);\n\n        const sx = rx*Math.cos(_startAngle),\n            sy = ry*Math.sin(_startAngle),\n            ex = rx*Math.cos(_endAngle),\n            ey = ry*Math.sin(_endAngle);\n\n        const ret =[];\n        ret.push(\"M\",sx,h+sy,\"A\",rx,ry,\"0 0 1\",ex,h+ey,\"L\",ex,ey,\"A\",rx,ry,\"0 0 0\",sx,sy,\"z\");\n        return ret.join(\" \");\n    }\n\n    pieInner(d: d3.PieArcDatum<ArcData>, rx: number, ry: number, h: number, ir: number){\n        const startAngle = (d.startAngle < Math.PI ? Math.PI : d.startAngle);\n        const endAngle = (d.endAngle < Math.PI ? Math.PI : d.endAngle);\n\n        const sx = ir*rx*Math.cos(startAngle),\n            sy = ir*ry*Math.sin(startAngle),\n            ex = ir*rx*Math.cos(endAngle),\n            ey = ir*ry*Math.sin(endAngle);\n\n        const ret =[];\n        ret.push(\"M\",sx, sy,\"A\",ir*rx,ir*ry,\"0 0 1\",ex,ey, \"L\",ex,h+ey,\"A\",ir*rx, ir*ry,\"0 0 0\",sx,h+sy,\"z\");\n        return ret.join(\" \");\n    }\n\n    styleSvg() {\n        this.svg\n            .attr(\"width\", this.params.width)\n            .attr(\"height\", this.params.height);\n    }\n\n    animate() {\n        if (this.hasAnimated) return;\n        this.pieTransition(this.params.rx, this.params.ry, this.params.h, this.params.ir, this.data.pieZero, this.data.pie);\n        this.hasAnimated = true;\n    }\n\n    main() {\n        this.styleSvg();\n        this.drawPie(this.params.width / 2, this.params.height / 2, this.params.rx, this.params.ry, this.params.h, this.params.ir);\n    }\n}\n\nexport default PieChartD3","import {Theme} from \"@material-ui/core\";\nimport {CSSProperties} from \"react\";\n\nexport const bigNumber = (theme: Theme): CSSProperties => ({\n    width: '100%',\n    fontFamily: 'Open Sans,sans-serif',\n    fontSize: '6rem',\n    fontWeight: 800,\n    margin: 0,\n    lineHeight: 1,\n    [theme.breakpoints.down('sm')]: {\n        fontSize: '3rem',\n    }\n});\n\nexport const header = (theme: Theme): CSSProperties => ({\n    textAlign: 'start',\n    width: '70%',\n    fontFamily: 'Open Sans,sans-serif',\n    textTransform: 'uppercase',\n    fontSize: '2rem',\n    fontWeight: 800,\n    margin: theme.spacing(0, 0),\n    lineHeight: 1,\n    [theme.breakpoints.down('sm')]: {\n        fontSize: '1rem',\n    }\n});\n\nexport const content = (theme: Theme): CSSProperties => ({\n    color: 'grey',\n    textAlign: 'start',\n    width: '70%',\n    fontFamily: 'Open Sans,sans-serif',\n    fontSize: '1rem',\n    fontWeight: 800,\n    margin: theme.spacing(2, 0),\n    [theme.breakpoints.down('sm')]: {\n        fontSize: '0.875rem',\n    }\n});\n\nexport const bigNumberTitle = (theme: Theme): CSSProperties => ({\n    width: '100%',\n    fontFamily: 'Open Sans,sans-serif',\n    fontSize: '1rem',\n    fontWeight: 800,\n    margin: 0,\n    [theme.breakpoints.down('sm')]: {\n        fontSize: '0.875rem',\n    }\n});","import React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {header} from \"../styles/analytics-styles\";\n\nconst useStyles = makeStyles(theme => ({\n    title: {\n        ...header(theme)\n    }\n}));\n\ninterface TitleProps {\n    value: string | string[]\n}\n\nconst Title: React.FC<TitleProps> = ({value}) => {\n    const classes = useStyles();\n\n    if (Array.isArray(value)) {\n        return (\n            <>\n                {\n                    value.map((str, i) =>\n                        <h2 className={classes.title} key={i}>\n                            { str }\n                        </h2>\n                    )\n                }\n            </>\n        )\n    } else {\n        return (\n            <>\n                {\n                    value.split(' ').map((str, i) =>\n                        <h2 className={classes.title} key={i}>\n                            { str }\n                        </h2>\n                    )\n                }\n            </>\n        )\n    }\n};\n\nexport default Title","import React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {content} from \"../styles/analytics-styles\";\n\nconst useStyles = makeStyles(theme => ({\n    content: {\n        ...content(theme)\n    }\n}));\n\ninterface ContentProps {\n    value: string\n}\n\nconst Content: React.FC<ContentProps> = ({value}) => {\n    const classes = useStyles();\n\n    return (\n        <p className={classes.content}>\n            { value }\n        </p>\n    )\n};\n\nexport default Content","import React, {useEffect, useRef, useState} from \"react\";\nimport PieChartD3, {PieChartData} from \"../../d3-charts/pie-chart-d3\";\nimport useLazyLoad from \"../../tools/use-lazy-load\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Title from \"./utilitis/title\";\nimport Content from \"./utilitis/content\";\n\nconst useStyles = makeStyles(theme => ({\n\n}));\n\ninterface DocumentsByCategoryBarChartProps {\n    isLoaded: boolean,\n    data: PieChartData,\n    animate: boolean\n    width?: number\n}\n\nconst id = 'analytics-documents-count-by-category-pie-chart';\n\nconst DocumentsByCategoryPieChart: React.FC<DocumentsByCategoryBarChartProps> = ({isLoaded, data, animate, width}) => {\n    const ref = useRef<HTMLDivElement>(null);\n    const [pieChart, setPieChart] = useState<null | PieChartD3>(null);\n\n    useEffect(() => {\n        if (isLoaded && data && width && pieChart === null) {\n            const barChart = new PieChartD3(\n                id,\n                data,\n                width\n            );\n            barChart.main();\n            setPieChart(barChart);\n        }\n    }, [isLoaded, data, width]);\n\n    useEffect(() => {\n        if (pieChart && animate) {\n            pieChart.animate();\n        }\n    }, [pieChart, animate]);\n\n    return (\n        <>\n            <Title value={'News archived by category'} />\n            <Content value={`Overall I'd say the news are pretty well balanced.`}/>\n            <div id={id} ref={ref}/>\n        </>\n    )\n};\n\nexport default DocumentsByCategoryPieChart","import * as d3 from \"d3\";\n\nexport interface HeatMapData {\n    count: number[],\n    time: number[]\n}\n\nclass HeatMapD3 {\n\n    readonly getColor = (index: number) => {\n        const colors = ['#FFF3E0', '#FFE0B2', '#FFB74D', '#FB8C00', '#E65100'];\n        return colors[index > colors.length - 1 ? 0 : index]\n    };\n    readonly dayOfWeekStrings = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    readonly monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    readonly targetRectSize = 70;\n    readonly rectPadding = 0.1;\n    id: string;\n    params: {\n        width: number,\n        height: number,\n        m: {t: number, r: number, b: number, l: number},\n        chart: {\n            width: number,\n            height: number,\n            x: number,\n            y: number\n        };\n    };\n    svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n    references: {\n        xAxis: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        yAxis: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        rects: d3.Selection<SVGRectElement, {count: number, time: number}, SVGGElement, any>,\n        tooltipBackground: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n        tooltip: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n        tooltipText1: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n        tooltipText2: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n    };\n    data: {\n        x: number[], // # of week\n        y: number[], // # of day of week\n        xScaleDomain: string[],\n        xScaleGuide: number[],\n        yScaleDomain: string[],\n        data: Array<{\n            count: number,\n            time: number\n        }>,\n        maxCount: number\n    };\n    scales: {\n        x: d3.ScaleBand<string>,\n        y: d3.ScaleBand<string>,\n        color: d3.ScaleQuantize<number>\n    };\n    axis: {\n        x: d3.Axis<string>,\n        y: d3.Axis<string>,\n    };\n\n    constructor(id: string, data: HeatMapData, width: number) {\n        this.id = id;\n        this.data = this.getData(data);\n        this.params = this.getParams(width);\n        this.svg = d3.select(`#${id}`).append(\"svg\");\n        this.references = this.createReferences();\n        this.scales = this.getScales();\n        this.axis = this.getAxis();\n    }\n\n    getParams(width: number) {\n        const m = {t: 50, r: 20, b: 10, l: 50};\n\n        const xBands = this.data.xScaleDomain.length;\n        const maxRectSize = Math.floor((width - m.l - m.r) / xBands);\n        const rectSize = Math.min(maxRectSize, this.targetRectSize);\n\n        const chart = {\n            width: this.data.xScaleDomain.length * rectSize,\n            height: 7 * rectSize,\n            x: m.l,\n            y: m.t\n        };\n        const _width = chart.width + m.l + m.r;\n        const height = chart.height + m.t + m.b;\n\n        return {\n            width: _width,\n            height,\n            m,\n            chart\n        }\n    };\n\n    getScales() {\n        return {\n            x: d3.scaleBand()\n                .domain(this.data.xScaleDomain)\n                .range([0, this.params.chart.width])\n                .padding(this.rectPadding),\n            y: d3.scaleBand()\n                .domain(this.data.yScaleDomain)\n                .range([0, this.params.chart.height])\n                .padding(this.rectPadding),\n            color: d3.scaleQuantize()\n                .domain([0, this.data.maxCount])\n                .range([0, 1, 2, 3, 4])\n        }\n    }\n\n    getAxis() {\n        return {\n            x: d3.axisTop(this.scales.x)\n                .tickFormat((d, i) => {\n                    if (i === 0) {\n                        return this.monthStrings[(new Date(this.data.xScaleGuide[i]).getUTCMonth())]\n                    } else {\n                        const thisOne = this.monthStrings[(new Date(this.data.xScaleGuide[i]).getUTCMonth())];\n                        const lastOne = this.monthStrings[(new Date(this.data.xScaleGuide[i-1]).getUTCMonth())];\n                        return thisOne === lastOne ? '' : thisOne\n                    }\n                })\n                .tickSize(0)\n                .tickPadding(5),\n            y: d3.axisLeft(this.scales.y)\n                .tickFormat((d) => this.dayOfWeekStrings[parseInt(d)])\n                .tickValues(['1', '3', '5'])\n                .tickSize(0)\n                .tickPadding(5)\n        }\n    }\n\n    getData(data: HeatMapData) {\n        // compensate the data array with empty data first, making the first day of the data array is Sunday.\n        const _data = data.time.map((_, i) => ({\n            count: data.count[i],\n            time: _\n        }));\n        const aDay = 1000 * 60 * 60 * 24;\n        const firstActualData = new Date(_data[0].time);\n        let compensation = firstActualData.getUTCDay();\n        let time = _data[0].time;\n        while (compensation > 0) {\n            compensation--;\n            time -= aDay\n            _data.unshift({\n                count: 0,\n                time\n            });\n        }\n        //\n        const getY = (time: number[]) => {\n            // day of week\n            return time.map(_ => (new Date(_)).getUTCDay())\n        };\n\n        const getX = (time: number[]) => {\n            return time.map((_, i) => Math.floor(i / 7))\n        };\n\n        const timeArray = _data.map(_=>_.time);\n        const computedX = getX(timeArray);\n        const xScaleDomain = [];\n        const xScaleGuide = [];\n        for (let i=0; i<=computedX[computedX.length - 1]; i++) {\n            xScaleDomain.push(i.toString());\n            xScaleGuide.push(_data[i*7].time);\n        }\n        //\n        const computedY = getY(timeArray);\n        const yScaleDomain = [];\n        for (let i=0; i<7; i++) {\n            yScaleDomain.push(i.toString())\n        }\n        //\n        const maxCount = Math.max.apply(Math, _data.map(_=>_.count));\n        return {\n            x: computedX,\n            y: computedY,\n            xScaleDomain,\n            xScaleGuide,\n            yScaleDomain,\n            data: _data,\n            maxCount\n        }\n    }\n\n    createReferences() {\n        const xAxis = this.svg.append('g');\n        const yAxis = this.svg.append('g');\n        const rects = this.svg.append('g')\n                .selectAll('rect').data(this.data.data)\n                .enter().append('rect');\n        // tooltips has to be here to be rendered on top\n        const tooltipGroup = this.svg.append('g');\n        const tooltipBackground = tooltipGroup.append('rect');\n        const tooltip = tooltipGroup.append('text');\n\n        return {\n            xAxis,\n            yAxis,\n            rects,\n            tooltipBackground,\n            tooltip,\n            tooltipText1: tooltip.append('tspan'),\n            tooltipText2: tooltip.append('tspan'),\n        }\n    }\n\n    styleSvg() {\n        this.svg\n            .attr(\"width\", this.params.width)\n            .attr(\"height\", this.params.height);\n    }\n\n    styleAxisX() {\n        this.axis.x(this.references.xAxis);\n\n        this.references.xAxis.selectAll('.domain').remove();\n\n        this.references.xAxis\n            .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n            .style('font-size', '0.875rem')\n            .style('font-weight', '700');\n\n        this.references.xAxis.selectAll('text')\n            .style('fill', 'grey');\n\n    }\n\n    styleAxisY() {\n        this.axis.y(this.references.yAxis);\n\n        this.references.yAxis.selectAll('.domain').remove();\n\n        this.references.yAxis\n            .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n            .style('font-size', '0.875rem')\n            .style('font-weight', '700');\n\n        this.references.yAxis.selectAll('text')\n            .style('fill', 'grey');\n            // .attr('text-anchor', 'start')\n    }\n\n    styleRects() {\n        this.references.rects\n            .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n            .attr('width', this.scales.x.bandwidth())\n            .attr('height', this.scales.y.bandwidth())\n            .attr('x', (d, i) => this.scales.x(this.data.x[i].toString()) || 0)\n            .attr('y', (d, i) => this.scales.y(this.data.y[i].toString()) || 0);\n    }\n\n    styleTooltip() {\n        this.references.tooltip\n            .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n            .attr('text-anchor', 'middle')\n            .attr('alignment-baseline', 'middle');\n\n        this.references.tooltipText1\n            .style('font-weight', 700)\n            .style('fill', 'white');\n\n        this.references.tooltipText2\n            .style('fill', 'white');\n\n        this.references.tooltipBackground\n            .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n            .style('fill', '#000')\n            .style('opacity', 0.8)\n            .attr('rx', '5')\n            .attr('ry', '5');\n    }\n\n    addMouseEventToRects() {\n        const thisClass = this;\n        // tooltip padding\n        const px = 1.2;\n        const py = 2.5;\n\n        this.references.rects\n            .on('mouseover', function(this: SVGRectElement, d) {\n                const x = parseInt(this.getAttribute(\"x\") || '0');\n                const y = parseInt(this.getAttribute(\"y\") || '0');\n                const width = parseInt(this.getAttribute(\"width\") || '0');\n                const height = parseInt(this.getAttribute(\"height\") || '0');\n\n                // append texts to tspans first\n                thisClass.references.tooltipText1.text(`${d.count} news archived on `);\n\n                const date = new Date(d.time);\n                thisClass.references.tooltipText2.text(`${thisClass.monthStrings[date.getUTCMonth()]} ${date.getUTCDate()}, ${date.getUTCFullYear()}`)\n\n                // get dimension of text\n                // tooltip has text-anchor: middle\n                const bBox = thisClass.references.tooltip.node()?.getBBox();\n                const textWidth = bBox?.width || 0;\n                const textHeight = bBox?.height || 0;\n                const tooltipWidth = textWidth * px;\n                const tooltipHeight = textHeight * py;\n                let toolTipX = x + 0.5 * width;\n                let toolTipY = y - 0.5 * tooltipHeight;\n                const borderX0 = -thisClass.params.m.l;\n                const borderX1 = thisClass.params.width - thisClass.params.m.l;\n                const borderY0 = -thisClass.params.m.t;\n                const borderY1 = thisClass.params.height - thisClass.params.m.t;\n                // handle if x of tooltip is out of border\n                if (toolTipX - 0.5 * tooltipWidth < borderX0) {\n                    toolTipX = borderX0 + 0.5 * tooltipWidth\n                } else if (toolTipX + 0.5 * tooltipWidth > borderX1) {\n                    toolTipX = borderX1 - 0.5 * tooltipWidth;\n                }\n                // handle if y of tooltip is out of border\n                if (toolTipY - tooltipHeight < borderY0) {\n                    toolTipY = borderY0 + tooltipHeight\n                } else if (toolTipY + tooltipHeight > borderY1) {\n                    toolTipY = borderY1 - 0.5 * tooltipHeight;\n                }\n                thisClass.references.tooltip\n                    .attr(\"x\", toolTipX)\n                    .attr(\"y\", toolTipY);\n\n                // move tooltipBackground\n                thisClass.references.tooltipBackground\n                    .attr(\"x\", toolTipX - 0.5 * tooltipWidth)\n                    .attr(\"y\", toolTipY - 0.4 * textHeight - 0.5 * tooltipHeight)\n                    .attr(\"width\", tooltipWidth)\n                    .attr(\"height\", tooltipHeight);\n            })\n            .on('mouseleave', function(this: SVGRectElement, d){\n                thisClass.references.tooltip\n                    .attr(\"x\", -1000)\n                    .attr(\"y\", -1000);\n                thisClass.references.tooltipBackground\n                    .attr(\"x\", -1000)\n                    .attr(\"y\", -1000);\n            })\n    }\n\n    prepareForAnimation() {\n        this.references.rects\n            .style('fill', this.getColor(3))\n    }\n\n    animate() {\n        this.references.rects.transition()\n            .style('fill', \"rgba(255, 255, 255, 0)\")\n            .duration(500);\n\n        this.references.rects.transition()\n            .style('fill', (d) => this.getColor(this.scales.color(d.count)))\n            .delay((d) => 500 + this.scales.color(d.count) * 1000)\n            .duration(800)\n    }\n\n    main() {\n        this.styleSvg();\n        this.styleAxisX();\n        this.styleAxisY();\n        this.styleRects();\n        this.styleTooltip();\n        this.addMouseEventToRects();\n        this.prepareForAnimation();\n    }\n}\n\nexport default HeatMapD3\n","import React, {useEffect, useRef, useState} from \"react\";\nimport useLazyLoad from \"../../tools/use-lazy-load\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport HeatMapD3, {HeatMapData} from \"../../d3-charts/heat-map-d3\";\nimport Title from \"./utilitis/title\";\nimport Content from \"./utilitis/content\";\n\nconst useStyles = makeStyles(theme => ({\n\n}));\n\ninterface DocumentsHeatMapProps {\n    isLoaded: Boolean,\n    data: HeatMapData,\n    width: number\n}\n\nconst DocumentsHeatMap: React.FC<DocumentsHeatMapProps> = ({isLoaded, data, width}) => {\n    const ref = useRef<HTMLDivElement>(null);\n    const isVisible = useLazyLoad(ref, 0.5);\n    const [heatMap, setHeatMap] = useState<null | HeatMapD3>(null);\n\n    useEffect(() => {\n        if (isLoaded && data && heatMap === null) {\n            const heatMap = new HeatMapD3(\n                'analytics-documents-heat-map',\n                data,\n                width\n            );\n            heatMap.main();\n            setHeatMap(heatMap);\n        }\n    }, [isLoaded, data]);\n\n    useEffect(() => {\n        if (heatMap && isVisible) {\n            heatMap.animate();\n        }\n    }, [heatMap, isVisible]);\n\n    return (\n        <>\n            <Title value={'News archived each day'} />\n            <Content value={`Glad to see that people enjoyed their weekends.`}/>\n            <div id='analytics-documents-heat-map' ref={ref}/>\n        </>\n    )\n};\n\nexport default DocumentsHeatMap","import React, {useMemo} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {bigNumber, bigNumberTitle} from \"./styles/analytics-styles\";\nimport { useSpring, animated, config, SpringValue } from 'react-spring';\n\nconst monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#F2F2F2'\n  },\n  section: {\n    margin: theme.spacing(5, 0),\n    [theme.breakpoints.down('sm')]: {\n      margin: theme.spacing(2, 0)\n    }\n  },\n  title: {\n    ...bigNumberTitle(theme)\n  },\n  number: {\n    ...bigNumber(theme)\n  }\n}));\n\nconst useCountUpAnimation = (totalDocuments: number, earliestDocumentDate: string, latestDocumentDate: string) => {\n  const earliestMs = useMemo(() => new Date(earliestDocumentDate).getTime(), [earliestDocumentDate]);\n  const latestMs = useMemo(() => new Date(latestDocumentDate).getTime(), [latestDocumentDate]);\n\n  const commonProps = {\n    delay: 200,\n    config: config.molasses,\n  }\n  const { total } = useSpring({\n    from: { total: 0 },\n    total: totalDocuments,\n    ...commonProps\n  })\n  const { earliest } = useSpring({\n    from: { earliest: 0 },\n    earliest: earliestMs,\n    ...commonProps\n  })\n  const { latest } = useSpring({\n    from: { latest: 0 },\n    latest: latestMs,\n    ...commonProps\n  });\n\n  return {\n    total,\n    earliest,\n    latest\n  }\n}\n\ninterface DocumentsTextSummaryProps {\n  totalDocuments: number,\n  earliestDocumentDate: string,\n  latestDocumentDate: string\n}\n\nconst DocumentsTextSummary = React.forwardRef<HTMLDivElement, DocumentsTextSummaryProps>(({totalDocuments, earliestDocumentDate, latestDocumentDate}, forwardedRef) => {\n  const classes = useStyles();\n  const fullHeight = useMemo(() => window.innerHeight - 100, []);\n  const {\n    total,\n    earliest,\n    latest\n  } = useCountUpAnimation(totalDocuments, earliestDocumentDate, latestDocumentDate);\n\n  const title = (value: string) => (\n    <h2 className={classes.title}>{value}</h2>\n  );\n  const date = (number: SpringValue<number>) => {\n    return (\n      <animated.p className={classes.number}>{number.to(n => {\n        const dateObj = new Date(n);\n        return `${dateObj.getUTCDate()} ${monthStrings[dateObj.getUTCMonth()]}, ${dateObj.getUTCFullYear()}`\n      })}</animated.p>\n    )\n  };\n\n  return (\n    <>\n      <div className={classes.root} style={{minHeight: `${fullHeight}px`}}>\n        <div className={classes.section}>\n          { title('Total news articles archived') }\n          <animated.p className={classes.number}>{total.to(n => Math.round(n))}</animated.p>\n        </div>\n        <div className={classes.section}>\n          { title('First news article archived') }\n          { date(earliest) }\n        </div>\n        <div className={classes.section}>\n          { title('Most recent news article archived') }\n          { date(latest) }\n        </div>\n        <div ref={forwardedRef}> </div>\n      </div>\n    </>\n  )\n});\n\nexport default DocumentsTextSummary\n","import {useState, CSSProperties, useEffect, RefObject} from \"react\";\nimport useDebounce from \"./use-debounce\";\n\n\nenum Style {\n    FIXED = 'FIXED',\n    RELATIVE = 'RELATIVE'\n}\n\nconst getStyle = (styleName: Style) => {\n    const style = {\n        FIXED: {\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            width: \"100%\"\n        } as CSSProperties,\n        RELATIVE: {\n            position: \"relative\",\n            width: \"100%\"\n        } as CSSProperties,\n    };\n\n    return {...style[styleName]};\n};\n\n// set sticky when scroll passed ref element's bottom\nfunction useSticky(anchorRef: RefObject<HTMLElement>) {\n    const [style, setStyle] = useState(Style.RELATIVE);\n    const shouldBeExecuted = useDebounce(10);\n\n    function scrollHandler() {\n        const scrolled = window.scrollY;\n        if (scrolled === 0 && style !== Style.RELATIVE) {\n            // don't debounce when fast scrolling to top\n            setStyle(Style.RELATIVE);\n            return;\n        }\n\n        if (!anchorRef.current) return;\n        const fixedStartHeight = anchorRef.current.offsetTop + anchorRef.current.offsetHeight;\n\n        if (!shouldBeExecuted()) return;\n        if (scrolled >= fixedStartHeight && style !== Style.FIXED) {\n            setStyle(Style.FIXED);\n        } else if (scrolled < fixedStartHeight && style !== Style.RELATIVE) {\n            setStyle(Style.RELATIVE);\n        }\n    }\n\n    useEffect(() => {\n        document.addEventListener('scroll', scrollHandler);\n\n        return () => {\n            document.removeEventListener('scroll', scrollHandler);\n        }\n    }, [style, anchorRef]);\n\n    return {\n        style: getStyle(style),\n        isFixed: style === Style.FIXED\n    };\n}\n\nexport default useSticky;","import * as d3 from \"d3\";\nimport d3Cloud from \"d3-cloud\";\n\nexport type WordCloudData = Array<{\n    count: number,\n    word: string\n}>\n\nclass WordCloudD3 {\n    colors = ['#003f5c', '#374c80', '#7a5195' ,'#bc5090' ,'#ef5675' ,'#ff764a' ,'#ffa600'];\n    id: string;\n    data: {\n        data: WordCloudData,\n        words: string[],\n        counts: number[],\n        maxCount: number\n    };\n    params: {\n        width: number,\n        height: number\n    };\n    scale: d3.ScaleLinear<number, number>;\n\n    constructor(data: WordCloudData, width: number, id: string) {\n        this.id = id;\n        this.data = this.getData(data);\n        this.params = {\n            width,\n            height: width * 0.6\n        };\n        this.scale = this.getScale();\n        this.styleSvg = this.styleSvg.bind(this);\n    }\n\n    getData(data: WordCloudData) {\n        const counts = data.map(obj => obj.count);\n        return {\n            data,\n            words: data.map(obj => obj.word),\n            counts,\n            maxCount: Math.max.apply(Math, counts)\n        }\n    }\n\n    getScale() {\n        return d3.scaleLinear()\n            .domain([0, this.data.maxCount])\n            .range([10, this.params.width >= 1000 ? 100 : this.params.width >= 800 ? 70 : 36]);\n    }\n\n    draw() {\n        d3Cloud<{\n            text: string,\n            size: number\n        }>().size([this.params.width, this.params.height])\n            .timeInterval(20)\n            .words(this.data.data.map((d) => ({\n                text: d.word,\n                size: this.scale(d.count)\n            })))\n            .fontSize((d: any) => d.size)\n            .rotate(function() { return ~~(Math.random() * 2) * 90; })\n            .font(\"Anton\")\n            .on(\"end\", this.styleSvg)\n            .start();\n    }\n\n    styleSvg(words: any) {\n        d3.select(`#${this.id}`).append(\"svg\")\n            .attr(\"width\", this.params.width)\n            .attr(\"height\", this.params.height)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + [this.params.width >> 1, this.params.height >> 1] + \")\")\n            .selectAll(\"text\")\n            .data(words)\n            .enter().append(\"text\")\n            .style(\"font-size\", (d: any) => { return d.size + \"px\"})\n            .style(\"font-family\", \"Anton\")\n            .style(\"fill\", () => this.colors[Math.floor(Math.random() * this.colors.length)])\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"transform\", function(d: any) {\n                return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\";\n            })\n            .text(function(d: any) { return d.text; });\n    }\n\n    main() {\n        this.draw();\n    }\n}\n\nexport default WordCloudD3","import React, {useEffect, useRef, useState} from \"react\";\nimport useLazyLoad from \"../../tools/use-lazy-load\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport HeatMapD3, {HeatMapData} from \"../../d3-charts/heat-map-d3\";\nimport Title from \"./utilitis/title\";\nimport Content from \"./utilitis/content\";\nimport WordCloudD3, {WordCloudData} from \"../../d3-charts/word-cloud-d3\";\n\nconst useStyles = makeStyles(theme => ({\n\n}));\n\ninterface WordCloudProps {\n    isLoaded: Boolean,\n    data: WordCloudData,\n    width?: number\n}\n\nconst WordCloud: React.FC<WordCloudProps> = ({isLoaded, data, width}) => {\n    const ref = useRef<HTMLDivElement>(null);\n    const isVisible = useLazyLoad(ref, 0.5);\n    const [wordCloud, setWordCloud] = useState<null | WordCloudD3>(null);\n\n    useEffect(() => {\n        if (isLoaded && data && width && wordCloud === null) {\n            const wordCloud = new WordCloudD3(\n                data,\n                width,\n                'analytics-documents-word-cloud',\n            );\n            wordCloud.main();\n            setWordCloud(wordCloud);\n        }\n    }, [isLoaded, data, width]);\n\n    // useEffect(() => {\n    //     if (heatMap && isVisible) {\n    //         heatMap.animate();\n    //     }\n    // }, [heatMap, isVisible]);\n\n    return (\n        <>\n            <Title value={'Word it out'} />\n            <Content value={`The power of words.`}/>\n            <div id='analytics-documents-word-cloud' ref={ref}/>\n        </>\n    )\n};\n\nexport default WordCloud","import React, {CSSProperties, useEffect, useRef, useState} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'relative',\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        // backgroundColor: 'rgba(0,255,0,0.5)'\n    },\n    fixedWrapper: {\n        position: 'relative',\n        overflow: 'hidden',\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        willChange: 'transform',\n        // backgroundColor: 'rgba(255,0,0,0.5)'\n    },\n    children: {\n        width: '100%',\n        position: 'absolute',\n        minHeight: 800,\n        willChange: 'transform'\n    },\n    childrenSize: {\n        width: '100%'\n    },\n    placeholder: {\n        position: 'relative',\n    },\n}));\n\ninterface AnimationFixedProps {\n\n}\n\nconst AnimationFixed: React.FC<AnimationFixedProps> = ({children}) => {\n    const classes = useStyles();\n    const containerRef = useRef<HTMLDivElement>(null);\n    const childrenRef = useRef<HTMLDivElement>(null);\n    const placeholderRef = useRef<HTMLDivElement>(null);\n    const fixedWrapperRef = useRef<HTMLDivElement>(null);\n\n    const [dimension, setDimension] = useState({\n        isSet: false,\n        width: '0',\n        height: '0',\n        left: '0'\n    });\n    const [target, setTarget] = useState({\n        isSet: false,\n        start: 0,\n        end: 0\n    });\n    const [isFrozen, setIsFrozen] = useState(false);\n\n    const scrollHandler = () => {\n        if (!fixedWrapperRef.current || !placeholderRef.current || !childrenRef.current) return;\n\n        const isBefore = window.scrollY + window.innerHeight < target.start;\n        const isAfter = window.scrollY > target.end;\n        if (!isBefore && !isAfter) {\n            // const percentage = (window.scrollY - target.start + window.innerHeight) / (target.end - target.start + window.innerHeight); // window.scrollY subtract isBefore and isAfter\n            // childrenRef.current.style.transform = `translateY(${-(0.5 - percentage) * (window.innerHeight - 110)}px)`;\n            const offset = placeholderRef.current.getBoundingClientRect().top;\n            childrenRef.current.style.top = `${offset}px`;\n            fixedWrapperRef.current.style.top = `${offset}px`;\n            if (isFrozen) {\n                setIsFrozen(false);\n            }\n        } else if (isBefore) {\n            if (!isFrozen) return;\n            fixedWrapperRef.current.style.top = `${window.scrollY + placeholderRef.current.getBoundingClientRect().top}px`;\n            setIsFrozen(true);\n        } else if (isAfter) {\n            if (!isFrozen) return;\n            fixedWrapperRef.current.style.top = `${window.scrollY + placeholderRef.current.getBoundingClientRect().bottom}px`;\n            setIsFrozen(true);\n        }\n    };\n\n    useEffect(() => {\n        // use the children dimension to set placeholder's dimension\n        if (!childrenRef.current || dimension.isSet) return;\n        setDimension({\n            isSet: true,\n            width: `${childrenRef.current.getBoundingClientRect().width}px`,\n            height: `${childrenRef.current.getBoundingClientRect().height}px`,\n            left: `${childrenRef.current.getBoundingClientRect().left}px`\n        });\n        scrollHandler();\n    }, [dimension]);\n\n    useEffect(() => {\n        // wait until dimension is set\n        // use placeholder's position to set scrolling targets\n        if (!placeholderRef.current || !dimension.isSet || target.isSet) return;\n        const rect = placeholderRef.current.getBoundingClientRect();\n        setTarget({\n            isSet: true,\n            start: window.scrollY + rect.top,\n            end: window.scrollY + rect.top + rect.height\n        });\n    }, [dimension, target]);\n\n    useEffect(() => {\n        document.addEventListener('scroll', scrollHandler);\n        return () => document.removeEventListener('scroll', scrollHandler);\n    }, [target, isFrozen]);\n\n    const fixedWrapperStyle: CSSProperties = {\n        left: dimension.left,\n        height: dimension.height,\n        width: dimension.width,\n        position: 'fixed',\n    };\n\n    return (\n        <div className={classes.root} ref={containerRef}>\n            <div className={classes.fixedWrapper} ref={fixedWrapperRef} style={dimension.isSet ? fixedWrapperStyle : {}}>\n                <div className={classes.children} ref={childrenRef}>\n                    { children }\n                </div>\n            </div>\n            <div className={classes.placeholder} ref={placeholderRef} style={{width: dimension.width, height: dimension.height}}>\n\n            </div>\n        </div>\n    )\n\n};\n\nexport default AnimationFixed","import * as d3 from \"d3\";\n\nconst getAccumulativeSum = (array: number[]) => {\n    // TODO O(n^2)\n    const result: number[] = [];\n    const sumHash: {[key: string]: number} = {};\n    array.forEach((num, index, arr) => {\n        let i = index - 1;\n        let sum = 0;\n        while (i >= 0) {\n            if (sumHash[i] !== undefined) {\n                sum += sumHash[i];\n                break\n            } else {\n                sum += arr[i];\n                i--\n            }\n        }\n        sumHash[index - 1] = sum;\n        result.push(sum)\n    });\n\n    return result\n};\n\nexport interface StackedLineChartD3Data {\n    quantity: number[][],\n    series: string[],\n    order: string[]\n}\n\nclass StackedLineChartD3 {\n    readonly monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    colors = {\n        getAreaColor: (index: number) => {\n            const colors = ['#003f5c', '#374c80', '#7a5195' ,'#bc5090' ,'#ef5675' ,'#ff764a' ,'#ffa600'];\n            // const colors = ['#ffa600', '#ff764a', '#ef5675' ,'#bc5090' ,'#7a5195' ,'#374c80' ,'#003f5c'];\n            return colors[index > colors.length - 1 ? 0 : index]\n        },\n        textColor: '#555',\n        domainColor: 'red'\n    };\n    svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n    dimensions: {\n        svgWidth: number,\n        svgHeight: number,\n        m: {t: number, r: number, b: number, l: number},\n        chartWidth: number,\n        chartHeight: number\n    };\n    scales: {\n        y: d3.ScaleLinear<number, number>,\n        x: d3.ScaleLinear<number, number>,\n        xBand: d3.ScaleBand<string>,\n        xPoint: d3.ScalePoint<string>\n    };\n    axes: {\n        y: d3.Axis<number>,\n        x: d3.Axis<string>,\n        yAreaTitle: d3.Axis<number>,\n        xHover: d3.Axis<string>,\n        yHoverText: d3.Axis<number>,\n        yHoverLines: d3.Axis<number>,\n    };\n    references: {\n        axisX: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n        axisY: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n        axisYAreaTitle: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n        axisXHover: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n        axisYHoverText: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n        axisYHoverLines: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n        paths: d3.Selection<SVGPathElement, d3.Series<{ [key: string]: number; }, string>, SVGGElement, any> | null,\n        detectionRects: d3.Selection<SVGRectElement, number[], SVGGElement, any> | null,\n    };\n    data: {\n        stackData: {[key: string]: number}[],\n        maxQuantity: number\n    } & StackedLineChartD3Data;\n    shapes: {\n        stack: d3.Stack<number, {[key: string]: number}, string>,\n        getArea: (t: number) => d3.Area<any>\n    };\n\n\n    constructor(id: string, data: StackedLineChartD3Data, width: number, height: number) {\n        this.svg = d3.select(`#${id}`).append(\"svg\");\n        this.data = this.getData(data, true);\n        this.dimensions = this.getDimension(width, height);\n        this.scales = this.getScales();\n        this.references = {\n            axisX: null,\n            axisY: null,\n            axisYAreaTitle: null,\n            axisXHover: null,\n            axisYHoverText: null,\n            axisYHoverLines: null,\n            paths: null,\n            detectionRects: null\n        };\n        this.shapes = this.getShapes();\n        this.axes = this.getAxes();\n    }\n\n    getData(data: StackedLineChartD3Data, convertToPercentage: boolean) {\n        let maxQuantity: number;\n        // percentage convert the daily quantity from absolute value to percentage of the sum of quantity in that day\n        // curve can be more readable in this way\n        if (convertToPercentage) {\n            const percentage = data.quantity.map(arr => {\n                const arrayLength = arr.length;\n                const sum = arr.reduce((a, b) => a + b);\n                return arr.map(num => sum === 0 ? (1 / arrayLength) : (num / sum))\n            });\n            data = Object.assign({}, data, {quantity: percentage});\n            maxQuantity = 1;\n        } else {\n            const maxS = data.quantity.map(arr => arr.reduce((a, b) => a + b));\n            maxQuantity = Math.max.apply(Math, maxS);\n        }\n\n        const stackData = data.quantity.map(arr => {\n            const obj: {[key: string]: number} = {};\n            arr.forEach((_, i) => obj[`${i}`] = _);\n            return obj\n        });\n\n        return {\n            ...data,\n            stackData,\n            maxQuantity\n        }\n    }\n\n    getDimension(width: number, height: number) {\n        const m = {t: 10, r: 150, b: 50, l: 60};\n        const chartWidth = width - m.l - m.r;\n        const chartHeight = height - m.t - m.b;\n        return {\n            svgWidth: width,\n            svgHeight: height,\n            m,\n            chartWidth,\n            chartHeight\n        }\n    }\n\n    getScales() {\n        const xRange: [number, number] = [this.dimensions.m.l, this.dimensions.m.l + this.dimensions.chartWidth];\n        const x = d3.scaleLinear()\n            .domain([0, this.data.series.length - 1])\n            .range(xRange);\n        const y = d3.scaleLinear()\n            .domain([0, this.data.maxQuantity])\n            .range([this.dimensions.chartHeight + this.dimensions.m.t, this.dimensions.m.t]);\n        const xBand = d3.scaleBand<string>()\n            .domain(this.data.quantity.map((_, i) => i.toString()))\n            .range(xRange);\n        const xPoint = d3.scalePoint()\n            .domain(this.data.quantity.map((_, i) => `${i}`))\n            .range(xRange);\n        return {\n            x,\n            y,\n            xBand,\n            xPoint\n        }\n    }\n\n    getAxes() {\n        const xTickValues = this.dimensions.chartWidth >= 300 ?\n            [0, Math.floor(this.data.series.length * 0.25), Math.floor(this.data.series.length * 0.5), Math.floor(this.data.series.length * 0.75), this.data.series.length - 1].map(_=>`${_}`) :\n            [0, this.data.series.length - 1].map(_=>`${_}`);\n        const x = d3.axisBottom(this.scales.xBand)\n            .tickValues(xTickValues)\n            .tickFormat((d, i) => {\n                const isoString = this.data.series[parseInt(`${d}`)];\n                const date = new Date(isoString);\n                return `${date.getUTCDate()} ${this.monthStrings[date.getUTCMonth()]}, ${date.getUTCFullYear()}`\n            });\n        const y = d3.axisLeft<number>(this.scales.y)\n            .tickValues([0, this.data.maxQuantity])\n            .tickFormat((i) => ['0%', '100%'][parseInt(`${i}`)]);\n\n        const lastDayQuantities = this.data.quantity[this.data.quantity.length - 1].slice();\n        const yAreaTitleTickValues = getAccumulativeSum(lastDayQuantities);\n        yAreaTitleTickValues.forEach((num, i , arr) => arr[i] = num + 0.5 * lastDayQuantities[i]);\n        const yAreaTitle = d3.axisRight<number>(this.scales.y)\n            .tickValues(yAreaTitleTickValues)\n            .tickFormat((d, i) => this.data.order[parseInt(`${i}`)]);\n\n        const xHover = d3.axisBottom(this.scales.xPoint)\n            .tickValues([])\n            .tickFormat((d, i) => {\n                const isoString = this.data.series[parseInt(`${d}`)];\n                const date = new Date(isoString);\n                return `${date.getUTCDate()} ${this.monthStrings[date.getUTCMonth()]}, ${date.getUTCFullYear()}`\n            });\n\n        [x, y, yAreaTitle, xHover].forEach((_)=>{\n            _.tickPadding(10);\n            _.tickSize(0);\n        });\n\n        const yHoverText = d3.axisLeft<number>(this.scales.y)\n            .tickValues([]);\n        const yHoverLines = d3.axisLeft<number>(this.scales.y)\n            .tickValues([]);\n        \n        return {\n            x,\n            y,\n            yAreaTitle,\n            xHover,\n            yHoverText,\n            yHoverLines\n        }\n    }\n\n    initAxes() {\n        this.references.axisX = this.svg.append('g');\n        this.references.axisY = this.svg.append('g');\n        this.references.axisYAreaTitle = this.svg.append('g');\n        this.references.axisXHover = this.svg.append('g');\n        this.references.axisYHoverText = this.svg.append('g');\n        this.references.axisYHoverLines = this.svg.append('g');\n\n        this.axes.x(this.references.axisX);\n        this.axes.y(this.references.axisY);\n        this.axes.yAreaTitle(this.references.axisYAreaTitle);\n        this.axes.xHover(this.references.axisXHover);\n        this.axes.yHoverText(this.references.axisYHoverText);\n        this.axes.yHoverLines(this.references.axisYHoverLines);\n\n        this.references.axisX.style('transform', `translate(0px, ${this.dimensions.m.t + this.dimensions.chartHeight}px)`);\n        this.references.axisY.style('transform', `translate(${this.dimensions.m.l}px, 0px)`);\n        this.references.axisYAreaTitle.style('transform', `translate(${this.dimensions.m.l + this.dimensions.chartWidth}px, 0px)`);\n        this.references.axisXHover.style('transform', `translate(0px, ${this.dimensions.m.t + this.dimensions.chartHeight}px)`);\n        this.references.axisYHoverText.style('transform', `translate(${this.dimensions.m.l}px, 0px)`);\n        this.references.axisYHoverLines.style('transform', `translate(${this.dimensions.m.l}px, 0px)`);\n\n        const allAxes = [this.references.axisX, this.references.axisY, this.references.axisYAreaTitle, this.references.axisXHover, this.references.axisYHoverText, this.references.axisYHoverLines];\n\n        allAxes.forEach(_ => {\n            _\n                .selectAll('text')\n                .style('font-size', '0.875rem')\n                .style('font-weight', 700)\n                .style('fill', this.colors.textColor)\n        });\n        allAxes.forEach(_ => {\n            _\n                .selectAll('.domain')\n                .remove()\n        });\n        allAxes.forEach(_ => {\n            _.style('opacity', 1)\n        });\n\n        this.references.axisYAreaTitle\n            .selectAll('text')\n            .style('fill', (d, i) => this.colors.getAreaColor(i))\n            .style('text-transform', 'uppercase');\n    }\n\n    getShapes() {\n        const keys: string[] = this.data.order.map((_,i) => `${i}`);\n        const stack = d3.stack()\n            .keys(keys)\n            .order(d3.stackOrderNone)\n            .offset(d3.stackOffsetNone);\n\n        const getArea = (t: number) => {\n            return d3.area()\n                .x((d, i) => {\n                    return this.scales.xPoint(`${i}`) || 0\n                })\n                .y0((d) => {\n                    return this.scales.y(d[0] + (this.data.maxQuantity) * (1 - t))\n                })\n                .y1((d) => this.scales.y(d[1] + (this.data.maxQuantity) * (1 - t)))\n                // .curve(d3.curveNatural)\n        };\n\n        return {\n            stack,\n            getArea\n        }\n    }\n\n    initSvg() {\n        this.svg\n            .attr('width', this.dimensions.svgWidth)\n            .attr('height', this.dimensions.svgHeight)\n    }\n\n    initLineChart() {\n        this.references.paths = this.svg.append('g')\n            .selectAll('path')\n            .data(this.shapes.stack(this.data.stackData))\n            .enter()\n            .append('path')\n            .attr('d', (d) => this.shapes.getArea(0)(d))\n            .attr('fill', (d, i) => this.colors.getAreaColor(i))\n            .style('transform', `translateX(${this.scales.xBand.bandwidth()})`)\n    }\n\n    initDetectionRects() {\n        this.references.detectionRects = this.svg.append('g')\n            .selectAll('rect')\n            .data(this.data.quantity)\n            .enter()\n            .append('rect')\n            .attr('x', (d, i) => {\n                return (this.scales.xPoint(i.toString()) || 0) - this.scales.xBand.bandwidth() * 0.5\n            })\n            .attr('y', this.dimensions.m.t)\n            .attr('width', this.scales.xBand.bandwidth)\n            .attr('height', this.dimensions.chartHeight)\n            .style('fill', '#fff')\n            .style('opacity', 0)\n    }\n\n    animate() {\n        if (!this.references.paths) return;\n\n        this.references.paths.transition()\n            .delay((d, i) => i * 100)\n            .duration(1200)\n            .attrTween('d', (d) => {\n                return (t: number) => {\n                    return this.shapes.getArea(t)(d) || ''\n                }\n            })\n            .ease(d3.easeCubicIn);\n\n        setTimeout(() => {\n            // this.appendMouseEventToSvg();\n            this.toggleAllAxes(true)\n        }, this.data.order.length * 200 + 1000 + 200)\n    }\n\n    toggleAllAxes(on: boolean) {\n        const opacity = on ? 1 : 0;\n        [\n            this.references.axisYAreaTitle,\n            this.references.axisX,\n            this.references.axisY\n        ].forEach(_ => {\n            _?.transition()\n                .duration(500)\n                .style('opacity', opacity)\n        })\n    }\n\n    appendMouseEventToSvg() {\n        this.svg\n            .on('mouseover', () => {\n                this.toggleAllAxes(true)\n            })\n            .on('mouseleave', () => {\n                this.toggleAllAxes(false)\n            })\n    }\n\n    appendMouseEventToDetectionRects() {\n        const thisClass = this;\n\n        const updateHoverXBg = () => {\n            if (!this.references.axisXHover) return;\n\n            const bBox = this.references.axisXHover.select<SVGTextElement>('text').node()?.getBBox();\n            if (!bBox) return;\n\n            this.references.axisXHover.selectAll('g.tick').insert('rect',\n                ':first-child')\n                .attr('width', bBox.width*1.2)\n                .attr('height', bBox.height)\n                .attr('x', bBox.x-0.1*bBox.width)\n                .attr('y', bBox.y)\n                .style('fill', '#fefefe');\n\n        };\n\n        const updateHoverAxes = (percentages?: number[], seriesIndex?: number) => {\n            if (percentages !== undefined && seriesIndex !== undefined) {\n                const accumulativeSum = getAccumulativeSum(percentages);\n                const areaMidPosition = accumulativeSum.map((num, i) => num + 0.5 * percentages[i]);\n                this.axes.yHoverText\n                    .tickValues(areaMidPosition)\n                    .tickFormat((_d, _i) => `${(percentages[_i] * 100).toFixed(2)}%`)\n\n                this.axes.yHoverLines\n                    .tickValues(accumulativeSum.slice(1))\n                    .tickFormat(() => '')\n                    .tickSizeInner(-thisClass.dimensions.chartWidth)\n\n                this.axes.xHover\n                    .tickValues([`${seriesIndex}`])\n                if (this.references.axisXHover && this.references.axisYHoverText && this.references.axisYHoverLines) {\n                    this.axes.xHover(this.references.axisXHover);\n                    this.axes.yHoverText(this.references.axisYHoverText);\n                    this.axes.yHoverLines(this.references.axisYHoverLines);\n\n                    this.references.axisYHoverLines\n                        .selectAll('line')\n                        .style('stroke', 'rgba(255,255,255,0.6)')\n                        .style('stroke-width', 2);\n\n                    this.references.axisYHoverText\n                        .selectAll('text')\n                        .style('font-size', '0.875rem')\n                        .style('font-weight', '700')\n                        .style('fill', (d, i) => this.colors.getAreaColor(i));\n                    this.references.axisYHoverText.select('.domain').remove();\n                    this.references.axisYHoverText.selectAll('line')\n                        .style('stroke', (d, i) => this.colors.getAreaColor(i))\n                        .style('stroke-width', 5);\n\n                    this.references.axisXHover\n                        .selectAll('text')\n                        .style('font-size', '0.875rem')\n                        .style('font-weight', '700')\n                        .style('fill', this.colors.textColor);\n\n                    updateHoverXBg();\n                }\n            } else {\n                [this.axes.xHover, this.axes.yHoverText, this.axes.yHoverLines].forEach(_ => {\n                    _.tickValues([]);\n                });\n                if (this.references.axisXHover && this.references.axisYHoverText && this.references.axisYHoverLines) {\n                    this.axes.xHover(this.references.axisXHover);\n                    this.axes.yHoverText(this.references.axisYHoverText);\n                    this.axes.yHoverLines(this.references.axisYHoverLines);\n                }\n            }\n\n            if (this.references.axisXHover && this.references.axisYHoverText && this.references.axisYHoverLines) {\n                [this.references.axisXHover, this.references.axisYHoverText, this.references.axisYHoverLines].forEach(_ => {\n                    _.select('.domain').remove()\n                });\n            }\n        };\n\n        this.references.detectionRects\n            ?.on('mouseover', function(d, i) {\n                d3.select(this).style('opacity', 0.3);\n                updateHoverAxes(d, i)\n             })\n            .on('mouseleave', function(d, i) {\n                d3.select(this).style('opacity', 0);\n                updateHoverAxes()\n            })\n    }\n\n    main() {\n        this.initSvg();\n        this.initLineChart();\n        this.initAxes();\n        this.initDetectionRects();\n        this.appendMouseEventToDetectionRects();\n    }\n}\n\nexport default StackedLineChartD3","import React, {useEffect, useRef, useState} from \"react\";\nimport useLazyLoad from \"../../tools/use-lazy-load\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Title from \"./utilitis/title\";\nimport Content from \"./utilitis/content\";\nimport StackedLineChartD3, {StackedLineChartD3Data} from \"../../d3-charts/stacked-line-chart-d3\";\n\nconst useStyles = makeStyles(theme => ({\n\n}));\n\ninterface DocumentsHeatMapProps {\n    isLoaded: Boolean,\n    data: StackedLineChartD3Data,\n    width: number,\n    height: number\n}\n\nconst id = 'analytics-documents-count-stacked-bar-chart';\n\nconst DocumentsCountStackedLineChart: React.FC<DocumentsHeatMapProps> = ({isLoaded, data, width, height}) => {\n    const ref = useRef<HTMLDivElement>(null);\n    const isVisible = useLazyLoad(ref, 0.5);\n    const [stackedBarChart, setStackedBarChart] = useState<null | StackedLineChartD3>(null);\n\n    useEffect(() => {\n        if (isLoaded && data && stackedBarChart === null) {\n            const stackedBarChart = new StackedLineChartD3(\n                id,\n                data,\n                width,\n                height\n            );\n            stackedBarChart.main();\n            setStackedBarChart(stackedBarChart);\n        }\n    }, [isLoaded, data]);\n\n    useEffect(() => {\n        if (stackedBarChart && isVisible) {\n            stackedBarChart.animate();\n        }\n    }, [stackedBarChart, isVisible]);\n\n    return (\n        <>\n            <Title value={['News', 'archived', 'by', 'day & category']} />\n            <Content value={`Art made of data.`}/>\n            <div id={id} ref={ref}/>\n        </>\n    )\n};\n\nexport default DocumentsCountStackedLineChart","import React, {useEffect, useState} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {ExpansionPanel, ExpansionPanelDetails, ExpansionPanelSummary, withStyles} from \"@material-ui/core\";\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport Title from \"./utilitis/title\";\nimport Content from \"./utilitis/content\";\n\nconst contentParagraphs = [\n    'The band height of each category is the percentage of news count in that category to the total news count in that day. ' +\n    'Given the number of news archived each day often fluctuates and follows a weekly pattern, the percentage tells a better story that how people\\'s interests in different news change over time.',\n    'Some patterns can be observed from the graph: due to the spreading of the novel coronavirus at the beginning of 2020, more and more health news were being reported.',\n    'Since the early March of 2020, many countries and cities in Europe and North America starts to lockdown, at the same time we see a decline in sport and entertainment news.'\n];\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        boxShadow: 'none',\n        backgroundColor: 'transparent',\n        '&:before': {\n            height: 0\n        },\n        '&$rootExpanded': {\n            margin: 0\n        }\n    },\n    rootExpanded: {},\n    summaryWrapper: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: '#999',\n        fontSize: '2rem'\n    },\n    line: {\n        width: '30%',\n        height: 2,\n        margin: '0 12px',\n        backgroundColor: '#999'\n    },\n    detailWrapper: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n}));\n\nconst summaryStyle = () => {\n    return {\n        root: {\n            minHeight: 48,\n            '&$expanded': {\n                minHeight: 48,\n            },\n        },\n        expanded: {},\n        content: {\n            margin: '12px 0',\n            '&$expanded': {\n                margin: '12px 0',\n            },\n        },\n    };\n};\n\nconst StyledExpansionPanelSummary = withStyles(summaryStyle)(\n    ExpansionPanelSummary\n);\n\n\ninterface ExpansionPanelNoteProps {\n\n}\n\nconst StackedLineChartExpansionPanelNote: React.FC<ExpansionPanelNoteProps> = () => {\n    const classes = useStyles();\n    const [expanded, setExpanded] = useState(false);\n\n    const handleChange = () => {\n        setExpanded((prevState) => !prevState)\n    };\n\n    useEffect(() => {\n        // the component after this has scroll linked animation\n        setTimeout(() => {\n            window.scrollTo(window.scrollX, window.scrollY + 1);\n            window.scrollTo(window.scrollX, window.scrollY - 1)\n        }, 300)\n    }, [expanded]);\n\n    return (\n        <ExpansionPanel\n            expanded={expanded}\n            onChange={handleChange}\n            classes={{\n                root: classes.root,\n                expanded: classes.rootExpanded\n            }}>\n            <StyledExpansionPanelSummary>\n                <div className={classes.summaryWrapper}>\n                    <div className={classes.line}> </div>\n                    <AddCircleOutlineIcon\n                        style={{\n                            fontSize: '2rem',\n                            transition: 'transform 0.3s',\n                            transform: expanded ? 'rotate(135deg)' : 'rotate(0deg)'\n                        }}\n                    />\n                    <div className={classes.line}> </div>\n                </div>\n            </StyledExpansionPanelSummary>\n            <ExpansionPanelDetails className={classes.detailWrapper}>\n                <Title value={['How to use this graph?']}/>\n                {\n                    contentParagraphs.map((str, i) => <Content value={str} key={i}/>)\n                }\n            </ExpansionPanelDetails>\n        </ExpansionPanel>\n    )\n};\n\nexport default StackedLineChartExpansionPanelNote","import React, {useEffect, useRef, useState} from \"react\";\nimport useGetAnalytics, {AnalyticsPageStatus} from \"./utilitis/use-get-analytics\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {CircularProgress, Typography} from \"@material-ui/core\";\nimport SectionWrapper from \"./utilitis/section-wrapper\";\nimport Box from \"@material-ui/core/Box\";\nimport DocumentsByCategoryBarChart from \"./documents-by-category-bar-chart\";\nimport DocumentsHeatMap from \"./documents-heat-map\";\nimport DocumentsTextSummary from \"./documents-text-summary\";\nimport Fade from \"@material-ui/core/Fade\";\nimport AnimationSlideIn, {AnimationSlideInDirection} from \"./utilitis/animation-slide-in\";\nimport WordCloud from \"./documents-word-cloud\";\nimport AnimationFixed from \"./utilitis/animation-fixed\";\nimport DocumentsCountStackedLineChart from \"./documents-count-stacked-line-chart\";\nimport StackedLineChartExpansionPanelNote from \"./stacked-line-chart-expansion-panel-note\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        overflowX: 'hidden',\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        paddingBottom: '200px',\n        position: 'relative',\n        [theme.breakpoints.down('sm')]: {\n            paddingBottom: '250px',\n        }\n    },\n    widthWrapper: {\n        width: '1000px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        [theme.breakpoints.down('sm')]: {\n            width: '100%'\n        }\n    },\n}));\n\ninterface AnalyticsProps {\n\n}\n\nconst Analytics: React.FC<AnalyticsProps> = () => {\n    const classes = useStyles();\n    const wrapperRef = useRef<HTMLDivElement>(null);\n    const {\n        status,\n        summaryStatisticsData\n    } = useGetAnalytics();\n\n    const bgColorChangeRef = useRef<HTMLDivElement>(null);\n    const [bgBlack, setBgBlack] = useState(false);\n    const changeBgColor = () => {\n        if (!bgColorChangeRef.current) return;\n        const target = bgColorChangeRef.current.getBoundingClientRect().top - 100;\n        if (target <= 0 && bgBlack) {\n            setBgBlack(false);\n            document.body.style.backgroundColor = '';\n        } else if (target > 0 && !bgBlack) {\n            setBgBlack(true);\n            document.body.style.backgroundColor = 'black'\n        }\n    };\n    useEffect(() => {\n        changeBgColor();\n        document.addEventListener('scroll', changeBgColor);\n        return () => {\n            document.removeEventListener('scroll', changeBgColor);\n        }\n    }, [status, bgBlack]);\n\n    useEffect(() => {\n        return () => {\n            document.body.style.backgroundColor = ''\n        };\n    }, []);\n\n    const isLoaded = status === AnalyticsPageStatus.loaded;\n    const width = wrapperRef?.current?.getBoundingClientRect().width || 100;\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.widthWrapper} ref={wrapperRef}>\n                {\n                    status === AnalyticsPageStatus.loading &&\n                    <SectionWrapper>\n                        <CircularProgress color={\"secondary\"}/>\n                    </SectionWrapper>\n                }\n                {\n                    status === AnalyticsPageStatus.loaded &&\n                    summaryStatisticsData &&\n                    <>\n\n                        <DocumentsTextSummary\n                            totalDocuments={summaryStatisticsData.totalDocuments}\n                            earliestDocumentDate={summaryStatisticsData.earliestDocumentDate}\n                            latestDocumentDate={summaryStatisticsData.latestDocumentDate}\n                            ref={bgColorChangeRef}\n                        />\n\n                        <Fade in={!bgBlack} timeout={2000}>\n                            <SectionWrapper>\n                                <DocumentsByCategoryBarChart\n                                    isLoaded={isLoaded}\n                                    data={summaryStatisticsData.documentsCountByCategory.map(obj => ({\n                                        title: obj.category,\n                                        value: obj.count\n                                    }))}\n                                    animate={!bgBlack}\n                                    width={width}/>\n                            </SectionWrapper>\n                        </Fade>\n\n                        <AnimationSlideIn direction={AnimationSlideInDirection.left}>\n                            <SectionWrapper>\n                                <DocumentsHeatMap isLoaded={isLoaded} data={summaryStatisticsData.documentsCountByDay} width={width}/>\n                            </SectionWrapper>\n                        </AnimationSlideIn>\n\n                        <AnimationSlideIn direction={AnimationSlideInDirection.right}>\n                            <SectionWrapper>\n                                <DocumentsCountStackedLineChart\n                                    isLoaded={isLoaded}\n                                    data={{\n                                        quantity: summaryStatisticsData.documentsCountByDayAndCategory.documentCount,\n                                        series: summaryStatisticsData.documentsCountByDayAndCategory.series,\n                                        order: summaryStatisticsData.documentsCountByDayAndCategory.category\n                                    }}\n                                    width={width}\n                                    height={width >= 1000 ? 600 : width / 2}\n                                />\n                            </SectionWrapper>\n                        </AnimationSlideIn>\n\n                        <StackedLineChartExpansionPanelNote />\n\n                        <AnimationFixed>\n                            <SectionWrapper>\n                                <WordCloud isLoaded={isLoaded} data={summaryStatisticsData.wordCloud} width={width}/>\n                            </SectionWrapper>\n                        </AnimationFixed>\n                        {/*<div style={{width: 100, height: 3000, backgroundColor: 'rgba(255,0,0,0.5)'}}> </div>*/}\n                    </>\n                }\n                {\n                    status === AnalyticsPageStatus.error &&\n                    <Typography variant={'body2'} component={'h1'}>\n                        <Box fontWeight={700}>Server error, please try again later</Box>\n                    </Typography>\n                }\n            </div>\n        </div>\n    )\n};\n\nexport default Analytics","import React, {RefObject, useRef} from \"react\";\nimport useSticky from \"../../tools/use-sticky\";\n\ninterface StickyComponentProps {\n    anchorRef: RefObject<HTMLDivElement>,\n    zIndex?: number,\n}\n\nconst StickyComponent: React.FC<StickyComponentProps> = (props) => {\n    const {\n        style,\n        isFixed\n    } = useSticky(props.anchorRef);\n\n    const elementRef = useRef<HTMLDivElement>(null);\n\n    return (\n        <>\n            {\n                isFixed && elementRef.current &&\n                <div style={{\n                    width: `${elementRef.current.offsetWidth}px`,\n                    height: `${elementRef.current.offsetHeight}px`\n                }}>\n                </div>\n            }\n            <div style={{...style, zIndex: props.zIndex ? props.zIndex : 'auto'}} ref={elementRef}>\n                { props.children }\n            </div>\n        </>\n    )\n};\n\nexport default StickyComponent;","import React, {FormEvent, useEffect, useState} from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {Tooltip} from \"@material-ui/core\";\nimport Zoom from \"@material-ui/core/Zoom\";\n\nconst useStyles = makeStyles(theme => ({\n    dialog: {\n        minWidth: '50vw'\n    }\n}));\n\ninterface HeaderSearchProps {\n    goToSearch: (keyword: string) => void\n}\n\nconst HeaderSearch: React.FC<HeaderSearchProps> = ({goToSearch}) => {\n\n    const classes = useStyles();\n\n    const [open, setOpen] = useState(false);\n    const [input, setInput] = useState('');\n    const [isEmpty, setIsEmpty] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setInput('');\n        setOpen(false);\n    };\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (isEmpty) setIsEmpty(false);\n        setInput(e.target.value)\n    };\n\n    const handleSubmit = (e: FormEvent) => {\n        e.preventDefault();\n        if (!input.length) {\n            setIsEmpty(true);\n        } else {\n            goToSearch(input);\n            handleClose();\n        }\n    };\n\n    return (\n        <div>\n            <Tooltip title=\"Search\" TransitionComponent={Zoom}>\n                <IconButton aria-label=\"search\" color={\"inherit\"} onClick={handleClickOpen}>\n                    <SearchIcon/>\n                </IconButton>\n            </Tooltip>\n            <Dialog open={open} onClose={handleClose} fullWidth maxWidth='sm'>\n                <form action='/' onSubmit={handleSubmit}>\n                    <DialogTitle>Search from archived news</DialogTitle>\n                    <DialogContent>\n                        <TextField\n                            error={isEmpty}\n                            autoFocus\n                            margin=\"dense\"\n                            label=\"Keywords\"\n                            type=\"news keyword\"\n                            fullWidth\n                            value={input}\n                            onChange={handleInputChange}\n                            helperText={isEmpty ? 'Keyword cannot be empty.' : ' '}\n                        />\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\" aria-label='cancel'>\n                            Cancel\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\" aria-label='submit search'>\n                            Search\n                        </Button>\n                    </DialogActions>\n                </form>\n            </Dialog>\n        </div>\n    )\n};\n\nexport default HeaderSearch","import React, {useRef} from \"react\";\nimport {AppBar, Grid, Tab, Tabs, Theme, Toolbar, Tooltip, Typography,} from \"@material-ui/core\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport {Categories, Category} from \"../../redux/actions/category\";\nimport StickyComponent from \"../utility-components/sticky-component\";\nimport IconButton from '@material-ui/core/IconButton';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport CollectionsBookmarkIcon from '@material-ui/icons/CollectionsBookmark';\nimport Zoom from \"@material-ui/core/Zoom\";\nimport HeaderSearch from \"./header-search\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\n\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    tab: {\n        flexShrink: 0,\n        flexGrow: 1,\n        color: theme.palette.primary.contrastText\n    },\n    heading: {\n        textTransform: 'uppercase',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        whiteSpace: 'nowrap'\n    },\n    appBarNoBoxShadow: {\n        boxShadow: 'none'\n    },\n    appBarBottomBoxShadow: {\n        boxShadow: '0px 4px 4px -1px rgba(0,0,0,0.2), 0px 5px 5px 0px rgba(0,0,0,0.14), 0px 10px 10px 0px rgba(0,0,0,0.12)'\n    },\n    trendIcon: {\n        color: '#FFF'\n    }\n}));\n\ninterface HeaderProps {\n    headers: Categories,\n    category: Category,\n    goToSearch: (keyword: string) => void,\n    goToAnalytics: () => void,\n    goToTopic: () => void,\n    setCategory: (category: Category) => void\n}\n\nconst Header: React.FC<HeaderProps> = ({headers, category, goToSearch, goToAnalytics, setCategory, goToTopic}) => {\n    const classes = useStyles();\n    const appBarRef = useRef<HTMLDivElement>(null);\n    const theme = useTheme();\n\n    return (\n        <>\n        <AppBar color=\"primary\" position={'static'} ref={appBarRef} className={classes.appBarNoBoxShadow}>\n            <Toolbar>\n                <Grid container>\n                    <Grid item xs={1} md={3}>\n\n                    </Grid>\n                    <Grid item xs={5} md={6}>\n                        <Typography align={\"center\"} className={classes.heading} variant={\"h1\"} component={'h1'}>\n                            News Canada\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={6} md={3}>\n                        <Grid container alignItems={'center'} justify={\"flex-end\"}>\n                            <Grid item>\n                                <HeaderSearch goToSearch={goToSearch}/>\n                            </Grid>\n                            <Grid item>\n                                <Tooltip title=\"Topic: COVID-19\" TransitionComponent={Zoom}>\n                                    <IconButton aria-label=\"Topic: COVID-19\" color={\"inherit\"} onClick={goToTopic}>\n                                        <CollectionsBookmarkIcon/>\n                                    </IconButton>\n                                </Tooltip>\n                            </Grid>\n                            <Grid item>\n                                <Tooltip title=\"Analytics\" TransitionComponent={Zoom}>\n                                    <IconButton aria-label=\"news trend\" color={\"inherit\"} onClick={goToAnalytics}>\n                                        <AssessmentIcon/>\n                                    </IconButton>\n                                </Tooltip>\n                            </Grid>\n                        </Grid>\n                    </Grid>\n                </Grid>\n            </Toolbar>\n        </AppBar>\n        <StickyComponent\n            anchorRef={appBarRef}\n            zIndex={theme.zIndex.appBar}>\n            <AppBar color=\"primary\" position={'static'} className={classes.appBarBottomBoxShadow}>\n                <Tabs\n                    value={headers.indexOf(category) === -1 ? false : headers.indexOf(category)}\n                    indicatorColor=\"secondary\"\n                    textColor=\"secondary\"\n                    variant=\"scrollable\"\n                    scrollButtons=\"auto\"\n                >\n                    {\n                        headers.map((_, i) => <Tab label={_} key={i} className={classes.tab} onClick={() => setCategory(Category[_])}/>)\n                    }\n                </Tabs>\n            </AppBar>\n        </StickyComponent>\n        </>\n    )\n}\n\nexport default Header;","import {connect} from \"react-redux\";\nimport {Dispatch} from \"redux\";\nimport {\n    categories,\n    Category,\n    goToAnalyticsPanel,\n    goToSearchPanel, goToTopicPanel,\n    setCategoryIfNeeded\n} from \"../redux/actions/category\";\nimport {setSearchKeyword} from \"../redux/actions/search-keyword\";\nimport Header from \"../components/header/header\";\nimport {State} from \"../redux/state\";\n\nfunction mapStateToProps(state: State) {\n    return {\n        headers: categories,\n        category: state.category,\n    }\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        goToSearch: (keyword: string) => {\n            dispatch(setSearchKeyword(keyword));\n            dispatch(goToSearchPanel())\n        },\n        goToAnalytics: () => {\n            dispatch(goToAnalyticsPanel())\n        },\n        goToTopic: () => {\n            dispatch(goToTopicPanel())\n        },\n        setCategory: (category: Category) => {\n            // @ts-ignore\n            dispatch(setCategoryIfNeeded(category));\n        }\n    }\n}\n\nconst HeaderContainer = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Header);\n\nexport default HeaderContainer;","enum SortTypes {\n    relevance='relevance',\n    date='date'\n}\n\nexport default SortTypes","import * as d3 from \"d3\";\n\nexport interface CovidCaseData {\n    countries: {\n        [key: string]: {\n            cases: number[],\n            deaths: number[],\n            recovered: number[],\n        }\n    }\n    series: string[],\n    totals: {\n        cases: number[],\n        deaths: number[],\n        recovered: number[],\n    },\n    lastUpdated: string\n}\n\ninterface FeatureProperties {\n    name: string,\n    case: {\n        cases: number[],\n        deaths: number[],\n        recovered: number[],\n    } | null\n}\n\nclass WorldMapD3 {\n    color = {\n        red: '#ef5350',\n        transparent: 'rgba(0,0,0,0)',\n        getMapColor: (percentage: number) => `rgba(55, 76, 128, ${percentage.toFixed(1)})`,\n        grey: \"#eee\",\n        mapStrokeNormal: '#ccc',\n        mapStrokeHoverHighlight: '#222',\n        case: '#ffb140',\n        death: '#f16a67',\n        recovered: '#78c37b',\n        timeBarHighlight: '#7a5195',\n        timeBarNormal: '#af96bf',\n        timeBarLight: '#e4dbe8'\n    };\n    monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    getStrokeWidth = () => this.dimension.svgWidth >= 1000 ? 1 : 0.5;\n    animations = {\n        zoomIn: {\n          delay: 0,\n          duration: 3000,\n        },\n        changeMapColor: {\n          delay: 3000,\n          duration: 1000,\n        },\n        timeLapse: {\n          delay: 4000,\n        },\n        timeLapseGap: 500\n    };\n    id: string;\n    dimension: {\n        svgWidth: number,\n        svgHeight: number,\n        m: {t: number, r: number, b: number, l: number},\n        mapX: number,\n        mapY: number\n        mapWidth: number,\n        mapHeight: number\n    };\n    themeColor: string;\n    data: {\n        aggregate: d3.ExtendedFeatureCollection<d3.ExtendedFeature<d3.GeoGeometryObjects, FeatureProperties>> | null,\n        case: CovidCaseData,\n        caseMax: number\n    };\n    references: {\n        svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any> | null,\n        map: {\n            paths: d3.Selection<SVGPathElement, d3.ExtendedFeature<d3.GeoGeometryObjects, FeatureProperties>, SVGGElement, any> | null,\n            pathHighlightGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n            pathHighlight: d3.Selection<SVGPathElement | null, unknown, HTMLElement, any> | null,\n        }\n        tooltip: {\n            bg: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n            tooltipGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>\n            tooltip: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanCountry: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanDate: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanCaseAccumulative: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanDeathAccumulative: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanRecoveredAccumulative: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanCaseNew: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanDeathNew: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            tspanRecoveredNew: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            caseLineChart: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n            deathLineChart: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n            recoveredLineChart: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n            stackBarChartCase: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n            stackBarChartDeath: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n            stackBarChartRecovered: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n        } | null,\n        timeControl: {\n            group: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n            dateText: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            timeBarBg: d3.Selection<SVGRectElement, string, SVGGElement, any>,\n            timeBar: d3.Selection<SVGRectElement, string, SVGGElement, any>,\n            playButton: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n            startOverButton: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n        } | null\n    };\n    scales: {\n        timeBarXScale: d3.ScaleBand<string>\n    };\n    state: {\n        time: number,\n        timeMax: number,\n        tooltipData: {\n            inputX: number, // top left x of map path rect, used as primary anchor\n            inputXSecondary: number, // top right x of map path rect, used in case primary anchor causing tooltip overlaps map rect\n            inputY: number, // top right y of map path rect\n            inputYSecondary: number, // bottom right y of map path rect\n            data: {\n                country: string,\n                case: {\n                    cases: number[],\n                    deaths: number[],\n                    recovered: number[],\n                } | undefined | null\n            }\n        }\n    };\n    timeLapse: {\n        timeoutID: number | null\n    };\n\n    constructor(id: string, width: number, height: number, themeColor: string, caseData: CovidCaseData) {\n        this.id = id;\n        this.dimension = this.getDimension(width, height);\n        this.themeColor = themeColor;\n        this.data = {\n            aggregate: null,\n            case: caseData,\n            caseMax: 0\n        };\n        this.references = {\n            svg: null,\n            map: {\n                paths: null,\n                pathHighlightGroup: null,\n                pathHighlight: null\n            },\n            tooltip: null,\n            timeControl: null\n        };\n        this.scales = {\n            timeBarXScale: d3.scaleBand()\n        };\n        this.state = {\n            time: 0,\n            timeMax: 0,\n            tooltipData: {\n                inputX: -1000,\n                inputXSecondary: -1000,\n                inputY: -1000,\n                inputYSecondary: -1000,\n                data: {\n                    country: '',\n                    case: undefined\n                }\n            }\n        };\n        this.timeLapse = {\n            timeoutID: null\n        }\n    }\n\n    getDimension(width: number, height: number) {\n        const svgWidth = width;\n        const svgHeight = height;\n        const m = {t: 0, r: 10, b: 75, l: 10};\n        return {\n            svgWidth,\n            svgHeight,\n            m,\n            mapX: m.l,\n            mapY: m.t,\n            mapWidth: svgWidth - m.l - m.r,\n            mapHeight: svgHeight - m.t - m.b\n        }\n    }\n\n    async getData() {\n        try {\n            const module = await import('./world-map-data');\n            let caseMax = 0;\n            const mapData: any = module.default;\n            mapData.features.forEach((obj: any) => {\n                if (!obj.properties) return;\n                obj.properties.case = this.data.case.countries[obj.properties.name] ?\n                    Object.assign({}, this.data.case.countries[obj.properties.name]) :\n                    null;\n\n                this.data.case.countries[obj.properties.name]?.cases.forEach(num => {\n                    if (num > caseMax) caseMax = num\n                })\n            });\n            this.data.aggregate = mapData;\n            this.data.caseMax = caseMax;\n            this.state.timeMax = this.data.case.series.length - 1;\n\n            // const casesCountries = Object.keys(this.data.case.countries).sort((a, b) => a.localeCompare(b));\n            // const mapCountries = this.data.map.features.map(obj=>obj.properties!.name).sort((a, b) => a.localeCompare(b));\n            // console.log(casesCountries, mapCountries);\n            //\n            // const casesCountriesFiltered: string[] = [];\n            // const mapCountriesFiltered: string[] = [];\n            //\n            // casesCountries.forEach(str => {\n            //     if (mapCountries.indexOf(str) === -1) {\n            //         casesCountriesFiltered.push(str)\n            //     }\n            // })\n            //\n            // mapCountries.forEach(str => {\n            //     if (casesCountries.indexOf(str) === -1) {\n            //         mapCountriesFiltered.push(str)\n            //     }\n            // })\n            // console.log(casesCountriesFiltered, mapCountriesFiltered)\n        } catch (e) {\n            throw (e)\n        }\n    }\n\n    initSvg() {\n        this.references.svg = d3.select(`#${this.id}`)\n            .append('svg')\n            .attr('width', this.dimension.svgWidth)\n            .attr('height', this.dimension.svgHeight)\n        // .style('background-color', 'rgba(255,0,0,0.5');\n    }\n\n    initTooltip() {\n        if (!this.references.svg) return;\n        const tooltipGroup = this.references.svg.append('g');\n        const bg = tooltipGroup.append('rect');\n        const tooltip = tooltipGroup.append('text');\n        const tspanCountry = tooltip.append('tspan');\n        const tspanDate = tooltip.append('tspan');\n        const tspanCaseAccumulative = tooltip.append('tspan');\n        const tspanCaseNew = tooltip.append('tspan');\n        const tspanDeathAccumulative = tooltip.append('tspan');\n        const tspanDeathNew = tooltip.append('tspan');\n        const tspanRecoveredAccumulative = tooltip.append('tspan');\n        const tspanRecoveredNew = tooltip.append('tspan');\n        const caseLineChart = tooltipGroup.append('path');\n        const deathLineChart = tooltipGroup.append('path');\n        const recoveredLineChart = tooltipGroup.append('path');\n        const stackBarChartGroup = tooltipGroup.append('g');\n        const stackBarChartCase = stackBarChartGroup.append('rect');\n        const stackBarChartDeath = stackBarChartGroup.append('rect');\n        const stackBarChartRecovered = stackBarChartGroup.append('rect');\n        tooltip\n            .style('font-weight', 700)\n            .style('font-size', '0.875rem')\n            .style('fill', '#fff')\n            .attr(\"text-anchor\", \"middle\")\n            // .attr('alignment-baseline', 'bottom')\n        // tspanCountry\n        // tspanDate\n        // tspanCaseAccumulative\n        // tspanDeathAccumulative\n        // tspanRecoveredAccumulative\n        tspanCaseNew\n            .style('fill', this.color.case);\n        tspanDeathNew\n            .style('fill', this.color.death)\n        tspanRecoveredNew\n            .style('fill', this.color.recovered)\n\n        bg\n            .style('fill', 'rgba(0,0,0,0.8)')\n            .attr('rx', '5px');\n\n        [caseLineChart, deathLineChart, recoveredLineChart].forEach(_ => {\n            _\n                .style('stroke-width', 2)\n                .style('fill', 'none')\n        });\n        caseLineChart.style('stroke', this.color.case);\n        deathLineChart.style('stroke', this.color.death);\n        recoveredLineChart.style('stroke', this.color.recovered);\n        //\n        stackBarChartCase.style('fill', this.color.case);\n        stackBarChartDeath.style('fill', this.color.death);\n        stackBarChartRecovered.style('fill', this.color.recovered);\n\n\n        this.references.tooltip = {\n            bg,\n            tooltipGroup,\n            tooltip,\n            tspanCountry,\n            tspanDate,\n            tspanCaseAccumulative,\n            tspanDeathAccumulative,\n            tspanRecoveredAccumulative,\n            tspanCaseNew,\n            tspanDeathNew,\n            tspanRecoveredNew,\n            caseLineChart,\n            deathLineChart,\n            recoveredLineChart,\n            stackBarChartCase,\n            stackBarChartDeath,\n            stackBarChartRecovered\n        };\n        this.updateTooltip()\n\n    }\n\n    updateTooltip() {\n        const {\n            inputX, // top left x of map path rect, used as primary anchor\n            inputXSecondary, // top right x of map path rect, used in case primary anchor causing tooltip overlaps map rect\n            inputY, // top right y of map path rect\n            inputYSecondary, // bottom right y of map path rect\n            data\n        } = this.state.tooltipData;\n        if (!this.references.tooltip) return;\n\n        const currentT = this.state.time;\n        const getNew = (num: number) => {\n            return num >= 0 ? ` (+${num})` : ` (${num})`\n        };\n\n        const getTooltipsDimensions = () => {\n            if (!this.references.tooltip) return;\n\n            const bBox = this.references.tooltip.tooltip.node()?.getBBox();\n            if (!bBox) return;\n            const p = 0.3;\n            const shift = 5;\n            const textWidth = bBox.width;\n            const textHeight = bBox.height;\n            const lineChartHeight = 20;\n            const stackBarChartMarginTop = 10;\n            const stackBarChartHeight = 15;\n            const chartWidth = 150;\n            const tooltipWidth = (1+p)*Math.max(chartWidth, textWidth);\n            const tooltipHeight = (1+p)*(textHeight + lineChartHeight * 3 + stackBarChartHeight + stackBarChartMarginTop);\n\n            const xBg = inputX - tooltipWidth - shift;\n            const xBgFloored = Math.max(this.dimension.m.l, xBg);\n            let textX, tooltipX;\n            let _inputY = inputY;\n            if (xBgFloored + tooltipWidth > inputX) {\n                // overlapping with map rect\n                tooltipX = inputXSecondary + shift;\n                if (tooltipX + tooltipWidth > this.dimension.svgWidth) {\n                    // tooltip overflows viewport right edge now\n                    // fallback to use primary x and use secondary y\n                    tooltipX = xBgFloored;\n                    textX = tooltipX + 0.5*tooltipWidth;\n                    _inputY = inputYSecondary\n                } else {\n                    textX = tooltipX + 0.5*tooltipWidth\n                }\n            } else {\n                tooltipX = xBgFloored;\n                textX = tooltipX + 0.5*tooltipWidth\n            }\n\n            let tooltipY = _inputY - p/2*bBox.height;\n            tooltipY = Math.min(tooltipY, this.dimension.svgHeight - tooltipHeight);\n            tooltipY = Math.max(tooltipY, 0);\n            const lineChartStartY = tooltipY+0.5*p*tooltipHeight+textHeight;\n            const stackBarChartY = lineChartStartY + 3 * lineChartHeight + stackBarChartMarginTop;\n\n            return {\n                tooltipX,\n                tooltipY,\n                tooltipWidth,\n                tooltipHeight,\n                textX,\n                textY: tooltipY + p/2*bBox.height,\n                chartX: textX - chartWidth/2,\n                chartWidth,\n                lineChartStartY,\n                lineChartHeight,\n                stackBarChartY,\n                stackBarChartHeight\n            }\n        };\n\n        const updateTexts = () => {\n            if (!this.references.tooltip) return;\n\n            const date = new Date(this.data.case.series[currentT]);\n            const dateText = `${date.getDate()} ${this.monthStrings[date.getMonth()]}, ${date.getFullYear()}`;\n            const noData = 'Unknown';\n\n            this.references.tooltip.tspanCountry.text(data.country);\n            this.references.tooltip.tspanDate.text(dateText);\n            if (!data.case) {\n                // no data\n                this.references.tooltip.tspanCaseAccumulative.text(`Confirmed: ${noData}`);\n                this.references.tooltip.tspanCaseNew.text('');\n                this.references.tooltip.tspanDeathAccumulative.text(`Death: ${noData}`);\n                this.references.tooltip.tspanDeathNew.text('');\n                this.references.tooltip.tspanRecoveredAccumulative.text(`Recovered: ${noData}`);\n                this.references.tooltip.tspanRecoveredNew.text('');\n            } else {\n                this.references.tooltip.tspanCaseAccumulative.text(`Confirmed: ${data.case.cases[currentT]}`);\n                this.references.tooltip.tspanCaseNew.text(currentT === 0 ? getNew(0) : getNew(data.case.cases[currentT] - data.case.cases[currentT - 1]));\n                this.references.tooltip.tspanDeathAccumulative.text(`Death: ${data.case.deaths[currentT]}`);\n                this.references.tooltip.tspanDeathNew.text(currentT === 0 ? getNew(0) : getNew(data.case.deaths[currentT] - data.case.deaths[currentT - 1]));\n                this.references.tooltip.tspanRecoveredAccumulative.text(`Recovered: ${data.case.recovered[currentT]}`);\n                this.references.tooltip.tspanRecoveredNew.text(currentT === 0 ? getNew(0) : getNew(data.case.recovered[currentT] - data.case.recovered[currentT - 1]));\n            }\n        };\n\n        const updateDimensionAndPosition = (\n            textX: number,\n            textY: number,\n            tooltipX: number,\n            toolTipY: number,\n            tooltipWidth: number,\n            tooltipHeight: number\n        ) => {\n            if (!this.references.tooltip) return;\n\n            this.references.tooltip.tooltip\n                .attr('x', textX)\n                .attr('y', textY);\n            this.references.tooltip.tspanCountry\n                .attr('x', textX)\n                .attr('dy', '0.875em');\n            this.references.tooltip.tspanDate\n                .attr('x', textX)\n                .attr('dy', '1em');\n            this.references.tooltip.tspanCaseAccumulative\n                .attr('x', textX)\n                .attr('dy', '1em');\n\n            this.references.tooltip.tspanDeathAccumulative\n                .attr('x', textX)\n                .attr('dy', '1em');\n\n            this.references.tooltip.tspanRecoveredAccumulative\n                .attr('x', textX)\n                .attr('dy', '1em');\n\n            this.references.tooltip.bg\n                .attr('x', tooltipX)\n                .attr('y', toolTipY)\n                .attr('width', tooltipWidth)\n                .attr('height', tooltipHeight);\n        };\n\n        const updateLineCharts = (\n            chartX: number,\n            chartWidth: number,\n            lineChartStartY: number,\n            lineChartHeight: number\n        ) => {\n            if (!this.references.tooltip) return;\n\n            const updateLineChartsHelper = (\n                dataArray: number[],\n                reference: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n                yMax: number,\n                x: number,\n                y: number\n            ) => {\n                const data: [number, number][] = dataArray.map((num, i) => [i, num]);\n                const scaleX = d3.scaleLinear()\n                    .domain([0, this.data.case.series.length-1])\n                    .range([0, chartWidth]);\n                const scaleY = d3.scaleLinear()\n                    .domain([0, yMax])\n                    .range([20, 0]);\n\n                reference\n                    .datum(data)\n                    .attr('d', d3.line()\n                        .x((d) => scaleX(d[0]))\n                        .y((d) => scaleY(d[1]))\n                        .defined((d, i) => i <= currentT)\n                    )\n                    .style('transform', `translate(${x}px, ${y}px)`)\n            };\n\n            if (this.state.tooltipData.data.case) {\n                // has data\n                const lineChartYMax = Math.max.apply(Math, this.state.tooltipData.data.case.cases);\n                updateLineChartsHelper(this.state.tooltipData.data.case.cases, this.references.tooltip.caseLineChart, lineChartYMax, chartX, lineChartStartY);\n                updateLineChartsHelper(this.state.tooltipData.data.case.deaths, this.references.tooltip.deathLineChart, lineChartYMax, chartX, lineChartStartY + lineChartHeight);\n                updateLineChartsHelper(this.state.tooltipData.data.case.recovered, this.references.tooltip.recoveredLineChart, lineChartYMax, chartX, lineChartStartY + lineChartHeight*2);\n            } else {\n                // either no data or mouse is leaving, need to move line chart out\n                const nullData: number[] = [];\n                updateLineChartsHelper(nullData, this.references.tooltip.caseLineChart, 0, chartX, lineChartStartY);\n                updateLineChartsHelper(nullData, this.references.tooltip.deathLineChart, 0, chartX, lineChartStartY + lineChartHeight);\n                updateLineChartsHelper(nullData, this.references.tooltip.recoveredLineChart, 0, chartX, lineChartStartY + lineChartHeight*2);\n            }\n        };\n\n        const updateStackBarChart = (\n            chartX: number,\n            chartWidth: number,\n            stackBarChartY: number,\n            stackBarChartHeight: number\n        ) => {\n            if (!this.references.tooltip) return;\n\n            if (this.state.tooltipData.data.case) {\n                // has data\n                const currentCase = this.state.tooltipData.data.case.cases[currentT];\n                const currentDeath = this.state.tooltipData.data.case.deaths[currentT];\n                const currentRecovered = this.state.tooltipData.data.case.recovered[currentT];\n                const deathWidth = currentCase === 0 ? 0 : (currentDeath / currentCase) * chartWidth;\n                const recoveredWidth = currentCase === 0 ? 0 : (currentRecovered / currentCase) * chartWidth;\n                this.references.tooltip.stackBarChartCase\n                    .attr('x', chartX)\n                    .attr('width', () => currentCase === 0 ? 0 : chartWidth)\n                    .attr('height', stackBarChartHeight)\n                    .attr('y', stackBarChartY);\n                this.references.tooltip.stackBarChartDeath\n                    .attr('x', chartX + chartWidth - deathWidth)\n                    .attr('width', deathWidth)\n                    .attr('height', stackBarChartHeight)\n                    .attr('y', stackBarChartY);\n                this.references.tooltip.stackBarChartRecovered\n                    .attr('x', chartX)\n                    .attr('width', recoveredWidth)\n                    .attr('height', stackBarChartHeight)\n                    .attr('y', stackBarChartY)\n            } else {\n                // either no data or mouse is leaving, need to move line chart out\n                [this.references.tooltip.stackBarChartCase, this.references.tooltip.stackBarChartDeath, this.references.tooltip.stackBarChartRecovered].forEach(_ => {\n                        _\n                            .attr('x', chartX)\n                            .attr('width', 0)\n                            .attr('height', 0)\n                            .attr('y', stackBarChartY);\n                });\n            }\n        };\n\n        // update texts first so that the dimensions can change base on the max text width\n        updateTexts();\n        const dimensions = getTooltipsDimensions();\n        if (dimensions) {\n            updateDimensionAndPosition(dimensions.textX, dimensions.textY, dimensions.tooltipX, dimensions.tooltipY, dimensions.tooltipWidth, dimensions.tooltipHeight);\n            updateLineCharts(dimensions.chartX, dimensions.chartWidth, dimensions.lineChartStartY, dimensions.lineChartHeight);\n            updateStackBarChart(dimensions.chartX, dimensions.chartWidth, dimensions.stackBarChartY, dimensions.stackBarChartHeight);\n        }\n    }\n\n    initMap() {\n        if (!this.data.aggregate || !this.references.svg) return;\n\n        const projection = d3.geoNaturalEarth1()\n            .fitExtent([[this.dimension.mapX, this.dimension.mapY], [this.dimension.mapWidth, this.dimension.mapHeight]], this.data.aggregate);\n\n        this.references.map.paths = this.references.svg.append(\"g\")\n            .selectAll(\"path\")\n            .data(this.data.aggregate.features)\n            .enter().append(\"path\")\n            .attr(\"fill\", this.color.grey)\n            .attr(\"d\", d3.geoPath()\n                .projection(projection)\n            )\n            .style(\"stroke\", this.color.mapStrokeNormal)\n            .style(\"stroke-width\", this.getStrokeWidth())\n            .style('opacity', 0)\n            .style('transform', 'scale(5)')\n            .style('transform-origin', '50% 50%');\n\n        this.references.map.pathHighlightGroup = this.references.svg.append(\"g\");\n    }\n\n    mapZoomIn() {\n        if (!this.references.map.paths) return;\n        this.references.map.paths.transition()\n            .delay((d, i) => (i % 10) * 200)\n            .duration(1000)\n            .style('opacity', 1)\n            .style('transform', 'scale(1)');\n\n        // change map color from grey to white\n        this.references.map.paths.transition()\n            .delay(this.animations.changeMapColor.delay)\n            .duration(this.animations.changeMapColor.duration)\n            .style('fill', this.color.getMapColor(0))\n    }\n\n    initTimeControl() {\n        if (!this.references.svg) return;\n        // dimensions\n        const margin = 4;\n        const timeControlStartY = this.dimension.svgHeight - this.dimension.m.b;\n        const timeControlStartX = 0.2*this.dimension.svgWidth;\n        const dateTextHeight = 16;\n        const timeBarStartY = timeControlStartY + dateTextHeight + margin;\n        const timeBarHeight = 10;\n        const buttonStartY = timeBarStartY + timeBarHeight + margin;\n        const buttonHeight = 16;\n        //\n        const dateArray = this.data.case.series;\n        this.scales.timeBarXScale = d3.scaleBand()\n            .domain(dateArray)\n            .range([timeControlStartX, 0.8*this.dimension.svgWidth]);\n\n        const group = this.references.svg.append(\"g\");\n        const dateText = group.append(\"text\")\n            .attr('x', timeControlStartX)\n            .attr('y', timeControlStartY + dateTextHeight)\n            .attr('font-size', `${dateTextHeight}px`)\n            .attr('font-weight', 700)\n            .style('fill', this.color.timeBarHighlight);\n        const [timeBarBg, timeBar] = [0, 1].map(_=>{\n            const selection = group.append('g')\n                .selectAll('rect')\n                .data(dateArray)\n                .enter()\n                .append('rect')\n                .style('cursor', 'pointer')\n                .attr('y', timeBarStartY)\n                .attr('x', (d) => `${this.scales.timeBarXScale(d)}`)\n                .attr('width', this.scales.timeBarXScale.bandwidth())\n                .attr('height', timeBarHeight)\n                .style('opacity', 0);\n            selection\n                .transition()\n                .delay(2000)\n                .duration(1000)\n                .style('opacity', 1);\n            return selection\n        });\n        timeBarBg\n            .style('fill', this.color.timeBarLight)\n            .style('stroke', `#fff`)\n            .style('stroke-width', 1);\n        timeBar\n            .style('fill', this.color.transparent);\n\n        const buttonGroup = group.append('g');\n        const [playButton, startOverButton] = [\n            {\n                y: buttonStartY + buttonHeight,\n                text: 'Pause'\n            },\n            {\n                y: buttonStartY + buttonHeight * 2,\n                text: 'Start Over'\n            }\n        ].map(_=>{\n            const selection = buttonGroup\n                .append('text')\n                .style('cursor', 'pointer')\n                .style('opacity', '0')\n                .style('fill', this.color.timeBarNormal)\n                .attr('font-weight', 700)\n                .attr('x', timeControlStartX)\n                .attr('y', _.y)\n                .text(_.text);\n            selection.transition()\n                .delay(this.animations.timeLapse.delay)\n                .duration(1000)\n                .style('opacity', 1);\n            selection\n                .on('mouseenter', () => {\n                selection.style('fill', this.color.timeBarHighlight)\n                })\n                .on('mouseleave', () => {\n                selection.style('fill', this.color.timeBarNormal)\n                });\n            return selection\n        });\n        this.references.timeControl = {\n            group,\n            dateText,\n            timeBarBg,\n            timeBar,\n            playButton,\n            startOverButton\n        };\n    }\n\n    updateTimeControl() {\n        if (!this.references.timeControl) return;\n\n        const currentT = this.state.time;\n        const date = new Date(this.data.case.series[currentT]);\n        this.references.timeControl.dateText.text(`${date.getDate()} ${this.monthStrings[date.getMonth()]}, ${date.getFullYear()}`)\n\n        this.references.timeControl.timeBar\n            .style('fill', (d, i) => i <= this.state.time ? this.color.timeBarNormal : this.color.transparent)\n            // .style('stroke', this.color.transparent)\n        this.references.timeControl.timeBar.filter((d, i) => i === this.state.time)\n            .transition()\n            .duration(this.animations.timeLapseGap)\n            .attrTween('width', (d) => (t: number) => `${t*this.scales.timeBarXScale.bandwidth()}px`)\n            .ease(d3.easeLinear)\n    }\n\n    updateMap() {\n        const caseMaxLog = Math.log(this.data.caseMax);\n        const emptyColor = this.color.getMapColor(0);\n\n        if (!this.references.map.paths) return;\n        this.references.map.paths\n            .style('fill', (d) => {\n                if (!d.properties.case) {\n                    // no data\n                    return emptyColor\n                } else {\n                    const currentCases = d.properties.case.cases[this.state.time];\n                    if (currentCases < 1) {\n                        return emptyColor\n                    } else {\n                        return this.color.getMapColor(Math.log(currentCases) / caseMaxLog)\n                    }\n                }\n            })\n    }\n\n    setTimeState(time: number) {\n        this.state.time = time;\n        this.updateMap();\n        this.updateTimeControl();\n        this.updateTooltip();\n    }\n\n    setToolTipDataState(\n        x: number,\n        xSecondary: number,\n        y : number,\n        ySecondary: number,\n        country: string,\n        newCase: typeof WorldMapD3.prototype.state.tooltipData.data.case\n    ) {\n        let _case = null;\n        if (newCase) {\n            _case = {\n                cases: newCase.cases.slice(),\n                deaths: newCase.deaths.slice(),\n                recovered: newCase.recovered.slice()\n            }\n        }\n        this.state.tooltipData = Object.assign(\n            this.state.tooltipData,\n            {\n                inputX: x,\n                inputXSecondary: xSecondary,\n                inputY: y,\n                inputYSecondary: ySecondary,\n                data: {\n                    country: country,\n                    case: _case\n                }\n            })\n    }\n\n    startTimeLapse(isWaitFirstTick?: boolean) {\n        const tick = () => {\n            if (this.state.time < this.state.timeMax) {\n                this.setTimeState(this.state.time+1);\n                this.timeLapse.timeoutID = window.setTimeout(tick, this.animations.timeLapseGap)\n            } else {\n                this.stopTimeLapse()\n            }\n        };\n\n        this.references.timeControl?.playButton.text('Pause');\n        if (isWaitFirstTick) {\n            this.timeLapse.timeoutID = window.setTimeout(() => tick(), this.animations.timeLapseGap)\n        } else {\n            tick();\n        }\n    }\n\n    stopTimeLapse() {\n        this.references.timeControl?.playButton.text('Start');\n\n        if (this.timeLapse.timeoutID !== null) {\n            window.clearTimeout(this.timeLapse.timeoutID);\n            this.timeLapse.timeoutID = null;\n        }\n    }\n\n    appendTimeBarMouseEvent() {\n        if (!this.references.timeControl) return;\n\n        const thisClass = this;\n        this.references.timeControl.timeBar\n            .on('mouseenter', function() {\n            d3.select(this).style('fill', thisClass.color.timeBarHighlight)\n            })\n            .on('mouseleave', function(d, i) {\n                d3.select(this).style('fill', i <= thisClass.state.time ? thisClass.color.timeBarNormal : thisClass.color.transparent)\n            })\n            .on('click', function(d, i) {\n                thisClass.stopTimeLapse();\n                thisClass.setTimeState(i)\n            })\n    }\n\n    appendTimeControlButtonEvent() {\n        if (!this.references.timeControl) return;\n\n        this.references.timeControl.playButton.on('click', () => {\n            if (this.timeLapse.timeoutID !== null) {\n                this.stopTimeLapse();\n            } else {\n                this.startTimeLapse();\n            }\n        });\n\n        this.references.timeControl.startOverButton.on('click', () => {\n            this.stopTimeLapse();\n            this.setTimeState(0);\n            this.startTimeLapse(true);\n        });\n    }\n\n    appendMapPathMouseEvent() {\n        // when mouse enter a country:\n        // 1. use d3.selection.clone() to clone the country path, the cloned path will be append right after the original path.\n        // 2. remove this path and append it into the pathHighlightGroup using d3.selection.append(() => clonedNode.node())\n        // 3. the cloned the path will be on the top of all the paths therefore the stroke on it will be totally visible.\n        // 4. however this cloned path is on the top of is origin too, therefore will trigger it's origin's mouseleave listener\n        // 5. remove the clone in the clone's mouseleave listener\n        // 6. sometimes the mouseover listener will be triggered before clone's mouseleave listener, therefore always remove the clone at the beginning of mouseover listener\n\n        // TODO: Known bug: on smaller screen, the tooltips may overlaps current mouse position, therefore the mouse is never gonna enter the cloned map path,\n        //  so the mouseleave will never be triggered and tooltips won't be repositioned.\n\n        if (!this.references.map.paths) return;\n        const thisClass = this;\n\n        const removeHighlightAndMoveTooltip = () => {\n            thisClass.setToolTipDataState(-1000, -1000, -1000, -1000, '', null);\n            thisClass.updateTooltip();\n            thisClass.references.map.pathHighlight?.remove();\n        };\n\n        this.references.map.paths.on('mouseenter', function(d) {\n            removeHighlightAndMoveTooltip();\n\n            const bBox = this.getBBox();\n            const x = bBox.x;\n            const y = bBox.y;\n            const xSecondary = bBox.x + bBox.width;\n            const ySecondary = bBox.y + bBox.height;\n\n            // tooltip\n            if (!d.properties.case) {\n                // no data for this country\n                thisClass.setToolTipDataState(x, xSecondary, y, ySecondary, d.properties.name, null);\n            } else {\n                thisClass.setToolTipDataState(x, xSecondary, y, ySecondary, d.properties.name, {...d.properties.case});\n            }\n            thisClass.updateTooltip();\n\n            // country path\n            const clonedNode = d3.select(this).clone().remove();\n            if (thisClass.references.map.pathHighlightGroup) {\n                const movedClonedNode = thisClass.references.map.pathHighlightGroup.append(() => clonedNode.node());\n                if (movedClonedNode) {\n                    thisClass.references.map.pathHighlight = movedClonedNode;\n                    movedClonedNode\n                        .style('stroke', thisClass.color.mapStrokeHoverHighlight)\n                        .style('stroke-width', thisClass.getStrokeWidth()*2)\n                        .style('fill', thisClass.color.transparent);\n                    movedClonedNode.on('mouseleave', function() {\n                        removeHighlightAndMoveTooltip()\n                    })\n                }\n            }\n        })\n    }\n\n    async main() {\n        try {\n            await this.getData();\n            this.initSvg();\n            this.initMap();\n            this.initTimeControl();\n            this.initTooltip();\n            this.mapZoomIn();\n            this.appendMapPathMouseEvent();\n            this.appendTimeBarMouseEvent();\n            setTimeout(\n                () => {\n                    this.startTimeLapse();\n                    this.appendTimeControlButtonEvent();\n                }, this.animations.timeLapse.delay);\n        } catch (e) {\n            console.log(e);\n        }\n    }\n}\n\nexport default WorldMapD3","import React, {useEffect, useRef} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport WorldMapD3 from \"../../d3-charts/world-map-d3\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\n\nconst id = 'topic-covid19-map';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        // paddingBottom: '200px',\n        // position: 'relative',\n        // [theme.breakpoints.down('sm')]: {\n        //     paddingBottom: '250px',\n        // }\n    }\n}));\n\ninterface TopicCovid19MapProps {\n\n}\n\nconst TopicCovid19Map: React.FC<TopicCovid19MapProps> = () => {\n    const classes = useStyles();\n    const theme = useTheme();\n    const containerRef = useRef<HTMLDivElement>(null);\n    const height = window.innerHeight - 240;\n\n    useEffect(() => {\n        import('./data/topic-covid19-data').then((dataFile) => {\n            if (!containerRef.current) return;\n            const map = new WorldMapD3(id, containerRef.current.getBoundingClientRect().width, containerRef.current.getBoundingClientRect().height, theme.palette.secondary.main, dataFile.default);\n            map.main();\n        });\n    }, []);\n\n    return (\n        <div className={classes.root} ref={containerRef} style={{height: `${height}px`}}>\n            <div id={id}> </div>\n        </div>\n    )\n};\n\nexport default TopicCovid19Map","import React, {useEffect, useRef, useState} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport TopicCovid19Map from \"./topic-covid19-map\";\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport {Box} from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        padding: theme.spacing(2, 0, 10, 0),\n        [theme.breakpoints.down('sm')]: {\n            padding: theme.spacing(2, 0, 20, 0)\n        }\n\n    },\n    widthWrapper: {\n        width: '1000px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        [theme.breakpoints.down('sm')]: {\n            width: '100%'\n        }\n    },\n    heading: {\n        fontFamily: 'Open Sans,sans-serif',\n        fontSize: '1.25rem',\n        textTransform: 'capitalize',\n        color: theme.palette.primary.main,\n        margin: theme.spacing(0,0,2,0)\n    }\n}));\n\ninterface TopicProps {\n\n}\n\nconst Topic: React.FC<TopicProps> = () => {\n    const classes = useStyles();\n\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.widthWrapper}>\n                <h1 className={classes.heading}>The spread of COVID-19</h1>\n            </div>\n            <TopicCovid19Map/>\n            <div className={classes.widthWrapper}>\n                <Box mx={5}>\n                    <p>\n                        <span>Data retrieved from </span>\n                        <span>\n                            <Link href='https://graphics.reuters.com/CHINA-HEALTH-MAP/0100B59S39E/index.html' target='_blank' rel=\"noopener noreferrer\" style={{color: '#f35c19'}}>\n                                Reuters.com\n                            </Link>\n                        </span>\n                        <span>, not updated in realtime.</span>\n                    </p>\n                </Box>\n            </div>\n        </div>\n    )\n};\n\nexport default Topic","enum Status {\n    LOADING='LOADING',\n    LOADED_NORMAL='LOADED_NORMAL',\n    LOADED_EMPTY='LOADED_EMPTY',\n    LOADED_NO_MORE='LOADED_NO_MORE',\n    ERROR='ERROR',\n}\n\nexport default Status","import SortTypes from \"../filters/sort-types\";\nimport {IResponse} from \"./response-types\";\n\nconst baseUrl = 'https://www.xiaoxihome.com/api/search-news';\n\nconst requestSearchNews = (\n    keyword: string,\n    skip: number,\n    frequency: boolean,\n    sort?: SortTypes,\n    date?: number\n) => {\n    return new Promise<IResponse>((resolve, reject) => {\n        const dateComponent = date ? `&date=${date}` : '';\n        sort = sort || SortTypes.relevance;\n        const url = `${baseUrl}?keyword=${keyword}&frequency=${frequency}&skip=${skip}&sort=${sort}${dateComponent}`;\n\n        fetch(url)\n            .then(res => res.json())\n            .then(json => {\n                if (json.status === 'ok') {\n                    resolve(json);\n                } else {\n                    console.log(json);\n                    reject(json);\n                }\n            })\n            .catch(e => {\n                console.log(e);\n                reject(e)\n            })\n    });\n};\n\nexport default requestSearchNews","import {useEffect, useState} from \"react\";\nimport requestSearchNews from \"./request-search-news\";\nimport Status from \"../utilities/status\";\nimport SortTypes from \"../filters/sort-types\";\nimport {ISearchedArticle, IResponse, IFrequencyData} from \"./response-types\";\n\nconst useSearchNews = (keyword: string) => {\n\n    const [status, setStatus] = useState(Status.LOADING);\n    const [data, setData] = useState<ISearchedArticle[]>([]);\n    const [sortType, setSortType] = useState(SortTypes.relevance);\n    const [totalCount, setTotalCount] = useState(0);\n    const [frequencyData, setFrequencyData] = useState<IFrequencyData | null>(null);\n    const [pendingDateFilter, _setPendingDateFilter] = useState<number>(0);\n    const [dateFilter, _setDateFilter] = useState<number>(0);\n\n    const newSearch = async () => {\n        try {\n            setData([]);\n            setFrequencyData(null);\n            setTotalCount(0);\n            setSortType(SortTypes.relevance);\n            _setPendingDateFilter(0);\n            _setDateFilter(0);\n\n\n            setStatus(Status.LOADING);\n            const json: IResponse = await requestSearchNews(keyword, 0, true);\n            setData(json.data);\n            setFrequencyData({\n                bin: json.series.slice(),\n                frequency: json.frequency.slice()\n            });\n            setTotalCount(json.totalCount);\n            setLoadedStatus(json.data.length, json.totalCount);\n        } catch (e) {\n            setStatus(Status.ERROR)\n        }\n    };\n\n    const loadMore = async () => {\n        try {\n            if (status === Status.LOADING) return;\n\n            setStatus(Status.LOADING);\n            const json: IResponse = await requestSearchNews(keyword, data.length, false, sortType, dateFilter);\n\n            let updatedDataLength = 0;\n            setData((prevData) => {\n                updatedDataLength = prevData.length + json.data.length;\n                return [...prevData, ...json.data]\n            });\n            setLoadedStatus(updatedDataLength, json.totalCount)\n        } catch (e) {\n            setStatus(Status.ERROR)\n        }\n    };\n\n    const toggleSort = async (type: SortTypes) => {\n        try {\n            if (status === Status.LOADING) return;\n            if (type === sortType) return;\n            // reset\n            setData([]);\n            setSortType(type);\n\n            //\n            setStatus(Status.LOADING);\n            const json: IResponse = await requestSearchNews(keyword, 0, false, type, dateFilter);\n            setData(json.data);\n            setLoadedStatus(json.data.length, json.totalCount)\n        } catch (e) {\n            setStatus(Status.ERROR)\n        }\n    };\n\n    const setPendingDateFilter = (date: number) => {\n        _setPendingDateFilter(date);\n    };\n\n    const setDateFilter = async (date: number) => {\n        try {\n            if (status === Status.LOADING) return;\n            if (date === dateFilter) return;\n            // reset\n            setData([]);\n            setTotalCount(0);\n            _setPendingDateFilter(0);\n            _setDateFilter(date);\n\n            //\n            setStatus(Status.LOADING);\n            const json: IResponse = await requestSearchNews(keyword, 0, false, sortType, date);\n            setData(json.data);\n            setTotalCount(json.totalCount);\n            setLoadedStatus(json.data.length, json.totalCount)\n        } catch (e) {\n            setStatus(Status.ERROR)\n        }\n    };\n\n    const setLoadedStatus = (updatedDataLength: number, totalCount: number) => {\n        if (updatedDataLength === totalCount && totalCount !== 0) {\n            setStatus(Status.LOADED_NO_MORE)\n        } else if (totalCount === 0) {\n            setStatus(Status.LOADED_EMPTY)\n        } else {\n            setStatus((Status.LOADED_NORMAL))\n        }\n    };\n\n    useEffect(() => {\n        newSearch();\n    }, [keyword]);\n\n    return {\n        status,\n        data,\n        frequencyData,\n        sortType,\n        totalCount,\n        pendingDateFilter,\n        dateFilter,\n        toggleSort,\n        loadMore,\n        setPendingDateFilter,\n        setDateFilter,\n    };\n};\n\nexport default useSearchNews","export default function getDateString(num: number) {\n    const date = new Date(num);\n    return `${date.getUTCFullYear()}/${date.getUTCMonth() + 1}/${date.getUTCDate()}`\n}","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {Box} from \"@material-ui/core\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport getDateString from \"../utilities/get-date-string\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(1, 0)\n    }\n}));\n\ninterface ResultsCountMessageProps {\n    count: number,\n    keyword: string,\n    currentLength: number,\n    dateFilter: number\n}\n\nconst ResultsCountMessage: React.FC<ResultsCountMessageProps> = ({count, keyword, currentLength, dateFilter}) => {\n    const article = count === 1 ? 'article' : 'articles';\n    const classes = useStyles();\n\n    const dateFilterMessage = dateFilter ? ` on ${getDateString(dateFilter)}` : '';\n\n    return (\n        <Typography variant=\"body1\" component=\"div\" className={classes.root}>\n            <Box fontWeight={700} textAlign={'center'}>\n                {`${count} news ${article} found related to \"${keyword}\"${dateFilterMessage}, displaying 1 - ${currentLength}`}\n            </Box>\n        </Typography>\n    )\n};\n\nexport default ResultsCountMessage","import React from \"react\";\nimport Skeleton from '@material-ui/lab/Skeleton';\n\ninterface LoadingMessageProps {\n\n}\n\nconst LoadingMessage: React.FC<LoadingMessageProps> = () => {\n    return (\n        <Skeleton variant=\"rect\" width={'100%'} height={200} animation=\"wave\"/>\n    )\n};\n\nexport default LoadingMessage","import Typography from \"@material-ui/core/Typography\";\nimport {Box} from \"@material-ui/core\";\nimport React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Button from \"@material-ui/core/Button\";\n\ninterface LoadMoreMessageProps {\n    onClick: () => void\n}\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(5, 0),\n        width: 300\n    }\n}));\n\nconst LoadMoreMessage: React.FC<LoadMoreMessageProps> = ({onClick}) => {\n    const classes = useStyles();\n\n    return (\n        <Button variant=\"contained\" disableElevation color=\"secondary\" onClick={onClick} className={classes.root}>\n            Load more\n        </Button>\n    )\n};\n\nexport default LoadMoreMessage","import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {Box} from \"@material-ui/core\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Divider from \"@material-ui/core/Divider\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        margin: theme.spacing(2, 0)\n    }\n}));\n\ninterface GenericMessageProps {\n    message: string,\n    divider?: boolean\n}\n\nconst GenericMessage: React.FC<GenericMessageProps> = ({message, divider}) => {\n    const classes = useStyles();\n\n    return (\n        <>\n            <Typography variant=\"body1\" component=\"div\" className={classes.root}>\n                <Box fontWeight={700} textAlign={'center'}>\n                    {message}\n                </Box>\n            </Typography>\n            { divider && <Divider style={{width: '100%'}}/> }\n        </>\n    )\n};\n\nexport default GenericMessage","import React, {useMemo} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {createStyles} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => createStyles({\n    highlight: {\n        backgroundColor: theme.palette.secondary.light,\n    }\n}));\n\ninterface HighlightedContentProps {\n    content: string,\n    keyword: string\n}\n\nconst HighlightedContent: React.FC<HighlightedContentProps> = ({content, keyword}) => {\n\n    const classes = useStyles();\n\n    const contentArray = useMemo(() => {\n        const escapedKeyword = keyword.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n        const re= new RegExp('('+escapedKeyword+')', 'gi');\n        return content.split(re);\n    }, [content, keyword]);\n\n    return (\n        <>\n            {contentArray.map((content, i) => {\n                const isKeyword = i % 2 === 1;\n                return isKeyword ?\n                    <span className={classes.highlight} key={i}>{ content }</span> :\n                    <span key={i}>{ content }</span>\n            })}\n        </>\n    )\n};\n\nexport default HighlightedContent","import React, {useEffect, useRef, useState} from \"react\";\nimport {Box, makeStyles} from \"@material-ui/core\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport HighlightedContent from \"./highlighted-content\";\nimport {ISearchedArticle} from \"./requests/response-types\";\n\nconst useGetHeight = () => {\n    const [cardHeight, setCardHeight] = useState(0);\n    const heightRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (heightRef.current) {\n            const cardHeight = heightRef.current.getBoundingClientRect().height;\n            setCardHeight(cardHeight)\n        }\n    }, [heightRef]);\n\n    return {\n        cardHeight,\n        heightRef\n    }\n};\n\nconst useStyles = makeStyles((theme) => ({\n    cardRoot: {\n        width: '100%',\n        margin: theme.spacing(2, 0),\n    },\n    cardActionArea: {\n        width: '100%',\n        height: '100%',\n        '& a': {\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            justifyContent: 'center',\n            '&:visited, &:link': {\n                textDecoration: 'inherit',\n                color: 'inherit',\n                cursor: 'pointer'\n            }\n        }\n    },\n    cardMedia: {\n        width: '20%',\n        height: '100%'\n    },\n    imageContain: {\n        backgroundSize: 'contain',\n        backgroundColor: theme.palette.primary.main\n    },\n    cardContent: {\n        width: '80%',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n    }\n}));\n\ninterface SearchedArticleCardProps {\n    article: ISearchedArticle,\n    keyword: string\n}\n\nconst SearchedArticleCard: React.FC<SearchedArticleCardProps> = ({article, keyword}) => {\n    const classes = useStyles();\n    \n    const {cardHeight, heightRef} = useGetHeight();\n    \n    return (\n        <Card className={classes.cardRoot} style={{height: cardHeight ? `${cardHeight}px` : 'auto'}}>\n            <CardActionArea className={classes.cardActionArea}>\n                <a href={article.url} target='_blank' rel=\"noopener noreferrer\">\n                    {\n                        article.urlToImage ?\n                            <CardMedia\n                                component=\"img\"\n                                alt={article.title}\n                                className={classes.cardMedia}\n                                image={article.urlToImage}\n                                title={article.title}\n                            /> :\n                            <CardMedia\n                                className={`${classes.cardMedia} ${classes.imageContain}`}\n                                image={process.env.PUBLIC_URL + '/xiaoxihome-news.jpg'}\n                                title={'No image'}\n                            />\n                    }\n                    <CardContent className={classes.cardContent} ref={heightRef}>\n                        <Typography variant=\"body1\" component=\"h2\">\n                            <Box fontWeight={700}>\n                                <HighlightedContent content={article.title} keyword={keyword}/>\n                            </Box>\n                        </Typography>\n                        <Typography variant=\"body2\" component=\"div\" color=\"textSecondary\">\n                            <Box fontWeight={700}>\n                                {\n                                    new Date(article.publishedAt).toDateString()\n                                }\n                            </Box>\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                            <HighlightedContent content={article.content.replace(/\\[\\+[0-9]+\\schars\\]/ig, '')} keyword={keyword}/>\n                        </Typography>\n                    </CardContent>\n                </a>\n            </CardActionArea>\n        </Card>\n    )\n};\n\nexport default SearchedArticleCard","import React, {useEffect, useState} from \"react\";\nimport {IconButton} from \"@material-ui/core\";\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Fade from \"@material-ui/core/Fade\";\n// @ts-ignore\nimport  smoothscroll from 'smoothscroll-polyfill';\n\n// kick off the polyfill!\nsmoothscroll.polyfill();\n\nconst useActivateByScrollY = () => {\n    const [isActive, setIsActive] = useState(false);\n\n    const handleScroll = () => {\n        if (window.scrollY > window.innerHeight && !isActive) {\n            setIsActive(true);\n        } else if (window.scrollY < window.innerHeight && isActive) {\n            setIsActive(false);\n        }\n    };\n\n    useEffect(() => {\n        document.addEventListener('scroll', handleScroll);\n\n        return () => {\n            document.removeEventListener('scroll', handleScroll);\n        }\n    }, [isActive]);\n\n    return isActive\n};\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'fixed',\n        zIndex: theme.zIndex.modal,\n        bottom: '50px',\n        right: '50px',\n        backgroundColor: theme.palette.secondary.main,\n        color: '#FFF',\n        transition: theme.transitions.create('background-color opacity'),\n        transform: 'rotate(-90deg)',\n        '&:hover': {\n            backgroundColor: theme.palette.secondary.light,\n        },\n        [theme.breakpoints.down('md')]: {\n            bottom: '15px',\n            right: '15px',\n        }\n    }\n}));\n\ninterface ScrollToTopButtonProps {\n\n}\n\nconst ScrollToTopButton: React.FC<ScrollToTopButtonProps> = () => {\n\n    const classes = useStyles();\n\n    const isActive = useActivateByScrollY();\n    const scrollToTop = () => {\n        window.scroll({ top: 0, left: 0, behavior: 'smooth' });\n    };\n\n    return (\n        <Fade in={isActive}>\n            <Tooltip title=\"Scroll to Top\" className={classes.root}>\n                <IconButton aria-label=\"Scroll to Top\" onClick={scrollToTop}>\n                    <PlayArrowIcon />\n                </IconButton>\n            </Tooltip>\n        </Fade>\n    )\n};\n\nexport default ScrollToTopButton","import {Theme} from \"@material-ui/core\";\nimport * as d3 from \"d3\";\nimport getDateString from \"../components/articles/searched-articles/utilities/get-date-string\";\n\nclass FrequencyChartD3 {\n    dataArray: {\n        bin: number[],\n        frequency: number[]\n    };\n\n    auxArray: {\n        binDate: string[],\n        barTransitionDelay: number[]\n    };\n\n    params: {\n        lightColor: string,\n        darkColor: string,\n        primaryColor: string,\n        backgroundColor: string,\n        TRANSITION_DELAY: number,\n        BAR_TRANSITION_DURATION: number,\n        maxFrequency: number,\n        binLength: number,\n        argWidth: number,\n        selector: string\n    };\n\n    dimension: {\n        svgWidth: number,\n        svgHeight: number,\n        m: {t: number, r: number, b: number, l: number},\n        chartWidth: number,\n        chartHeight: number,\n        chartX: number,\n        chartY: number\n    };\n\n    scales: {\n        x: d3.ScaleBand<string>,\n        y: d3.ScaleLinear<number, number>\n    };\n\n    svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n\n    references: {\n        svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>,\n        bars: d3.Selection<SVGRectElement, number, SVGGElement, unknown>,\n        axisX: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        axisY: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        axisXHoverDate: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        axisXHoverFrequency: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        axisYHover: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n        hoverDetection: d3.Selection<SVGRectElement, number, SVGGElement, unknown>,\n    };\n\n    axis: {\n        x: d3.Axis<string>,\n        y: d3.Axis<number | {valueOf(): number;}>,\n        xHoverDate: d3.Axis<string>,\n        xHoverFrequency: d3.Axis<string>,\n        yHover: d3.Axis<number | {valueOf(): number;}>,\n    };\n\n    constructor(theme: Theme, bin: number[], frequency: number[], width: number, selector: string) {\n        this.dataArray = {\n            bin,\n            frequency\n        };\n        this.auxArray = {\n            binDate: this.getBinDateArray(bin),\n            barTransitionDelay: this.getBarTransitionDelayArray(500, frequency)\n        };\n        this.params = {\n            lightColor: theme.palette.secondary.light,\n            darkColor: theme.palette.secondary.dark,\n            primaryColor: theme.palette.primary.light,\n            backgroundColor: '#EEE',\n            TRANSITION_DELAY: 500,\n            BAR_TRANSITION_DURATION: 2000,\n            maxFrequency: Math.max.apply(Math, this.dataArray.frequency),\n            binLength: this.dataArray.bin.length,\n            argWidth: width,\n            selector\n        };\n        this.dimension = this.getDimensions(width);\n        this.svg = d3.select(`#${this.params.selector}`).append('svg');\n        this.references = {\n            svg: this.svg,\n            bars: this.svg\n                .append('g')\n                .selectAll('rect').data(this.dataArray.frequency)\n                .enter().append('rect'),\n            axisX: this.svg.append('g'),\n            axisY: this.svg.append('g'),\n            axisXHoverDate: this.svg.append('g'),\n            axisXHoverFrequency: this.svg.append('g'),\n            axisYHover: this.svg.append('g'),\n            hoverDetection: this.svg\n                .append('g')\n                .selectAll('rect').data(this.dataArray.frequency)\n                .enter().append('rect'),\n        };\n        this.scales = {\n            x: d3.scaleBand()\n                .domain(this.dataArray.frequency.map((_, i) => i.toString()))\n                .range([0, this.dimension.chartWidth]),\n            y: d3.scaleLinear()\n                .domain([0, this.params.maxFrequency])\n                .range([this.dimension.chartHeight, 0])\n        };\n        this.axis = {\n            x: d3.axisBottom(this.scales.x),\n            y: d3.axisLeft(this.scales.y),\n            xHoverDate: d3.axisBottom(this.scales.x),\n            xHoverFrequency: d3.axisBottom(this.scales.x),\n            yHover: d3.axisLeft(this.scales.y)\n        };\n        this.setHoverDetectionEventHandlers = this.setHoverDetectionEventHandlers.bind(this);\n    }\n\n    getBinDateArray(binArray: number[]) {\n        return binArray.map(getDateString)\n    }\n\n    getBarTransitionDelayArray(transitionDelay: number, frequencyDataArray: number[]) {\n        const array = [];\n        let delay = transitionDelay;\n        let step = 20;\n        for (let i=0; i<frequencyDataArray.length; i++) {\n            if (frequencyDataArray[i] === 0) {\n                array.push(delay)\n            } else {\n                array.push(delay+=step);\n            }\n        }\n        return array\n    }\n\n    getDimensions(width: number) {\n        const svgWidth = width;\n        const svgHeight = Math.min(Math.round(svgWidth / 3), 200);\n        const m = {t: 10, r: 30, b: 30, l: 30}; // margin\n        const chartWidth = svgWidth - m.l - m.r;\n        const chartHeight = svgHeight - m.t - m.b;\n        const chartX = m.l;\n        const chartY = m.t;\n\n        return {\n            svgWidth,\n            svgHeight,\n            m,\n            chartWidth,\n            chartHeight,\n            chartX,\n            chartY\n        }\n    }\n\n    setSvg() {\n        this.references.svg\n            .attr('width', this.dimension.svgWidth)\n            .attr('height', this.dimension.svgHeight)\n            .style('background', this.params.backgroundColor);\n\n    }\n\n    setBars() {\n        const barWidth = this.scales.x.bandwidth();\n        const barHeight = (d: number) => this.dimension.chartHeight - this.scales.y(d);\n        const barX = (d: number, i: number) => this.dimension.chartX + (this.scales.x(i.toString()) || 0);\n        const barY = (d: number) => this.dimension.chartY + this.dimension.chartHeight - barHeight(d);\n\n        this.references.bars\n            .style('fill', this.params.lightColor)\n            .style('opacity', 0.8)\n            .attr('width', barWidth)\n            .attr('height', 0)\n            .attr('x', barX)\n            .attr('y', this.dimension.chartY + this.dimension.chartHeight);\n\n        this.references.bars\n            .transition()\n            .attr('height', barHeight)\n            .attr('y', barY)\n            .delay((d: number, i: number) => this.auxArray.barTransitionDelay[i])\n            .duration(this.params.BAR_TRANSITION_DURATION)\n            .ease(d3.easeElastic);\n    }\n\n    setAxisX() {\n        this.axis.x\n            .tickSizeOuter(0)\n            .tickFormat((d, i) => this.auxArray.binDate[parseInt(d)])\n            .tickValues([0, Math.floor(this.params.binLength * 0.25), Math.floor(this.params.binLength * 0.5), Math.floor(this.params.binLength * 0.75), this.params.binLength - 1].map(_=>`${_}`));\n        this.references.axisX\n            .style('transform', `translate(${-0.5*this.dimension.svgWidth}px, ${this.dimension.svgHeight + this.dimension.chartY}px)`)\n            .style('opacity', 0)\n            .style('color', this.params.darkColor);\n\n        this.references.axisX.transition()\n            .style('opacity', 1)\n            .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartHeight + this.dimension.chartY}px)`)\n            .delay(this.params.TRANSITION_DELAY)\n            .duration(1000)\n            .ease(d3.easeElastic);\n\n        this.axis.x(this.references.axisX);\n    }\n\n    setAxisY() {\n        this.axis.y\n            .tickSizeOuter(0)\n            .tickFormat(d3.format(\"d\"))\n            .tickValues([0, Math.floor(this.params.maxFrequency * 0.5), this.params.maxFrequency]);\n        this.references.axisY\n            .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartHeight}px)`)\n            .style('opacity', 0)\n            .style('color', this.params.darkColor);\n\n        this.references.axisY.transition()\n            .style('opacity', 1)\n            .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartY}px)`)\n            .delay(this.params.TRANSITION_DELAY)\n            .duration(1000)\n            .ease(d3.easeElastic);\n\n        this.axis.y(this.references.axisY);\n    }\n\n    setAxisXHoverDate() {\n        this.references.axisXHoverDate.style('opacity', 0)\n            .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartHeight + this.dimension.chartY}px)`);\n        this.axis.xHoverDate\n            .tickFormat((d) => this.auxArray.binDate[parseInt(d)]);\n    }\n\n    setAxisXHoverFrequency() {\n        this.references.axisXHoverFrequency.style('opacity', 0);\n        this.axis.xHoverFrequency\n            .tickFormat((d) => `${this.dataArray.frequency[parseInt(d)]}`)\n            .tickSize(0)\n            .tickPadding(-9);\n    }\n\n    setAxisYHover() {\n        this.references.axisYHover.style('opacity', 0)\n            .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartY}px)`);\n        this.axis.yHover\n            .tickFormat(d3.format(\"d\"))\n            .tickSizeInner(-this.dimension.chartWidth-6)\n            .tickSizeOuter(0)\n            .tickPadding(9);\n    }\n\n    setHoverDetection() {\n        const barWidth = this.scales.x.bandwidth();\n        const barX = (d: number, i: number) => this.dimension.chartX + (this.scales.x(i.toString()) || 0);\n\n        this.references.hoverDetection\n            .style('opacity', 0)\n            .attr('width', barWidth)\n            .attr('height', this.dimension.svgHeight)\n            .attr('x', barX)\n            .attr('y', 0);\n\n        this.setHoverDetectionEventHandlers()\n    }\n\n    setHoverDetectionEventHandlers() {\n        this.references.hoverDetection\n            .on('mouseover', (d, i) => {\n                this.axis.yHover.tickValues([d]);\n                this.axis.yHover(this.references.axisYHover);\n\n                this.references.axisYHover\n                    .selectAll(\".tick line\")\n                    .style('transform', `translate(-6px, 0)`)\n                    .style('color', this.params.primaryColor);\n                this.references.axisYHover.selectAll(\".domain\").remove();\n                this.references.axisYHover.style('opacity', 1);\n\n                const gridTextBox = this.references.axisYHover.select<SVGTextElement>('text').node()?.getBBox();\n                if (gridTextBox) {\n                    this.references.axisYHover.selectAll('g.tick').insert('rect',\n                        ':first-child')\n                        .attr('width', gridTextBox.width)\n                        .attr('height', gridTextBox.height)\n                        .attr('x', gridTextBox.x)\n                        .attr('y', gridTextBox.y)\n                        .style('fill', this.params.backgroundColor);\n                }\n\n                this.axis.xHoverDate\n                    .tickValues([`${i}`]);\n                this.axis.xHoverDate(this.references.axisXHoverDate);\n                this.references.axisXHoverDate.selectAll(\".domain\").remove();\n                this.references.axisXHoverDate.style('opacity', 1);\n\n                const hoverDateTextBox = this.references.axisXHoverDate.select<SVGTextElement>('text').node()?.getBBox();\n                if (hoverDateTextBox) {\n                    this.references.axisXHoverDate.selectAll('g.tick').insert('rect',\n                        ':first-child')\n                        .attr('width', hoverDateTextBox.width*1.2)\n                        .attr('height', hoverDateTextBox.height)\n                        .attr('x', hoverDateTextBox.x-0.1*hoverDateTextBox.width)\n                        .attr('y', hoverDateTextBox.y)\n                        .style('fill', this.params.backgroundColor);\n                }\n\n                this.axis.xHoverFrequency\n                    .tickValues([`${i}`]);\n                this.axis.xHoverFrequency(this.references.axisXHoverFrequency);\n                this.references.axisXHoverFrequency.selectAll(\".domain\").remove();\n                this.references.axisXHoverFrequency\n                    .style('transform', `translate(${this.dimension.chartX}px, ${this.scales.y(d) + this.dimension.chartY}px)`)\n                    .style('opacity', 1);\n\n                const bar = this.references.bars.filter((d, index) => index === i);\n                bar.style('fill', this.params.primaryColor);\n            })\n            .on('mouseout', (d, i) => {\n                this.references.axisYHover.style('opacity', 0);\n                this.references.axisXHoverFrequency.style('opacity', 0);\n                this.references.axisXHoverDate.style('opacity', 0);\n\n                this.references.bars.filter((d, index) => index === i)\n                    .style('fill', this.params.lightColor);\n\n            })\n    }\n\n    bindSetDate(setDate: (date: number) => void) {\n        this.references.hoverDetection\n            .on('click', (d, i) => {\n                setDate(this.dataArray.bin[i])\n            })\n    }\n\n    draw() {\n        this.setSvg();\n        this.setBars();\n        this.setAxisX();\n        this.setAxisY();\n        this.setAxisXHoverDate();\n        this.setAxisXHoverFrequency();\n        this.setAxisYHover();\n        this.setHoverDetection();\n    }\n\n    main() {\n        this.draw();\n    }\n}\n\nexport default FrequencyChartD3","import React, {Dispatch, SetStateAction, useEffect, useMemo, useRef} from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport { useTheme } from '@material-ui/core/styles';\nimport FrequencyChartD3 from \"../../../../d3-charts/frequency-chart-d3\";\nimport {IResponse} from \"../requests/response-types\";\n\nconst id = 'keyword-frequency-chart';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%'\n    }\n}));\n\ninterface KeywordFrequencyProps {\n    bin: IResponse['series'],\n    frequency: IResponse['frequency'],\n    setDate: (date: number) => void,\n}\n\nconst KeywordFrequency: React.FC<KeywordFrequencyProps> = ({bin, frequency, setDate}) => {\n    const wrapperRef = useRef<HTMLDivElement>(null);\n    const classes = useStyles();\n    const theme = useTheme();\n\n    useEffect(() => {\n\n        if (!wrapperRef.current) return;\n\n        const chart = new FrequencyChartD3(\n            theme,\n            bin.map(ISOString => (new Date(ISOString)).getTime()),\n            frequency.slice(),\n            wrapperRef.current.getBoundingClientRect().width,\n            id\n        );\n        chart.main();\n        chart.bindSetDate(setDate);\n\n    }, [wrapperRef, bin, frequency]);\n\n    return (\n        <div ref={wrapperRef} className={classes.root} id={id}>\n\n        </div>\n    )\n};\n\nexport default KeywordFrequency","import React, {useState} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport SortTypes from \"./sort-types\";\nimport {MenuItem} from \"@material-ui/core\";\n\nconst capitalizeString = (string: string) => {\n    const lowercase = string.toLowerCase();\n    return lowercase.charAt(0).toUpperCase() + lowercase.slice(1);\n\n};\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        minWidth: 200\n    },\n    resetFontSize: {\n        fontSize: theme.typography.fontSize\n    }\n}));\n\nexport interface SortPanelProps{\n    toggleSort: (sortType: SortTypes) => void,\n    sortType: SortTypes\n}\n\nconst SortPanel: React.FC<SortPanelProps> = ({toggleSort, sortType}) => {\n    const classes = useStyles();\n\n    const handleChange = (e: any) => {\n        const newType = e.target.value;\n        if (newType === sortType) return;\n\n        toggleSort(newType);\n    };\n\n    return (\n        <FormControl className={classes.root} color={\"secondary\"}>\n            <InputLabel htmlFor=\"searched-article-sort\">Sort by</InputLabel>\n            <Select\n                value={sortType}\n                onChange={handleChange}\n                inputProps={{\n                    name: 'sort',\n                    id: 'searched-article-sort',\n                }}\n                className={classes.resetFontSize}\n            >\n                <MenuItem value={SortTypes.relevance} className={classes.resetFontSize}>{capitalizeString(SortTypes.relevance)}</MenuItem>\n                <MenuItem value={SortTypes.date} className={classes.resetFontSize}>{capitalizeString(SortTypes.date)}</MenuItem>\n            </Select>\n        </FormControl>\n    )\n};\n\nexport default SortPanel","import React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {Chip} from \"@material-ui/core\";\nimport getDateString from \"../utilities/get-date-string\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport CancelIcon from '@material-ui/icons/Cancel';\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        minWidth: 200,\n        borderRadius: 0,\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        position: 'relative'\n    },\n    cancelIcon: {\n        position: 'absolute',\n        right: 5\n    }\n}));\n\nexport interface FilterByDateProps{\n    pendingDateFilter: number\n    dateFilter: number,\n    setDateFilter: (date: number) => void,\n}\n\nconst FilterByDate: React.FC<FilterByDateProps> = ({pendingDateFilter, dateFilter, setDateFilter}) => {\n    const classes = useStyles();\n\n    let chip;\n    if (dateFilter) {\n        chip = (\n            <Chip\n                label={`${getDateString(dateFilter)}`}\n                onDelete={() => setDateFilter(0)}\n                classes={{\n                    root: classes.root,\n                }}\n                color={\"secondary\"}\n                deleteIcon={<CancelIcon className={classes.cancelIcon}/>}\n            />\n        )\n    } else if (pendingDateFilter) {\n        chip = (\n            <Chip\n                label={`${getDateString(pendingDateFilter)}`}\n                onClick={() => setDateFilter(pendingDateFilter)}\n                className={classes.root}\n                variant=\"outlined\"\n                color={\"secondary\"}\n            />\n        )\n    } else {\n        chip = (\n            <Chip\n                label={'Use chart to set date'}\n                variant=\"outlined\"\n                disabled\n                className={classes.root}\n            />\n        )\n    }\n\n    return (\n        <>\n            <InputLabel shrink>Filter by date:</InputLabel>\n            {chip}\n        </>\n    )\n};\n\nexport default FilterByDate","import React from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport SortPanel, {SortPanelProps} from \"./sort-panel\";\nimport FilterByDate, {FilterByDateProps} from \"./filter-by-date\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'flex-end',\n        justifyContent: 'center',\n        [theme.breakpoints.down('md')]: {\n            flexDirection: 'column',\n            alignItems: 'center',\n        }\n    },\n    itemWrapper: {\n        padding: theme.spacing(2),\n        [theme.breakpoints.down('md')]: {\n            padding: theme.spacing(1),\n        }\n    }\n}));\n\ninterface FiltersProps extends SortPanelProps, FilterByDateProps {\n\n}\n\nconst Filters: React.FC<FiltersProps> = ({toggleSort, sortType, pendingDateFilter, dateFilter, setDateFilter}) => {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.itemWrapper}>\n                <SortPanel toggleSort={toggleSort} sortType={sortType}/>\n            </div>\n            <div className={classes.itemWrapper}>\n                <FilterByDate pendingDateFilter={pendingDateFilter} dateFilter={dateFilter} setDateFilter={setDateFilter} />\n            </div>\n        </div>\n    )\n};\n\nexport default Filters","import {Theme} from \"@material-ui/core\";\nimport {CSSProperties} from \"react\";\n\nexport const pageRoot = (theme: Theme): CSSProperties => ({\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    padding: theme.spacing(2, 0, 15, 0)\n});\n\nexport const page1000WidthWrapper = (theme: Theme): CSSProperties => ({\n    width: '1000px',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    padding: theme.spacing(2),\n    [theme.breakpoints.down('sm')]: {\n        width: '100%'\n    }\n});","import React, {useEffect, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport useSearchNews from \"./requests/use-search-news\";\nimport Status from \"./utilities/status\";\nimport ResultsCountMessage from \"./message-components/result-count-message\";\nimport LoadingMessage from \"./message-components/loading-message\";\nimport LoadMoreMessage from \"./message-components/load-more-message\";\nimport GenericMessage from \"./message-components/generic-message\";\nimport SearchedArticleCard from \"./searched-article-card\";\nimport ScrollToTopButton from \"./utilities/scroll-to-top-button\";\nimport KeywordFrequency from \"./frequency-chart/keyword-frequency\";\nimport Filters from \"./filters/filters\";\nimport getDateString from \"./utilities/get-date-string\";\nimport {ISearchedArticle, IFrequencyData} from \"./requests/response-types\";\nimport {page1000WidthWrapper, pageRoot} from \"../../../styles/styles\";\n\nconst useShowChartAndFilters = (data: ISearchedArticle[], frequencyData: IFrequencyData | null, keyword: string) => {\n    // reset when new keyword is searched\n    // show chart and filter if initial search found some data\n    // sequential searches on same keyword caused by applied filters\n    // keep chart and filter visible after initial search is made\n\n    const [foundDataOnKeyword, setFoundDataOnKeyword] = useState(false);\n\n    useEffect(() => {\n        if (data.length > 0 && frequencyData) {\n            setFoundDataOnKeyword(true)\n        }\n    }, [data, frequencyData]);\n\n    useEffect(() => {\n        setFoundDataOnKeyword(false)\n    }, [keyword]);\n\n    return foundDataOnKeyword\n};\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        ...pageRoot(theme)\n    },\n    widthWrapper: {\n        ...page1000WidthWrapper(theme)\n    },\n    cardRoot: {\n        width: '100%',\n        margin: theme.spacing(2, 0),\n    },\n    cardActionArea: {\n        width: '100%',\n        height: '100%',\n        '& a': {\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'row',\n            alignItems: 'center',\n            justifyContent: 'center',\n            '&:visited, &:link': {\n                textDecoration: 'inherit',\n                color: 'inherit',\n                cursor: 'pointer'\n            }\n        }\n    },\n    cardMedia: {\n        width: '20%',\n        height: '100%'\n    },\n    cardContent: {\n        width: '80%',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n    }\n}));\n\ninterface SearchedArticlesProps {\n    keyword: string\n}\n\nconst SearchedArticles: React.FC<SearchedArticlesProps> = ({keyword}) => {\n\n    const {\n        data,\n        frequencyData,\n        status,\n        sortType,\n        totalCount,\n        pendingDateFilter,\n        dateFilter,\n        setPendingDateFilter,\n        setDateFilter,\n        loadMore,\n        toggleSort\n    } = useSearchNews(keyword);\n    const classes = useStyles();\n\n    const hasData = data.length > 0;\n\n    const notFoundMessage =`No news article related to \"${keyword}\"${dateFilter ? ' on ' + getDateString(dateFilter) : ''} was found`;\n    const endOfResultMessage = 'End of results';\n    const errorMessage = 'Server error please try later';\n\n    const showChartAndFilters = useShowChartAndFilters(data, frequencyData, keyword);\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.widthWrapper}>\n                { showChartAndFilters && frequencyData && <KeywordFrequency bin={frequencyData.bin} frequency={frequencyData.frequency} setDate={setPendingDateFilter}/>}\n                { showChartAndFilters && <Filters sortType={sortType} toggleSort={toggleSort} pendingDateFilter={pendingDateFilter} dateFilter={dateFilter} setDateFilter={setDateFilter}/> }\n                { hasData && <ResultsCountMessage count={totalCount} keyword={keyword} currentLength={data.length} dateFilter={dateFilter}/> }\n                { status === Status.LOADED_EMPTY && <GenericMessage message={notFoundMessage}/>}\n                { status === Status.ERROR && <GenericMessage message={errorMessage}/>}\n                {\n                    hasData &&\n                        data.map((article) =>\n                            <SearchedArticleCard article={article} keyword={keyword} key={article._id}/>\n                        )\n                }\n                { status === Status.LOADING && <LoadingMessage/> }\n                { status === Status.LOADED_NORMAL && <LoadMoreMessage onClick={loadMore}/> }\n                { status === Status.LOADED_NO_MORE && <GenericMessage message={endOfResultMessage} divider/>}\n            </div>\n\n            <ScrollToTopButton />\n        </div>\n    )\n};\n\nexport default SearchedArticles","import {State} from \"./redux/state\";\nimport React, {useEffect, useState} from \"react\";\nimport {Box, makeStyles} from \"@material-ui/core\";\nimport {categories, Category} from \"./redux/actions/category\";\nimport ArticlesContainer from \"./containers/articles-container\";\nimport Attribution from \"./components/attribution\";\nimport CopyLinkSnackBarContainer from \"./containers/copy-link-snackbar-container\";\nimport {fetchArticles} from \"./redux/actions/articles\";\nimport {connect} from \"react-redux\";\nimport Analytics from \"./components/analytics/analytics\";\nimport HeaderContainer from \"./containers/header-container\";\nimport Topic from \"./components/topic/topic\";\nimport SearchedArticles from \"./components/articles/searched-articles/searched-articles\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100vw',\n        maxWidth: '100%',\n        // minHeight: '100vh',\n        // overflowX: 'hidden',\n        // paddingBottom: '10px',\n        // overflowX is causing y-axis scroll problem, pb do the hack,\n        position: 'relative'\n    },\n    attribution: {\n        position: 'absolute',\n        zIndex: theme.zIndex.appBar,\n        left: 10,\n        bottom: 10\n    }\n}));\n\ninterface InnerAppProps extends Pick<State, 'category' | 'articles'> {\n    fetchArticlesAfterMount: () => void,\n    keyword: string\n}\n\nfunction InnerApp(props: InnerAppProps) {\n    const classes = useStyles();\n    const [minHeight, setMinHeight] = useState(window.innerHeight);\n    useEffect(() => {\n        props.fetchArticlesAfterMount()\n    }, []);\n\n    const main = () => {\n        let component;\n        switch (props.category) {\n            case Category.ANALYTICS:\n                component = <Analytics />;\n                break;\n            case Category.SEARCH:\n                component = <SearchedArticles keyword={props.keyword} key={props.keyword}/>;\n                break;\n            case Category.TOPIC:\n                component = <Topic/>;\n                break;\n            default:\n                component = <ArticlesContainer articles={props.articles} />;\n        }\n\n        return component\n    };\n\n    return (\n        <Box className={classes.root} style={{minHeight: `${minHeight}px`}}>\n            <HeaderContainer/>\n            {\n                main()\n            }\n            <div className={classes.attribution}>\n                <Attribution />\n            </div>\n            <CopyLinkSnackBarContainer />\n        </Box>\n    )\n}\nfunction mapStateToProps(state: State) {\n    return {\n        category: state.category,\n        articles: state.articles,\n        keyword: state.searchKeyword\n    }\n}\nfunction mapDispatchToProps(dispatch: any) {\n    return {\n        fetchArticlesAfterMount: () => dispatch(fetchArticles(Category.HEADLINE))\n    }\n}\nconst InnerAppContainer = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(InnerApp);\n\nexport default InnerAppContainer;","import React from 'react';\nimport { Provider } from 'react-redux';\nimport configureStore from \"./redux/configureStore\";\nimport { CssBaseline } from \"@material-ui/core\";\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './theme';\nimport InnerAppContainer from \"./inner-app\";\n\nconst store = configureStore();\n\nfunction App() {\n    return (\n        <Provider store={store}>\n            <ThemeProvider theme={theme}>\n                <CssBaseline />\n                <InnerAppContainer />\n            </ThemeProvider>\n        </Provider>\n    )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}