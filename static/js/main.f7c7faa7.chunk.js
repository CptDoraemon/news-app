(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{322:function(e,t,a){},355:function(e,t){},392:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),s=a(18),c=a.n(s),o=(a(322),a(89)),l=a(101),h=a(222),u={copyLinkSnackBar:{isActive:!1,text:""}};!function(e){e.CLOSE_SNACKBAR="CLOSE_SNACKBAR",e.OPEN_SNACKBAR="OPEN_SNACKBAR"}(n||(n={}));var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.copyLinkSnackBar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.CLOSE_SNACKBAR:return{isActive:!1,text:e.text};case n.OPEN_SNACKBAR:return{isActive:!0,text:t.payload.link};default:return e}},f=Object(l.b)({copyLinkSnackBar:d}),p=u;var m=a(459),g=a(429),x=a(34),v=a(243),b=a(463),j=[{fontFamily:'"MierB"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/MierB-Bold.woff2') format('woff2')\n    "),fontWeight:400},{fontFamily:'"MierB"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/MierB-Bold.woff2') format('woff2')\n    "),fontWeight:500},{fontFamily:'"MierB"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/MierB-Bold.woff2') format('woff2')\n    "),fontWeight:600},{fontFamily:'"MierB"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/MierB-ExtraBold.woff2') format('woff2')\n    "),fontWeight:700},{fontFamily:'"MierB"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/MierB-ExtraBold.woff2') format('woff2')\n    "),fontWeight:800},{fontFamily:'"MierB"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/MierB-Heavy.woff2') format('woff2')\n    "),fontWeight:900}],y=[{fontFamily:'"Inter"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/Inter-Regular.woff2') format('woff2')\n    "),fontWeight:400},{fontFamily:'"Inter"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/Inter-Regular.woff2') format('woff2')\n    "),fontWeight:500},{fontFamily:'"Inter"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/Inter-SemiBold.woff2') format('woff2')\n    "),fontWeight:600},{fontFamily:'"Inter"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/Inter-Bold.woff2') format('woff2')\n    "),fontWeight:700},{fontFamily:'"Inter"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/Inter-Bold.woff2') format('woff2')\n    "),fontWeight:800},{fontFamily:'"Inter"',fontDisplay:"swap",src:"\n      url('".concat("/news-app","/assets/fonts/Inter-Bold.woff2') format('woff2')\n    "),fontWeight:900}],O=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'],w={fontFamily:['"MierB"'].concat(O).join(","),fontWeight:700},k=Object(v.a)({palette:{primary:{main:"#333333",contrastText:"#fff"},secondary:{main:"#1EB980",contrastText:"#fff"}},typography:{fontFamily:['"Inter"'].concat(O).join(","),h1:w,h2:w,h3:w,h4:w,h5:w,h6:w,button:{fontFamily:['"MierB"'].concat(O).join(","),fontWeight:500}},overrides:{MuiCssBaseline:{"@global":{"@font-face":[].concat(Object(x.a)(y),Object(x.a)(j))}}}});k=Object(b.a)(k);var C=function(e){return e.breakpoints.down("sm")},D=k,S=a(433),A=a(464),T=a(427),N=a(428),B=a(465),H=a(466),M=a(2);var E=function(){return Object(M.jsx)(A.a,{m:2,children:Object(M.jsxs)(T.a,{container:!0,direction:"row",spacing:2,children:[Object(M.jsx)(T.a,{item:!0,children:Object(M.jsx)(N.a,{href:"https://www.xiaoxihome.com/",target:"_blank",rel:"noopener",underline:"none",children:Object(M.jsx)(B.a,{avatar:Object(M.jsx)(H.a,{children:"X"}),label:"\ud83d\udd27 with \u2764\ufe0f by XiaoxiHome",color:"primary",clickable:!0})})}),Object(M.jsx)(T.a,{item:!0,children:Object(M.jsx)(N.a,{href:"https://newsapi.org/",target:"_blank",rel:"noopener",underline:"none",children:Object(M.jsx)(B.a,{avatar:Object(M.jsx)(H.a,{children:"N"}),label:"News data courtesy of NewsAPI.org",color:"secondary",clickable:!0})})})]})})},I=a(430),L=a(467),R=a(431),W=a(432),F=a(138),Y=a.n(F),X=a(147),q=a(56),P=a.n(q),z=P()((function(){return Object(I.a)({successSnackBar:{backgroundColor:X.a[600]}})}));var V=function(e){var t=z();function a(){e.closeCopyLinkSnackBar()}return Object(M.jsx)(L.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.isActive,autoHideDuration:3e3,onClose:a,children:Object(M.jsx)(R.a,{className:t.successSnackBar,message:Object(M.jsx)("span",{id:"client-snackbar",children:"".concat(e.text," copied to clipboard")}),action:[Object(M.jsx)(W.a,{"aria-label":"close",color:"inherit",onClick:a,children:Object(M.jsx)(Y.a,{})},"close")]})})};var U,G=Object(o.b)((function(e){return{isActive:e.copyLinkSnackBar.isActive,text:e.copyLinkSnackBar.text}}),(function(e){return{closeCopyLinkSnackBar:function(){return e({type:n.CLOSE_SNACKBAR})}}}))(V),_=a(446),J=a(12),K=a(19),Z=a(21),Q=a(9),$=a(226),ee=a.n($),te=a(227),ae=a.n(te),ne=function(){function e(t,a){Object(K.a)(this,e),this.colors=["#003f5c","#374c80","#7a5195","#bc5090","#ef5675","#ff764a","#ffa600"],this.id=void 0,this.data=void 0,this.params=void 0,this.scale=void 0,this.id=a,this.data=this.getData(t);var n=document.getElementById(a);this.params={width:n?n.getBoundingClientRect().width:0,height:n?n.getBoundingClientRect().height:0},this.scale=this.getScale(),this.styleSvg=this.styleSvg.bind(this)}return Object(Z.a)(e,[{key:"getData",value:function(e){var t=e.map((function(e){return e.count}));return{data:e,words:e.map((function(e){return e.word})),counts:t,maxCount:Math.max.apply(Math,t)}}},{key:"getScale",value:function(){return Q.q().domain([0,this.data.maxCount]).range([10,this.params.width/5])}},{key:"draw",value:function(){var e=this;ee()().size([this.params.width,this.params.height]).timeInterval(20).words(this.data.data.map((function(t){return{text:t.word,size:e.scale(t.count)}}))).fontSize((function(e){return e.size})).font("MierB").fontWeight(900).padding(1).rotate((function(){return 0})).random(ae()("a")).on("end",this.styleSvg).start()}},{key:"styleSvg",value:function(e){var t=this;Q.t("#".concat(this.id)).append("svg").attr("width",this.params.width).attr("height",this.params.height).append("g").attr("transform","translate("+[this.params.width>>1,this.params.height>>1]+")").selectAll("text").data(e).enter().append("text").style("font-size",(function(e){return e.size+"px"})).style("font-family","MierB").style("font-weight","900").style("fill",(function(e,a){return t.colors[a%t.colors.length]})).attr("text-anchor","middle").attr("transform",(function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"})).text((function(e){return e.text}))}},{key:"main",value:function(){this.draw()}}]),e}(),re=a(14),ie=a(36),se=a(434),ce=Object(S.a)((function(e){return{root:Object(re.a)({width:"100%"},C(e),{padding:e.spacing(4,0)})}})),oe=i.a.forwardRef((function(e,t){var a=e.fullHeightOffset,n=e.children,i=ce(),s=Object(ie.a)(),c=Object(se.a)(C(s)),o=Object(r.useMemo)((function(){if(c)return"auto";var e=a||50;return Math.min(1440,Math.max(900,window.innerHeight))-e}),[a,c]);return Object(M.jsx)("div",{className:i.root,style:{height:o},ref:t,children:n})})),le=a(168),he=a(437),ue=a(436),de=a(145),fe=a(4),pe=Object(S.a)((function(e){return{root:{transition:function(e){return"opacity ".concat(e.duration,"ms, transform ").concat(e.duration,"ms")}},inActive:{opacity:0,transform:function(e){return"translateX(".concat("left"===e.direction?"200px":"-200px",")")}},active:{opacity:1,transform:"translateX(0)"}}})),me=function(e){var t=e.active,a=e.direction,n=e.children,r=e.duration,i=pe({direction:a,duration:r});return Object(M.jsx)("div",{className:Object(fe.a)(i.root,t?i.active:i.inActive),children:n})},ge=a(435),xe=function(e,t){var a=Object(ge.a)(e);Object(r.useEffect)((function(){void 0!==a&&a!==e&&t()}))},ve=Object(S.a)((function(e){return{root:Object(re.a)({padding:e.spacing(4),height:"100%",width:"100%",display:"flex",flexDirection:"row",justifyContent:"center"},C(e),{padding:e.spacing(1),flexDirection:"column",justifyContent:"center",alignItems:"center"}),titleWrapper:Object(re.a)({width:"30%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-end"},C(e),{width:"100%"}),title:Object(re.a)({width:"100%",textTransform:"uppercase",fontWeight:900,lineHeight:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",textAlign:"end"},C(e),{alignItems:"flex-start",textAlign:"start"}),content:Object(re.a)({width:"100%",textAlign:"end",fontWeight:600,color:de.a[700],margin:e.spacing(1,0)},C(e),{textAlign:"start"}),chartWrapper:Object(re.a)({flex:"1 0 auto"},C(e),{width:"100%",height:400}),chartWrapperInner:Object(re.a)({width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},C(e),{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}),chartWrapperDimension:{}}})),be=function(e){var t=e.title,a=e.content,n=e.children,i=e.cbOnChartElReady,s=e.belowTitle,c=e.isVisible,o=ve(),l=600,h=Object(r.useRef)(null),u=Object(r.useState)(0),d=Object(J.a)(u,2),f=d[0],p=d[1],m=Object(r.useState)(!1),g=Object(J.a)(m,2),x=g[0],v=g[1];Object(ue.a)((function(){if(h.current){var e=h.current.getBoundingClientRect();p(Math.min(e.width,e.height)),v(!0)}}));var b=Object(r.useMemo)((function(){return Array.isArray(t)?t:t.split(" ")}),[t]);return xe(x,(function(){x&&i()})),Object(M.jsxs)("div",{className:o.root,children:[Object(M.jsxs)("div",{className:o.titleWrapper,children:[Object(M.jsx)(le.a,{component:"h2",variant:"h2",className:o.title,children:b.map((function(e,t){return Object(M.jsx)(me,{active:c,direction:t%2===0?"left":"right",duration:l,children:Object(M.jsx)("span",{children:e})},t)}))}),Object(M.jsx)(le.a,{variant:"h6",component:"div",className:o.content,children:Object(M.jsx)(me,{active:c,direction:b.length%2===0?"left":"right",duration:l,children:Object(M.jsx)("span",{children:a})})}),Object(M.jsx)(he.a,{timeout:1200,in:c,children:Object(M.jsx)("div",{children:s})})]}),Object(M.jsx)(he.a,{in:!!f&&c,timeout:l,children:Object(M.jsx)("div",{className:o.chartWrapper,children:Object(M.jsx)("div",{className:o.chartWrapperInner,ref:h,children:!!f&&Object(M.jsx)("div",{className:o.chartWrapperDimension,style:{width:f,height:f},children:n})})})})]})},je=a(468),ye=a(438),Oe=a(439),we=a(397),ke=a(228),Ce=a.n(ke),De=a(229),Se=a.n(De),Ae=Object(S.a)((function(e){return{}})),Te=function(e){var t=e.active;Ae();return t?Object(M.jsx)(Ce.a,{}):Object(M.jsx)(Se.a,{})},Ne=Object(S.a)((function(e){return{root:{backgroundColor:"rgba(0,0,0,0)","& .MuiStepConnector-line":{borderColor:e.palette.secondary.light}},stepButton:{color:e.palette.secondary.main},labelText:{color:e.palette.secondary.main}}})),Be=function(e){var t=e.steps,a=e.activeStep,n=e.onStepChange,r=Ne(),i=Object(ie.a)(),s=Object(se.a)(C(i));return Object(M.jsx)(je.a,{activeStep:a,orientation:s?"horizontal":"vertical",className:r.root,children:t.map((function(e,t){return Object(M.jsx)(ye.a,{onClick:function(){return n(t)},children:Object(M.jsx)(Oe.a,{onClick:function(){return n(t)},className:r.stepButton,disabled:!1,completed:!1,children:Object(M.jsx)(we.a,{StepIconComponent:Te,children:Object(M.jsx)(le.a,{variant:"h6",component:"span",className:r.labelText,children:e})})})},e)}))})},He=function(e){var t=Object(r.useState)(e),a=Object(J.a)(t,2),n=a[0],i=a[1],s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=function(){if(s.current){var e=s.current.getBoundingClientRect(),t=(e.top+e.bottom)/2,a=e.bottom<0||t>.9*window.innerHeight;i(!a)}};return e(),document.addEventListener("scroll",e),function(){document.removeEventListener("scroll",e)}}),[]),{isVisibleElRef:s,isVisible:n}},Me=Object(S.a)((function(e){return{container:{width:"100%",height:"100%"}}})),Ee=function(e){var t=e.data,a=Me(),n="analytics-word-cloud",i=Object(r.useState)(t.length-1),s=Object(J.a)(i,2),c=s[0],o=s[1],l=He(!1),h=l.isVisible,u=l.isVisibleElRef,d=Object(r.useMemo)((function(){return t.map((function(e){return e.year}))}),[t]),f=Object(r.useCallback)((function(){new ne(t.filter((function(e){return e.year===t[c].year}))[0].data,n).main()}),[t,c]);xe(c,f);var p=Object(r.useCallback)((function(e){o(e)}),[]);return Object(M.jsx)(oe,{ref:u,children:Object(M.jsx)(be,{title:"Word it out",content:"The power of words.",cbOnChartElReady:f,belowTitle:Object(M.jsx)(Be,{steps:d,activeStep:c,onStepChange:p}),isVisible:h,children:Object(M.jsx)("div",{id:n,className:a.container,children:" "},c)})})},Ie=a(20),Le=a.n(Ie),Re=a(31),We=function(){var e=Object(r.useState)(!1),t=Object(J.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(""),s=Object(J.a)(i,2),c=s[0],o=s[1],l=Object(r.useState)(null),h=Object(J.a)(l,2),u=h[0],d=h[1],f=""!==c,p=Object(r.useCallback)((function(){o("")}),[]),m=Object(r.useCallback)((function(){o("Sever Error")}),[]),g=Object(r.useCallback)((function(){p(),n(!1),d(null)}),[p]);return{isLoading:a,setIsLoading:n,errorMessage:c,setErrorMessage:o,data:u,setData:d,isError:f,resetError:p,resetAll:g,setGenericErrorMessage:m}},Fe=a(63),Ye=a.n(Fe);!function(e){e.HEADLINE="headline",e.BUSINESS="business",e.ENTERTAINMENT="entertainment",e.HEALTH="health",e.SCIENCE="science",e.SPORTS="sports",e.TECHNOLOGY="technology"}(U||(U={}));var Xe=Object.values(U),qe={root:{path:"/",getPathWithQuery:function(e){var t=e.category;return"/?category=".concat(t)}},search:{path:"/search"},analytics:{path:"/analytics"},topic:{path:"/topic"},article:{path:"/article/:id",getPathWithId:function(e){return"/article/".concat(e)}}},Pe=function(){var e=We();return Object(ue.a)(Object(Re.a)(Le.a.mark((function t(){var a,n,r,i,s,c,o;return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setIsLoading(!0),t.next=4,Ye.a.get("".concat("https://api.xiaoxihome.com","/api/news-analytics"));case 4:if(a=t.sent,"ok"===(n=a.data).status){t.next=8;break}throw new Error;case 8:r=[],n.data.docCountByDay.docCountByDay.forEach((function(e,t){r.push({count:e,date:n.data.docCountByDay.date[t]})})),i=n.data.docCountByDayAndCategory,s=[],c=[],o=i.categories,i.date.forEach((function(e,t){c.push(new Date(e).toISOString()),s.push(i.docCountByDayAndCategory[t])})),e.setData({summary:n.data.summary,countByCategory:n.data.countByCategory,docsCountByDay:r,docCountByDayAndCategory:{quantity:s,series:c,order:o},wordCloud:n.data.wordFrequency}),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0),e.setGenericErrorMessage();case 22:return t.prev=22,e.setIsLoading(!1),t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[0,18,22,25]])})))),e},ze=a(17),Ve=a(169),Ue=Object(S.a)((function(e){return{root:{width:"100%",minHeight:250,backgroundColor:Object(ze.d)(e.palette.primary.main,.04),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#4a5568",padding:e.spacing(2)},icon:{color:e.palette.secondary.main,width:75,height:75},title:{color:"inherit",fontWeight:700,textAlign:"center"},text:{color:"inherit",fontWeight:500,opacity:.9,textAlign:"center"}}})),Ge=function(e){var t=e.title,a=e.text,n=e.icon,r=Ue();return Object(M.jsxs)(Ve.a,{elevation:0,className:r.root,children:[i.a.cloneElement(n,{className:r.icon}),t&&Object(M.jsx)(le.a,{variant:"h6",className:r.title,children:t}),a&&Object(M.jsx)(le.a,{variant:"body1",className:r.text,children:a})]})},_e=a(74),Je=a.n(_e),Ke=a(25),Ze=a(79),Qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$e=P()((function(e){return{root:{textAlign:"center",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#F2F2F2"},section:Object(re.a)({margin:e.spacing(5,0)},e.breakpoints.down("sm"),{margin:e.spacing(2,0)}),title:{fontWeight:700},number:{fontWeight:900}}})),et=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()+86399999},tt=i.a.forwardRef((function(e,t){var a=e.totalDocuments,n=e.earliestDocumentDate,i=e.latestDocumentDate,s=$e(),c=function(e,t,a){var n=Object(r.useMemo)((function(){return et(t)}),[t]),i=Object(r.useMemo)((function(){return et(a)}),[a]),s={delay:200,config:Ze.config.molasses};return{total:Object(Ze.useSpring)(Object(Ke.a)({from:{total:0},total:e},s)).total,earliest:Object(Ze.useSpring)(Object(Ke.a)({from:{earliest:0},earliest:n},s)).earliest,latest:Object(Ze.useSpring)(Object(Ke.a)({from:{latest:0},latest:i},s)).latest}}(a,n,i),o=c.total,l=c.earliest,h=c.latest,u=function(e){return Object(M.jsx)(le.a,{className:s.title,variant:"body1",component:"h2",children:e})},d=function(e){return Object(M.jsx)(le.a,{variant:"h1",component:"p",className:s.number,children:Object(M.jsx)(Ze.animated.span,{children:e.to((function(e){var t=new Date(e);return"".concat(t.getDate()," ").concat(Qe[t.getMonth()],", ").concat(t.getFullYear())}))})})};return Object(M.jsx)(oe,{fullHeightOffset:100,children:Object(M.jsxs)("div",{className:s.root,children:[Object(M.jsxs)("div",{className:s.section,children:[u("Total news articles archived"),Object(M.jsx)(le.a,{variant:"h1",component:"p",className:s.number,children:Object(M.jsx)(Ze.animated.span,{children:o.to((function(e){return Math.round(e)}))})})]}),Object(M.jsxs)("div",{className:s.section,children:[u("First news article archived"),d(l)]}),Object(M.jsxs)("div",{className:s.section,children:[u("Most recent news article archived"),d(h)]})]})})})),at=a(440),nt=function(e){var t=Object(r.useRef)(null),a=Object(r.useState)(!1),n=Object(J.a)(a,2),i=n[0],s=n[1],c=Object(r.useCallback)((function(){if(t.current){var e=t.current.getBoundingClientRect().top-200;s(e>0)}}),[]),o=Object(ge.a)(i);Object(r.useEffect)((function(){o!==i&&void 0!==o&&(document.body.style.backgroundColor=i?"black":"")}),[i,o]);var l=Object(ge.a)(e);return Object(r.useEffect)((function(){l!==e&&void 0!==l&&e&&c()}),[i,c,e,l,o]),Object(ue.a)((function(){return document.addEventListener("scroll",c),function(){document.removeEventListener("scroll",c)}})),Object(at.a)((function(){document.body.style.backgroundColor=""})),{bgColorChangeRef:t,bgBlack:i}},rt=function(){function e(t,a){Object(K.a)(this,e),this.getColor=function(e){var t=["#ffa600","#ff764a","#ef5675","#bc5090","#7a5195","#374c80","#003f5c"];return t[e>t.length-1?0:e]},this.hasAnimated=!1,this.id=void 0,this.params=void 0,this.svg=void 0,this.references=void 0,this.data=void 0,this.id=t,this.params=this.getParams(),this.svg=Q.t("#".concat(t)).append("svg"),this.data={pieZero:this.getPieData(a.map((function(e,t){return{value:0===t?100:0,title:e.title}}))),pie:this.getPieData(a),totalValue:this.getPieData(a).reduce((function(e,t){return e+t.data.value}),0)},this.references=this.createReferences()}return Object(Z.a)(e,[{key:"getParams",value:function(){var e=document.getElementById(this.id),t=e?e.getBoundingClientRect().width:0,a=e?e.getBoundingClientRect().height:0;return{width:t,height:a,startAngle:Math.PI,endAngle:3*Math.PI,rx:t/2*.8,ry:a/2-.1*a,h:.1*a,ir:.4}}},{key:"getPieData",value:function(e){return Q.o().value((function(e){return e.value})).sort((function(e,t){return-e.value+t.value})).startAngle(this.params.startAngle).endAngle(this.params.endAngle)(e)}},{key:"createReferences",value:function(){var e=this.svg.append("g"),t=e.selectAll().data(this.data.pie).enter().append("path"),a=e.selectAll().data(this.data.pie).enter().append("path"),n=e.selectAll().data(this.data.pie).enter().append("path"),r=e.selectAll().data(this.data.pie).enter().append("text"),i=r.append("tspan"),s=r.append("tspan");return{pie:e,innerSlice:t,topSlice:a,outerSlice:n,text:r,text1:i,text2:s}}},{key:"drawPie",value:function(e,t,a,n,r,i){var s=this;this.references.pie.attr("transform","translate("+e+","+t+")"),this.references.innerSlice.style("fill",(function(e){return Q.l(s.getColor(e.index)).darker().toString()})).attr("d",(function(e){return s.pieInner(s.data.pieZero.filter((function(t){return t.index===e.index}))[0],a+.5,n+.5,0,i)})),this.references.topSlice.style("fill",(function(e){return s.getColor(e.index)})).attr("d",(function(e){return s.pieTop(s.data.pieZero.filter((function(t){return t.index===e.index}))[0],a,n,i)})),this.references.outerSlice.style("fill",(function(e){return Q.l(s.getColor(e.index)).darker().toString()})).attr("d",(function(e){return s.pieOuter(s.data.pieZero.filter((function(t){return t.index===e.index}))[0],a-.5,n-.5,0)})),this.references.text.attr("x","0").attr("y","0").attr("text-anchor","middle").style("fill","white").style("opacity",0),this.references.text1.attr("dy",0).style("font-weight",700).text((function(e){return e.data.title.toUpperCase()})),this.references.text2.attr("dy","1.2em").text((function(e){return(e.data.value/s.data.totalValue*100).toFixed(2)+"%"}))}},{key:"pieTransition",value:function(e,t,a,n,r,i){var s=this,c=2e3,o=Q.m(0,a);function l(t){var a=Q.m(r.filter((function(e){return e.index===t.index}))[0],i.filter((function(e){return e.index===t.index}))[0]);return function(t){return"".concat(.5*(1+n)*e*Math.cos(.5*(a(t).startAngle+a(t).endAngle)))}}this.references.innerSlice.transition().duration(2e3).delay(c).attrTween("d",(function(a){return function(r){return s.pieInner(a,e+.5,t+.5,o(r),n)}})),this.references.topSlice.transition().duration(c).attrTween("d",(function(a){var c=Q.m(r.filter((function(e){return e.index===a.index}))[0],i.filter((function(e){return e.index===a.index}))[0]);return function(a){return s.pieTop(c(a),e,t,n)}})),this.references.outerSlice.transition().duration(2e3).delay(c).attrTween("d",(function(a){return function(n){return s.pieOuter(a,e-.5,t-.5,o(n))}})),this.references.text.style("opacity",0),this.references.text.transition().duration(c).attrTween("x",l).attrTween("y",(function(e){var a=Q.m(r.filter((function(t){return t.index===e.index}))[0],i.filter((function(t){return t.index===e.index}))[0]);return function(e){return"".concat(.5*(1+n)*t*Math.sin(.5*(a(e).startAngle+a(e).endAngle)))}})).style("opacity",1),this.references.text1.transition().duration(c).attrTween("x",l),this.references.text2.transition().duration(c).attrTween("x",l)}},{key:"pieTop",value:function(e,t,a,n){if(e.endAngle-e.startAngle===0)return"M 0 0";var r=t*Math.cos(e.startAngle),i=a*Math.sin(e.startAngle),s=t*Math.cos(e.endAngle),c=a*Math.sin(e.endAngle),o=[];return o.push("M",r,i,"A",t,a,"0",e.endAngle-e.startAngle>Math.PI?1:0,"1",s,c,"L",n*s,n*c),o.push("A",n*t,n*a,"0",e.endAngle-e.startAngle>Math.PI?1:0,"0",n*r,n*i,"z"),o.join(" ")}},{key:"pieOuter",value:function(e,t,a,n){var r=e.startAngle<2*Math.PI?2*Math.PI:e.startAngle,i=e.endAngle<2*Math.PI?2*Math.PI:e.endAngle,s=t*Math.cos(r),c=a*Math.sin(r),o=t*Math.cos(i),l=a*Math.sin(i),h=[];return h.push("M",s,n+c,"A",t,a,"0 0 1",o,n+l,"L",o,l,"A",t,a,"0 0 0",s,c,"z"),h.join(" ")}},{key:"pieInner",value:function(e,t,a,n,r){var i=e.startAngle<Math.PI?Math.PI:e.startAngle,s=e.endAngle<Math.PI?Math.PI:e.endAngle,c=r*t*Math.cos(i),o=r*a*Math.sin(i),l=r*t*Math.cos(s),h=r*a*Math.sin(s),u=[];return u.push("M",c,o,"A",r*t,r*a,"0 0 1",l,h,"L",l,n+h,"A",r*t,r*a,"0 0 0",c,n+o,"z"),u.join(" ")}},{key:"styleSvg",value:function(){this.svg.attr("width",this.params.width).attr("height",this.params.height)}},{key:"animate",value:function(){this.hasAnimated||(this.pieTransition(this.params.rx,this.params.ry,this.params.h,this.params.ir,this.data.pieZero,this.data.pie),this.hasAnimated=!0)}},{key:"main",value:function(){this.styleSvg(),this.drawPie(this.params.width/2,this.params.height/2,this.params.rx,this.params.ry,this.params.h,this.params.ir)}}]),e}(),it=Object(S.a)((function(e){return{containerWrapper:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},container:{width:"100%",height:"50%"}}})),st=function(e){var t=e.data,a=it(),n="analytics-docs-by-category",i=He(!1),s=i.isVisible,c=i.isVisibleElRef,o=Object(r.useRef)(null),l=Object(r.useCallback)((function(){o.current=new rt(n,t.map((function(e){return{value:e.count,title:e.category}}))),o.current.main()}),[t]);return xe(s,(function(){s&&o.current.animate()})),Object(M.jsx)(oe,{ref:c,children:Object(M.jsx)(be,{title:"News archived by category",content:"Overall I'd say the news are pretty well balanced.",cbOnChartElReady:l,isVisible:s,children:Object(M.jsx)("div",{className:a.containerWrapper,children:Object(M.jsx)("div",{id:n,className:a.container,children:" "})})})})},ct=function(){function e(t,a,n){Object(K.a)(this,e),this.getColor=function(e){var t=["#FFF3E0","#FFE0B2","#FFB74D","#FB8C00","#E65100"];return t[e>t.length-1?0:e]},this.dayOfWeekStrings=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.targetRectSize=70,this.rectPadding=.1,this.id=void 0,this.isMobile=void 0,this.params=void 0,this.svg=void 0,this.references=void 0,this.data=void 0,this.scales=void 0,this.axis=void 0,this.id=t,this.data=this.getData(a),this.isMobile=n,this.params=this.getParams(),this.svg=Q.t("#".concat(t)).append("svg"),this.references=this.createReferences(),this.scales=this.getScales(),this.axis=this.getAxis()}return Object(Z.a)(e,[{key:"getParams",value:function(){var e=document.getElementById(this.id),t=e?e.getBoundingClientRect().width:0,a={t:20,r:10,b:10,l:40},n=this.data.xScaleDomain.length,r=Math.floor((t-a.l-a.r)/n),i=Math.min(r,this.targetRectSize),s={width:this.data.xScaleDomain.length*i,height:7*i,x:a.l,y:a.t};return{width:s.width+a.l+a.r,height:s.height+a.t+a.b,m:a,chart:s}}},{key:"getScales",value:function(){return{x:Q.p().domain(this.data.xScaleDomain).range([0,this.params.chart.width]).padding(this.rectPadding),y:Q.p().domain(this.data.yScaleDomain).range([0,this.params.chart.height]).padding(this.rectPadding),color:Q.s().domain([0,this.data.maxCount]).range([0,1,2,3,4])}}},{key:"getAxis",value:function(){var e=this;return{x:Q.e(this.scales.x).tickFormat((function(t,a){var n=new Date(e.data.xScaleGuide[0]).getUTCMonth();if(0===a)return e.monthStrings[n];var r=new Date(e.data.xScaleGuide[a-1]).getUTCMonth(),i=new Date(e.data.xScaleGuide[a]).getUTCMonth();if(r===i)return"";if(e.isMobile){var s=i-n;return(s>0?s:s+12)%3===0?e.monthStrings[i]:""}return e.monthStrings[i]})).tickSize(0).tickPadding(5),y:Q.c(this.scales.y).tickFormat((function(t){return e.dayOfWeekStrings[parseInt(t)]})).tickValues(["1","3","5"]).tickSize(0).tickPadding(5)}}},{key:"getData",value:function(e){for(var t=e.map((function(e,t){return{count:e.count,time:e.date}})),a=new Date(t[0].time).getUTCDay(),n=t[0].time;a>0;)a--,n-=864e5,t.unshift({count:0,time:n});for(var r=t.map((function(e){return e.time})),i=function(e){return e.map((function(e,t){return Math.floor(t/7)}))}(r),s=[],c=[],o=0;o<=i[i.length-1];o++)s.push(o.toString()),c.push(t[7*o].time);for(var l=function(e){return e.map((function(e){return new Date(e).getUTCDay()}))}(r),h=[],u=0;u<7;u++)h.push(u.toString());var d=Math.max.apply(Math,t.map((function(e){return e.count})));return{x:i,y:l,xScaleDomain:s,xScaleGuide:c,yScaleDomain:h,data:t,maxCount:d}}},{key:"createReferences",value:function(){var e=this.svg.append("g"),t=this.svg.append("g"),a=this.svg.append("g").selectAll("rect").data(this.data.data).enter().append("rect"),n=this.svg.append("g"),r=n.append("rect"),i=n.append("text");return{xAxis:e,yAxis:t,rects:a,tooltipBackground:r,tooltip:i,tooltipText1:i.append("tspan"),tooltipText2:i.append("tspan")}}},{key:"styleSvg",value:function(){this.svg.attr("width",this.params.width).attr("height",this.params.height)}},{key:"styleAxisX",value:function(){this.axis.x(this.references.xAxis),this.references.xAxis.selectAll(".domain").remove(),this.references.xAxis.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).style("font-size","0.875rem").style("font-weight","700"),this.references.xAxis.selectAll("text").style("fill","grey")}},{key:"styleAxisY",value:function(){this.axis.y(this.references.yAxis),this.references.yAxis.selectAll(".domain").remove(),this.references.yAxis.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).style("font-size","0.875rem").style("font-weight","700"),this.references.yAxis.selectAll("text").style("fill","grey")}},{key:"styleRects",value:function(){var e=this;this.references.rects.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).attr("width",this.scales.x.bandwidth()).attr("height",this.scales.y.bandwidth()).attr("x",(function(t,a){return e.scales.x(e.data.x[a].toString())||0})).attr("y",(function(t,a){return e.scales.y(e.data.y[a].toString())||0}))}},{key:"styleTooltip",value:function(){this.references.tooltip.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).attr("text-anchor","middle").attr("alignment-baseline","middle"),this.references.tooltipText1.style("font-weight",700).style("fill","white"),this.references.tooltipText2.style("fill","white"),this.references.tooltipBackground.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).style("fill","#000").style("opacity",.8).attr("rx","5").attr("ry","5")}},{key:"addMouseEventToRects",value:function(){var e=this;this.references.rects.on("mouseover",(function(t){var a,n=parseInt(this.getAttribute("x")||"0"),r=parseInt(this.getAttribute("y")||"0"),i=parseInt(this.getAttribute("width")||"0");parseInt(this.getAttribute("height")||"0");e.references.tooltipText1.text("".concat(t.count," news archived on "));var s=new Date(t.time);e.references.tooltipText2.text("".concat(e.monthStrings[s.getUTCMonth()]," ").concat(s.getUTCDate(),", ").concat(s.getUTCFullYear()));var c=null===(a=e.references.tooltip.node())||void 0===a?void 0:a.getBBox(),o=(null===c||void 0===c?void 0:c.width)||0,l=(null===c||void 0===c?void 0:c.height)||0,h=1.2*o,u=2.5*l,d=n+.5*i,f=r-.5*u,p=-e.params.m.l,m=e.params.width-e.params.m.l,g=-e.params.m.t,x=e.params.height-e.params.m.t;d-.5*h<p?d=p+.5*h:d+.5*h>m&&(d=m-.5*h),f-u<g?f=g+u:f+u>x&&(f=x-.5*u),e.references.tooltip.attr("x",d).attr("y",f),e.references.tooltipBackground.attr("x",d-.5*h).attr("y",f-.4*l-.5*u).attr("width",h).attr("height",u)})).on("mouseleave",(function(t){e.references.tooltip.attr("x",-1e3).attr("y",-1e3),e.references.tooltipBackground.attr("x",-1e3).attr("y",-1e3)}))}},{key:"prepareForAnimation",value:function(){this.references.rects.style("fill",this.getColor(3))}},{key:"animate",value:function(){var e=this;this.references.rects.transition().style("fill","rgba(255, 255, 255, 0)").duration(500),this.references.rects.transition().style("fill",(function(t){return e.getColor(e.scales.color(t.count))})).delay((function(t){return 500+1e3*e.scales.color(t.count)})).duration(800)}},{key:"main",value:function(){this.styleSvg(),this.styleAxisX(),this.styleAxisY(),this.styleRects(),this.styleTooltip(),this.addMouseEventToRects(),this.prepareForAnimation()}}]),e}(),ot=Object(S.a)((function(e){return{containerWrapper:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},container:{width:"100%"}}})),lt=function(e){var t=e.data,a=ot(),n="analytics-docs-by-day",i=He(!1),s=i.isVisible,c=i.isVisibleElRef,o=Object(r.useRef)(null),l=Object(ie.a)(),h=Object(se.a)(C(l)),u=Object(r.useCallback)((function(){o.current=new ct(n,t,h),o.current.main()}),[t,h]);return xe(s,(function(){s&&o.current.animate()})),Object(M.jsx)(oe,{ref:c,children:Object(M.jsx)(be,{title:"News archived each day",content:"Glad to see that people enjoyed their weekends.",cbOnChartElReady:u,isVisible:s,children:Object(M.jsx)("div",{className:a.containerWrapper,children:Object(M.jsx)("div",{id:n,className:a.container,children:" "})})})})},ht=function(e){var t=[],a={};return e.forEach((function(e,n,r){for(var i=n-1,s=0;i>=0;){if(void 0!==a[i]){s+=a[i];break}s+=r[i],i--}a[n-1]=s,t.push(s)})),t},ut=function(){function e(t,a){Object(K.a)(this,e),this.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.id=void 0,this.colors={getAreaColor:function(e){var t=["#003f5c","#374c80","#7a5195","#bc5090","#ef5675","#ff764a","#ffa600"];return t[e>t.length-1?0:e]},textColor:"#555",domainColor:"red"},this.svg=void 0,this.dimensions=void 0,this.scales=void 0,this.axes=void 0,this.references=void 0,this.data=void 0,this.shapes=void 0,this.id=t,this.svg=Q.t("#".concat(t)).append("svg"),this.data=this.getData(a,!0),this.dimensions=this.getDimension(),this.scales=this.getScales(),this.references={axisX:null,axisY:null,axisYAreaTitle:null,axisXHover:null,axisYHoverText:null,axisYHoverLines:null,paths:null,detectionRects:null},this.shapes=this.getShapes(),this.axes=this.getAxes()}return Object(Z.a)(e,[{key:"getData",value:function(e,t){var a;if(t){var n=e.quantity.map((function(e){var t=e.length,a=e.reduce((function(e,t){return e+t}));return e.map((function(e){return 0===a?1/t:e/a}))}));e=Object.assign({},e,{quantity:n}),a=1}else{var r=e.quantity.map((function(e){return e.reduce((function(e,t){return e+t}))}));a=Math.max.apply(Math,r)}var i=e.quantity.map((function(e){var t={};return e.forEach((function(e,a){return t["".concat(a)]=e})),t}));return Object(Ke.a)(Object(Ke.a)({},e),{},{stackData:i,maxQuantity:a})}},{key:"getDimension",value:function(){var e=document.getElementById(this.id),t=e?e.getBoundingClientRect().width:0,a=e?e.getBoundingClientRect().height:0,n={t:10,r:150,b:50,l:60};return{svgWidth:t,svgHeight:a,m:n,chartWidth:t-n.l-n.r,chartHeight:a-n.t-n.b}}},{key:"getScales",value:function(){var e=[this.dimensions.m.l,this.dimensions.m.l+this.dimensions.chartWidth];return{x:Q.q().domain([0,this.data.series.length-1]).range(e),y:Q.q().domain([0,this.data.maxQuantity]).range([this.dimensions.chartHeight+this.dimensions.m.t,this.dimensions.m.t]),xBand:Q.p().domain(this.data.quantity.map((function(e,t){return t.toString()}))).range(e),xPoint:Q.r().domain(this.data.quantity.map((function(e,t){return"".concat(t)}))).range(e)}}},{key:"getAxes",value:function(){var e=this,t=this.dimensions.chartWidth>=300?[0,Math.floor(.25*this.data.series.length),Math.floor(.5*this.data.series.length),Math.floor(.75*this.data.series.length),this.data.series.length-1].map((function(e){return"".concat(e)})):[0,this.data.series.length-1].map((function(e){return"".concat(e)})),a=Q.b(this.scales.xBand).tickValues(t).tickFormat((function(t,a){var n=e.data.series[parseInt("".concat(t))],r=new Date(n);return"".concat(r.getUTCDate()," ").concat(e.monthStrings[r.getUTCMonth()],", ").concat(r.getUTCFullYear())})),n=Q.c(this.scales.y).tickValues([0,this.data.maxQuantity]).tickFormat((function(e){return["0%","100%"][parseInt("".concat(e))]})),r=this.data.quantity[this.data.quantity.length-1].slice(),i=ht(r);i.forEach((function(e,t,a){return a[t]=e+.5*r[t]}));var s=Q.d(this.scales.y).tickValues(i).tickFormat((function(t,a){return e.data.order[parseInt("".concat(a))]})),c=Q.b(this.scales.xPoint).tickValues([]).tickFormat((function(t,a){var n=e.data.series[parseInt("".concat(t))],r=new Date(n);return"".concat(r.getUTCDate()," ").concat(e.monthStrings[r.getUTCMonth()],", ").concat(r.getUTCFullYear())}));return[a,n,s,c].forEach((function(e){e.tickPadding(10),e.tickSize(0)})),{x:a,y:n,yAreaTitle:s,xHover:c,yHoverText:Q.c(this.scales.y).tickValues([]),yHoverLines:Q.c(this.scales.y).tickValues([])}}},{key:"initAxes",value:function(){var e=this;this.references.axisX=this.svg.append("g"),this.references.axisY=this.svg.append("g"),this.references.axisYAreaTitle=this.svg.append("g"),this.references.axisXHover=this.svg.append("g"),this.references.axisYHoverText=this.svg.append("g"),this.references.axisYHoverLines=this.svg.append("g"),this.axes.x(this.references.axisX),this.axes.y(this.references.axisY),this.axes.yAreaTitle(this.references.axisYAreaTitle),this.axes.xHover(this.references.axisXHover),this.axes.yHoverText(this.references.axisYHoverText),this.axes.yHoverLines(this.references.axisYHoverLines),this.references.axisX.style("transform","translate(0px, ".concat(this.dimensions.m.t+this.dimensions.chartHeight,"px)")),this.references.axisY.style("transform","translate(".concat(this.dimensions.m.l,"px, 0px)")),this.references.axisYAreaTitle.style("transform","translate(".concat(this.dimensions.m.l+this.dimensions.chartWidth,"px, 0px)")),this.references.axisXHover.style("transform","translate(0px, ".concat(this.dimensions.m.t+this.dimensions.chartHeight,"px)")),this.references.axisYHoverText.style("transform","translate(".concat(this.dimensions.m.l,"px, 0px)")),this.references.axisYHoverLines.style("transform","translate(".concat(this.dimensions.m.l,"px, 0px)"));var t=[this.references.axisX,this.references.axisY,this.references.axisYAreaTitle,this.references.axisXHover,this.references.axisYHoverText,this.references.axisYHoverLines];t.forEach((function(t){t.selectAll("text").style("font-size","0.875rem").style("font-weight",700).style("fill",e.colors.textColor)})),t.forEach((function(e){e.selectAll(".domain").remove()})),t.forEach((function(e){e.style("opacity",1)})),this.references.axisYAreaTitle.selectAll("text").style("fill",(function(t,a){return e.colors.getAreaColor(a)})).style("text-transform","uppercase")}},{key:"getShapes",value:function(){var e=this,t=this.data.order.map((function(e,t){return"".concat(t)}));return{stack:Q.u().keys(t).order(Q.w).offset(Q.v),getArea:function(t){return Q.a().x((function(t,a){return e.scales.xPoint("".concat(a))||0})).y0((function(a){return e.scales.y(a[0]+e.data.maxQuantity*(1-t))})).y1((function(a){return e.scales.y(a[1]+e.data.maxQuantity*(1-t))}))}}}},{key:"initSvg",value:function(){this.svg.attr("width",this.dimensions.svgWidth).attr("height",this.dimensions.svgHeight)}},{key:"initLineChart",value:function(){var e=this;this.references.paths=this.svg.append("g").selectAll("path").data(this.shapes.stack(this.data.stackData)).enter().append("path").attr("d",(function(t){return e.shapes.getArea(0)(t)})).attr("fill",(function(t,a){return e.colors.getAreaColor(a)})).style("transform","translateX(".concat(this.scales.xBand.bandwidth(),")"))}},{key:"initDetectionRects",value:function(){var e=this;this.references.detectionRects=this.svg.append("g").selectAll("rect").data(this.data.quantity).enter().append("rect").attr("x",(function(t,a){return(e.scales.xPoint(a.toString())||0)-.5*e.scales.xBand.bandwidth()})).attr("y",this.dimensions.m.t).attr("width",this.scales.xBand.bandwidth).attr("height",this.dimensions.chartHeight).style("fill","#fff").style("opacity",0)}},{key:"animate",value:function(){var e=this;this.references.paths&&(this.references.paths.transition().delay((function(e,t){return 100*t})).duration(1200).attrTween("d",(function(t){return function(a){return e.shapes.getArea(a)(t)||""}})).ease(Q.f),setTimeout((function(){e.toggleAllAxes(!0)}),200*this.data.order.length+1e3+200))}},{key:"toggleAllAxes",value:function(e){var t=e?1:0;[this.references.axisYAreaTitle,this.references.axisX,this.references.axisY].forEach((function(e){null===e||void 0===e||e.transition().duration(500).style("opacity",t)}))}},{key:"appendMouseEventToSvg",value:function(){var e=this;this.svg.on("mouseover",(function(){e.toggleAllAxes(!0)})).on("mouseleave",(function(){e.toggleAllAxes(!1)}))}},{key:"appendMouseEventToDetectionRects",value:function(){var e,t=this,a=this,n=function(e,n){if(void 0!==e&&void 0!==n){var r=ht(e),i=r.map((function(t,a){return t+.5*e[a]}));t.axes.yHoverText.tickValues(i).tickFormat((function(t,a){return"".concat((100*e[a]).toFixed(2),"%")})),t.axes.yHoverLines.tickValues(r.slice(1)).tickFormat((function(){return""})).tickSizeInner(-a.dimensions.chartWidth),t.axes.xHover.tickValues(["".concat(n)]),t.references.axisXHover&&t.references.axisYHoverText&&t.references.axisYHoverLines&&(t.axes.xHover(t.references.axisXHover),t.axes.yHoverText(t.references.axisYHoverText),t.axes.yHoverLines(t.references.axisYHoverLines),t.references.axisYHoverLines.selectAll("line").style("stroke","rgba(255,255,255,0.6)").style("stroke-width",2),t.references.axisYHoverText.selectAll("text").style("font-size","0.875rem").style("font-weight","700").style("fill",(function(e,a){return t.colors.getAreaColor(a)})),t.references.axisYHoverText.select(".domain").remove(),t.references.axisYHoverText.selectAll("line").style("stroke",(function(e,a){return t.colors.getAreaColor(a)})).style("stroke-width",5),t.references.axisXHover.selectAll("text").style("font-size","0.875rem").style("font-weight","700").style("fill",t.colors.textColor),function(){var e;if(t.references.axisXHover){var a=null===(e=t.references.axisXHover.select("text").node())||void 0===e?void 0:e.getBBox();a&&t.references.axisXHover.selectAll("g.tick").insert("rect",":first-child").attr("width",1.2*a.width).attr("height",a.height).attr("x",a.x-.1*a.width).attr("y",a.y).style("fill","#fefefe")}}())}else[t.axes.xHover,t.axes.yHoverText,t.axes.yHoverLines].forEach((function(e){e.tickValues([])})),t.references.axisXHover&&t.references.axisYHoverText&&t.references.axisYHoverLines&&(t.axes.xHover(t.references.axisXHover),t.axes.yHoverText(t.references.axisYHoverText),t.axes.yHoverLines(t.references.axisYHoverLines));t.references.axisXHover&&t.references.axisYHoverText&&t.references.axisYHoverLines&&[t.references.axisXHover,t.references.axisYHoverText,t.references.axisYHoverLines].forEach((function(e){e.select(".domain").remove()}))};null===(e=this.references.detectionRects)||void 0===e||e.on("mouseover",(function(e,t){Q.t(this).style("opacity",.3),n(e,t)})).on("mouseleave",(function(e,t){Q.t(this).style("opacity",0),n()}))}},{key:"main",value:function(){this.initSvg(),this.initLineChart(),this.initAxes(),this.initDetectionRects(),this.appendMouseEventToDetectionRects()}}]),e}(),dt=Object(S.a)((function(e){return{containerWrapper:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},container:{width:"100%",height:"80%"}}})),ft=function(e){var t=e.data,a=dt(),n="analytics-docs-by-day-and-category",i=He(!1),s=i.isVisible,c=i.isVisibleElRef,o=Object(r.useRef)(null),l=Object(r.useCallback)((function(){o.current=new ut(n,t),o.current.main()}),[t]);return xe(s,(function(){s&&o.current.animate()})),Object(M.jsx)(oe,{ref:c,children:Object(M.jsx)(be,{title:["News","archived","by","day & category"],content:"Art made of data.",cbOnChartElReady:l,isVisible:s,children:Object(M.jsx)("div",{className:a.containerWrapper,children:Object(M.jsx)("div",{id:n,className:a.container,children:" "})})})})},pt=a(469),mt=a(443),gt=a(444),xt=a(445),vt="analytics-slow-notification-showed",bt=function(){var e=Object(r.useState)((function(){var e=parseInt(localStorage.getItem(vt)||"0"),t=isNaN(e)?0:e;return Date.now()-t>864e5})),t=Object(J.a)(e,2),a=t[0],n=t[1];return{isOpen:a,handleClose:function(){n(!1),localStorage.setItem(vt,"".concat(Date.now()))}}},jt=a(244),yt=a(441),Ot=["children","onClose","closeDisabled"],wt=Object(S.a)((function(e){return{root:{margin:"0 ".concat(48+e.spacing(2),"px 0 0"),padding:e.spacing(2,3)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),kt=function(e){var t=e.children,a=e.onClose,n=e.closeDisabled,r=Object(jt.a)(e,Ot),i=wt();return Object(M.jsxs)(yt.a,Object(Ke.a)(Object(Ke.a)({disableTypography:!0,className:i.root},r),{},{children:[Object(M.jsx)(le.a,{variant:"h6",children:t}),a?Object(M.jsx)(W.a,{"aria-label":"close",className:i.closeButton,onClick:a,disabled:n,children:Object(M.jsx)(Y.a,{})}):null]}))},Ct=Object(S.a)((function(e){return{root:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,"& h5":{"& strong":{color:e.palette.warning.main}}},message:{"& ol":{margin:0},"& li":{margin:e.spacing(2,0)}}}})),Dt=function(){var e=Ct(),t=bt(),a=t.isOpen,n=t.handleClose;return Object(M.jsxs)(pt.a,{open:a,onClose:function(){return!1},classes:{paper:e.root},children:[Object(M.jsx)(kt,{onClose:n,children:Object(M.jsxs)(le.a,{variant:"h6",component:"h5",children:["You might ask, why ",Object(M.jsx)("strong",{children:"this page takes very long"})," to load?"]})}),Object(M.jsx)(mt.a,{children:Object(M.jsx)("div",{className:e.message,children:Object(M.jsxs)("ol",{children:[Object(M.jsx)(le.a,{variant:"body1",component:"li",children:"Initially this report functionality had a in memory cache mechanism built on server. The server restarts once everyday, and the report get generated and cached in memory shortly after the server is rebooted."}),Object(M.jsx)(le.a,{variant:"body1",component:"li",children:"In the recent upgrade of this app, the database used to generate this report has been migrated to Elasticsearch from MongoDB, and ES has built in cache mechanism for frequently requested data. However this app is running on a 1 core 2GB memory server, and Elasticsearch is hungry for memory. The memory used to cache this query can be reclaimed much sooner than if this app was deployed on a better server."})]})})}),Object(M.jsx)(gt.a,{children:Object(M.jsx)(xt.a,{color:"secondary",variant:"contained",disableElevation:!0,onClick:n,children:"Close"})})]})},St=Object(S.a)((function(e){return{root:{width:"100vw",maxWidth:"100%",overflowX:"hidden"},centering:{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}}})),At=function(){var e=St(),t=Pe(),a=Object(r.useMemo)((function(){return!t.isLoading&&!t.isError&&!!t.data}),[t.data,t.isError,t.isLoading]),n=nt(a).bgColorChangeRef;return Object(M.jsxs)("div",{className:e.root,children:[Object(M.jsx)(Dt,{}),t.isLoading&&Object(M.jsx)(oe,{children:Object(M.jsx)("div",{className:e.centering,children:Object(M.jsx)(_.a,{color:"secondary"})})}),!t.isLoading&&t.isError&&Object(M.jsx)(A.a,{my:2,width:"100%",children:Object(M.jsx)(Ge,{icon:Object(M.jsx)(Je.a,{}),title:"Server Error",text:"Please try again later"})}),!t.isLoading&&!t.isError&&!!t.data&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(tt,{totalDocuments:t.data.summary.totalCount,earliestDocumentDate:t.data.summary.firstDocDate,latestDocumentDate:t.data.summary.lastDocDate}),Object(M.jsx)("div",{ref:n}),Object(M.jsx)(st,{data:t.data.countByCategory}),Object(M.jsx)(lt,{data:t.data.docsCountByDay}),Object(M.jsx)(ft,{data:t.data.docCountByDayAndCategory}),Object(M.jsx)(Ee,{data:t.data.wordCloud})]})]})},Tt=function(){function e(t,a,n,r,i){var s=this;Object(K.a)(this,e),this.color={red:"#ef5350",transparent:"rgba(0,0,0,0)",getMapColor:function(e){return"rgba(55, 76, 128, ".concat(e.toFixed(1),")")},grey:"#eee",mapStrokeNormal:"#ccc",mapStrokeHoverHighlight:"#222",case:"#ffb140",death:"#f16a67",recovered:"#78c37b",timeBarHighlight:"#7a5195",timeBarNormal:"#af96bf",timeBarLight:"#e4dbe8"},this.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.getStrokeWidth=function(){return s.dimension.svgWidth>=1e3?1:.5},this.animations={zoomIn:{delay:0,duration:3e3},changeMapColor:{delay:3e3,duration:1e3},timeLapse:{delay:4e3},timeLapseGap:500},this.id=void 0,this.dimension=void 0,this.themeColor=void 0,this.data=void 0,this.references=void 0,this.scales=void 0,this.state=void 0,this.timeLapse=void 0,this.id=t,this.dimension=this.getDimension(a,n),this.themeColor=r,this.data={aggregate:null,case:i,caseMax:0},this.references={svg:null,map:{paths:null,pathHighlightGroup:null,pathHighlight:null},tooltip:null,timeControl:null},this.scales={timeBarXScale:Q.p()},this.state={time:0,timeMax:0,tooltipData:{inputX:-1e3,inputXSecondary:-1e3,inputY:-1e3,inputYSecondary:-1e3,data:{country:"",case:void 0}}},this.timeLapse={timeoutID:null}}return Object(Z.a)(e,[{key:"getDimension",value:function(e,t){var a={t:0,r:10,b:75,l:10};return{svgWidth:e,svgHeight:t,m:a,mapX:a.l,mapY:a.t,mapWidth:e-a.l-a.r,mapHeight:t-a.t-a.b}}},{key:"getData",value:function(){var e=Object(Re.a)(Le.a.mark((function e(){var t,n,r,i=this;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.e(4).then(a.bind(null,478));case 3:t=e.sent,n=0,(r=t.default).features.forEach((function(e){var t;e.properties&&(e.properties.case=i.data.case.countries[e.properties.name]?Object.assign({},i.data.case.countries[e.properties.name]):null,null===(t=i.data.case.countries[e.properties.name])||void 0===t||t.cases.forEach((function(e){e>n&&(n=e)})))})),this.data.aggregate=r,this.data.caseMax=n,this.state.timeMax=this.data.case.series.length-1,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"initSvg",value:function(){this.references.svg=Q.t("#".concat(this.id)).append("svg").attr("width",this.dimension.svgWidth).attr("height",this.dimension.svgHeight)}},{key:"initTooltip",value:function(){if(this.references.svg){var e=this.references.svg.append("g"),t=e.append("rect"),a=e.append("text"),n=a.append("tspan"),r=a.append("tspan"),i=a.append("tspan"),s=a.append("tspan"),c=a.append("tspan"),o=a.append("tspan"),l=a.append("tspan"),h=a.append("tspan"),u=e.append("path"),d=e.append("path"),f=e.append("path"),p=e.append("g"),m=p.append("rect"),g=p.append("rect"),x=p.append("rect");a.style("font-weight",700).style("font-size","0.875rem").style("fill","#fff").attr("text-anchor","middle"),s.style("fill",this.color.case),o.style("fill",this.color.death),h.style("fill",this.color.recovered),t.style("fill","rgba(0,0,0,0.8)").attr("rx","5px"),[u,d,f].forEach((function(e){e.style("stroke-width",2).style("fill","none")})),u.style("stroke",this.color.case),d.style("stroke",this.color.death),f.style("stroke",this.color.recovered),m.style("fill",this.color.case),g.style("fill",this.color.death),x.style("fill",this.color.recovered),this.references.tooltip={bg:t,tooltipGroup:e,tooltip:a,tspanCountry:n,tspanDate:r,tspanCaseAccumulative:i,tspanDeathAccumulative:c,tspanRecoveredAccumulative:l,tspanCaseNew:s,tspanDeathNew:o,tspanRecoveredNew:h,caseLineChart:u,deathLineChart:d,recoveredLineChart:f,stackBarChartCase:m,stackBarChartDeath:g,stackBarChartRecovered:x},this.updateTooltip()}}},{key:"updateTooltip",value:function(){var e=this,t=this.state.tooltipData,a=t.inputX,n=t.inputXSecondary,r=t.inputY,i=t.inputYSecondary,s=t.data;if(this.references.tooltip){var c=this.state.time,o=function(e){return e>=0?" (+".concat(e,")"):" (".concat(e,")")};!function(){if(e.references.tooltip){var t=new Date(e.data.case.series[c]),a="".concat(t.getDate()," ").concat(e.monthStrings[t.getMonth()],", ").concat(t.getFullYear()),n="Unknown";e.references.tooltip.tspanCountry.text(s.country),e.references.tooltip.tspanDate.text(a),s.case?(e.references.tooltip.tspanCaseAccumulative.text("Confirmed: ".concat(s.case.cases[c])),e.references.tooltip.tspanCaseNew.text(o(0===c?0:s.case.cases[c]-s.case.cases[c-1])),e.references.tooltip.tspanDeathAccumulative.text("Death: ".concat(s.case.deaths[c])),e.references.tooltip.tspanDeathNew.text(o(0===c?0:s.case.deaths[c]-s.case.deaths[c-1])),e.references.tooltip.tspanRecoveredAccumulative.text("Recovered: ".concat(s.case.recovered[c])),e.references.tooltip.tspanRecoveredNew.text(o(0===c?0:s.case.recovered[c]-s.case.recovered[c-1]))):(e.references.tooltip.tspanCaseAccumulative.text("Confirmed: ".concat(n)),e.references.tooltip.tspanCaseNew.text(""),e.references.tooltip.tspanDeathAccumulative.text("Death: ".concat(n)),e.references.tooltip.tspanDeathNew.text(""),e.references.tooltip.tspanRecoveredAccumulative.text("Recovered: ".concat(n)),e.references.tooltip.tspanRecoveredNew.text(""))}}();var l,h,u,d,f,p,m=function(){var t;if(e.references.tooltip){var s=null===(t=e.references.tooltip.tooltip.node())||void 0===t?void 0:t.getBBox();if(s){var c,o,l=.3,h=s.width,u=s.height,d=1.3*Math.max(150,h),f=1.3*(u+60+15+10),p=a-d-5,m=Math.max(e.dimension.m.l,p),g=r;m+d>a?(o=n+5)+d>e.dimension.svgWidth?(c=(o=m)+.5*d,g=i):c=o+.5*d:c=(o=m)+.5*d;var x=g-l/2*s.height;x=Math.min(x,e.dimension.svgHeight-f);var v=(x=Math.max(x,0))+.15*f+u,b=v+60+10;return{tooltipX:o,tooltipY:x,tooltipWidth:d,tooltipHeight:f,textX:c,textY:x+l/2*s.height,chartX:c-75,chartWidth:150,lineChartStartY:v,lineChartHeight:20,stackBarChartY:b,stackBarChartHeight:15}}}}();m&&(l=m.textX,h=m.textY,u=m.tooltipX,d=m.tooltipY,f=m.tooltipWidth,p=m.tooltipHeight,e.references.tooltip&&(e.references.tooltip.tooltip.attr("x",l).attr("y",h),e.references.tooltip.tspanCountry.attr("x",l).attr("dy","0.875em"),e.references.tooltip.tspanDate.attr("x",l).attr("dy","1em"),e.references.tooltip.tspanCaseAccumulative.attr("x",l).attr("dy","1em"),e.references.tooltip.tspanDeathAccumulative.attr("x",l).attr("dy","1em"),e.references.tooltip.tspanRecoveredAccumulative.attr("x",l).attr("dy","1em"),e.references.tooltip.bg.attr("x",u).attr("y",d).attr("width",f).attr("height",p)),function(t,a,n,r){if(e.references.tooltip){var i=function(t,n,r,i,s){var o=t.map((function(e,t){return[t,e]})),l=Q.q().domain([0,e.data.case.series.length-1]).range([0,a]),h=Q.q().domain([0,r]).range([20,0]);n.datum(o).attr("d",Q.n().x((function(e){return l(e[0])})).y((function(e){return h(e[1])})).defined((function(e,t){return t<=c}))).style("transform","translate(".concat(i,"px, ").concat(s,"px)"))};if(e.state.tooltipData.data.case){var s=Math.max.apply(Math,e.state.tooltipData.data.case.cases);i(e.state.tooltipData.data.case.cases,e.references.tooltip.caseLineChart,s,t,n),i(e.state.tooltipData.data.case.deaths,e.references.tooltip.deathLineChart,s,t,n+r),i(e.state.tooltipData.data.case.recovered,e.references.tooltip.recoveredLineChart,s,t,n+2*r)}else{var o=[];i(o,e.references.tooltip.caseLineChart,0,t,n),i(o,e.references.tooltip.deathLineChart,0,t,n+r),i(o,e.references.tooltip.recoveredLineChart,0,t,n+2*r)}}}(m.chartX,m.chartWidth,m.lineChartStartY,m.lineChartHeight),function(t,a,n,r){if(e.references.tooltip)if(e.state.tooltipData.data.case){var i=e.state.tooltipData.data.case.cases[c],s=e.state.tooltipData.data.case.deaths[c],o=e.state.tooltipData.data.case.recovered[c],l=0===i?0:s/i*a,h=0===i?0:o/i*a;e.references.tooltip.stackBarChartCase.attr("x",t).attr("width",(function(){return 0===i?0:a})).attr("height",r).attr("y",n),e.references.tooltip.stackBarChartDeath.attr("x",t+a-l).attr("width",l).attr("height",r).attr("y",n),e.references.tooltip.stackBarChartRecovered.attr("x",t).attr("width",h).attr("height",r).attr("y",n)}else[e.references.tooltip.stackBarChartCase,e.references.tooltip.stackBarChartDeath,e.references.tooltip.stackBarChartRecovered].forEach((function(e){e.attr("x",t).attr("width",0).attr("height",0).attr("y",n)}))}(m.chartX,m.chartWidth,m.stackBarChartY,m.stackBarChartHeight))}}},{key:"initMap",value:function(){if(this.data.aggregate&&this.references.svg){var e=Q.j().fitExtent([[this.dimension.mapX,this.dimension.mapY],[this.dimension.mapWidth,this.dimension.mapHeight]],this.data.aggregate);this.references.map.paths=this.references.svg.append("g").selectAll("path").data(this.data.aggregate.features).enter().append("path").attr("fill",this.color.grey).attr("d",Q.k().projection(e)).style("stroke",this.color.mapStrokeNormal).style("stroke-width",this.getStrokeWidth()).style("opacity",0).style("transform","scale(5)").style("transform-origin","50% 50%"),this.references.map.pathHighlightGroup=this.references.svg.append("g")}}},{key:"mapZoomIn",value:function(){this.references.map.paths&&(this.references.map.paths.transition().delay((function(e,t){return t%10*200})).duration(1e3).style("opacity",1).style("transform","scale(1)"),this.references.map.paths.transition().delay(this.animations.changeMapColor.delay).duration(this.animations.changeMapColor.duration).style("fill",this.color.getMapColor(0)))}},{key:"initTimeControl",value:function(){var e=this;if(this.references.svg){var t=this.dimension.svgHeight-this.dimension.m.b,a=.2*this.dimension.svgWidth,n=t+16+4,r=n+10+4,i=this.data.case.series;this.scales.timeBarXScale=Q.p().domain(i).range([a,.8*this.dimension.svgWidth]);var s=this.references.svg.append("g"),c=s.append("text").attr("x",a).attr("y",t+16).attr("font-size","".concat(16,"px")).attr("font-weight",700).style("fill",this.color.timeBarHighlight),o=[0,1].map((function(t){var a=s.append("g").selectAll("rect").data(i).enter().append("rect").style("cursor","pointer").attr("y",n).attr("x",(function(t){return"".concat(e.scales.timeBarXScale(t))})).attr("width",e.scales.timeBarXScale.bandwidth()).attr("height",10).style("opacity",0);return a.transition().delay(2e3).duration(1e3).style("opacity",1),a})),l=Object(J.a)(o,2),h=l[0],u=l[1];h.style("fill",this.color.timeBarLight).style("stroke","#fff").style("stroke-width",1),u.style("fill",this.color.transparent);var d=s.append("g"),f=[{y:r+16,text:"Pause"},{y:r+32,text:"Start Over"}].map((function(t){var n=d.append("text").style("cursor","pointer").style("opacity","0").style("fill",e.color.timeBarNormal).attr("font-weight",700).attr("x",a).attr("y",t.y).text(t.text);return n.transition().delay(e.animations.timeLapse.delay).duration(1e3).style("opacity",1),n.on("mouseenter",(function(){n.style("fill",e.color.timeBarHighlight)})).on("mouseleave",(function(){n.style("fill",e.color.timeBarNormal)})),n})),p=Object(J.a)(f,2),m=p[0],g=p[1];this.references.timeControl={group:s,dateText:c,timeBarBg:h,timeBar:u,playButton:m,startOverButton:g}}}},{key:"updateTimeControl",value:function(){var e=this;if(this.references.timeControl){var t=this.state.time,a=new Date(this.data.case.series[t]);this.references.timeControl.dateText.text("".concat(a.getDate()," ").concat(this.monthStrings[a.getMonth()],", ").concat(a.getFullYear())),this.references.timeControl.timeBar.style("fill",(function(t,a){return a<=e.state.time?e.color.timeBarNormal:e.color.transparent})),this.references.timeControl.timeBar.filter((function(t,a){return a===e.state.time})).transition().duration(this.animations.timeLapseGap).attrTween("width",(function(t){return function(t){return"".concat(t*e.scales.timeBarXScale.bandwidth(),"px")}})).ease(Q.h)}}},{key:"updateMap",value:function(){var e=this,t=Math.log(this.data.caseMax),a=this.color.getMapColor(0);this.references.map.paths&&this.references.map.paths.style("fill",(function(n){if(n.properties.case){var r=n.properties.case.cases[e.state.time];return r<1?a:e.color.getMapColor(Math.log(r)/t)}return a}))}},{key:"setTimeState",value:function(e){this.state.time=e,this.updateMap(),this.updateTimeControl(),this.updateTooltip()}},{key:"setToolTipDataState",value:function(e,t,a,n,r,i){var s=null;i&&(s={cases:i.cases.slice(),deaths:i.deaths.slice(),recovered:i.recovered.slice()}),this.state.tooltipData=Object.assign(this.state.tooltipData,{inputX:e,inputXSecondary:t,inputY:a,inputYSecondary:n,data:{country:r,case:s}})}},{key:"startTimeLapse",value:function(e){var t,a=this,n=function e(){a.state.time<a.state.timeMax?(a.setTimeState(a.state.time+1),a.timeLapse.timeoutID=window.setTimeout(e,a.animations.timeLapseGap)):a.stopTimeLapse()};null===(t=this.references.timeControl)||void 0===t||t.playButton.text("Pause"),e?this.timeLapse.timeoutID=window.setTimeout((function(){return n()}),this.animations.timeLapseGap):n()}},{key:"stopTimeLapse",value:function(){var e;null===(e=this.references.timeControl)||void 0===e||e.playButton.text("Start"),null!==this.timeLapse.timeoutID&&(window.clearTimeout(this.timeLapse.timeoutID),this.timeLapse.timeoutID=null)}},{key:"appendTimeBarMouseEvent",value:function(){if(this.references.timeControl){var e=this;this.references.timeControl.timeBar.on("mouseenter",(function(){Q.t(this).style("fill",e.color.timeBarHighlight)})).on("mouseleave",(function(t,a){Q.t(this).style("fill",parseFloat(a)<=e.state.time?e.color.timeBarNormal:e.color.transparent)})).on("click",(function(t,a){e.stopTimeLapse(),e.setTimeState(parseFloat(a))}))}}},{key:"appendTimeControlButtonEvent",value:function(){var e=this;this.references.timeControl&&(this.references.timeControl.playButton.on("click",(function(){null!==e.timeLapse.timeoutID?e.stopTimeLapse():e.startTimeLapse()})),this.references.timeControl.startOverButton.on("click",(function(){e.stopTimeLapse(),e.setTimeState(0),e.startTimeLapse(!0)})))}},{key:"appendMapPathMouseEvent",value:function(){if(this.references.map.paths){var e=this,t=function(){var t;e.setToolTipDataState(-1e3,-1e3,-1e3,-1e3,"",null),e.updateTooltip(),null===(t=e.references.map.pathHighlight)||void 0===t||t.remove()};this.references.map.paths.on("mouseenter",(function(a){t();var n=this.getBBox(),r=n.x,i=n.y,s=n.x+n.width,c=n.y+n.height;a.properties.case?e.setToolTipDataState(r,s,i,c,a.properties.name,Object(Ke.a)({},a.properties.case)):e.setToolTipDataState(r,s,i,c,a.properties.name,null),e.updateTooltip();var o=Q.t(this).clone().remove();if(e.references.map.pathHighlightGroup){var l=e.references.map.pathHighlightGroup.append((function(){return o.node()}));l&&(e.references.map.pathHighlight=l,l.style("stroke",e.color.mapStrokeHoverHighlight).style("stroke-width",2*e.getStrokeWidth()).style("fill",e.color.transparent),l.on("mouseleave",(function(){t()})))}}))}}},{key:"main",value:function(){var e=Object(Re.a)(Le.a.mark((function e(){var t=this;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getData();case 3:this.initSvg(),this.initMap(),this.initTimeControl(),this.initTooltip(),this.mapZoomIn(),this.appendMapPathMouseEvent(),this.appendTimeBarMouseEvent(),setTimeout((function(){t.startTimeLapse(),t.appendTimeControlButtonEvent()}),this.animations.timeLapse.delay),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Nt=a(144),Bt=a.n(Nt),Ht="topic-covid19-map",Mt=P()((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"}}})),Et=function(){var e=Mt(),t=Bt()(),n=Object(r.useRef)(null),i=window.innerHeight-240;return Object(r.useEffect)((function(){a.e(3).then(a.bind(null,477)).then((function(e){n.current&&new Tt(Ht,n.current.getBoundingClientRect().width,n.current.getBoundingClientRect().height,t.palette.secondary.main,e.default).main()}))}),[]),Object(M.jsx)("div",{className:e.root,ref:n,style:{height:"".concat(i,"px")},children:Object(M.jsx)("div",{id:Ht})})},It=P()((function(e){return{root:Object(re.a)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:e.spacing(2,0,10,0)},e.breakpoints.down("sm"),{padding:e.spacing(2,0,20,0)}),widthWrapper:Object(re.a)({width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},e.breakpoints.down("sm"),{width:"100%"}),heading:{fontFamily:"Open Sans,sans-serif",fontSize:"1.25rem",textTransform:"capitalize",color:e.palette.primary.main,margin:e.spacing(0,0,2,0)}}})),Lt=function(){var e=It();return Object(M.jsxs)("div",{className:e.root,children:[Object(M.jsx)("div",{className:e.widthWrapper,children:Object(M.jsx)("h1",{className:e.heading,children:"The spread of COVID-19"})}),Object(M.jsx)(Et,{}),Object(M.jsx)("div",{className:e.widthWrapper,children:Object(M.jsx)(A.a,{mx:5,children:Object(M.jsxs)("p",{children:[Object(M.jsx)("span",{children:"Data retrieved from "}),Object(M.jsx)("span",{children:Object(M.jsx)(N.a,{href:"https://graphics.reuters.com/CHINA-HEALTH-MAP/0100B59S39E/index.html",target:"_blank",rel:"noopener noreferrer",style:{color:"#f35c19"},children:"Reuters.com"})}),Object(M.jsx)("span",{children:", not updated in realtime."})]})})})]})},Rt=a(43),Wt=a(29),Ft=a(447),Yt=a(449),Xt=a(470);var qt,Pt=function(e){var t=Date.now();return function(){var a=Date.now();return a-t>e&&(t=a,!0)}};!function(e){e.FIXED="FIXED",e.RELATIVE="RELATIVE"}(qt||(qt={}));var zt,Vt,Ut=function(e){var t,a=Object(r.useState)(qt.RELATIVE),n=Object(J.a)(a,2),i=n[0],s=n[1],c=Pt(10);function o(){var t=window.scrollY;if(0!==t||i===qt.RELATIVE){if(e.current){var a=e.current.offsetTop+e.current.offsetHeight;c()&&(t>=a&&i!==qt.FIXED?s(qt.FIXED):t<a&&i!==qt.RELATIVE&&s(qt.RELATIVE))}}else s(qt.RELATIVE)}return Object(r.useEffect)((function(){return document.addEventListener("scroll",o),function(){document.removeEventListener("scroll",o)}}),[i,e]),{style:(t=i,Object(Ke.a)({},{FIXED:{position:"fixed",top:0,left:0,width:"100%"},RELATIVE:{position:"relative",width:"100%"}}[t])),isFixed:i===qt.FIXED}},Gt=function(e){var t=Ut(e.anchorRef),a=t.style,n=t.isFixed,i=Object(r.useRef)(null);return Object(M.jsxs)(M.Fragment,{children:[n&&i.current&&Object(M.jsx)("div",{style:{width:"".concat(i.current.offsetWidth,"px"),height:"".concat(i.current.offsetHeight,"px")}}),Object(M.jsx)("div",{style:Object(Ke.a)(Object(Ke.a)({},a),{},{zIndex:e.zIndex?e.zIndex:"auto"}),ref:i,children:e.children})]})},_t=a(233),Jt=a.n(_t),Kt=a(232),Zt=a.n(Kt),Qt=a(231),$t=a.n(Qt),ea=a(450),ta=a(461),aa=a(448),na=a(98),ra=a.n(na),ia=function(){var e=Object(Wt.h)();return Object(r.useMemo)((function(){if(e.pathname!==qe.root.path)return null;var t=na.parse(e.search);return t.category?Array.isArray(t.category)?t.category[0]:t.category:null}),[e.pathname,e.search])},sa=Object(S.a)((function(e){return{tab:{flexShrink:0,flexGrow:1,color:e.palette.primary.contrastText},appBarBottomBoxShadow:{boxShadow:"0px 4px 4px -1px rgba(0,0,0,0.2), 0px 5px 5px 0px rgba(0,0,0,0.14), 0px 10px 10px 0px rgba(0,0,0,0.12)"}}})),ca=function(){var e=sa(),t=ia()||"",a=Object(r.useMemo)((function(){return Xe.indexOf(t)}),[t]);return Object(M.jsx)(Ft.a,{color:"primary",position:"static",className:e.appBarBottomBoxShadow,children:Object(M.jsx)(ta.a,{value:-1!==a&&a,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",children:Xe.map((function(t,a){return Object(M.jsx)(aa.a,{label:t,className:e.tab,component:Rt.b,to:"/?category=".concat(t)},t)}))})})},oa=[{title:"Search",link:qe.search.path,icon:Object(M.jsx)($t.a,{})},{title:"Topic: COVID-19",link:qe.topic.path,icon:Object(M.jsx)(Zt.a,{})},{title:"Analytics",link:qe.analytics.path,icon:Object(M.jsx)(Jt.a,{})}],la=Object(S.a)((function(e){return{appBarNoBoxShadow:{boxShadow:"none"},trendIcon:{color:"#FFF"},toolbar:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},toolbarTitle:Object(re.a)({flex:"1 1 auto",textTransform:"uppercase",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",lineHeight:1,fontWeight:900},C(e),{fontSize:e.typography.h6.fontSize}),toolbarButton:{flex:"0 0 auto"}}})),ha=function(){var e=la(),t=Object(r.useRef)(null),a=Bt()();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ft.a,{color:"primary",position:"static",ref:t,className:e.appBarNoBoxShadow,children:Object(M.jsxs)(Yt.a,{className:e.toolbar,children:[Object(M.jsx)(le.a,{align:"center",className:e.toolbarTitle,variant:"h4",component:"h1",children:"News Canada"}),oa.map((function(t){return Object(M.jsx)("div",{className:e.toolbarButton,children:Object(M.jsx)(Xt.a,{title:t.title,TransitionComponent:ea.a,children:Object(M.jsx)(W.a,{"aria-label":t.title,color:"inherit",component:Rt.b,to:t.link,children:t.icon})})},t.title)}))]})}),Object(M.jsx)(Gt,{anchorRef:t,zIndex:a.zIndex.appBar,children:Object(M.jsx)(ca,{})})]})};!function(e){e.NULL="NULL",e.LEFT="LEFT",e.RIGHT="RIGHT"}(zt||(zt={})),function(e){e.NULL="NULL",e.SWIPE="SWIPE",e.SCROLL="SCROLL"}(Vt||(Vt={}));var ua=function(e,t){var a=Object(r.useState)(0),n=Object(J.a)(a,2),i=n[0],s=n[1],c=Object(r.useState)(0),o=Object(J.a)(c,2),l=o[0],h=o[1],u=Object(r.useState)(Vt.NULL),d=Object(J.a)(u,2),f=d[0],p=d[1],m=Object(r.useState)(zt.NULL),g=Object(J.a)(m,2),x=g[0],v=g[1],b=Object(r.useState)(0),j=Object(J.a)(b,2),y=j[0],O=j[1],w=Pt(10);function k(e){s(e.changedTouches[0].clientX),h(e.changedTouches[0].clientY)}function C(e){if(w()){var t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY;"SWIPE"===f?(e.cancelable&&e.preventDefault(),O(e.changedTouches[0].clientX-i)):"NULL"===f&&Math.abs(t-i)>Math.abs(a-l)?p(Vt.SWIPE):"NULL"===f&&Math.abs(t-i)<=Math.abs(a-l)&&p(Vt.SCROLL)}}function D(e){var a=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;Math.abs(a-i)>Math.abs(n-l)&&Math.abs(a-i)>t&&f===Vt.SWIPE&&v(a>i?zt.RIGHT:zt.LEFT),O(0),p(Vt.NULL)}return Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchstart",k),function(){t.removeEventListener("touchstart",k)}}),[e]),Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchmove",C),function(){t.removeEventListener("touchmove",C)}}),[l,f,e,C]),Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchend",D),function(){t.removeEventListener("touchend",D)}}),[l,f,e,D]),{direction:x,dragDistance:y,resetSwipeStatus:function(){v(zt.NULL)}}},da=function(e){var t=Object(r.useRef)(null),a=ua(t,50),n=a.direction,i=a.dragDistance,s=a.resetSwipeStatus;return Object(r.useEffect)((function(){return n===zt.RIGHT?e.goPrevious():n===zt.LEFT&&e.goNext(),function(){s()}}),[n,e,s]),Object(M.jsx)("div",{style:{width:"100%",transform:"translateX(".concat(i,"px)")},ref:t,children:e.children})},fa=function(e){var t=We(),a=Object(r.useCallback)(Object(Re.a)(Le.a.mark((function a(){var n,r,i;return Le.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t.resetAll(),t.setIsLoading(!0),n="\n        {\n            getNews(category: ".concat(e.toUpperCase(),") {\n                id,\n                source,\n                author,\n                title,\n                description,\n                url,\n                urlToImage,\n                publishedAt,\n                content\n            }\n        }\n    "),a.next=6,Ye.a.get("".concat("https://api.xiaoxihome.com","/api/news?query=").concat(encodeURIComponent(n)));case 6:r=a.sent,i=r.data,t.setData(i.data.getNews),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),t.setGenericErrorMessage();case 14:return a.prev=14,t.setIsLoading(!1),a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[0,11,14,17]])}))),[e,t]);return Object(ue.a)(a),t},pa=a(452),ma=a(451),ga=Object(S.a)((function(e){return{root:{minWidth:"100%",minHeight:"100%",width:"100%",height:"100%",objectFit:"cover",overflow:"hidden"}}})),xa=function(e){var t=e.url,a=e.title,n=e.isVisible,r=ga(),i=t||"/news-app/xiaoxihome-news.jpg";return i&&n?Object(M.jsx)(ma.a,{component:"img",alt:a,className:r.root,image:i,title:a}):Object(M.jsx)(pa.a,{variant:"rect",className:r.root})};function va(e,t){var a=Object(r.useState)(!1),n=Object(J.a)(a,2),i=n[0],s=n[1];return Object(r.useEffect)((function(){if(!i){var a=function(){if(e.current){var a=e.current.getBoundingClientRect(),n=a.top+a.height<0,r=t?a.top>window.innerHeight*t:a.top>window.innerHeight;n||r||s(!0)}};return a(),document.addEventListener("scroll",a),function(){document.removeEventListener("scroll",a)}}}),[i,e,t]),i}function ba(e){var t=Date.now()-e.getTime();if(t<0)return"now";var a=Math.floor(t/6e4);if(a<=59)return"".concat(a," ").concat(1===a?"minute":"minutes"," ago");var n=Math.floor(t/36e5);if(n<=23)return"".concat(n," ").concat(1===n?"hour":"hours"," ago");var r=Math.floor(t/864e5);if(r<=30)return"".concat(r," ").concat(1===r?"day":"days"," ago");var i=Math.floor(t/2592e6);if(i<=12)return"".concat(i," ").concat(1===i?"month":"months"," ago");var s=Math.floor(t/31536e6);return"".concat(s," ").concat(1===s?"year":"years"," ago")}var ja=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ya=function(e){var t=new Date(e),a=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),n=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(t.getDate()," ").concat(ja[t.getMonth()],", ").concat(t.getFullYear()," - ").concat(a,":").concat(n)};function Oa(e){var t=new Date(e);return"".concat(t.getUTCFullYear(),"/").concat(t.getUTCMonth()+1,"/").concat(t.getUTCDate())}var wa=P()((function(e){return Object(I.a)({highlight:{backgroundColor:e.palette.secondary.light}})})),ka=function(e){var t=e.content,a=e.keyword,n=wa(),i=Object(r.useMemo)((function(){var e=a.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),n=new RegExp("("+e+")","gi");return t.split(n)}),[t,a]);return Object(M.jsx)(M.Fragment,{children:i.map((function(e,t){return t%2===1?Object(M.jsx)("span",{className:n.highlight,children:e},t):Object(M.jsx)("span",{children:e},t)}))})},Ca=Object(S.a)((function(e){return{root:{width:"100%"},title:{lineHeight:1.25},subtitle:{width:"100%",margin:e.spacing(1,0),color:e.palette.primary.light,"& span":{fontWeight:700}},date:{borderBottom:"dotted 1px rgba(0,0,0,0.32)",cursor:"help"},content:{color:e.palette.primary.light}}})),Da=function(e){var t=e.data,a=e.keyword,n=Ca();Object(r.useMemo)((function(){return t.content?t.content.replace(/\[\+[0-9]+\schars\]/gi,""):""}),[t.content]);return Object(M.jsxs)("div",{className:n.root,children:[Object(M.jsx)(le.a,{variant:"h6",component:"h2",className:n.title,children:a?Object(M.jsx)(ka,{content:t.title,keyword:a}):t.title}),Object(M.jsxs)("div",{className:n.subtitle,children:[Object(M.jsx)(le.a,{variant:"body2",component:"span",children:t.source?t.source+" - ":t.author?t.author+" - ":""}),Object(M.jsx)(Xt.a,{title:ya(t.publishedAt),children:Object(M.jsx)(le.a,{variant:"body2",component:"span",className:n.date,children:ba(new Date(t.publishedAt))})})]}),Object(M.jsx)(le.a,{variant:"body2",component:"p",className:n.content,children:a?Object(M.jsx)(ka,{content:t.content,keyword:a}):t.content&&t.content.replace(/\[\+[0-9]+\schars\]/gi,"")})]})},Sa=a(235),Aa=a.n(Sa),Ta=a(236),Na=a.n(Ta);var Ba=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},Ha=a(476),Ma=Object(S.a)((function(e){return{root:{width:"100%",margin:e.spacing(-1),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap"},button:{margin:e.spacing(1)}}})),Ea=function(e){var t=e.data,a=Ma(),i=Object(o.c)(),s=Object(Ha.a)(),c=Object(r.useCallback)((function(){var e="".concat(s.origin).concat("/news-app").concat(qe.article.getPathWithId(t.id));Ba(e),i(function(e){return{type:n.OPEN_SNACKBAR,payload:{link:e}}}(e))}),[t.id,i,s.origin]);return Object(M.jsxs)("div",{className:a.root,children:[Object(M.jsx)(xt.a,{className:a.button,startIcon:Object(M.jsx)(Aa.a,{}),component:N.a,href:t.url,target:"_blank",rel:"noopener",children:"Learn More"}),Object(M.jsx)(xt.a,{className:a.button,startIcon:Object(M.jsx)(Na.a,{}),onClick:c,children:"Share"})]})},Ia=Object(S.a)((function(e){return{root:Object(re.a)({padding:e.spacing(2)},C(e),{padding:e.spacing(.5)}),rootBig:Object(re.a)({flex:"0 0 50%"},C(e),{flex:"0 0 100%"}),rootNormal:Object(re.a)({flex:"0 0 25%"},C(e),{flex:"0 0 100%"}),paper:{overflow:"hidden",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},image:{width:"100%",flex:"0 0 auto"},imageNormal:Object(re.a)({height:300},C(e),{height:200}),imageBig:Object(re.a)({height:500},C(e),{height:200}),content:{padding:e.spacing(2),flex:"1 1 auto",width:"100%"},action:{flex:"0 0 auto",padding:e.spacing(2),width:"100%"}}})),La=function(e){var t=e.data,a=e.variant,n=Ia(),i=Object(r.useRef)(null),s=va(i),c=Object(ie.a)(),o=Object(se.a)(C(c));return Object(M.jsx)(ea.a,{in:o||s,children:Object(M.jsx)("div",{className:Object(fe.a)(n.root,"big"===a&&n.rootBig,"normal"===a&&n.rootNormal),ref:i,children:Object(M.jsxs)(Ve.a,{className:n.paper,children:[Object(M.jsx)("div",{className:Object(fe.a)(n.image,"big"===a&&n.imageBig,"normal"===a&&n.imageNormal),children:Object(M.jsx)(xa,{url:t.urlToImage,title:t.title,isVisible:s})}),Object(M.jsx)("div",{className:n.content,children:Object(M.jsx)(Da,{data:t})}),Object(M.jsx)("div",{className:n.action,children:Object(M.jsx)(Ea,{data:t})})]})})})},Ra=Object(S.a)((function(e){return{root:Object(re.a)({width:"100%",display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"center",flexWrap:"wrap",padding:e.spacing(2)},e.breakpoints.down("sm"),{padding:e.spacing(1)}),skeletonCardWrapper:{margin:e.spacing(2),width:"fit-content"},skeleton:{maxWidth:"100%"}}})),Wa=function(e){var t=e.requestState,a=Ra();return Object(ue.a)((function(){return window.scrollTo(0,0)})),Object(M.jsxs)("div",{className:a.root,children:[t.isLoading&&new Array(10).fill(1).map((function(e,t){return Object(M.jsxs)(A.a,{width:500,maxWidth:"100%",className:a.skeletonCardWrapper,children:[Object(M.jsx)(pa.a,{variant:"rect",width:500,height:200,className:a.skeleton}),Object(M.jsx)(pa.a,{width:500,className:a.skeleton}),Object(M.jsx)(pa.a,{width:500,className:a.skeleton})]},t)})),!t.isLoading&&t.isError&&Object(M.jsx)(Ge,{icon:Object(M.jsx)(Je.a,{}),title:"Ooops",text:"We met an error, please try again later"}),!t.isLoading&&!t.isError&&!t.data&&Object(M.jsx)(Ge,{icon:Object(M.jsx)(Je.a,{}),title:"Ooops",text:"No news article found"}),!t.isLoading&&!t.isError&&!!t.data&&t.data.map((function(e,t){return Object(M.jsx)(La,{variant:0===t||1===t?"big":"normal",data:e},t)}))]})},Fa=Object(S.a)((function(e){return{}})),Ya=function(e){var t=e.category,a=(Fa(),fa(t));return Object(M.jsx)(Wa,{requestState:a})},Xa=function(){var e=ia(),t=Object(Wt.g)(),a=Object(r.useMemo)((function(){return!e||!Xe.includes(e)}),[e]),n=Object(r.useCallback)((function(){if(!a){var n=Xe.indexOf(e),r=n+1>=Xe.length?0:n+1;t.replace("/?category=".concat(Xe[r]))}}),[e,t,a]),i=Object(r.useCallback)((function(){if(!a){var n=Xe.indexOf(e),r=n-1<0?Xe.length-1:n-1;t.replace("/?category=".concat(Xe[r]))}}),[e,t,a]);return a?Object(M.jsx)(Wt.a,{to:"/?category=".concat(Xe[0])}):Object(M.jsx)(da,{goNext:n,goPrevious:i,children:Object(M.jsx)(Ya,{category:e},e)})},qa=a(474),Pa=a(458),za=a(38),Va=a(460),Ua=a(242),Ga=a(453),_a=a(471),Ja=a(462),Ka=a(472),Za=a(473),Qa=Object(S.a)((function(e){return{root:{minWidth:150,position:"relative"},menuItem:{textTransform:"capitalize"},label:{textTransform:"capitalize"},select:{textTransform:"capitalize"}}})),$a=function(e){var t=e.label,a=e.data,n=Qa(),s=Object(r.useRef)(null),c=Object(ie.a)(),o=Object(se.a)(C(c)),l=Object(r.useState)(!1),h=Object(J.a)(l,2),u=h[0],d=h[1];return Object(ue.a)((function(){return d(!0)})),Object(M.jsx)(Ga.a,{variant:"outlined",className:n.root,size:"small",ref:s,children:u&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(_a.a,{id:"".concat(t,"-select-label"),className:n.label,children:t}),Object(M.jsx)(Ja.a,{labelId:"".concat(t,"-select-label"),id:"".concat(t,"-select"),value:a.value,onChange:a.handleChange,native:o,input:Object(M.jsx)(Ka.a,{notched:!0,label:t}),MenuProps:{anchorEl:s.current,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},classes:{select:n.select},children:a.options.map((function(e){return i.a.createElement(o?"option":Za.a,{value:e.key,key:e.key,classes:{root:n.menuItem},children:e.displayName})}))})]})})},en=Object(S.a)((function(e){return{root:Object(re.a)({width:"100%",padding:e.spacing(2,4),margin:e.spacing(1,0)},C(e),{padding:e.spacing(1)})}})),tn=function(e){var t=e.children,a=en();return Object(M.jsx)(Ve.a,{className:a.root,elevation:0,children:t})},an=a(142),nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(r.useState)(e),a=Object(J.a)(t,2),n=a[0],i=a[1],s=Object(r.useCallback)((function(e){i(e.currentTarget.value)}),[]);return{value:n,_setValue:i,handleChange:s}},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=Object(r.useState)(e),a=Object(J.a)(t,2),n=a[0],i=a[1],s=Object(r.useCallback)((function(e){i(e)}),[]);return{value:n,_setValue:i,handleChange:s}},sn=function(e,t){var a=Object(r.useState)(e),n=Object(J.a)(a,2),i=n[0],s=n[1],c=Object(r.useCallback)((function(e){s(e.target.value)}),[]);return{value:i,_setValue:s,handleChange:c,options:t}},cn=a(98),on=[{key:"all",displayName:"all"}].concat(Object(x.a)(Xe.map((function(e){return{key:e,displayName:e}})))),ln=[{key:"relevance",displayName:"relevance"},{key:"date",displayName:"date"}],hn=[{key:"desc",displayName:"descending"},{key:"asc",displayName:"ascending"}],un=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate())},dn=new Date("2020-01-04T00:00:00"),fn=function(e){var t={keyword:e,startDate:un(dn),endDate:un(new Date),category:on[0].key,sortBy:ln[0].key,sortOrder:hn[0].key};return"".concat(qe.search.path,"?").concat(cn.stringify(t))},pn=function(){var e=Object(Wt.g)(),t=Object(Wt.h)(),a=Object(r.useState)(0),n=Object(J.a)(a,2),i=n[0],s=n[1],c=Object(ge.a)(i),o=nn(""),l=rn(dn),h=rn(),u=sn(on[0].key,on),d=sn(ln[0].key,ln),f=sn(hn[0].key,hn),p=Object(r.useState)(""),m=Object(J.a)(p,2),g=m[0],v=m[1],b=Object(r.useCallback)((function(){return v("")}),[]),j=Object(r.useState)(!1),y=Object(J.a)(j,2),O=y[0],w=y[1],k=Object(r.useCallback)((function(){w(!0)}),[]),C=Object(r.useCallback)((function(){w(!1)}),[]);if(void 0!==c&&c!==i){var D={keyword:o.value,startDate:un(l.value),endDate:un(h.value),category:u.value,sortBy:d.value,sortOrder:f.value};e.push("".concat(qe.search.path,"?").concat(cn.stringify(D)))}var S=function(){var e=cn.parse(t.search),a={keyword:o,startDate:l,endDate:h,category:u,sortBy:d,sortOrder:f};Object.keys(e).forEach((function(t){"startDate"===t||"endDate"===t?a[t]._setValue(function(e){var t=e.split("-");return Object(an.a)(Date,Object(x.a)(t))}(e[t])):void 0!==a[t]&&a[t]._setValue(e[t])})),t.search.length>0&&s((function(e){return e+1}))},A=function(){var e=Object(Re.a)(Le.a.mark((function e(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!O){e.next=6;break}return v("Please select a valid date"),e.abrupt("return");case 6:if(null!==l.value&&null!==h.value){e.next=11;break}return v("Date cannot be empty"),e.abrupt("return");case 11:if(!(new Date(l.value).getTime()>new Date(h.value).getTime())){e.next=16;break}return v("End date cannot be earlier than start date"),e.abrupt("return");case 16:if(o.value){e.next=19;break}return v("Keyword cannot be empty"),e.abrupt("return");case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),v("Please select a valid date"),e.abrupt("return");case 25:s((function(e){return e+1}));case 26:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return xe(l.value,b),xe(h.value,b),xe(o.value,b),Object(ue.a)((function(){return S()})),{keyword:o,startDate:l,endDate:h,category:u,sortBy:d,sortOrder:f,submitSearch:A,globalErrorMessage:g,setDateHasError:k,resetDateHasError:C}},mn=a(238),gn=a.n(mn),xn=a(457),vn=a(237),bn=a.n(vn),jn=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"flex-start",backgroundColor:Object(ze.f)(e.palette.error.main,.9),borderRadius:e.shape.borderRadius,overflow:"hidden"},iconWrapper:{backgroundColor:e.palette.error.main,padding:e.spacing(2),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},icon:{color:"rgba(255, 255, 255, 0.9)",fontWeight:900},messageWrapper:{color:"rgba(0,0,0,0.64)",padding:e.spacing(2),"& span":{fontWeight:700}}}})),yn=function(e){var t=e.message,a=jn(),n=Object(r.useState)(!1),i=Object(J.a)(n,2),s=i[0],c=i[1];return Object(ue.a)((function(){return c(!0)})),Object(M.jsx)(xn.a,{in:s,children:Object(M.jsxs)("div",{className:a.root,children:[Object(M.jsx)("div",{className:a.iconWrapper,children:Object(M.jsx)(bn.a,{className:a.icon})}),Object(M.jsx)("div",{className:a.messageWrapper,children:Object(M.jsx)(le.a,{variant:"body1",component:"span",color:"inherit",children:t})})]})})},On=Object(S.a)((function(e){var t,a;return{root:{width:"100%",position:"relative"},inputRow:(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",margin:e.spacing(1,-1)},Object(re.a)(t,C(e),{margin:e.spacing(-.5)}),Object(re.a)(t,"& > div",Object(re.a)({margin:e.spacing(1)},C(e),{margin:e.spacing(.5)})),Object(re.a)(t,"& div:first-child",{flex:"1 1 auto"}),Object(re.a)(t,"& div:last-child",{flex:"0 0 auto"}),t),inputLabel:{display:"none"},errorMessageRow:{width:"100%",margin:e.spacing(1,0)},filterRow:(a={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",margin:e.spacing(2,-1,1,-1)},Object(re.a)(a,C(e),{margin:e.spacing(1,-.5)}),Object(re.a)(a,"& > div",Object(re.a)({margin:e.spacing(1)},C(e),{margin:e.spacing(.5)})),a),submitButton:Object(re.a)({width:"12ch",fontSize:e.typography.h6.fontSize,height:56,fontWeight:700,"&:disabled":{backgroundColor:Object(ze.a)(e.palette.secondary.main,.3)}},C(e),{width:"10ch",height:40,fontSize:e.typography.body2.fontSize}),datePicker:{width:180,margin:0}}})),wn=function(){var e=On(),t=Object(ie.a)(),a=Object(se.a)(C(t)),n=Object(r.useRef)(null),i=pn(),s=!1,c=Object(r.useMemo)((function(){return{minDate:"2020-01-01",maxDate:new Date,variant:"inline",format:"MM/dd/yyyy",margin:"dense",inputVariant:"outlined",className:e.datePicker,KeyboardButtonProps:{"aria-label":"change date"},onError:function(e){e?i.setDateHasError():i.resetDateHasError()}}}),[e.datePicker,i]);Object(ue.a)((function(){var e;null===(e=n.current)||void 0===e||e.focus()}));var o=Object(r.useCallback)((function(e){e.preventDefault(),i.submitSearch()}),[i]),l=Object(r.useCallback)((function(){i.keyword._setValue("")}),[i.keyword]);return Object(M.jsx)(tn,{children:Object(M.jsxs)("form",{className:e.root,onSubmit:o,children:[Object(M.jsxs)("div",{className:e.inputRow,children:[Object(M.jsx)("div",{children:Object(M.jsx)(qa.a,{value:i.keyword.value,onChange:i.keyword.handleChange,id:"news-search-text-field",label:"Keyword",variant:"outlined",InputLabelProps:{shrink:!1,classes:{root:e.inputLabel}},inputRef:n,size:a?"small":"medium",fullWidth:!0,disabled:s,InputProps:{endAdornment:i.keyword.value.length>0?Object(M.jsx)(Pa.a,{position:"end",children:Object(M.jsx)(W.a,{"aria-label":"clear keyword",onClick:l,edge:"end",children:Object(M.jsx)(gn.a,{})})}):Object(M.jsx)(M.Fragment,{})}})}),Object(M.jsx)("div",{children:Object(M.jsx)(xt.a,{variant:"contained",disableElevation:!0,color:"secondary",type:"submit",disabled:s,className:e.submitButton,children:"Search"})})]}),!!i.globalErrorMessage&&Object(M.jsx)("div",{className:e.errorMessageRow,children:Object(M.jsx)(yn,{message:i.globalErrorMessage})}),Object(M.jsxs)("div",{className:e.filterRow,children:[Object(M.jsxs)(za.a,{utils:Ua.a,children:[Object(M.jsx)("div",{children:Object(M.jsx)(Va.a,Object(Ke.a)({id:"date-picker-start-date",label:"Start Date",value:i.startDate.value,onChange:i.startDate.handleChange,disabled:s},c))}),Object(M.jsx)("div",{children:Object(M.jsx)(Va.a,Object(Ke.a)({id:"date-picker-end-date",label:"End Date",value:i.endDate.value,onChange:i.endDate.handleChange,disabled:s},c))})]}),Object(M.jsx)("div",{children:Object(M.jsx)($a,{label:"category",data:i.category})}),Object(M.jsx)("div",{children:Object(M.jsx)($a,{label:"sort by",data:i.sortBy})}),Object(M.jsx)("div",{children:Object(M.jsx)($a,{label:"sort order",data:i.sortOrder})})]})]})})},kn=a(239),Cn=a.n(kn),Dn=function(){var e=We();return Object(ue.a)(Object(Re.a)(Le.a.mark((function t(){var a,n;return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setIsLoading(!0),t.next=4,Ye.a.get("".concat("https://api.xiaoxihome.com","/api/search-news/trending"));case 4:if(a=t.sent,"ok"===(n=a.data).status){t.next=8;break}throw new Error;case 8:e.setData({lastWeek:n.lastWeek.slice(),allTime:n.allTime.slice()}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),e.setGenericErrorMessage();case 14:return t.prev=14,e.setIsLoading(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})))),{request:e}},Sn=a(146),An=Object(S.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap"},buttonWrapper:{flex:"1 1 auto",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",margin:e.spacing(0,-.5)},button:{margin:e.spacing(.5),padding:e.spacing(.25,1),textTransform:"none",fontWeight:700,backgroundColor:Object(ze.a)(Sn.a[600],.08),borderLeft:"solid 8px ".concat(Object(ze.a)(Sn.a[600],.64)),color:"rgba(0,0,0,0.7)","&:hover, &:focus":{backgroundColor:Sn.a[600],color:"#fff"},"& .MuiButton-endIcon":{marginLeft:e.spacing(2),display:"block"}},buttonText:{maxWidth:"10ch",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all",overflow:"hidden",display:"block"},title:{fontWeight:900,whiteSpace:"pre",width:"10ch",textTransform:"capitalize",fontSize:e.typography.caption.fontSize,color:e.palette.grey[600]}}})),Tn=function(e){var t=e.data,a=e.title,n=An();return null===t?Object(M.jsx)(M.Fragment,{}):Object(M.jsxs)("div",{className:n.root,children:[Object(M.jsx)(le.a,{variant:"h5",component:"div",className:n.title,children:Object(M.jsx)("span",{children:"".concat(a,": ")})}),Object(M.jsx)("div",{className:n.buttonWrapper,children:t.length?t.map((function(e){return Object(M.jsx)(xt.a,{className:n.button,component:Rt.b,to:fn(e.key),size:"small",endIcon:Object(M.jsx)(M.Fragment,{children:e.doc_count}),children:Object(M.jsx)("span",{className:n.buttonText,children:e.key})},e.key)})):"Not enough searches"})]})},Nn=Object(S.a)((function(e){return{root:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap"},title:{fontWeight:700,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingRight:"1ch"},rowWrapper:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",marginBottom:e.spacing(1)}}})),Bn=function(){var e=Nn(),t=Dn();return Object(M.jsx)(tn,{children:Object(M.jsxs)("div",{className:e.root,children:[Object(M.jsxs)("div",{className:e.rowWrapper,children:[Object(M.jsxs)(le.a,{variant:"h6",component:"div",className:e.title,children:[Object(M.jsx)("span",{style:{marginRight:8},children:"Trending Searches"}),Object(M.jsx)(Cn.a,{style:{color:"#f57c00"}})]}),t.request.isLoading&&Object(M.jsx)(_.a,{size:25}),t.request.isError&&t.request.errorMessage]}),null!==t.request.data&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Tn,{data:t.request.data.lastWeek,title:"Last week"}),Object(M.jsx)(Tn,{data:t.request.data.allTime,title:"All time"})]})]})})},Hn=Object(S.a)((function(e){return{root:{margin:e.spacing(1,0),width:"100%",display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"flex-start",minHeight:200,overflow:"hidden"},image:Object(re.a)({width:200,overflow:"hidden",position:"relative",flex:"0 0 auto"},C(e),{width:50}),imageInnerWrapper:{width:"100%",height:"100%",position:"absolute",top:0,left:0,"& img":{width:"100%",height:"100%",objectFit:"cover"}},contentArea:Object(re.a)({flex:"1 1 auto",padding:e.spacing(2,4),display:"flex",flexDirection:"column",justifyContent:"flex-start"},C(e),{padding:e.spacing(.5,1.5)}),content:{flex:"1 1 auto"},action:{margin:e.spacing(1,-.5,0,-.5),flex:"0 0 auto"}}})),Mn=function(e){var t=e.data,a=Hn(),n=Object(r.useRef)(null),i=va(n);return Object(M.jsxs)(Ve.a,{elevation:0,className:a.root,ref:n,children:[Object(M.jsx)("div",{className:a.image,children:Object(M.jsx)("div",{className:a.imageInnerWrapper,children:Object(M.jsx)(xa,{url:t.urlToImage,title:t.title,isVisible:i})})}),Object(M.jsxs)("div",{className:a.contentArea,children:[Object(M.jsx)("div",{className:a.content,children:Object(M.jsx)(Da,{data:t})}),Object(M.jsx)("div",{className:a.action,children:Object(M.jsx)(Ea,{data:t})})]})]})},En=function(){var e=Object(Wt.h)(),t=Object(ge.a)(e.search),a=We(),n=Object(r.useRef)(1),i=Object(r.useCallback)(Object(Re.a)(Le.a.mark((function t(){var r,i;return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!a.isLoading){t.next=3;break}return t.abrupt("return");case 3:return a.resetError(),a.setIsLoading(!0),t.next=7,Ye.a.get("".concat("https://api.xiaoxihome.com","/api/search-news"),{params:Object(Ke.a)(Object(Ke.a)({},ra.a.parse(e.search)),{},{page:n.current})});case 7:r=t.sent,"ok"===(i=r.data).status?a.setData((function(e){return{docs:null===e?i.docs:[].concat(Object(x.a)(e.docs),Object(x.a)(i.docs)),histogram:i.histogram,total:i.total,hasNext:i.hasNext}})):a.setErrorMessage(r.data.message),n.current=n.current+1,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a.setGenericErrorMessage();case 16:return t.prev=16,a.setIsLoading(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])}))),[e.search,a]);return Object(r.useEffect)((function(){e.search!==t&&e.search.length>0&&(n.current=1,a.setData(null),i())}),[i,e.search,t,a]),{requestState:a,doSearch:i}},In=a(241),Ln=a.n(In),Rn=a(240);a.n(Rn).a.polyfill();var Wn=P()((function(e){return{root:Object(re.a)({position:"fixed",zIndex:e.zIndex.modal,bottom:"50px",right:"50px",backgroundColor:e.palette.secondary.main,color:"#FFF",transition:e.transitions.create("background-color opacity"),transform:"rotate(-90deg)","&:hover":{backgroundColor:e.palette.secondary.light}},e.breakpoints.down("md"),{bottom:"15px",right:"15px"})}})),Fn=function(){var e=Wn(),t=function(){var e=Object(r.useState)(!1),t=Object(J.a)(e,2),a=t[0],n=t[1],i=function(){window.scrollY>window.innerHeight&&!a?n(!0):window.scrollY<window.innerHeight&&a&&n(!1)};return Object(r.useEffect)((function(){return document.addEventListener("scroll",i),function(){document.removeEventListener("scroll",i)}}),[a]),a}();return Object(M.jsx)(he.a,{in:t,children:Object(M.jsx)(Xt.a,{title:"Scroll to Top",className:e.root,children:Object(M.jsx)(W.a,{"aria-label":"Scroll to Top",onClick:function(){window.scroll({top:0,left:0,behavior:"smooth"})},children:Object(M.jsx)(Ln.a,{})})})})},Yn=function(){function e(t,a,n,r,i){Object(K.a)(this,e),this.dataArray=void 0,this.auxArray=void 0,this.params=void 0,this.dimension=void 0,this.scales=void 0,this.svg=void 0,this.references=void 0,this.axis=void 0,this.dataArray={bin:a,frequency:n},this.auxArray={binDate:this.getBinDateArray(a),barTransitionDelay:this.getBarTransitionDelayArray(500,n)},this.params={lightColor:t.palette.secondary.light,darkColor:t.palette.secondary.dark,primaryColor:t.palette.primary.light,backgroundColor:"fff",TRANSITION_DELAY:500,BAR_TRANSITION_DURATION:2e3,maxFrequency:Math.max.apply(Math,this.dataArray.frequency),binLength:this.dataArray.bin.length,argWidth:r,selector:i},this.dimension=this.getDimensions(r),this.svg=Q.t("#".concat(this.params.selector)).append("svg"),this.references={svg:this.svg,bars:this.svg.append("g").selectAll("rect").data(this.dataArray.frequency).enter().append("rect"),axisX:this.svg.append("g"),axisY:this.svg.append("g"),axisXHoverDate:this.svg.append("g"),axisXHoverFrequency:this.svg.append("g"),axisYHover:this.svg.append("g"),hoverDetection:this.svg.append("g").selectAll("rect").data(this.dataArray.frequency).enter().append("rect")},this.scales={x:Q.p().domain(this.dataArray.frequency.map((function(e,t){return t.toString()}))).range([0,this.dimension.chartWidth]),y:Q.q().domain([0,this.params.maxFrequency]).range([this.dimension.chartHeight,0])},this.axis={x:Q.b(this.scales.x),y:Q.c(this.scales.y),xHoverDate:Q.b(this.scales.x),xHoverFrequency:Q.b(this.scales.x),yHover:Q.c(this.scales.y)},this.setHoverDetectionEventHandlers=this.setHoverDetectionEventHandlers.bind(this),this.getBarColor=this.getBarColor.bind(this)}return Object(Z.a)(e,[{key:"getBinDateArray",value:function(e){return e.map(Oa)}},{key:"getBarTransitionDelayArray",value:function(e,t){for(var a=[],n=e,r=0;r<t.length;r++)0===t[r]?a.push(n):a.push(n+=20);return a}},{key:"getDimensions",value:function(e){var t=e,a=Math.min(Math.round(t/3),100),n={t:20,r:20,b:20,l:40};return{svgWidth:t,svgHeight:a,m:n,chartWidth:t-n.l-n.r,chartHeight:a-n.t-n.b,chartX:n.l,chartY:n.t}}},{key:"setSvg",value:function(){this.references.svg.attr("width",this.dimension.svgWidth).attr("height",this.dimension.svgHeight).style("background",this.params.backgroundColor)}},{key:"getBarColor",value:function(e){var t=.5-.5*parseFloat((e/this.params.maxFrequency).toFixed(2));return Object(ze.f)(this.params.lightColor,t)}},{key:"setBars",value:function(){var e=this,t=this.scales.x.bandwidth(),a=function(t){return e.dimension.chartHeight-e.scales.y(t)};this.references.bars.style("fill",this.getBarColor).attr("width",t).attr("height",0).attr("x",(function(t,a){return e.dimension.chartX+(e.scales.x(a.toString())||0)})).attr("y",this.dimension.chartY+this.dimension.chartHeight),this.references.bars.transition().attr("height",a).attr("y",(function(t){return e.dimension.chartY+e.dimension.chartHeight-a(t)})).delay((function(t,a){return e.auxArray.barTransitionDelay[a]})).duration(this.params.BAR_TRANSITION_DURATION).ease(Q.g)}},{key:"setAxisX",value:function(){var e=this;this.axis.x.tickSizeOuter(0).tickFormat((function(t,a){return e.auxArray.binDate[parseInt(t)]})).tickValues([0,Math.floor(.25*this.params.binLength),Math.floor(.5*this.params.binLength),Math.floor(.75*this.params.binLength),this.params.binLength-1].map((function(e){return"".concat(e)}))),this.references.axisX.style("transform","translate(".concat(-.5*this.dimension.svgWidth,"px, ").concat(this.dimension.svgHeight+this.dimension.chartY,"px)")).style("opacity",0).style("color",this.params.darkColor),this.references.axisX.transition().style("opacity",1).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight+this.dimension.chartY,"px)")).delay(this.params.TRANSITION_DELAY).duration(1e3).ease(Q.g),this.axis.x(this.references.axisX)}},{key:"setAxisY",value:function(){this.axis.y.tickSizeOuter(0).tickFormat(Q.i("d")).tickValues([0,Math.floor(.5*this.params.maxFrequency),this.params.maxFrequency]),this.references.axisY.style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight,"px)")).style("opacity",0).style("color",this.params.darkColor),this.references.axisY.transition().style("opacity",1).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartY,"px)")).delay(this.params.TRANSITION_DELAY).duration(1e3).ease(Q.g),this.axis.y(this.references.axisY)}},{key:"setAxisXHoverDate",value:function(){var e=this;this.references.axisXHoverDate.style("opacity",0).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight+this.dimension.chartY,"px)")),this.axis.xHoverDate.tickFormat((function(t){return e.auxArray.binDate[parseInt(t)]}))}},{key:"setAxisXHoverFrequency",value:function(){var e=this;this.references.axisXHoverFrequency.style("opacity",0),this.axis.xHoverFrequency.tickFormat((function(t){return"".concat(e.dataArray.frequency[parseInt(t)])})).tickSize(0).tickPadding(-9)}},{key:"setAxisYHover",value:function(){this.references.axisYHover.style("opacity",0).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartY,"px)")),this.axis.yHover.tickFormat(Q.i("d")).tickSizeInner(-this.dimension.chartWidth-6).tickSizeOuter(0).tickPadding(9)}},{key:"setHoverDetection",value:function(){var e=this,t=this.scales.x.bandwidth();this.references.hoverDetection.style("opacity",0).attr("width",t).attr("height",this.dimension.svgHeight).attr("x",(function(t,a){return e.dimension.chartX+(e.scales.x(a.toString())||0)})).attr("y",0),this.setHoverDetectionEventHandlers()}},{key:"setHoverDetectionEventHandlers",value:function(){var e=this;this.references.hoverDetection.on("mouseover",(function(t,a){var n,r;e.axis.yHover.tickValues([t]),e.axis.yHover(e.references.axisYHover),e.references.axisYHover.selectAll(".tick line").style("transform","translate(-6px, 0)").style("color",e.params.primaryColor),e.references.axisYHover.selectAll(".domain").remove(),e.references.axisYHover.style("opacity",1);var i=null===(n=e.references.axisYHover.select("text").node())||void 0===n?void 0:n.getBBox();i&&e.references.axisYHover.selectAll("g.tick").insert("rect",":first-child").attr("width",i.width).attr("height",i.height).attr("x",i.x).attr("y",i.y).style("fill",e.params.backgroundColor),e.axis.xHoverDate.tickValues(["".concat(a)]),e.axis.xHoverDate(e.references.axisXHoverDate),e.references.axisXHoverDate.selectAll(".domain").remove(),e.references.axisXHoverDate.style("opacity",1);var s=null===(r=e.references.axisXHoverDate.select("text").node())||void 0===r?void 0:r.getBBox();s&&e.references.axisXHoverDate.selectAll("g.tick").insert("rect",":first-child").attr("width",1.2*s.width).attr("height",s.height).attr("x",s.x-.1*s.width).attr("y",s.y).style("fill",e.params.backgroundColor),e.axis.xHoverFrequency.tickValues(["".concat(a)]),e.axis.xHoverFrequency(e.references.axisXHoverFrequency),e.references.axisXHoverFrequency.selectAll(".domain").remove(),e.references.axisXHoverFrequency.style("transform","translate(".concat(e.dimension.chartX,"px, ").concat(e.scales.y(t)+e.dimension.chartY,"px)")).style("opacity",1),e.references.bars.filter((function(e,t){return t===a})).style("fill",e.params.primaryColor)})).on("mouseout",(function(t,a){e.references.axisYHover.style("opacity",0),e.references.axisXHoverFrequency.style("opacity",0),e.references.axisXHoverDate.style("opacity",0),e.references.bars.filter((function(e,t){return t===a})).style("fill",e.getBarColor)}))}},{key:"bindSetDate",value:function(e){var t=this;this.references.hoverDetection.on("click",(function(a,n){e(t.dataArray.bin[n])}))}},{key:"draw",value:function(){this.setSvg(),this.setBars(),this.setAxisX(),this.setAxisY(),this.setAxisXHoverDate(),this.setAxisXHoverFrequency(),this.setAxisYHover(),this.setHoverDetection()}},{key:"main",value:function(){this.draw()}}]),e}(),Xn="keyword-frequency-chart",qn=Object(S.a)((function(e){return{root:{width:"100%"}}})),Pn=function(e){var t=e.bin,a=e.frequency,n=e.setDate,i=Object(r.useRef)(null),s=qn(),c=Object(ie.a)();return Object(ue.a)((function(){if(i.current){var e=new Yn(c,t,a,i.current.getBoundingClientRect().width,Xn);e.main(),e.bindSetDate(n)}})),Object(M.jsx)("div",{ref:i,className:s.root,id:Xn})},zn=Object(S.a)((function(e){return{root:Object(re.a)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",margin:e.spacing(4,0)},C(e),{margin:e.spacing(2,0)}),centeringWrapper:Object(re.a)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(4,2)},C(e),{padding:e.spacing(1)}),loadMoreButton:{maxWidth:"100%",width:400,height:40,margin:e.spacing(1,0)},totalCountRow:{width:"100%",margin:e.spacing(1,0),"& span":Object(re.a)({display:"block",width:"fit-content",marginLeft:"auto",fontWeight:700},C(e),{marginLeft:0,width:"100%",textAlign:"center"})},endOfResult:{"& span":{borderBottom:"1px solid rgba(0,0,0,0.32)",color:"rgba(0,0,0,0.32)",fontWeight:700,width:"100%",textAlign:"center"}}}})),Vn=function(){var e,t,a,n=zn(),r=En();return Object(M.jsxs)("div",{className:n.root,children:[r.requestState.data&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:n.totalCountRow,children:Object(M.jsx)(le.a,{variant:"body2",component:"span",children:"Found ".concat(r.requestState.data.total," news articles, showing ").concat(Math.min(1,r.requestState.data.docs.length)," - ").concat(r.requestState.data.docs.length)})}),!!r.requestState.data.docs.length&&Object(M.jsx)(tn,{children:Object(M.jsx)(Pn,{bin:r.requestState.data.histogram.map((function(e){return e.key})),frequency:r.requestState.data.histogram.map((function(e){return e.doc_count})),setDate:function(){return!1}})}),r.requestState.data.docs.map((function(e){return Object(M.jsx)(Mn,{data:e},e.id)}))]}),!r.requestState.isLoading&&r.requestState.isError&&Object(M.jsx)(Ge,{icon:Object(M.jsx)(Je.a,{}),title:"Ooops",text:r.requestState.errorMessage}),!r.requestState.isLoading&&!r.requestState.isError&&r.requestState.data&&!r.requestState.data.docs.length&&Object(M.jsx)(Ge,{icon:Object(M.jsx)(Je.a,{}),title:"No news article found",text:"Please try again with different keyword and filters"}),r.requestState.isLoading&&Object(M.jsx)("div",{className:n.centeringWrapper,children:Object(M.jsx)(_.a,{size:25})}),!r.requestState.isLoading&&!r.requestState.isError&&(null===(e=r.requestState.data)||void 0===e?void 0:e.hasNext)&&Object(M.jsx)(xt.a,{className:n.loadMoreButton,variant:"contained",disableElevation:!0,color:"secondary",onClick:r.doSearch,children:"Load more"}),!r.requestState.isLoading&&!r.requestState.isError&&!(null===(t=r.requestState.data)||void 0===t?void 0:t.hasNext)&&!!(null===(a=r.requestState.data)||void 0===a?void 0:a.docs.length)&&Object(M.jsx)("div",{className:Object(fe.a)(n.centeringWrapper,n.endOfResult),children:Object(M.jsx)(le.a,{variant:"body2",component:"span",children:"END OF RESULT"})}),Object(M.jsx)(Fn,{})]})},Un=Object(S.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},widthWrapper:Object(re.a)({maxWidth:e.breakpoints.values.lg,width:"100%",padding:e.spacing(2),margin:e.spacing(2,0)},C(e),{padding:e.spacing(1),margin:e.spacing(1,0)})}})),Gn=function(){var e=Un(),t=Object(Wt.h)().search;return Object(M.jsx)("div",{className:e.root,children:Object(M.jsxs)("div",{className:e.widthWrapper,children:[Object(M.jsx)(wn,{}),Object(M.jsx)(Bn,{}),Object(M.jsx)(Vn,{},t)]})})},_n=function(e){var t=We();return Object(ue.a)(Object(Re.a)(Le.a.mark((function a(){var n;return Le.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e){a.next=3;break}return a.abrupt("return");case 3:return t.setIsLoading(!0),a.next=6,Ye.a.get("".concat("https://api.xiaoxihome.com","/api/search-news/id"),{params:{id:e}});case 6:n=a.sent,t.setData(n.data.doc),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),t.setGenericErrorMessage();case 13:return a.prev=13,t.setIsLoading(!1),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,10,13,16]])})))),t},Jn=Object(S.a)((function(e){return{}})),Kn=function(e){var t=e.id,a=(Jn(),_n(t));return Object(M.jsx)(Wa,{requestState:a})},Zn=Object(S.a)((function(e){return{}})),Qn=function(){Zn();var e=Object(Wt.i)().id;return Object(M.jsx)(Kn,{id:e},e)},$n=Object(S.a)((function(e){return{root:{width:"100vw",maxWidth:"100%",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},header:{width:"100%",flex:"0 0 auto"},mainArea:{width:"100%",flex:"1 1 auto"},attribution:{width:"100%",flex:"0 0 auto"}}}));var er=function(e){var t=$n();return Object(M.jsx)(Rt.a,{basename:"/news-app",children:Object(M.jsxs)(A.a,{className:t.root,style:{minHeight:"".concat(window.innerHeight,"px")},children:[Object(M.jsx)("div",{className:t.header,children:Object(M.jsx)(ha,{})}),Object(M.jsx)("div",{className:t.mainArea,children:Object(M.jsxs)(Wt.d,{children:[Object(M.jsx)(Wt.b,{path:qe.root.path,exact:!0,render:function(){return Object(M.jsx)(Xa,{})}}),Object(M.jsx)(Wt.b,{path:qe.search.path,exact:!0,render:function(){return Object(M.jsx)(Gn,{})}}),Object(M.jsx)(Wt.b,{path:qe.topic.path,exact:!0,component:Lt}),Object(M.jsx)(Wt.b,{path:qe.analytics.path,exact:!0,component:At}),Object(M.jsx)(Wt.b,{path:qe.article.path,exact:!0,component:Qn})]})}),Object(M.jsx)("div",{className:t.attribution,children:Object(M.jsx)(E,{})}),Object(M.jsx)(G,{})]})})},tr=Object(l.c)(f,p,Object(l.a)(h.a));var ar=function(){return Object(M.jsx)(o.a,{store:tr,children:Object(M.jsxs)(g.a,{theme:D,children:[Object(M.jsx)(m.a,{}),Object(M.jsx)(er,{})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(M.jsx)(ar,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[392,1,2]]]);
//# sourceMappingURL=main.f7c7faa7.chunk.js.map