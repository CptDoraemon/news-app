{"version":3,"sources":["redux/actions/copy-link-snackbar.ts","redux/state.ts","redux/reducers/copy-link-snackbar.ts","redux/reducers/root-reducers.ts","redux/configureStore.ts","theme/fonts.ts","theme/theme.tsx","components/attribution.tsx","components/copy-link-snackbar.tsx","containers/copy-link-snackbar-container.tsx","routers.ts","d3-charts/word-cloud-d3.ts","components/analytics/layouts/fullscreen-section.tsx","components/analytics/layouts/fade-and-slide-in.tsx","tools/use-callback-on-value-change.ts","components/analytics/layouts/section-with-chart.tsx","components/analytics/word-cloud/year-stepper-icon.tsx","components/analytics/word-cloud/year-stepper.tsx","tools/use-is-visible.tsx","components/analytics/word-cloud/word-cloud.tsx","tools/use-request-state.ts","components/analytics/hooks/use-get-analytics.ts","components/utility-components/message-with-icon.tsx","components/analytics/text-summary.tsx","components/analytics/hooks/use-change-background-color.ts","d3-charts/pie-chart-d3.ts","components/analytics/docs-by-category.tsx","d3-charts/heat-map-d3.ts","components/analytics/docs-by-day.tsx","d3-charts/stacked-line-chart-d3.tsx","components/analytics/docs-by-day-and-category.tsx","components/analytics/slow-notification/use-slow-notification.ts","components/analytics/slow-notification/slow-notification.tsx","components/analytics/analytics.tsx","d3-charts/world-map-d3.ts","components/topic/topic-covid19-map.tsx","components/topic/topic.tsx","tools/use-debounce.ts","tools/use-sticky.ts","tools/use-swipeable.ts","components/utility-components/sticky-component.tsx","components/articles/use-get-category-from-query.ts","components/header/header-tabs.tsx","components/header/header.tsx","components/utility-components/swipeable.tsx","components/articles/use-load-articles.ts","components/articles/article-card/article-card-image.tsx","tools/use-lazy-load.ts","tools/get-publish-time.ts","tools/get-date-string.ts","components/articles/article-card/highlighted-content.tsx","components/articles/article-card/article-card-content.tsx","tools/copy-to-clipboard.ts","components/articles/article-card/article-card-actions.tsx","components/articles/article-card/article-card.tsx","components/articles/articles.tsx","components/articles/articles-with-category-loader.tsx","components/articles/articles-container.tsx","components/search/select-filter.tsx","components/search/paper-wrapper.tsx","components/search/use-search/use-input-filter.tsx","components/search/use-search/use-date-picker-filter.ts","components/search/use-search/use-select-filter.ts","components/search/use-search/use-search-filters.ts","components/search/error-message.tsx","components/search/search-input.tsx","components/search/trending-search/use-trending-search.ts","components/search/trending-search/trending-row.tsx","components/search/trending-search/trending-search.tsx","components/search/searched-article-card.tsx","components/search/use-search/use-search.ts","components/search/scroll-to-top-button.tsx","d3-charts/frequency-chart-d3.ts","components/search/keyword-frequency.tsx","components/search/searched-articles.tsx","components/search/search.tsx","components/article-by-id/use-get-article-by-id.ts","components/article-by-id/article-by-id.tsx","components/article-by-id/article-by-id-container.tsx","inner-app.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["CopyLinkSnackbarActionsTypes","initState","copyLinkSnackBar","isActive","text","copyLinkSnackbar","state","actions","type","CLOSE_SNACKBAR","OPEN_SNACKBAR","payload","link","rootReducers","combineReducers","preloadedState","mierB","fontFamily","fontDisplay","src","process","fontWeight","inter","baseFontFamily","titleTypography","join","theme","createTheme","palette","primary","main","contrastText","secondary","typography","h1","h2","h3","h4","h5","h6","button","overrides","MuiCssBaseline","responsiveFontSizes","MOBILE","breakpoints","down","Attribution","Box","m","Grid","container","direction","spacing","item","Link","href","target","rel","underline","Chip","avatar","Avatar","label","color","clickable","useStyles","makeStyles","createStyles","successSnackBar","backgroundColor","green","CopyLinkSnackbar","props","classes","closeHandler","closeCopyLinkSnackBar","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","onClose","SnackbarContent","className","message","id","action","IconButton","onClick","NewsCategory","CopyLinkSnackBarContainer","connect","dispatch","WordCloudD3","data","colors","params","scale","this","getData","containerEl","document","getElementById","width","getBoundingClientRect","height","getScale","styleSvg","bind","counts","map","obj","count","words","word","maxCount","Math","max","apply","d3","domain","range","d3Cloud","size","timeInterval","d","fontSize","font","padding","rotate","random","seedrandom","on","start","append","attr","selectAll","enter","style","i","length","x","y","draw","root","FullscreenSection","React","forwardRef","ref","fullHeightOffset","children","useTheme","isMobile","useMediaQuery","useMemo","headerHeight","min","window","innerHeight","transition","duration","inActive","opacity","transform","active","FadeAndSlideIn","clsx","useCallbackOnValueChange","value","callback","previousValue","usePrevious","useEffect","undefined","display","flexDirection","justifyContent","alignItems","titleWrapper","title","textTransform","lineHeight","textAlign","content","grey","margin","chartWrapper","flex","chartWrapperInner","chartWrapperDimension","SectionWithChart","cbOnChartElReady","belowTitle","isVisible","animationDuration","chartWrapperRef","useRef","useState","chartSize","setChartSize","chartElReady","setCharElReady","useMount","current","rect","Array","isArray","split","Typography","component","variant","Fade","timeout","in","YearStepperIcon","borderColor","light","stepButton","labelText","YearStepper","steps","activeStep","onStepChange","Stepper","orientation","index","Step","StepButton","disabled","completed","StepLabel","StepIconComponent","useIsVisible","initValue","setIsVisible","isVisibleElRef","checkIsVisible","center","top","bottom","notVisible","addEventListener","removeEventListener","WordCloud","selectedYear","setSelectedYear","year","initChart","useCallback","filter","useRequestState","isLoading","setIsLoading","errorMessage","setErrorMessage","setData","isError","resetError","setGenericErrorMessage","resetAll","newsCategories","Object","values","routers","path","getPathWithQuery","category","search","analytics","topic","article","getPathWithId","useGetAnalytics","request","a","axios","get","res","status","Error","docsCountByDay","docCountByDay","forEach","push","date","_docCountByDayAndCategory","docCountByDayAndCategory","quantity","series","order","categories","Date","toISOString","summary","countByCategory","wordCloud","wordFrequency","console","log","minHeight","fade","icon","MessageWithIcon","Paper","elevation","cloneElement","monthStrings","section","number","roundAndToMs","isoString","getFullYear","getMonth","getDate","getTime","TextSummary","forwardedRef","totalDocuments","earliestDocumentDate","latestDocumentDate","earliestMs","latestMs","commonProps","delay","config","molasses","total","useSpring","from","earliest","latest","useCountUpAnimation","span","to","n","dateObj","round","useChangeBackgroundColor","isPageReady","bgColorChangeRef","bgBlack","setBgBlack","changeBgColor","previousBgBlack","body","prevIsPageReady","useUnmount","PieChartD3","getColor","hasAnimated","svg","references","getParams","pieZero","getPieData","_","pie","totalValue","reduce","b","createReferences","startAngle","PI","endAngle","rx","ry","h","ir","sort","innerSlice","topSlice","outerSlice","text1","text2","darker","toString","pieInner","pieTop","pieOuter","toUpperCase","toFixed","initData","targetData","thisClass","iRaise","textTweenX","t","cos","attrTween","sin","sx","sy","ex","ey","ret","_startAngle","_endAngle","pieTransition","drawPie","containerWrapper","DocsByCategory","d3Ref","animate","HeatMapD3","dayOfWeekStrings","targetRectSize","rectPadding","scales","axis","getScales","getAxis","r","l","xBands","xScaleDomain","maxRectSize","floor","rectSize","chart","yScaleDomain","tickFormat","monthOfFirstDate","xScaleGuide","getUTCMonth","monthOfLastDate","monthOfThisDate","_diff","tickSize","tickPadding","parseInt","tickValues","_data","time","compensation","getUTCDay","unshift","timeArray","computedX","getX","computedY","getY","xAxis","yAxis","rects","tooltipGroup","tooltipBackground","tooltip","tooltipText1","tooltipText2","remove","bandwidth","getAttribute","getUTCDate","getUTCFullYear","bBox","node","getBBox","textWidth","textHeight","tooltipWidth","tooltipHeight","toolTipX","toolTipY","borderX0","borderX1","borderY0","borderY1","styleAxisX","styleAxisY","styleRects","styleTooltip","addMouseEventToRects","prepareForAnimation","DocsByDay","getAccumulativeSum","array","result","sumHash","num","arr","sum","StackedLineChartD3","getAreaColor","textColor","domainColor","dimensions","axes","shapes","getDimension","axisX","axisY","axisYAreaTitle","axisXHover","axisYHoverText","axisYHoverLines","paths","detectionRects","getShapes","getAxes","convertToPercentage","maxQuantity","percentage","arrayLength","assign","maxS","stackData","svgWidth","svgHeight","chartWidth","chartHeight","xRange","xBand","xPoint","xTickValues","lastDayQuantities","slice","yAreaTitleTickValues","yAreaTitle","xHover","yHoverText","yHoverLines","allAxes","keys","stack","offset","getArea","y0","y1","ease","setTimeout","toggleAllAxes","updateHoverAxes","percentages","seriesIndex","accumulativeSum","areaMidPosition","_d","_i","tickSizeInner","select","insert","updateHoverXBg","initSvg","initLineChart","initAxes","initDetectionRects","appendMouseEventToDetectionRects","DocsByDayAndCategory","localStorageKey","useSlowNotification","rawLastShowedTimestamp","localStorage","getItem","lastShowedTimestamp","isNaN","now","isOpen","setIsOpen","handleClose","setItem","maxHeight","overflowY","marginBottom","warning","SlowNotification","Button","disableElevation","maxWidth","overflowX","centering","Analytics","getAnalytics","isDataReady","CircularProgress","my","totalCount","firstDocDate","lastDocDate","WorldMapD3","themeColor","caseData","red","transparent","getMapColor","mapStrokeNormal","mapStrokeHoverHighlight","case","death","recovered","timeBarHighlight","timeBarNormal","timeBarLight","getStrokeWidth","dimension","animations","zoomIn","changeMapColor","timeLapse","timeLapseGap","aggregate","caseMax","pathHighlightGroup","pathHighlight","timeControl","timeBarXScale","timeMax","tooltipData","inputX","inputXSecondary","inputY","inputYSecondary","country","timeoutID","mapX","mapY","mapWidth","mapHeight","module","mapData","default","features","properties","countries","name","cases","bg","tspanCountry","tspanDate","tspanCaseAccumulative","tspanCaseNew","tspanDeathAccumulative","tspanDeathNew","tspanRecoveredAccumulative","tspanRecoveredNew","caseLineChart","deathLineChart","recoveredLineChart","stackBarChartGroup","stackBarChartCase","stackBarChartDeath","stackBarChartRecovered","updateTooltip","currentT","getNew","dateText","noData","deaths","updateTexts","textX","textY","tooltipX","p","lineChartHeight","xBg","xBgFloored","_inputY","tooltipY","lineChartStartY","stackBarChartY","chartX","stackBarChartHeight","getTooltipsDimensions","updateLineChartsHelper","dataArray","reference","yMax","scaleX","scaleY","datum","defined","lineChartYMax","nullData","updateLineCharts","currentCase","currentDeath","currentRecovered","deathWidth","recoveredWidth","updateStackBarChart","projection","fitExtent","timeControlStartY","timeControlStartX","timeBarStartY","buttonStartY","dateArray","group","selection","timeBarBg","timeBar","buttonGroup","buttonHeight","playButton","startOverButton","caseMaxLog","emptyColor","currentCases","updateMap","updateTimeControl","xSecondary","ySecondary","newCase","_case","isWaitFirstTick","tick","setTimeState","stopTimeLapse","clearTimeout","parseFloat","startTimeLapse","removeHighlightAndMoveTooltip","setToolTipDataState","clonedNode","clone","movedClonedNode","initMap","initTimeControl","initTooltip","mapZoomIn","appendMapPathMouseEvent","appendTimeBarMouseEvent","appendTimeControlButtonEvent","TopicCovid19Map","containerRef","then","dataFile","widthWrapper","heading","Topic","mx","useDebounce","Style","debounceInterval","lastExecuted","useSticky","UseSwipeableDirections","UserAction","anchorRef","styleName","RELATIVE","setStyle","shouldBeExecuted","scrollHandler","scrolled","scrollY","fixedStartHeight","offsetTop","offsetHeight","FIXED","position","left","isFixed","StickyComponent","elementRef","offsetWidth","zIndex","useGetCategoryFromQuery","location","useLocation","pathname","qs","queryString","tab","flexShrink","flexGrow","appBarBottomBoxShadow","boxShadow","HeaderTabs","categoryIndex","indexOf","AppBar","Tabs","indicatorColor","scrollButtons","Tab","headerLinks","appBarNoBoxShadow","trendIcon","toolbar","toolbarTitle","whiteSpace","toolbarButton","Header","appBarRef","Toolbar","align","Tooltip","TransitionComponent","Zoom","appBar","useSwipeable","threshholdPx","x1","setX1","setY1","NULL","userAction","setUserAction","setDirection","dragDistance","setDragDistance","touchStartHandler","e","changedTouches","clientX","clientY","touchMoveHandler","currentX","currentY","cancelable","preventDefault","abs","SWIPE","SCROLL","touchEndHandler","RIGHT","LEFT","currentElement","resetSwipeStatus","Swipeable","goPrevious","goNext","useLoadArticles","requestState","loadNewsInCategory","query","encodeURIComponent","getNews","minWidth","objectFit","overflow","ArticleCardImage","url","_url","CardMedia","alt","image","Skeleton","useLazyLoad","triggerPoint","isBefore","isAfter","getPublishTime","timePast","minutes","hours","days","months","years","getDateStringFromISOString","ISOString","hour","getHours","minute","getMinutes","getDateStringFromMs","ms","highlight","HighlightedContent","keyword","contentArray","escapedKeyword","replace","re","RegExp","subtitle","borderBottom","cursor","ArticleCardContent","source","author","getDateString","publishedAt","copyToClipboard","string","el","createElement","setAttribute","appendChild","execCommand","removeChild","flexWrap","ArticleCardActions","useDispatch","handleShare","origin","openCopyLinkSnackBar","startIcon","rootBig","rootNormal","paper","imageNormal","imageBig","ArticleCard","rootRef","urlToImage","skeletonCardWrapper","skeleton","Articles","scrollTo","fill","ArticlesWithCategoryLoader","ArticlesContainer","history","useHistory","willRedirect","includes","goNextCategory","nextIndex","goPreviousCategory","menuItem","SelectFilter","mounted","setMounted","FormControl","InputLabel","Select","labelId","onChange","handleChange","native","input","OutlinedInput","notched","MenuProps","anchorEl","getContentAnchorEl","transformOrigin","options","option","MenuItem","key","displayName","PaperWrapper","useInputFilter","setValue","currentTarget","_setValue","useDatePickerFilter","useSelectFilter","require","categoryOptions","c","sortByOptions","sortOrderOptions","dateToYyyymmdd","DEFAULT_START_DATE","getPathWithKeyword","startDate","endDate","sortBy","sortOrder","stringify","useSearchFilters","redirectCounter","setRedirectCounter","previousRedirectCounter","globalErrorMessage","setGlobalErrorMessage","resetGlobalErrorMessage","dateHasError","_setDateHasError","setDateHasError","resetDateHasError","parseStateFromQueryParam","parsed","parse","filters","yyyymmdd","yyyymmddToDate","prev","submitSearch","lighten","error","borderRadius","shape","iconWrapper","messageWrapper","ErrorMessage","Collapse","inputRow","inputLabel","errorMessageRow","filterRow","submitButton","alpha","body2","datePicker","SearchInput","keywordRef","searchFilter","datePickerProps","minDate","maxDate","format","inputVariant","KeyboardButtonProps","onError","focus","handleSubmit","handleClearKeyword","onSubmit","TextField","InputLabelProps","shrink","inputRef","fullWidth","InputProps","endAdornment","InputAdornment","edge","utils","DateFnsUtils","useTrendingSearch","lastWeek","allTime","buttonWrapper","orange","borderLeft","marginLeft","buttonText","textOverflow","wordBreak","caption","TrendingRow","endIcon","doc_count","paddingRight","rowWrapper","TrendingSearch","trending","marginRight","imageInnerWrapper","contentArea","SearchedArticleCard","useSearch","previousLocationSearch","pageRef","doSearch","page","docs","histogram","hasNext","smoothscroll","polyfill","modal","right","transitions","create","ScrollToTopButton","setIsActive","handleScroll","useActivateByScrollY","scroll","behavior","FrequencyChartD3","bin","frequency","selector","auxArray","binDate","getBinDateArray","barTransitionDelay","getBarTransitionDelayArray","lightColor","darkColor","dark","primaryColor","TRANSITION_DELAY","BAR_TRANSITION_DURATION","maxFrequency","binLength","argWidth","getDimensions","bars","axisXHoverDate","axisXHoverFrequency","axisYHover","hoverDetection","xHoverDate","xHoverFrequency","yHover","setHoverDetectionEventHandlers","getBarColor","binArray","transitionDelay","frequencyDataArray","chartY","scaled","barWidth","barHeight","tickSizeOuter","gridTextBox","hoverDateTextBox","setDate","setSvg","setBars","setAxisX","setAxisY","setAxisXHoverDate","setAxisXHoverFrequency","setAxisYHover","setHoverDetection","KeywordFrequency","wrapperRef","bindSetDate","centeringWrapper","loadMoreButton","totalCountRow","endOfResult","SearchedArticles","doc","Search","locationSearch","useGetArticleById","ArticleById","ArticleByIdContainer","useParams","header","mainArea","attribution","InnerApp","basename","exact","render","store","createStore","applyMiddleware","thunkMiddleware","App","ThemeProvider","CssBaseline","Boolean","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6c6c83f6.chunk.js","sourcesContent":["export enum CopyLinkSnackbarActionsTypes {\n  CLOSE_SNACKBAR = 'CLOSE_SNACKBAR',\n  OPEN_SNACKBAR = 'OPEN_SNACKBAR'\n}\n\nexport interface CopyLinkSnackBarActions {\n  type: CopyLinkSnackbarActionsTypes,\n  payload: {\n    link: string\n  }\n}\n\nexport function closeCopyLinkSnackBar() {\n  return {\n    type: CopyLinkSnackbarActionsTypes.CLOSE_SNACKBAR\n  }\n}\n\nexport function openCopyLinkSnackBar(link: string) {\n  return {\n    type: CopyLinkSnackbarActionsTypes.OPEN_SNACKBAR,\n    payload: {\n      link\n    }\n  }\n}\n","export interface State {\n  copyLinkSnackBar: {\n    isActive: boolean,\n    text: string\n  }\n}\n\nexport const initState: State = {\n  copyLinkSnackBar: {\n    isActive: false,\n    text: ''\n  }\n};\n","import {CopyLinkSnackBarActions, CopyLinkSnackbarActionsTypes} from \"../actions/copy-link-snackbar\";\nimport {State, initState} from \"../state\";\n\nfunction copyLinkSnackbar(state = initState.copyLinkSnackBar, actions: CopyLinkSnackBarActions): State['copyLinkSnackBar'] {\n  switch (actions.type) {\n    case CopyLinkSnackbarActionsTypes.CLOSE_SNACKBAR:\n      return {\n        isActive: false,\n        text: state.text\n      };\n    case CopyLinkSnackbarActionsTypes.OPEN_SNACKBAR:\n      return {\n        isActive: true,\n        text: actions.payload.link\n      };\n    default:\n      return state\n  }\n}\n\nexport default copyLinkSnackbar\n","import {combineReducers} from \"redux\";\nimport copyLinkSnackBar from \"./copy-link-snackbar\";\n\nconst rootReducers = combineReducers({\n  copyLinkSnackBar\n});\n\nexport default rootReducers;\n","import {createStore, applyMiddleware} from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport {initState} from \"./state\";\nimport rootReducers from \"./reducers/root-reducers\";\n\n// import { createLogger } from 'redux-logger'\n// const loggerMiddleware = createLogger();\n\nconst preloadedState = initState;\nexport default function configureStore() {\n  return createStore(\n    rootReducers,\n    preloadedState,\n    applyMiddleware(thunkMiddleware)\n    // applyMiddleware(thunkMiddleware, loggerMiddleware)\n  )\n}\n","import {CSSProperties} from \"react\";\n\nconst mierB = [\n  {\n    fontFamily: '\"MierB\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/MierB-Bold.woff2') format('woff2')\n    `,\n    fontWeight: 400\n  },\n  {\n    fontFamily: '\"MierB\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/MierB-Bold.woff2') format('woff2')\n    `,\n    fontWeight: 500\n  },\n  {\n    fontFamily: '\"MierB\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/MierB-Bold.woff2') format('woff2')\n    `,\n    fontWeight: 600\n  },\n  {\n    fontFamily: '\"MierB\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/MierB-ExtraBold.woff2') format('woff2')\n    `,\n    fontWeight: 700\n  },\n  {\n    fontFamily: '\"MierB\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/MierB-ExtraBold.woff2') format('woff2')\n    `,\n    fontWeight: 800\n  },\n  {\n    fontFamily: '\"MierB\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/MierB-Heavy.woff2') format('woff2')\n    `,\n    fontWeight: 900\n  },\n];\n\nconst inter = [\n  {\n    fontFamily: '\"Inter\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/Inter-Regular.woff2') format('woff2')\n    `,\n    fontWeight: 400\n  },\n  {\n    fontFamily: '\"Inter\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/Inter-Regular.woff2') format('woff2')\n    `,\n    fontWeight: 500\n  },\n  {\n    fontFamily: '\"Inter\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/Inter-SemiBold.woff2') format('woff2')\n    `,\n    fontWeight: 600\n  },\n  {\n    fontFamily: '\"Inter\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/Inter-Bold.woff2') format('woff2')\n    `,\n    fontWeight: 700\n  },\n  {\n    fontFamily: '\"Inter\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/Inter-Bold.woff2') format('woff2')\n    `,\n    fontWeight: 800\n  },\n  {\n    fontFamily: '\"Inter\"',\n    fontDisplay: 'swap',\n    src: `\n      url('${process.env.PUBLIC_URL}/assets/fonts/Inter-Bold.woff2') format('woff2')\n    `,\n    fontWeight: 900\n  }\n];\n\nexport {mierB, inter}\n","import {createTheme, responsiveFontSizes} from \"@material-ui/core/styles\";\nimport {Theme} from \"@material-ui/core\";\nimport {inter, mierB} from \"./fonts\";\n\nconst baseFontFamily = [\n  '-apple-system',\n  'BlinkMacSystemFont',\n  '\"Segoe UI\"',\n  'Roboto',\n  '\"Helvetica Neue\"',\n  'Arial',\n  'sans-serif',\n  '\"Apple Color Emoji\"',\n  '\"Segoe UI Emoji\"',\n  '\"Segoe UI Symbol\"',\n];\n\nconst titleTypography = {\n  fontFamily: ['\"MierB\"', ...baseFontFamily].join(','),\n  fontWeight: 700\n}\n\nlet theme = createTheme({\n  palette: {\n    primary: {\n      main: '#333333',\n      contrastText: '#fff',\n    },\n    secondary: {\n      main: '#1EB980',\n      contrastText: '#fff',\n    },\n  },\n  typography: {\n    fontFamily: ['\"Inter\"', ...baseFontFamily].join(','),\n    h1: titleTypography,\n    h2: titleTypography,\n    h3: titleTypography,\n    h4: titleTypography,\n    h5: titleTypography,\n    h6: titleTypography,\n    button: {\n      fontFamily: ['\"MierB\"', ...baseFontFamily].join(','),\n      fontWeight: 500\n    }\n  },\n  overrides: {\n    MuiCssBaseline: {\n      '@global': {\n        // @ts-ignore\n        '@font-face': [...inter, ...mierB],\n      },\n    },\n  },\n});\ntheme = responsiveFontSizes(theme);\n\nexport const MOBILE = (theme: Theme) => theme.breakpoints.down('sm');\n\nexport default theme;\n","import React from \"react\";\nimport {Avatar, Box, Chip, Grid, Link} from \"@material-ui/core\";\n\nfunction Attribution() {\n  return (\n    <Box m={2}>\n      <Grid container direction={'row'} spacing={2}>\n        <Grid item>\n          <Link href={'https://www.xiaoxihome.com/'} target={'_blank'} rel=\"noopener\" underline={\"none\"}>\n            <Chip\n              avatar={<Avatar>X</Avatar>}\n              label=\"🔧 with ❤️ by XiaoxiHome\"\n              color=\"primary\"\n              clickable\n            />\n          </Link>\n        </Grid>\n        <Grid item>\n          <Link href={'https://newsapi.org/'} target={'_blank'} rel=\"noopener\" underline={\"none\"}>\n            <Chip\n              avatar={<Avatar>N</Avatar>}\n              label=\"News data courtesy of NewsAPI.org\"\n              color=\"secondary\"\n              clickable\n            />\n          </Link>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}\n\nexport default Attribution;\n","import React from \"react\";\nimport {\n  createStyles,\n  IconButton,\n  Snackbar,\n  SnackbarContent,\n} from \"@material-ui/core\";\nimport Close from '@material-ui/icons/Close';\nimport {green} from '@material-ui/core/colors';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\n\nconst useStyles = makeStyles(() => createStyles({\n  successSnackBar: {\n    backgroundColor: green[600]\n  },\n}));\n\ninterface CopyLinkSnackbarProps {\n  isActive: boolean,\n  closeCopyLinkSnackBar: () => void,\n  text: string\n}\n\nfunction CopyLinkSnackbar(props: CopyLinkSnackbarProps) {\n  const classes = useStyles();\n\n  function closeHandler() {\n    props.closeCopyLinkSnackBar()\n  }\n\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      open={props.isActive}\n      autoHideDuration={3000}\n      onClose={closeHandler}\n    >\n      <SnackbarContent\n        className={classes.successSnackBar}\n        message={\n          <span id=\"client-snackbar\">\n                      {`${props.text} copied to clipboard`}\n                    </span>\n        }\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={closeHandler}>\n            <Close/>\n          </IconButton>,\n        ]}\n      />\n    </Snackbar>\n  )\n}\n\nexport default CopyLinkSnackbar;\n","import {State} from \"../redux/state\";\nimport {closeCopyLinkSnackBar} from \"../redux/actions/copy-link-snackbar\";\nimport {connect} from \"react-redux\";\nimport CopyLinkSnackbar from \"../components/copy-link-snackbar\";\nimport {Dispatch} from \"redux\";\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n  return {\n    closeCopyLinkSnackBar: () => dispatch(closeCopyLinkSnackBar())\n  }\n}\n\nfunction mapStateToProps(state: State) {\n  return {\n    isActive: state.copyLinkSnackBar.isActive,\n    text: state.copyLinkSnackBar.text\n  }\n}\n\nconst CopyLinkSnackBarContainer = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(CopyLinkSnackbar);\n\nexport default CopyLinkSnackBarContainer;\n","export enum NewsCategory {\n  HEADLINE = `headline`,\n  BUSINESS = `business`,\n  ENTERTAINMENT = `entertainment`,\n  HEALTH = `health`,\n  SCIENCE = `science`,\n  SPORTS = `sports`,\n  TECHNOLOGY = `technology`\n}\n\nexport const newsCategories = Object.values(NewsCategory);\n\nexport const getBaseAPI = () => {\n  return process.env.NODE_ENV === 'production' ? 'https://api.xiaoxihome.com' : 'http://localhost'\n}\n\nconst routers = {\n  root: {\n    path: '/',\n    getPathWithQuery: ({category}: { category: string }) => `/?category=${category}`\n  },\n  search: {\n    path: '/search'\n  },\n  analytics: {\n    path: '/analytics'\n  },\n  topic: {\n    path: '/topic'\n  },\n  article: {\n    path: '/article/:id',\n    getPathWithId: (id: string) => `/article/${id}`\n  }\n}\n\nexport default routers\n","import * as d3 from \"d3\";\nimport d3Cloud from \"d3-cloud\";\nimport seedrandom from \"seedrandom\";\n\nexport type WordCloudData = Array<{\n  count: number,\n  word: string\n}>\n\nclass WordCloudD3 {\n  colors = ['#003f5c', '#374c80', '#7a5195', '#bc5090', '#ef5675', '#ff764a', '#ffa600'];\n  id: string;\n  data: {\n    data: WordCloudData,\n    words: string[],\n    counts: number[],\n    maxCount: number\n  };\n  params: {\n    width: number,\n    height: number\n  };\n  scale: d3.ScaleLinear<number, number>;\n\n  constructor(data: WordCloudData, id: string) {\n    this.id = id;\n    this.data = this.getData(data);\n    const containerEl = document.getElementById(id);\n    this.params = {\n      width: containerEl ? containerEl.getBoundingClientRect().width : 0,\n      height: containerEl ? containerEl.getBoundingClientRect().height : 0,\n    };\n    this.scale = this.getScale();\n    this.styleSvg = this.styleSvg.bind(this);\n  }\n\n  getData(data: WordCloudData) {\n    const counts = data.map(obj => obj.count);\n    return {\n      data,\n      words: data.map(obj => obj.word),\n      counts,\n      maxCount: Math.max.apply(Math, counts)\n    }\n  }\n\n  getScale() {\n    return d3.scaleLinear()\n      .domain([0, this.data.maxCount])\n      .range([10, this.params.width / 5]);\n  }\n\n  draw() {\n    d3Cloud<{\n      text: string,\n      size: number\n    }>().size([this.params.width, this.params.height])\n      .timeInterval(20)\n      .words(this.data.data.map((d) => ({\n        text: d.word,\n        size: this.scale(d.count)\n      })))\n      .fontSize((d: any) => d.size)\n      .font('MierB')\n      .fontWeight(900)\n      .padding(1)\n      // .rotate(function() { return ~~(Math.random() * 2) * 90; })\n      // .rotate(function() { return (~~(Math.random() * 6) - 3) * 30; })\n      .rotate(function() { return 0 })\n      .random(seedrandom('a'))\n      .on(\"end\", this.styleSvg)\n      .start();\n  }\n\n  styleSvg(words: any) {\n    d3.select(`#${this.id}`).append(\"svg\")\n      .attr(\"width\", this.params.width)\n      .attr(\"height\", this.params.height)\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + [this.params.width >> 1, this.params.height >> 1] + \")\")\n      .selectAll(\"text\")\n      .data(words)\n      .enter().append(\"text\")\n      .style(\"font-size\", (d: any) => {\n        return d.size + \"px\"\n      })\n      .style(\"font-family\", \"MierB\")\n      .style(\"font-weight\", \"900\")\n      // .style(\"fill\", () => this.colors[Math.floor(Math.random() * this.colors.length)])\n      .style(\"fill\", (d, i) => this.colors[i % this.colors.length])\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", function (d: any) {\n        return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\";\n      })\n      .text(function (d: any) {\n        return d.text;\n      });\n  }\n\n  main() {\n    this.draw();\n  }\n}\n\nexport default WordCloudD3\n","import React, {useMemo} from \"react\";\nimport {makeStyles, useMediaQuery, useTheme} from \"@material-ui/core\";\nimport {MOBILE} from \"../../../theme/theme\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    [MOBILE(theme)]: {\n      padding: theme.spacing(4, 0)\n    }\n  }\n}));\n\ninterface AnalyticsSectionProps {\n  children: JSX.Element,\n  fullHeightOffset?: number\n}\n\nconst FullscreenSection = React.forwardRef<HTMLDivElement, AnalyticsSectionProps>(({fullHeightOffset, children}, ref) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(MOBILE(theme));\n  const height = useMemo(() => {\n    if (isMobile) {\n      return 'auto'\n    }\n\n    const max = 1440;\n    const min = 900;\n    const headerHeight = fullHeightOffset || 50;\n    return Math.min(max, Math.max(min, window.innerHeight)) - headerHeight;\n  }, [fullHeightOffset, isMobile]);\n\n  return (\n    <div className={classes.root} style={{height}} ref={ref}>\n      {children}\n    </div>\n  )\n})\n\nexport default FullscreenSection\n","import React from \"react\";\nimport {duration, makeStyles, Theme} from \"@material-ui/core\";\nimport transitions from \"@material-ui/core/styles/transitions\";\nimport clsx from 'clsx';\n\nconst useStyles = makeStyles<Theme, {direction: 'left' | 'right', duration: number}>((theme) => ({\n  root: {\n   transition: (props) => `opacity ${props.duration}ms, transform ${props.duration}ms`\n  },\n  inActive: {\n    opacity: 0,\n    transform: (props) => `translateX(${props.direction === 'left' ? '200px' : '-200px'})`\n  },\n  active: {\n    opacity: 1,\n    transform: `translateX(0)`\n  }\n}));\n\ninterface FadeAndSlideInProps {\n  active: boolean,\n  direction: 'left' | 'right',\n  children: JSX.Element,\n  duration: number\n}\n\nconst FadeAndSlideIn = ({active, direction, children, duration}: FadeAndSlideInProps) => {\n  const classes = useStyles({direction, duration});\n\n  return (\n    <div className={clsx(classes.root, active ? classes.active : classes.inActive)}>\n      {children}\n    </div>\n  )\n};\n\nexport default FadeAndSlideIn\n","import {usePrevious} from \"react-use\";\nimport {useEffect} from \"react\";\n\n// usePrevious first return undefined\n// callback will be executed when value change (mount won't trigger)\n\nconst useCallbackOnValueChange = (value: any, callback: () => void) => {\n  const previousValue = usePrevious(value);\n  useEffect(() => {\n    if (previousValue !== undefined && previousValue !== value) {\n      callback()\n    }\n  });\n}\n\nexport default useCallbackOnValueChange\n","import React, {useMemo, useRef, useState} from \"react\";\nimport {Fade, makeStyles, Typography} from \"@material-ui/core\";\nimport {useMount} from \"react-use\";\nimport {grey} from \"@material-ui/core/colors\";\nimport FadeAndSlideIn from \"./fade-and-slide-in\";\nimport useCallbackOnValueChange from \"../../../tools/use-callback-on-value-change\";\nimport {MOBILE} from \"../../../theme/theme\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(4),\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    [MOBILE(theme)]: {\n      padding: theme.spacing(1),\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n    }\n  },\n  titleWrapper: {\n    width: '30%',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    alignItems: 'flex-end',\n    [MOBILE(theme)]: {\n      width: '100%'\n    }\n  },\n  title: {\n    width: '100%',\n    textTransform: 'uppercase',\n    fontWeight: 900,\n    lineHeight: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n    textAlign: 'end',\n    [MOBILE(theme)]: {\n      alignItems: 'flex-start',\n      textAlign: 'start',\n    }\n  },\n  content: {\n    width: '100%',\n    textAlign: 'end',\n    fontWeight: 600,\n    color: grey[700],\n    margin: theme.spacing(1, 0),\n    [MOBILE(theme)]: {\n      textAlign: 'start',\n    }\n  },\n  chartWrapper: {\n    flex: '1 0 auto',\n    [MOBILE(theme)]: {\n      width: '100%',\n      height: 400,\n    }\n  },\n  chartWrapperInner: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    [MOBILE(theme)]: {\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n    }\n  },\n  chartWrapperDimension: {\n\n  }\n}));\n\ninterface SectionWithChartProps {\n  title: string | string[],\n  content: string,\n  children: JSX.Element,\n  cbOnChartElReady: () => void,\n  belowTitle?: JSX.Element,\n  isVisible: boolean\n}\n\nconst SectionWithChart = ({title, content, children, cbOnChartElReady, belowTitle, isVisible}: SectionWithChartProps) => {\n  const classes = useStyles();\n  const animationDuration = 600;\n\n  const chartWrapperRef = useRef<HTMLDivElement>(null);\n  const [chartSize, setChartSize] = useState(0);\n  const [chartElReady, setCharElReady] = useState(false);\n  useMount(() => {\n    if (!chartWrapperRef.current) return;\n    const rect = chartWrapperRef.current.getBoundingClientRect();\n    setChartSize(Math.min(rect.width, rect.height));\n    setCharElReady(true);\n  });\n\n  const words = useMemo(() => Array.isArray(title) ? title : title.split(' '), [title]);\n\n  useCallbackOnValueChange(chartElReady, () => {\n    if (chartElReady) {\n      cbOnChartElReady()\n    }\n  })\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.titleWrapper}>\n        <Typography component={'h2'} variant={'h2'} className={classes.title}>\n          {\n            words.map((word, i) => (\n              <FadeAndSlideIn active={isVisible} direction={i % 2 === 0 ? 'left' : 'right'} key={i} duration={animationDuration}>\n                <span>{word}</span>\n              </FadeAndSlideIn>\n            ))\n          }\n        </Typography>\n        <Typography variant={'h6'} component={'div'} className={classes.content}>\n          <FadeAndSlideIn active={isVisible} direction={words.length % 2 === 0 ? 'left' : 'right'} duration={animationDuration}>\n            <span>{content}</span>\n          </FadeAndSlideIn>\n        </Typography>\n        <Fade timeout={animationDuration * 2} in={isVisible}>\n          <div>\n            { belowTitle }\n          </div>\n        </Fade>\n      </div>\n      <Fade in={!!chartSize && isVisible} timeout={animationDuration}>\n        <div className={classes.chartWrapper}>\n          <div className={classes.chartWrapperInner} ref={chartWrapperRef}>\n            {\n              !!chartSize &&\n              <div className={classes.chartWrapperDimension} style={{width: chartSize, height: chartSize}}>\n                {children}\n              </div>\n            }\n          </div>\n        </div>\n      </Fade>\n    </div>\n  )\n};\n\nexport default SectionWithChart\n","import React from \"react\";\nimport {makeStyles, StepIcon} from \"@material-ui/core\";\nimport RadioButtonCheckedIcon from \"@material-ui/icons/RadioButtonChecked\";\nimport RadioButtonUncheckedIcon from \"@material-ui/icons/RadioButtonUnchecked\";\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\nconst YearStepperIcon = ({active}: React.ComponentProps<typeof StepIcon>) => {\n  const classes = useStyles();\n  \n  return active ? <RadioButtonCheckedIcon /> : <RadioButtonUncheckedIcon/>\n};\n\nexport default YearStepperIcon\n","import React from \"react\";\nimport {makeStyles, Step, StepButton, StepLabel, Stepper, Typography, useMediaQuery, useTheme} from \"@material-ui/core\";\nimport YearStepperIcon from \"./year-stepper-icon\";\nimport {MOBILE} from \"../../../theme/theme\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: 'rgba(0,0,0,0)',\n    '& .MuiStepConnector-line': {\n      borderColor: theme.palette.secondary.light\n    }\n  },\n  stepButton: {\n    color: theme.palette.secondary.main,\n  },\n  labelText: {\n    color: theme.palette.secondary.main,\n  }\n}));\n\ninterface YearStepperProps {\n  steps: string[],\n  activeStep: number,\n  onStepChange: (index: number) => void\n}\n\nconst YearStepper = ({steps, activeStep, onStepChange}: YearStepperProps) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(MOBILE(theme));\n\n  return (\n    <Stepper activeStep={activeStep} orientation={isMobile ? \"horizontal\" : \"vertical\"} className={classes.root}>\n      {steps.map((label, index) => (\n        <Step\n          key={label}\n          onClick={() => onStepChange(index)}\n        >\n          <StepButton\n            onClick={() => onStepChange(index)}\n            className={classes.stepButton}\n            disabled={false}\n            completed={false}\n          >\n            <StepLabel\n              StepIconComponent={YearStepperIcon}\n            >\n              <Typography variant={'h6'} component={'span'} className={classes.labelText}>\n                {label}\n              </Typography>\n            </StepLabel>\n          </StepButton>\n        </Step>\n      ))}\n    </Stepper>\n  )\n};\n\nexport default YearStepper\n","import {useEffect, useRef, useState} from \"react\";\n\n/**\n * updated 2021/Sep/13\n */\n\nconst useIsVisible = <Element extends HTMLElement>(initValue: boolean) => {\n  const [isVisible, setIsVisible] = useState(initValue);\n  const isVisibleElRef = useRef<Element>(null);\n\n  useEffect(() => {\n    const checkIsVisible = () => {\n      if (!isVisibleElRef.current) return;\n      const rect = isVisibleElRef.current.getBoundingClientRect();\n      const center = (rect.top + rect.bottom) / 2;\n      // when NOT visible ?\n      // 1. bottom of the rect is above the top of viewport\n      // 2. center of the rect is below the trigger point of viewport height\n      const notVisible = rect.bottom < 0 || center > 0.9 * window.innerHeight;\n      setIsVisible(!notVisible);\n    }\n    checkIsVisible();\n    document.addEventListener('scroll', checkIsVisible);\n    return () => {\n      document.removeEventListener('scroll', checkIsVisible)\n    }\n  }, []);\n\n  return {\n    isVisibleElRef,\n    isVisible\n  }\n}\n\nexport default useIsVisible\n","import React, {useCallback, useMemo, useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport WordCloudD3 from \"../../../d3-charts/word-cloud-d3\";\nimport FullscreenSection from \"../layouts/fullscreen-section\";\nimport SectionWithChart from \"../layouts/section-with-chart\";\nimport YearStepper from \"./year-stepper\";\nimport {AnalyticsData} from \"../hooks/use-get-analytics\";\nimport useCallbackOnValueChange from \"../../../tools/use-callback-on-value-change\";\nimport useIsVisible from \"../../../tools/use-is-visible\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    width: '100%',\n    height: '100%'\n  }\n}));\n\ninterface WordCloudProps {\n  data: AnalyticsData['wordCloud'],\n}\n\nconst WordCloud = ({data}: WordCloudProps) => {\n  const classes = useStyles();\n  const id = 'analytics-word-cloud';\n  const [selectedYear, setSelectedYear] = useState(data.length - 1);\n  const {\n    isVisible,\n    isVisibleElRef\n  } = useIsVisible<HTMLDivElement>(false);\n\n  const steps = useMemo(() => {\n    return data.map(obj => obj.year)\n  }, [data]);\n\n  const initChart = useCallback(() => {\n    const wordCloud = new WordCloudD3(\n      data.filter(obj => obj.year === data[selectedYear].year)[0].data,\n      id,\n    );\n    wordCloud.main();\n  }, [data, selectedYear]);\n\n  useCallbackOnValueChange(selectedYear, initChart);\n\n  const onStepChange = useCallback((index: number) => {\n    setSelectedYear(index)\n  }, [])\n\n  return (\n    <FullscreenSection ref={isVisibleElRef}>\n      <SectionWithChart\n        title={'Word it out'}\n        content={`The power of words.`}\n        cbOnChartElReady={initChart}\n        belowTitle={\n          <YearStepper steps={steps} activeStep={selectedYear} onStepChange={onStepChange}/>\n        }\n        isVisible={isVisible}\n      >\n        <div id={id} className={classes.container} key={selectedYear}> </div>\n      </SectionWithChart>\n    </FullscreenSection>\n  )\n};\n\nexport default WordCloud\n","import {useCallback, useState} from \"react\";\n\nconst BLANK_ERROR_MESSAGE = '';\nconst GENERIC_ERROR_MESSAGE = 'Sever Error';\n\nconst useRequestState = <DataType, >() => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(BLANK_ERROR_MESSAGE);\n  const [data, setData] = useState<DataType | null>(null);\n  const isError = errorMessage !== BLANK_ERROR_MESSAGE;\n\n  const resetError = useCallback(() => {\n    setErrorMessage(BLANK_ERROR_MESSAGE)\n  }, []);\n\n  const setGenericErrorMessage = useCallback(() => {\n    setErrorMessage(GENERIC_ERROR_MESSAGE)\n  }, []);\n\n  const resetAll = useCallback(() => {\n    resetError();\n    setIsLoading(false);\n    setData(null)\n  }, [resetError]);\n\n  return {\n    isLoading,\n    setIsLoading,\n    errorMessage,\n    setErrorMessage,\n    data,\n    setData,\n    isError,\n    resetError,\n    resetAll,\n    setGenericErrorMessage\n  }\n};\n\nexport default useRequestState\n","import useRequestState from \"../../../tools/use-request-state\";\nimport {useMount} from \"react-use\";\nimport axios from \"axios\";\nimport {getBaseAPI} from \"../../../routers\";\n\nexport interface AnalyticsData {\n  summary: {\n    totalCount: number,\n    firstDocDate: string,\n    lastDocDate: string\n  },\n  countByCategory: Array<{\n    count: number,\n    category: string\n  }>,\n  docsCountByDay: Array<{\n    count: number,\n    date: number\n  }>,\n  docCountByDayAndCategory: {\n    quantity: number[][],\n    series: string[],\n    order: string[]\n  },\n  wordCloud: Array<{\n    year: string,\n    data: Array<{\n      count: number,\n      word: string\n    }>\n  }>,\n}\n\nconst useGetAnalytics = () => {\n  const request = useRequestState<AnalyticsData>();\n\n  useMount(async () => {\n    try {\n      request.setIsLoading(true);\n      const res = await axios.get(`${getBaseAPI()}/api/news-analytics`);\n      const data = res.data;\n      if (data.status !== 'ok') {\n        throw new Error()\n      }\n\n      // docsCountByDay\n      const docsCountByDay: AnalyticsData['docsCountByDay'] = [];\n      data.data.docCountByDay.docCountByDay.forEach((count: number, i: number) => {\n        docsCountByDay.push({\n          count,\n          date: data.data.docCountByDay.date[i]\n        })\n      })\n\n      // docCountByDayAndCategory\n      const _docCountByDayAndCategory = data.data.docCountByDayAndCategory;\n      const quantity: number[][] = [];\n      const series: string[] = [];\n      const order = _docCountByDayAndCategory.categories;\n      _docCountByDayAndCategory.date.forEach((date: number, index: number) => {\n        series.push(new Date(date).toISOString());\n        quantity.push(_docCountByDayAndCategory.docCountByDayAndCategory[index])\n      })\n\n      request.setData({\n        summary: data.data.summary,\n        countByCategory: data.data.countByCategory,\n        docsCountByDay,\n        docCountByDayAndCategory: {\n          quantity,\n          series,\n          order\n        },\n        wordCloud: data.data.wordFrequency\n      })\n\n    } catch (e) {\n      console.log(e);\n      request.setGenericErrorMessage();\n    } finally {\n      request.setIsLoading(false);\n    }\n  });\n\n  return request\n}\n\nexport default useGetAnalytics\n","import React from 'react';\nimport {makeStyles, Paper, Typography, fade} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    minHeight: 250,\n    backgroundColor: fade(theme.palette.primary.main, 0.04),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#4a5568',\n    padding: theme.spacing(2)\n  },\n  icon: {\n    color: theme.palette.secondary.main,\n    width: 75,\n    height: 75\n  },\n  title: {\n    color: 'inherit',\n    fontWeight: 700,\n    textAlign: 'center'\n  },\n  text: {\n    color: 'inherit',\n    fontWeight: 500,\n    opacity: 0.9,\n    textAlign: 'center'\n  }\n}))\n\ninterface MessageWithIconProps {\n  title?: string,\n  text?: string | JSX.Element,\n  icon: JSX.Element\n}\n\nconst MessageWithIcon: React.FC<MessageWithIconProps> = ({title, text, icon}) => {\n  const classes = useStyles();\n\n  return (\n    <Paper elevation={0} className={classes.root}>\n      {\n        React.cloneElement(icon, {className: classes.icon})\n      }\n      {\n        title &&\n        <Typography variant={'h6'} className={classes.title}>\n          {title}\n        </Typography>\n      }\n      {\n        text &&\n        <Typography variant={'body1'} className={classes.text}>\n          {text}\n        </Typography>\n      }\n    </Paper>\n  )\n}\n\nexport default MessageWithIcon\n","import React, {useMemo} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {useSpring, animated, config, SpringValue} from '@react-spring/web';\nimport {Typography} from \"@material-ui/core\";\nimport FullscreenSection from \"./layouts/fullscreen-section\";\n\nconst monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: '#F2F2F2'\n  },\n  section: {\n    margin: theme.spacing(5, 0),\n    [theme.breakpoints.down('sm')]: {\n      margin: theme.spacing(2, 0)\n    }\n  },\n  title: {\n    fontWeight: 700\n  },\n  number: {\n    fontWeight: 900\n  }\n}));\n\nconst roundAndToMs = (isoString: string) => {\n  const date = new Date(isoString);\n  const rounded = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n  const dayMsMinusOneS = 1000 * 60 * 60 * 24 - 1;\n  return rounded.getTime() + dayMsMinusOneS;\n}\n\nconst useCountUpAnimation = (totalDocuments: number, earliestDocumentDate: string, latestDocumentDate: string) => {\n  const earliestMs = useMemo(() => roundAndToMs(earliestDocumentDate), [earliestDocumentDate]);\n  const latestMs = useMemo(() => roundAndToMs(latestDocumentDate), [latestDocumentDate]);\n\n  const commonProps = {\n    delay: 200,\n    config: config.molasses,\n  }\n  const {total} = useSpring({\n    from: {total: 0},\n    total: totalDocuments,\n    ...commonProps\n  })\n  const {earliest} = useSpring({\n    from: {earliest: 0},\n    earliest: earliestMs,\n    ...commonProps\n  })\n  const {latest} = useSpring({\n    from: {latest: 0},\n    latest: latestMs,\n    ...commonProps\n  });\n\n  return {\n    total,\n    earliest,\n    latest\n  }\n}\n\ninterface TextSummaryProps {\n  totalDocuments: number,\n  earliestDocumentDate: string,\n  latestDocumentDate: string\n}\n\nconst TextSummary = React.forwardRef<HTMLDivElement, TextSummaryProps>((\n  {\n    totalDocuments,\n    earliestDocumentDate,\n    latestDocumentDate\n  }, forwardedRef) => {\n  const classes = useStyles();\n  const {\n    total,\n    earliest,\n    latest\n  } = useCountUpAnimation(totalDocuments, earliestDocumentDate, latestDocumentDate);\n\n  const title = (value: string) => (\n    <Typography\n      className={classes.title}\n      variant={'body1'}\n      component={'h2'}\n    >\n      {value}\n    </Typography>\n  );\n  const date = (number: SpringValue<number>) => {\n    return (\n      <Typography variant={'h1'} component={'p'} className={classes.number}>\n        <animated.span>\n          {\n            number.to(n => {\n              const dateObj = new Date(n);\n              return `${dateObj.getDate()} ${monthStrings[dateObj.getMonth()]}, ${dateObj.getFullYear()}`\n            })\n          }\n        </animated.span>\n      </Typography>\n    )\n  };\n\n  return (\n    <FullscreenSection fullHeightOffset={100}>\n      <div className={classes.root}>\n        <div className={classes.section}>\n          {title('Total news articles archived')}\n          <Typography variant={'h1'} component={'p'} className={classes.number}>\n            <animated.span>\n              {\n                total.to(n => Math.round(n))\n              }\n            </animated.span>\n          </Typography>\n        </div>\n        <div className={classes.section}>\n          {title('First news article archived')}\n          {date(earliest)}\n        </div>\n        <div className={classes.section}>\n          {title('Most recent news article archived')}\n          {date(latest)}\n        </div>\n      </div>\n    </FullscreenSection>\n  )\n});\n\nexport default TextSummary\n","import {useCallback, useEffect, useRef, useState} from \"react\";\nimport {useMount, usePrevious, useUnmount} from \"react-use\";\n\nconst useChangeBackgroundColor = (isPageReady: boolean) => {\n  const bgColorChangeRef = useRef<HTMLDivElement>(null);\n  const [bgBlack, setBgBlack] = useState(false);\n\n  const changeBgColor = useCallback(() => {\n    if (!bgColorChangeRef.current) return;\n    const target = bgColorChangeRef.current.getBoundingClientRect().top - 200;\n    setBgBlack(target > 0);\n  }, []);\n\n  const previousBgBlack = usePrevious(bgBlack);\n  useEffect(() => {\n    if (previousBgBlack !== bgBlack && previousBgBlack !== undefined) {\n      document.body.style.backgroundColor = bgBlack ? 'black' : ''\n    }\n  }, [bgBlack, previousBgBlack]);\n\n  const prevIsPageReady = usePrevious(isPageReady);\n  useEffect(() => {\n    if (prevIsPageReady !== isPageReady && prevIsPageReady !== undefined && isPageReady) {\n      changeBgColor();\n    }\n  }, [bgBlack, changeBgColor, isPageReady, prevIsPageReady, previousBgBlack]);\n\n  useMount(() => {\n    document.addEventListener('scroll', changeBgColor);\n    return () => {\n      document.removeEventListener('scroll', changeBgColor);\n    }\n  })\n\n  useUnmount(() => {\n    document.body.style.backgroundColor = ''\n  })\n\n  return {\n    bgColorChangeRef,\n    bgBlack\n  }\n}\n\nexport default useChangeBackgroundColor\n","import * as d3 from \"d3\";\n\nexport type PieChartData = ArcData[];\n\ntype ArcData = {\n  title: string,\n  value: number\n}\n\nclass PieChartD3 {\n\n  readonly getColor = (index: number) => {\n    // const colors = ['#003f5c', '#374c80', '#7a5195' ,'#bc5090' ,'#ef5675' ,'#ff764a' ,'#ffa600'];\n    const colors = ['#ffa600', '#ff764a', '#ef5675', '#bc5090', '#7a5195', '#374c80', '#003f5c'];\n    return colors[index > colors.length - 1 ? 0 : index]\n  };\n  hasAnimated = false;\n  id: string;\n  params: {\n    width: number,\n    height: number,\n    startAngle: number,\n    endAngle: number\n    rx: number,\n    ry: number,\n    h: number,\n    ir: number,\n  };\n  svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n  references: {\n    pie: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    innerSlice: d3.Selection<SVGPathElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n    topSlice: d3.Selection<SVGPathElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n    outerSlice: d3.Selection<SVGPathElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n    text: d3.Selection<SVGTextElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n    text1: d3.Selection<SVGTextElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n    text2: d3.Selection<SVGTextElement, d3.PieArcDatum<ArcData>, SVGGElement, any>,\n  };\n  data: {\n    pieZero: d3.PieArcDatum<ArcData>[],\n    pie: d3.PieArcDatum<ArcData>[],\n    totalValue: number\n  };\n\n  constructor(id: string, data: PieChartData) {\n    this.id = id;\n    this.params = this.getParams();\n    this.svg = d3.select(`#${id}`).append(\"svg\");\n    this.data = {\n      pieZero: this.getPieData(data.map((_, i) => ({\n        value: i === 0 ? 100 : 0,\n        title: _.title\n      }))),\n      pie: this.getPieData(data),\n      totalValue: this.getPieData(data).reduce((a, b) => a + b.data.value, 0)\n    };\n    this.references = this.createReferences();\n  }\n\n  getParams() {\n    const container = document.getElementById(this.id);\n    const width = container ? container.getBoundingClientRect().width : 0;\n    const height = container ? container.getBoundingClientRect().height : 0;\n    return {\n      width,\n      height: height,\n      startAngle: Math.PI,\n      endAngle: Math.PI * 3,\n      rx: width / 2 * 0.8,\n      ry: height / 2 - 0.1 * height,\n      h: 0.1 * height,\n      ir: 0.4\n    }\n  };\n\n  getPieData(data: PieChartData) {\n    const _data = d3.pie<ArcData>()\n      .value((d) => d.value)\n      .sort((a, b) => -a.value + b.value)\n      .startAngle(this.params.startAngle)\n      .endAngle(this.params.endAngle)\n      (data);\n    return _data\n  }\n\n  createReferences() {\n    const pie = this.svg.append('g');\n\n    const innerSlice = pie\n      .selectAll().data(this.data.pie).enter().append(\"path\");\n\n    const topSlice = pie\n      .selectAll().data(this.data.pie).enter().append(\"path\");\n\n    const outerSlice = pie\n      .selectAll().data(this.data.pie).enter().append(\"path\");\n\n    const text = pie\n      .selectAll().data(this.data.pie).enter().append(\"text\");\n\n    const text1 = text.append('tspan');\n\n    const text2 = text.append('tspan');\n\n    return {\n      pie,\n      innerSlice,\n      topSlice,\n      outerSlice,\n      text,\n      text1,\n      text2\n    }\n  }\n\n  // @param x center x\n  // @param y center y\n  // @param rx radius x\n  // @param ry radius y\n  // @param h height x\n  // @param ir inner radius x\n  drawPie(x: number, y: number, rx: number, ry: number, h: number, ir: number) {\n    this.references.pie.attr(\"transform\", \"translate(\" + x + \",\" + y + \")\");\n\n    this.references.innerSlice\n      .style(\"fill\", (d) => d3.hsl(this.getColor(d.index)).darker().toString())\n      .attr(\"d\", (d) => this.pieInner(this.data.pieZero.filter(obj => obj.index === d.index)[0], rx + 0.5, ry + 0.5, 0, ir));\n\n    this.references.topSlice\n      .style(\"fill\", (d) => this.getColor(d.index))\n      .attr(\"d\", (d) => this.pieTop(this.data.pieZero.filter(obj => obj.index === d.index)[0], rx, ry, ir));\n\n    this.references.outerSlice\n      .style(\"fill\", (d) => d3.hsl(this.getColor(d.index)).darker().toString())\n      .attr(\"d\", (d) => this.pieOuter(this.data.pieZero.filter(obj => obj.index === d.index)[0], rx - .5, ry - .5, 0));\n\n    this.references.text\n      .attr(\"x\", '0')\n      .attr(\"y\", '0')\n      .attr(\"text-anchor\", \"middle\")\n      .style('fill', 'white')\n      .style('opacity', 0);\n\n    this.references.text1\n      .attr(\"dy\", 0)\n      .style(\"font-weight\", 700)\n      .text(d => d.data.title.toUpperCase());\n    this.references.text2.attr(\"dy\", '1.2em').text(d => ((d.data.value / this.data.totalValue) * 100).toFixed(2) + '%')\n  }\n\n  pieTransition(rx: number, ry: number, h: number, ir: number, initData: d3.PieArcDatum<ArcData>[], targetData: d3.PieArcDatum<ArcData>[]) {\n    const thisClass = this;\n    const duration = 2000;\n    const raiseDuration = 2000;\n\n    const iRaise = d3.interpolate(0, h);\n\n    function arcTweenInner(d: d3.PieArcDatum<ArcData>) {\n      return (t: number) => thisClass.pieInner(d, rx + 0.5, ry + 0.5, iRaise(t), ir);\n    }\n\n    function arcTweenTop(d: d3.PieArcDatum<ArcData>) {\n      const i = d3.interpolate(initData.filter(obj => obj.index === d.index)[0], targetData.filter(obj => obj.index === d.index)[0]);\n      return (t: number) => thisClass.pieTop(i(t), rx, ry, ir);\n    }\n\n    function arcTweenOuter(d: d3.PieArcDatum<ArcData>) {\n      return (t: number) => thisClass.pieOuter(d, rx - .5, ry - .5, iRaise(t));\n    }\n\n    function textTweenX(d: d3.PieArcDatum<ArcData>) {\n      const i = d3.interpolate(initData.filter(obj => obj.index === d.index)[0], targetData.filter(obj => obj.index === d.index)[0]);\n      return (t: number) => `${0.5 * (1 + ir) * rx * Math.cos(0.5 * (i(t).startAngle + i(t).endAngle))}`;\n    }\n\n    function textTweenY(d: d3.PieArcDatum<ArcData>) {\n      const i = d3.interpolate(initData.filter(obj => obj.index === d.index)[0], targetData.filter(obj => obj.index === d.index)[0]);\n      return (t: number) => `${0.5 * (1 + ir) * ry * Math.sin(0.5 * (i(t).startAngle + i(t).endAngle))}`;\n    }\n\n\n    this.references.innerSlice\n      .transition()\n      .duration(raiseDuration)\n      .delay(duration)\n      .attrTween('d', arcTweenInner);\n    this.references.topSlice\n      .transition()\n      .duration(duration)\n      .attrTween('d', arcTweenTop);\n    this.references.outerSlice\n      .transition()\n      .duration(raiseDuration)\n      .delay(duration)\n      .attrTween('d', arcTweenOuter);\n\n    this.references.text.style(\"opacity\", 0);\n    this.references.text\n      .transition()\n      .duration(duration)\n      .attrTween('x', textTweenX)\n      .attrTween('y', textTweenY)\n      .style(\"opacity\", 1);\n    this.references.text1.transition()\n      .duration(duration)\n      .attrTween('x', textTweenX);\n    this.references.text2.transition()\n      .duration(duration)\n      .attrTween('x', textTweenX);\n  }\n\n  pieTop(d: d3.PieArcDatum<ArcData>, rx: number, ry: number, ir: number) {\n    if (d.endAngle - d.startAngle === 0) return \"M 0 0\";\n    const sx = rx * Math.cos(d.startAngle),\n      sy = ry * Math.sin(d.startAngle),\n      ex = rx * Math.cos(d.endAngle),\n      ey = ry * Math.sin(d.endAngle);\n\n    const ret = [];\n    ret.push(\"M\", sx, sy, \"A\", rx, ry, \"0\", (d.endAngle - d.startAngle > Math.PI ? 1 : 0), \"1\", ex, ey, \"L\", ir * ex, ir * ey);\n    ret.push(\"A\", ir * rx, ir * ry, \"0\", (d.endAngle - d.startAngle > Math.PI ? 1 : 0), \"0\", ir * sx, ir * sy, \"z\");\n    return ret.join(\" \");\n  }\n\n  pieOuter(d: d3.PieArcDatum<ArcData>, rx: number, ry: number, h: number) {\n    const _startAngle = (d.startAngle < 2 * Math.PI ? 2 * Math.PI : d.startAngle);\n    const _endAngle = (d.endAngle < 2 * Math.PI ? 2 * Math.PI : d.endAngle);\n\n    const sx = rx * Math.cos(_startAngle),\n      sy = ry * Math.sin(_startAngle),\n      ex = rx * Math.cos(_endAngle),\n      ey = ry * Math.sin(_endAngle);\n\n    const ret = [];\n    ret.push(\"M\", sx, h + sy, \"A\", rx, ry, \"0 0 1\", ex, h + ey, \"L\", ex, ey, \"A\", rx, ry, \"0 0 0\", sx, sy, \"z\");\n    return ret.join(\" \");\n  }\n\n  pieInner(d: d3.PieArcDatum<ArcData>, rx: number, ry: number, h: number, ir: number) {\n    const startAngle = (d.startAngle < Math.PI ? Math.PI : d.startAngle);\n    const endAngle = (d.endAngle < Math.PI ? Math.PI : d.endAngle);\n\n    const sx = ir * rx * Math.cos(startAngle),\n      sy = ir * ry * Math.sin(startAngle),\n      ex = ir * rx * Math.cos(endAngle),\n      ey = ir * ry * Math.sin(endAngle);\n\n    const ret = [];\n    ret.push(\"M\", sx, sy, \"A\", ir * rx, ir * ry, \"0 0 1\", ex, ey, \"L\", ex, h + ey, \"A\", ir * rx, ir * ry, \"0 0 0\", sx, h + sy, \"z\");\n    return ret.join(\" \");\n  }\n\n  styleSvg() {\n    this.svg\n      .attr(\"width\", this.params.width)\n      .attr(\"height\", this.params.height);\n  }\n\n  animate() {\n    if (this.hasAnimated) return;\n    this.pieTransition(this.params.rx, this.params.ry, this.params.h, this.params.ir, this.data.pieZero, this.data.pie);\n    this.hasAnimated = true;\n  }\n\n  main() {\n    this.styleSvg();\n    this.drawPie(this.params.width / 2, this.params.height / 2, this.params.rx, this.params.ry, this.params.h, this.params.ir);\n  }\n}\n\nexport default PieChartD3\n","import React, {useCallback, useRef} from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport FullscreenSection from \"./layouts/fullscreen-section\";\nimport SectionWithChart from \"./layouts/section-with-chart\";\nimport PieChartD3 from \"../../d3-charts/pie-chart-d3\";\nimport {AnalyticsData} from \"./hooks/use-get-analytics\";\nimport useIsVisible from \"../../tools/use-is-visible\";\nimport useCallbackOnValueChange from \"../../tools/use-callback-on-value-change\";\n\nconst useStyles = makeStyles((theme) => ({\n  containerWrapper: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  container: {\n    width: '100%',\n    height: '50%'\n  }\n}));\n\ninterface DocsByCategoryProps {\n  data: AnalyticsData['countByCategory'],\n}\n\nconst DocsByCategory = ({data}: DocsByCategoryProps) => {\n  const classes = useStyles();\n  const id = 'analytics-docs-by-category';\n  const {\n    isVisible,\n    isVisibleElRef\n  } = useIsVisible<HTMLDivElement>(false);\n  const d3Ref = useRef<null | PieChartD3>(null);\n\n  const initChart = useCallback(() => {\n    d3Ref.current = new PieChartD3(\n      id,\n      data.map(obj => ({\n        value: obj.count,\n        title: obj.category\n      }))\n    );\n    d3Ref.current.main();\n  }, [data]);\n\n  useCallbackOnValueChange(isVisible, () => {\n    if (isVisible) {\n      d3Ref.current!.animate();\n    }\n  })\n\n  return (\n    <FullscreenSection ref={isVisibleElRef}>\n      <SectionWithChart\n        title={'News archived by category'}\n        content={`Overall I'd say the news are pretty well balanced.`}\n        cbOnChartElReady={initChart}\n        isVisible={isVisible}\n      >\n        <div className={classes.containerWrapper}>\n          <div id={id} className={classes.container}> </div>\n        </div>\n      </SectionWithChart>\n    </FullscreenSection>\n  )\n};\n\nexport default DocsByCategory\n","import * as d3 from \"d3\";\n\nexport type HeatMapData = Array<{\n  count: number,\n  date: number\n}>\n\nclass HeatMapD3 {\n\n  readonly getColor = (index: number) => {\n    const colors = ['#FFF3E0', '#FFE0B2', '#FFB74D', '#FB8C00', '#E65100'];\n    return colors[index > colors.length - 1 ? 0 : index]\n  };\n  readonly dayOfWeekStrings = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n  readonly monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n  readonly targetRectSize = 70;\n  readonly rectPadding = 0.1;\n  id: string;\n  isMobile: boolean;\n  params: {\n    width: number,\n    height: number,\n    m: { t: number, r: number, b: number, l: number },\n    chart: {\n      width: number,\n      height: number,\n      x: number,\n      y: number\n    };\n  };\n  svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n  references: {\n    xAxis: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    yAxis: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    rects: d3.Selection<SVGRectElement, { count: number, time: number }, SVGGElement, any>,\n    tooltipBackground: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n    tooltip: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n    tooltipText1: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n    tooltipText2: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n  };\n  data: {\n    x: number[], // # of week\n    y: number[], // # of day of week\n    xScaleDomain: string[],\n    xScaleGuide: number[],\n    yScaleDomain: string[],\n    data: Array<{\n      count: number,\n      time: number\n    }>,\n    maxCount: number\n  };\n  scales: {\n    x: d3.ScaleBand<string>,\n    y: d3.ScaleBand<string>,\n    color: d3.ScaleQuantize<number>\n  };\n  axis: {\n    x: d3.Axis<string>,\n    y: d3.Axis<string>,\n  };\n\n  constructor(id: string, data: HeatMapData, isMobile: boolean) {\n    this.id = id;\n    this.data = this.getData(data);\n    this.isMobile = isMobile;\n    this.params = this.getParams();\n    this.svg = d3.select(`#${id}`).append(\"svg\");\n    this.references = this.createReferences();\n    this.scales = this.getScales();\n    this.axis = this.getAxis();\n  }\n\n  getParams() {\n    const container = document.getElementById(this.id);\n    const width = container ? container.getBoundingClientRect().width : 0;\n\n    const m = {t: 20, r: 10, b: 10, l: 40};\n\n    const xBands = this.data.xScaleDomain.length;\n    const maxRectSize = Math.floor((width - m.l - m.r) / xBands);\n    const rectSize = Math.min(maxRectSize, this.targetRectSize);\n\n    const chart = {\n      width: this.data.xScaleDomain.length * rectSize,\n      height: 7 * rectSize,\n      x: m.l,\n      y: m.t\n    };\n    const _width = chart.width + m.l + m.r;\n    const height = chart.height + m.t + m.b;\n\n    return {\n      width: _width,\n      height,\n      m,\n      chart\n    }\n  };\n\n  getScales() {\n    return {\n      x: d3.scaleBand()\n        .domain(this.data.xScaleDomain)\n        .range([0, this.params.chart.width])\n        .padding(this.rectPadding),\n      y: d3.scaleBand()\n        .domain(this.data.yScaleDomain)\n        .range([0, this.params.chart.height])\n        .padding(this.rectPadding),\n      color: d3.scaleQuantize()\n        .domain([0, this.data.maxCount])\n        .range([0, 1, 2, 3, 4])\n    }\n  }\n\n  getAxis() {\n    return {\n      x: d3.axisTop(this.scales.x)\n        .tickFormat((d, i) => {\n          const monthOfFirstDate = new Date(this.data.xScaleGuide[0]).getUTCMonth();\n          if (i === 0) {\n            return this.monthStrings[monthOfFirstDate];\n          } else {\n            const monthOfLastDate = new Date(this.data.xScaleGuide[i - 1]).getUTCMonth();\n            const monthOfThisDate = new Date(this.data.xScaleGuide[i]).getUTCMonth();\n\n            if (monthOfLastDate === monthOfThisDate) {\n              return ''\n            } else {\n              if (this.isMobile) {\n                const _diff = monthOfThisDate - monthOfFirstDate;\n                const diff = _diff > 0 ? _diff : _diff + 12;\n                return diff % 3 === 0 ? this.monthStrings[monthOfThisDate] : ''\n              } else {\n                return this.monthStrings[monthOfThisDate]\n              }\n            }\n          }\n        })\n        .tickSize(0)\n        .tickPadding(5),\n      y: d3.axisLeft(this.scales.y)\n        .tickFormat((d) => this.dayOfWeekStrings[parseInt(d)])\n        .tickValues(['1', '3', '5'])\n        .tickSize(0)\n        .tickPadding(5)\n    }\n  }\n\n  getData(data: HeatMapData) {\n    // compensate the data array with empty data first, making the first day of the data array is Sunday.\n    const _data = data.map((obj, i) => ({\n      count: obj.count,\n      time: obj.date\n    }));\n    const aDay = 1000 * 60 * 60 * 24;\n    const firstActualData = new Date(_data[0].time);\n    let compensation = firstActualData.getUTCDay();\n    let time = _data[0].time;\n    while (compensation > 0) {\n      compensation--;\n      time -= aDay\n      _data.unshift({\n        count: 0,\n        time\n      });\n    }\n    //\n    const getY = (time: number[]) => {\n      // day of week\n      return time.map(_ => (new Date(_)).getUTCDay())\n    };\n\n    const getX = (time: number[]) => {\n      return time.map((_, i) => Math.floor(i / 7))\n    };\n\n    const timeArray = _data.map(_ => _.time);\n    const computedX = getX(timeArray);\n    const xScaleDomain = [];\n    const xScaleGuide = [];\n    for (let i = 0; i <= computedX[computedX.length - 1]; i++) {\n      xScaleDomain.push(i.toString());\n      xScaleGuide.push(_data[i * 7].time);\n    }\n    //\n    const computedY = getY(timeArray);\n    const yScaleDomain = [];\n    for (let i = 0; i < 7; i++) {\n      yScaleDomain.push(i.toString())\n    }\n    //\n    const maxCount = Math.max.apply(Math, _data.map(_ => _.count));\n    return {\n      x: computedX,\n      y: computedY,\n      xScaleDomain,\n      xScaleGuide,\n      yScaleDomain,\n      data: _data,\n      maxCount\n    }\n  }\n\n  createReferences() {\n    const xAxis = this.svg.append('g');\n    const yAxis = this.svg.append('g');\n    const rects = this.svg.append('g')\n      .selectAll('rect').data(this.data.data)\n      .enter().append('rect');\n    // tooltips has to be here to be rendered on top\n    const tooltipGroup = this.svg.append('g');\n    const tooltipBackground = tooltipGroup.append('rect');\n    const tooltip = tooltipGroup.append('text');\n\n    return {\n      xAxis,\n      yAxis,\n      rects,\n      tooltipBackground,\n      tooltip,\n      tooltipText1: tooltip.append('tspan'),\n      tooltipText2: tooltip.append('tspan'),\n    }\n  }\n\n  styleSvg() {\n    this.svg\n      .attr(\"width\", this.params.width)\n      .attr(\"height\", this.params.height);\n  }\n\n  styleAxisX() {\n    this.axis.x(this.references.xAxis);\n\n    this.references.xAxis.selectAll('.domain').remove();\n\n    this.references.xAxis\n      .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n      .style('font-size', '0.875rem')\n      .style('font-weight', '700');\n\n    this.references.xAxis.selectAll('text')\n      .style('fill', 'grey');\n\n  }\n\n  styleAxisY() {\n    this.axis.y(this.references.yAxis);\n\n    this.references.yAxis.selectAll('.domain').remove();\n\n    this.references.yAxis\n      .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n      .style('font-size', '0.875rem')\n      .style('font-weight', '700');\n\n    this.references.yAxis.selectAll('text')\n      .style('fill', 'grey');\n    // .attr('text-anchor', 'start')\n  }\n\n  styleRects() {\n    this.references.rects\n      .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n      .attr('width', this.scales.x.bandwidth())\n      .attr('height', this.scales.y.bandwidth())\n      .attr('x', (d, i) => this.scales.x(this.data.x[i].toString()) || 0)\n      .attr('y', (d, i) => this.scales.y(this.data.y[i].toString()) || 0);\n  }\n\n  styleTooltip() {\n    this.references.tooltip\n      .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n      .attr('text-anchor', 'middle')\n      .attr('alignment-baseline', 'middle');\n\n    this.references.tooltipText1\n      .style('font-weight', 700)\n      .style('fill', 'white');\n\n    this.references.tooltipText2\n      .style('fill', 'white');\n\n    this.references.tooltipBackground\n      .style('transform', `translate(${this.params.chart.x}px, ${this.params.chart.y}px)`)\n      .style('fill', '#000')\n      .style('opacity', 0.8)\n      .attr('rx', '5')\n      .attr('ry', '5');\n  }\n\n  addMouseEventToRects() {\n    const thisClass = this;\n    // tooltip padding\n    const px = 1.2;\n    const py = 2.5;\n\n    this.references.rects\n      .on('mouseover', function (this: SVGRectElement, d) {\n        const x = parseInt(this.getAttribute(\"x\") || '0');\n        const y = parseInt(this.getAttribute(\"y\") || '0');\n        const width = parseInt(this.getAttribute(\"width\") || '0');\n        const height = parseInt(this.getAttribute(\"height\") || '0');\n\n        // append texts to tspans first\n        thisClass.references.tooltipText1.text(`${d.count} news archived on `);\n\n        const date = new Date(d.time);\n        thisClass.references.tooltipText2.text(`${thisClass.monthStrings[date.getUTCMonth()]} ${date.getUTCDate()}, ${date.getUTCFullYear()}`)\n\n        // get dimension of text\n        // tooltip has text-anchor: middle\n        const bBox = thisClass.references.tooltip.node()?.getBBox();\n        const textWidth = bBox?.width || 0;\n        const textHeight = bBox?.height || 0;\n        const tooltipWidth = textWidth * px;\n        const tooltipHeight = textHeight * py;\n        let toolTipX = x + 0.5 * width;\n        let toolTipY = y - 0.5 * tooltipHeight;\n        const borderX0 = -thisClass.params.m.l;\n        const borderX1 = thisClass.params.width - thisClass.params.m.l;\n        const borderY0 = -thisClass.params.m.t;\n        const borderY1 = thisClass.params.height - thisClass.params.m.t;\n        // handle if x of tooltip is out of border\n        if (toolTipX - 0.5 * tooltipWidth < borderX0) {\n          toolTipX = borderX0 + 0.5 * tooltipWidth\n        } else if (toolTipX + 0.5 * tooltipWidth > borderX1) {\n          toolTipX = borderX1 - 0.5 * tooltipWidth;\n        }\n        // handle if y of tooltip is out of border\n        if (toolTipY - tooltipHeight < borderY0) {\n          toolTipY = borderY0 + tooltipHeight\n        } else if (toolTipY + tooltipHeight > borderY1) {\n          toolTipY = borderY1 - 0.5 * tooltipHeight;\n        }\n        thisClass.references.tooltip\n          .attr(\"x\", toolTipX)\n          .attr(\"y\", toolTipY);\n\n        // move tooltipBackground\n        thisClass.references.tooltipBackground\n          .attr(\"x\", toolTipX - 0.5 * tooltipWidth)\n          .attr(\"y\", toolTipY - 0.4 * textHeight - 0.5 * tooltipHeight)\n          .attr(\"width\", tooltipWidth)\n          .attr(\"height\", tooltipHeight);\n      })\n      .on('mouseleave', function (this: SVGRectElement, d) {\n        thisClass.references.tooltip\n          .attr(\"x\", -1000)\n          .attr(\"y\", -1000);\n        thisClass.references.tooltipBackground\n          .attr(\"x\", -1000)\n          .attr(\"y\", -1000);\n      })\n  }\n\n  prepareForAnimation() {\n    this.references.rects\n      .style('fill', this.getColor(3))\n  }\n\n  animate() {\n    this.references.rects.transition()\n      .style('fill', \"rgba(255, 255, 255, 0)\")\n      .duration(500);\n\n    this.references.rects.transition()\n      .style('fill', (d) => this.getColor(this.scales.color(d.count)))\n      .delay((d) => 500 + this.scales.color(d.count) * 1000)\n      .duration(800)\n  }\n\n  main() {\n    this.styleSvg();\n    this.styleAxisX();\n    this.styleAxisY();\n    this.styleRects();\n    this.styleTooltip();\n    this.addMouseEventToRects();\n    this.prepareForAnimation();\n  }\n}\n\nexport default HeatMapD3\n","import React, {useCallback, useRef} from \"react\";\nimport {makeStyles, useMediaQuery, useTheme} from \"@material-ui/core\";\nimport FullscreenSection from \"./layouts/fullscreen-section\";\nimport SectionWithChart from \"./layouts/section-with-chart\";\nimport {AnalyticsData} from \"./hooks/use-get-analytics\";\nimport HeatMapD3 from \"../../d3-charts/heat-map-d3\";\nimport useIsVisible from \"../../tools/use-is-visible\";\nimport useCallbackOnValueChange from \"../../tools/use-callback-on-value-change\";\nimport {MOBILE} from \"../../theme/theme\";\n\nconst useStyles = makeStyles((theme) => ({\n  containerWrapper: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  container: {\n    width: '100%'\n  }\n}));\n\ninterface DocsByDayProps {\n  data: AnalyticsData['docsCountByDay'],\n}\n\nconst DocsByDay = ({data}: DocsByDayProps) => {\n  const classes = useStyles();\n  const id = 'analytics-docs-by-day';\n  const {\n    isVisible,\n    isVisibleElRef\n  } = useIsVisible<HTMLDivElement>(false);\n  const d3Ref = useRef<null | HeatMapD3>(null);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(MOBILE(theme));\n\n  const initChart = useCallback(() => {\n    d3Ref.current = new HeatMapD3(\n      id,\n      data,\n      isMobile\n    );\n    d3Ref.current.main();\n  }, [data, isMobile]);\n\n  useCallbackOnValueChange(isVisible, () => {\n    if (isVisible) {\n      d3Ref.current!.animate();\n    }\n  })\n\n  return (\n    <FullscreenSection ref={isVisibleElRef}>\n      <SectionWithChart\n        title={'News archived each day'}\n        content={`Glad to see that people enjoyed their weekends.`}\n        cbOnChartElReady={initChart}\n        isVisible={isVisible}\n      >\n        <div className={classes.containerWrapper}>\n          <div id={id} className={classes.container}> </div>\n        </div>\n      </SectionWithChart>\n    </FullscreenSection>\n  )\n};\n\nexport default DocsByDay\n","import * as d3 from \"d3\";\n\nconst getAccumulativeSum = (array: number[]) => {\n  // TODO O(n^2)\n  const result: number[] = [];\n  const sumHash: { [key: string]: number } = {};\n  array.forEach((num, index, arr) => {\n    let i = index - 1;\n    let sum = 0;\n    while (i >= 0) {\n      if (sumHash[i] !== undefined) {\n        sum += sumHash[i];\n        break\n      } else {\n        sum += arr[i];\n        i--\n      }\n    }\n    sumHash[index - 1] = sum;\n    result.push(sum)\n  });\n\n  return result\n};\n\nexport interface StackedLineChartD3Data {\n  quantity: number[][],\n  series: string[],\n  order: string[]\n}\n\nclass StackedLineChartD3 {\n  readonly monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n  id: string;\n  colors = {\n    getAreaColor: (index: number) => {\n      const colors = ['#003f5c', '#374c80', '#7a5195', '#bc5090', '#ef5675', '#ff764a', '#ffa600'];\n      // const colors = ['#ffa600', '#ff764a', '#ef5675' ,'#bc5090' ,'#7a5195' ,'#374c80' ,'#003f5c'];\n      return colors[index > colors.length - 1 ? 0 : index]\n    },\n    textColor: '#555',\n    domainColor: 'red'\n  };\n  svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n  dimensions: {\n    svgWidth: number,\n    svgHeight: number,\n    m: { t: number, r: number, b: number, l: number },\n    chartWidth: number,\n    chartHeight: number\n  };\n  scales: {\n    y: d3.ScaleLinear<number, number>,\n    x: d3.ScaleLinear<number, number>,\n    xBand: d3.ScaleBand<string>,\n    xPoint: d3.ScalePoint<string>\n  };\n  axes: {\n    y: d3.Axis<number>,\n    x: d3.Axis<string>,\n    yAreaTitle: d3.Axis<number>,\n    xHover: d3.Axis<string>,\n    yHoverText: d3.Axis<number>,\n    yHoverLines: d3.Axis<number>,\n  };\n  references: {\n    axisX: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n    axisY: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n    axisYAreaTitle: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n    axisXHover: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n    axisYHoverText: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n    axisYHoverLines: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n    paths: d3.Selection<SVGPathElement, d3.Series<{ [key: string]: number; }, string>, SVGGElement, any> | null,\n    detectionRects: d3.Selection<SVGRectElement, number[], SVGGElement, any> | null,\n  };\n  data: {\n    stackData: { [key: string]: number }[],\n    maxQuantity: number\n  } & StackedLineChartD3Data;\n  shapes: {\n    stack: d3.Stack<number, { [key: string]: number }, string>,\n    getArea: (t: number) => d3.Area<any>\n  };\n\n\n  constructor(id: string, data: StackedLineChartD3Data) {\n    this.id = id;\n    this.svg = d3.select(`#${id}`).append(\"svg\");\n    this.data = this.getData(data, true);\n    this.dimensions = this.getDimension();\n    this.scales = this.getScales();\n    this.references = {\n      axisX: null,\n      axisY: null,\n      axisYAreaTitle: null,\n      axisXHover: null,\n      axisYHoverText: null,\n      axisYHoverLines: null,\n      paths: null,\n      detectionRects: null\n    };\n    this.shapes = this.getShapes();\n    this.axes = this.getAxes();\n  }\n\n  getData(data: StackedLineChartD3Data, convertToPercentage: boolean) {\n    let maxQuantity: number;\n    // percentage convert the daily quantity from absolute value to percentage of the sum of quantity in that day\n    // curve can be more readable in this way\n    if (convertToPercentage) {\n      const percentage = data.quantity.map(arr => {\n        const arrayLength = arr.length;\n        const sum = arr.reduce((a, b) => a + b);\n        return arr.map(num => sum === 0 ? (1 / arrayLength) : (num / sum))\n      });\n      data = Object.assign({}, data, {quantity: percentage});\n      maxQuantity = 1;\n    } else {\n      const maxS = data.quantity.map(arr => arr.reduce((a, b) => a + b));\n      maxQuantity = Math.max.apply(Math, maxS);\n    }\n\n    const stackData = data.quantity.map(arr => {\n      const obj: { [key: string]: number } = {};\n      arr.forEach((_, i) => obj[`${i}`] = _);\n      return obj\n    });\n\n    return {\n      ...data,\n      stackData,\n      maxQuantity\n    }\n  }\n\n  getDimension() {\n    const container = document.getElementById(this.id);\n    const width = container ? container.getBoundingClientRect().width : 0;\n    const height = container ? container.getBoundingClientRect().height : 0;\n\n    const m = {t: 10, r: 150, b: 50, l: 60};\n    const chartWidth = width - m.l - m.r;\n    const chartHeight = height - m.t - m.b;\n    return {\n      svgWidth: width,\n      svgHeight: height,\n      m,\n      chartWidth,\n      chartHeight\n    }\n  }\n\n  getScales() {\n    const xRange: [number, number] = [this.dimensions.m.l, this.dimensions.m.l + this.dimensions.chartWidth];\n    const x = d3.scaleLinear()\n      .domain([0, this.data.series.length - 1])\n      .range(xRange);\n    const y = d3.scaleLinear()\n      .domain([0, this.data.maxQuantity])\n      .range([this.dimensions.chartHeight + this.dimensions.m.t, this.dimensions.m.t]);\n    const xBand = d3.scaleBand<string>()\n      .domain(this.data.quantity.map((_, i) => i.toString()))\n      .range(xRange);\n    const xPoint = d3.scalePoint()\n      .domain(this.data.quantity.map((_, i) => `${i}`))\n      .range(xRange);\n    return {\n      x,\n      y,\n      xBand,\n      xPoint\n    }\n  }\n\n  getAxes() {\n    const xTickValues = this.dimensions.chartWidth >= 300 ?\n      [0, Math.floor(this.data.series.length * 0.25), Math.floor(this.data.series.length * 0.5), Math.floor(this.data.series.length * 0.75), this.data.series.length - 1].map(_ => `${_}`) :\n      [0, this.data.series.length - 1].map(_ => `${_}`);\n    const x = d3.axisBottom(this.scales.xBand)\n      .tickValues(xTickValues)\n      .tickFormat((d, i) => {\n        const isoString = this.data.series[parseInt(`${d}`)];\n        const date = new Date(isoString);\n        return `${date.getUTCDate()} ${this.monthStrings[date.getUTCMonth()]}, ${date.getUTCFullYear()}`\n      });\n    const y = d3.axisLeft<number>(this.scales.y)\n      .tickValues([0, this.data.maxQuantity])\n      .tickFormat((i) => ['0%', '100%'][parseInt(`${i}`)]);\n\n    const lastDayQuantities = this.data.quantity[this.data.quantity.length - 1].slice();\n    const yAreaTitleTickValues = getAccumulativeSum(lastDayQuantities);\n    yAreaTitleTickValues.forEach((num, i, arr) => arr[i] = num + 0.5 * lastDayQuantities[i]);\n    const yAreaTitle = d3.axisRight<number>(this.scales.y)\n      .tickValues(yAreaTitleTickValues)\n      .tickFormat((d, i) => this.data.order[parseInt(`${i}`)]);\n\n    const xHover = d3.axisBottom(this.scales.xPoint)\n      .tickValues([])\n      .tickFormat((d, i) => {\n        const isoString = this.data.series[parseInt(`${d}`)];\n        const date = new Date(isoString);\n        return `${date.getUTCDate()} ${this.monthStrings[date.getUTCMonth()]}, ${date.getUTCFullYear()}`\n      });\n\n    [x, y, yAreaTitle, xHover].forEach((_) => {\n      _.tickPadding(10);\n      _.tickSize(0);\n    });\n\n    const yHoverText = d3.axisLeft<number>(this.scales.y)\n      .tickValues([]);\n    const yHoverLines = d3.axisLeft<number>(this.scales.y)\n      .tickValues([]);\n\n    return {\n      x,\n      y,\n      yAreaTitle,\n      xHover,\n      yHoverText,\n      yHoverLines\n    }\n  }\n\n  initAxes() {\n    this.references.axisX = this.svg.append('g');\n    this.references.axisY = this.svg.append('g');\n    this.references.axisYAreaTitle = this.svg.append('g');\n    this.references.axisXHover = this.svg.append('g');\n    this.references.axisYHoverText = this.svg.append('g');\n    this.references.axisYHoverLines = this.svg.append('g');\n\n    this.axes.x(this.references.axisX);\n    this.axes.y(this.references.axisY);\n    this.axes.yAreaTitle(this.references.axisYAreaTitle);\n    this.axes.xHover(this.references.axisXHover);\n    this.axes.yHoverText(this.references.axisYHoverText);\n    this.axes.yHoverLines(this.references.axisYHoverLines);\n\n    this.references.axisX.style('transform', `translate(0px, ${this.dimensions.m.t + this.dimensions.chartHeight}px)`);\n    this.references.axisY.style('transform', `translate(${this.dimensions.m.l}px, 0px)`);\n    this.references.axisYAreaTitle.style('transform', `translate(${this.dimensions.m.l + this.dimensions.chartWidth}px, 0px)`);\n    this.references.axisXHover.style('transform', `translate(0px, ${this.dimensions.m.t + this.dimensions.chartHeight}px)`);\n    this.references.axisYHoverText.style('transform', `translate(${this.dimensions.m.l}px, 0px)`);\n    this.references.axisYHoverLines.style('transform', `translate(${this.dimensions.m.l}px, 0px)`);\n\n    const allAxes = [this.references.axisX, this.references.axisY, this.references.axisYAreaTitle, this.references.axisXHover, this.references.axisYHoverText, this.references.axisYHoverLines];\n\n    allAxes.forEach(_ => {\n      _\n        .selectAll('text')\n        .style('font-size', '0.875rem')\n        .style('font-weight', 700)\n        .style('fill', this.colors.textColor)\n    });\n    allAxes.forEach(_ => {\n      _\n        .selectAll('.domain')\n        .remove()\n    });\n    allAxes.forEach(_ => {\n      _.style('opacity', 1)\n    });\n\n    this.references.axisYAreaTitle\n      .selectAll('text')\n      .style('fill', (d, i) => this.colors.getAreaColor(i))\n      .style('text-transform', 'uppercase');\n  }\n\n  getShapes() {\n    const keys: string[] = this.data.order.map((_, i) => `${i}`);\n    const stack = d3.stack()\n      .keys(keys)\n      .order(d3.stackOrderNone)\n      .offset(d3.stackOffsetNone);\n\n    const getArea = (t: number) => {\n      return d3.area()\n        .x((d, i) => {\n          return this.scales.xPoint(`${i}`) || 0\n        })\n        .y0((d) => {\n          return this.scales.y(d[0] + (this.data.maxQuantity) * (1 - t))\n        })\n        .y1((d) => this.scales.y(d[1] + (this.data.maxQuantity) * (1 - t)))\n      // .curve(d3.curveNatural)\n    };\n\n    return {\n      stack,\n      getArea\n    }\n  }\n\n  initSvg() {\n    this.svg\n      .attr('width', this.dimensions.svgWidth)\n      .attr('height', this.dimensions.svgHeight)\n  }\n\n  initLineChart() {\n    this.references.paths = this.svg.append('g')\n      .selectAll('path')\n      .data(this.shapes.stack(this.data.stackData))\n      .enter()\n      .append('path')\n      .attr('d', (d) => this.shapes.getArea(0)(d))\n      .attr('fill', (d, i) => this.colors.getAreaColor(i))\n      .style('transform', `translateX(${this.scales.xBand.bandwidth()})`)\n  }\n\n  initDetectionRects() {\n    this.references.detectionRects = this.svg.append('g')\n      .selectAll('rect')\n      .data(this.data.quantity)\n      .enter()\n      .append('rect')\n      .attr('x', (d, i) => {\n        return (this.scales.xPoint(i.toString()) || 0) - this.scales.xBand.bandwidth() * 0.5\n      })\n      .attr('y', this.dimensions.m.t)\n      .attr('width', this.scales.xBand.bandwidth)\n      .attr('height', this.dimensions.chartHeight)\n      .style('fill', '#fff')\n      .style('opacity', 0)\n  }\n\n  animate() {\n    if (!this.references.paths) return;\n\n    this.references.paths.transition()\n      .delay((d, i) => i * 100)\n      .duration(1200)\n      .attrTween('d', (d) => {\n        return (t: number) => {\n          return this.shapes.getArea(t)(d) || ''\n        }\n      })\n      .ease(d3.easeCubicIn);\n\n    setTimeout(() => {\n      // this.appendMouseEventToSvg();\n      this.toggleAllAxes(true)\n    }, this.data.order.length * 200 + 1000 + 200)\n  }\n\n  toggleAllAxes(on: boolean) {\n    const opacity = on ? 1 : 0;\n    [\n      this.references.axisYAreaTitle,\n      this.references.axisX,\n      this.references.axisY\n    ].forEach(_ => {\n      _?.transition()\n        .duration(500)\n        .style('opacity', opacity)\n    })\n  }\n\n  appendMouseEventToSvg() {\n    this.svg\n      .on('mouseover', () => {\n        this.toggleAllAxes(true)\n      })\n      .on('mouseleave', () => {\n        this.toggleAllAxes(false)\n      })\n  }\n\n  appendMouseEventToDetectionRects() {\n    const thisClass = this;\n\n    const updateHoverXBg = () => {\n      if (!this.references.axisXHover) return;\n\n      const bBox = this.references.axisXHover.select<SVGTextElement>('text').node()?.getBBox();\n      if (!bBox) return;\n\n      this.references.axisXHover.selectAll('g.tick').insert('rect',\n        ':first-child')\n        .attr('width', bBox.width * 1.2)\n        .attr('height', bBox.height)\n        .attr('x', bBox.x - 0.1 * bBox.width)\n        .attr('y', bBox.y)\n        .style('fill', '#fefefe');\n\n    };\n\n    const updateHoverAxes = (percentages?: number[], seriesIndex?: number) => {\n      if (percentages !== undefined && seriesIndex !== undefined) {\n        const accumulativeSum = getAccumulativeSum(percentages);\n        const areaMidPosition = accumulativeSum.map((num, i) => num + 0.5 * percentages[i]);\n        this.axes.yHoverText\n          .tickValues(areaMidPosition)\n          .tickFormat((_d, _i) => `${(percentages[_i] * 100).toFixed(2)}%`)\n\n        this.axes.yHoverLines\n          .tickValues(accumulativeSum.slice(1))\n          .tickFormat(() => '')\n          .tickSizeInner(-thisClass.dimensions.chartWidth)\n\n        this.axes.xHover\n          .tickValues([`${seriesIndex}`])\n        if (this.references.axisXHover && this.references.axisYHoverText && this.references.axisYHoverLines) {\n          this.axes.xHover(this.references.axisXHover);\n          this.axes.yHoverText(this.references.axisYHoverText);\n          this.axes.yHoverLines(this.references.axisYHoverLines);\n\n          this.references.axisYHoverLines\n            .selectAll('line')\n            .style('stroke', 'rgba(255,255,255,0.6)')\n            .style('stroke-width', 2);\n\n          this.references.axisYHoverText\n            .selectAll('text')\n            .style('font-size', '0.875rem')\n            .style('font-weight', '700')\n            .style('fill', (d, i) => this.colors.getAreaColor(i));\n          this.references.axisYHoverText.select('.domain').remove();\n          this.references.axisYHoverText.selectAll('line')\n            .style('stroke', (d, i) => this.colors.getAreaColor(i))\n            .style('stroke-width', 5);\n\n          this.references.axisXHover\n            .selectAll('text')\n            .style('font-size', '0.875rem')\n            .style('font-weight', '700')\n            .style('fill', this.colors.textColor);\n\n          updateHoverXBg();\n        }\n      } else {\n        [this.axes.xHover, this.axes.yHoverText, this.axes.yHoverLines].forEach(_ => {\n          _.tickValues([]);\n        });\n        if (this.references.axisXHover && this.references.axisYHoverText && this.references.axisYHoverLines) {\n          this.axes.xHover(this.references.axisXHover);\n          this.axes.yHoverText(this.references.axisYHoverText);\n          this.axes.yHoverLines(this.references.axisYHoverLines);\n        }\n      }\n\n      if (this.references.axisXHover && this.references.axisYHoverText && this.references.axisYHoverLines) {\n        [this.references.axisXHover, this.references.axisYHoverText, this.references.axisYHoverLines].forEach(_ => {\n          _.select('.domain').remove()\n        });\n      }\n    };\n\n    this.references.detectionRects\n      ?.on('mouseover', function (d, i) {\n        d3.select(this).style('opacity', 0.3);\n        // @ts-ignore\n        updateHoverAxes(d, i)\n      })\n      .on('mouseleave', function (d, i) {\n        d3.select(this).style('opacity', 0);\n        updateHoverAxes()\n      })\n  }\n\n  main() {\n    this.initSvg();\n    this.initLineChart();\n    this.initAxes();\n    this.initDetectionRects();\n    this.appendMouseEventToDetectionRects();\n  }\n}\n\nexport default StackedLineChartD3\n","import React, {useCallback, useRef} from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport FullscreenSection from \"./layouts/fullscreen-section\";\nimport SectionWithChart from \"./layouts/section-with-chart\";\nimport {AnalyticsData} from \"./hooks/use-get-analytics\";\nimport StackedLineChartD3 from \"../../d3-charts/stacked-line-chart-d3\";\nimport useIsVisible from \"../../tools/use-is-visible\";\nimport HeatMapD3 from \"../../d3-charts/heat-map-d3\";\nimport useCallbackOnValueChange from \"../../tools/use-callback-on-value-change\";\n\nconst useStyles = makeStyles((theme) => ({\n  containerWrapper: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  container: {\n    width: '100%',\n    height: '80%'\n  }\n}));\n\ninterface DocsByDayAndCategoryProps {\n  data: AnalyticsData['docCountByDayAndCategory'],\n}\n\nconst DocsByDayAndCategory = ({data}: DocsByDayAndCategoryProps) => {\n  const classes = useStyles();\n  const id = 'analytics-docs-by-day-and-category';\n  const {\n    isVisible,\n    isVisibleElRef\n  } = useIsVisible<HTMLDivElement>(false);\n  const d3Ref = useRef<null | StackedLineChartD3>(null);\n\n  const initChart = useCallback(() => {\n    d3Ref.current = new StackedLineChartD3(\n      id,\n      data\n    );\n    d3Ref.current.main();\n  }, [data]);\n\n  useCallbackOnValueChange(isVisible, () => {\n    if (isVisible) {\n      d3Ref.current!.animate();\n    }\n  })\n\n  return (\n    <FullscreenSection ref={isVisibleElRef}>\n      <SectionWithChart\n        title={['News', 'archived', 'by', 'day & category']}\n        content={`Art made of data.`}\n        cbOnChartElReady={initChart}\n        isVisible={isVisible}\n      >\n        <div className={classes.containerWrapper}>\n          <div id={id} className={classes.container}> </div>\n        </div>\n      </SectionWithChart>\n    </FullscreenSection>\n  )\n};\n\nexport default DocsByDayAndCategory\n","import {useState} from \"react\";\n\nconst localStorageKey = 'analytics-slow-notification-showed';\nconst aDayInMs = 1000 * 60 * 60 * 24;\n\nconst useSlowNotification = () => {\n  const [isOpen, setIsOpen] = useState(() => {\n    const rawLastShowedTimestamp = parseInt(localStorage.getItem(localStorageKey) || '0');\n    const lastShowedTimestamp = isNaN(rawLastShowedTimestamp) ? 0 : rawLastShowedTimestamp;\n    return Date.now() - lastShowedTimestamp > aDayInMs\n  });\n\n  const handleClose = () => {\n    setIsOpen(false);\n    localStorage.setItem(localStorageKey, `${Date.now()}`);\n  }\n\n  return {\n    isOpen,\n    handleClose\n  }\n};\n\nexport default useSlowNotification\n","import React from \"react\";\nimport {Button, makeStyles, Snackbar, Typography} from \"@material-ui/core\";\nimport useSlowNotification from \"./use-slow-notification\";\n\nconst useStyles = makeStyles((theme) => ({\n  message: {\n    maxHeight: '60vh',\n    overflowY: 'auto',\n    padding: theme.spacing(2, 4),\n    '& h5': {\n      marginBottom: theme.spacing(4),\n      '& strong': {\n        color: theme.palette.warning.main\n      }\n    },\n    '& li': {\n      margin: theme.spacing(2, 0)\n    },\n  }\n}));\n\ninterface SlowNotificationProps {}\n\nconst SlowNotification = () => {\n  const classes = useStyles();\n  const {isOpen, handleClose} = useSlowNotification();\n  \n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      open={isOpen}\n      autoHideDuration={null}\n      message={\n        <div className={classes.message}>\n          <Typography variant={'h6'} component={'h5'}>\n            You might ask, why <strong>this page takes very long</strong> to load?\n          </Typography>\n          <ol>\n            <Typography variant={'body1'} component={'li'}>\n              Initially this report functionality had a in memory cache mechanism built on server.\n              The server restarts once everyday, and the report get generated and cached in memory shortly after the server is rebooted.\n            </Typography>\n            <Typography variant={'body1'} component={'li'}>\n              In the recent upgrade of this app, the database used to generate this report has been migrated to Elasticsearch from MongoDB,\n              and ES has built in cache mechanism for frequently requested data. However this app is running on a 1 core 2GB memory server, and Elasticsearch is\n              hungry for memory. The memory used to cache this query can be reclaimed much sooner than if this app was deployed on a better server.\n            </Typography>\n          </ol>\n        </div>\n      }\n      action={\n        <Button\n          variant={'contained'}\n          color={'secondary'}\n          disableElevation\n          onClick={handleClose}\n        >\n          Close\n        </Button>\n      }\n    />\n  )\n};\n\nexport default SlowNotification\n","import React, {useMemo} from \"react\";\nimport {CircularProgress, makeStyles} from \"@material-ui/core\";\nimport WordCloud from \"./word-cloud/word-cloud\";\nimport useGetAnalytics from \"./hooks/use-get-analytics\";\nimport Box from \"@material-ui/core/Box\";\nimport MessageWithIcon from \"../utility-components/message-with-icon\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport TextSummary from \"./text-summary\";\nimport useChangeBackgroundColor from \"./hooks/use-change-background-color\";\nimport DocsByCategory from \"./docs-by-category\";\nimport DocsByDay from \"./docs-by-day\";\nimport DocsByDayAndCategory from \"./docs-by-day-and-category\";\nimport FullscreenSection from \"./layouts/fullscreen-section\";\nimport SlowNotification from \"./slow-notification/slow-notification\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100vw',\n    maxWidth: '100%',\n    overflowX: 'hidden'\n  },\n  centering: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n}));\n\ninterface AnalyticsProps {}\n\nconst Analytics = () => {\n  const classes = useStyles();\n  const getAnalytics = useGetAnalytics();\n  const isDataReady = useMemo(() => !getAnalytics.isLoading && !getAnalytics.isError && !!getAnalytics.data, [getAnalytics.data, getAnalytics.isError, getAnalytics.isLoading]);\n\n  const {\n    bgColorChangeRef,\n  } = useChangeBackgroundColor(isDataReady);\n\n  return (\n    <div className={classes.root}>\n      <SlowNotification/>\n      {\n        getAnalytics.isLoading &&\n        <FullscreenSection>\n          <div className={classes.centering}>\n            <CircularProgress color={\"secondary\"}/>\n          </div>\n        </FullscreenSection>\n      }\n      {\n        !getAnalytics.isLoading && getAnalytics.isError &&\n        <Box my={2} width={'100%'}>\n          <MessageWithIcon\n            icon={<InfoIcon/>}\n            title={'Server Error'}\n            text={'Please try again later'}\n          />\n        </Box>\n      }\n      {\n        !getAnalytics.isLoading && !getAnalytics.isError && !!getAnalytics.data &&\n        <>\n          <TextSummary\n            totalDocuments={getAnalytics.data.summary.totalCount}\n            earliestDocumentDate={getAnalytics.data.summary.firstDocDate}\n            latestDocumentDate={getAnalytics.data.summary.lastDocDate}\n          />\n          <div ref={bgColorChangeRef} />\n          <DocsByCategory data={getAnalytics.data.countByCategory} />\n          <DocsByDay data={getAnalytics.data.docsCountByDay} />\n          <DocsByDayAndCategory data={getAnalytics.data.docCountByDayAndCategory} />\n          <WordCloud data={getAnalytics.data.wordCloud} />\n        </>\n      }\n    </div>\n  )\n};\n\nexport default Analytics\n","import * as d3 from \"d3\";\n\nexport interface CovidCaseData {\n  countries: {\n    [key: string]: {\n      cases: number[],\n      deaths: number[],\n      recovered: number[],\n    }\n  }\n  series: string[],\n  totals: {\n    cases: number[],\n    deaths: number[],\n    recovered: number[],\n  },\n  lastUpdated: string\n}\n\ninterface FeatureProperties {\n  name: string,\n  case: {\n    cases: number[],\n    deaths: number[],\n    recovered: number[],\n  } | null\n}\n\nclass WorldMapD3 {\n  color = {\n    red: '#ef5350',\n    transparent: 'rgba(0,0,0,0)',\n    getMapColor: (percentage: number) => `rgba(55, 76, 128, ${percentage.toFixed(1)})`,\n    grey: \"#eee\",\n    mapStrokeNormal: '#ccc',\n    mapStrokeHoverHighlight: '#222',\n    case: '#ffb140',\n    death: '#f16a67',\n    recovered: '#78c37b',\n    timeBarHighlight: '#7a5195',\n    timeBarNormal: '#af96bf',\n    timeBarLight: '#e4dbe8'\n  };\n  monthStrings = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n  getStrokeWidth = () => this.dimension.svgWidth >= 1000 ? 1 : 0.5;\n  animations = {\n    zoomIn: {\n      delay: 0,\n      duration: 3000,\n    },\n    changeMapColor: {\n      delay: 3000,\n      duration: 1000,\n    },\n    timeLapse: {\n      delay: 4000,\n    },\n    timeLapseGap: 500\n  };\n  id: string;\n  dimension: {\n    svgWidth: number,\n    svgHeight: number,\n    m: { t: number, r: number, b: number, l: number },\n    mapX: number,\n    mapY: number\n    mapWidth: number,\n    mapHeight: number\n  };\n  themeColor: string;\n  data: {\n    aggregate: d3.ExtendedFeatureCollection<d3.ExtendedFeature<d3.GeoGeometryObjects, FeatureProperties>> | null,\n    case: CovidCaseData,\n    caseMax: number\n  };\n  references: {\n    svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any> | null,\n    map: {\n      paths: d3.Selection<SVGPathElement, d3.ExtendedFeature<d3.GeoGeometryObjects, FeatureProperties>, SVGGElement, any> | null,\n      pathHighlightGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any> | null,\n      pathHighlight: d3.Selection<SVGPathElement | null, unknown, HTMLElement, any> | null,\n    }\n    tooltip: {\n      bg: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n      tooltipGroup: d3.Selection<SVGGElement, unknown, HTMLElement, any>\n      tooltip: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanCountry: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanDate: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanCaseAccumulative: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanDeathAccumulative: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanRecoveredAccumulative: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanCaseNew: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanDeathNew: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      tspanRecoveredNew: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      caseLineChart: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n      deathLineChart: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n      recoveredLineChart: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n      stackBarChartCase: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n      stackBarChartDeath: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n      stackBarChartRecovered: d3.Selection<SVGRectElement, unknown, HTMLElement, any>,\n    } | null,\n    timeControl: {\n      group: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n      dateText: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      timeBarBg: d3.Selection<SVGRectElement, string, SVGGElement, any>,\n      timeBar: d3.Selection<SVGRectElement, string, SVGGElement, any>,\n      playButton: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n      startOverButton: d3.Selection<SVGTextElement, unknown, HTMLElement, any>,\n    } | null\n  };\n  scales: {\n    timeBarXScale: d3.ScaleBand<string>\n  };\n  state: {\n    time: number,\n    timeMax: number,\n    tooltipData: {\n      inputX: number, // top left x of map path rect, used as primary anchor\n      inputXSecondary: number, // top right x of map path rect, used in case primary anchor causing tooltip overlaps map rect\n      inputY: number, // top right y of map path rect\n      inputYSecondary: number, // bottom right y of map path rect\n      data: {\n        country: string,\n        case: {\n          cases: number[],\n          deaths: number[],\n          recovered: number[],\n        } | undefined | null\n      }\n    }\n  };\n  timeLapse: {\n    timeoutID: number | null\n  };\n\n  constructor(id: string, width: number, height: number, themeColor: string, caseData: CovidCaseData) {\n    this.id = id;\n    this.dimension = this.getDimension(width, height);\n    this.themeColor = themeColor;\n    this.data = {\n      aggregate: null,\n      case: caseData,\n      caseMax: 0\n    };\n    this.references = {\n      svg: null,\n      map: {\n        paths: null,\n        pathHighlightGroup: null,\n        pathHighlight: null\n      },\n      tooltip: null,\n      timeControl: null\n    };\n    this.scales = {\n      timeBarXScale: d3.scaleBand()\n    };\n    this.state = {\n      time: 0,\n      timeMax: 0,\n      tooltipData: {\n        inputX: -1000,\n        inputXSecondary: -1000,\n        inputY: -1000,\n        inputYSecondary: -1000,\n        data: {\n          country: '',\n          case: undefined\n        }\n      }\n    };\n    this.timeLapse = {\n      timeoutID: null\n    }\n  }\n\n  getDimension(width: number, height: number) {\n    const svgWidth = width;\n    const svgHeight = height;\n    const m = {t: 0, r: 10, b: 75, l: 10};\n    return {\n      svgWidth,\n      svgHeight,\n      m,\n      mapX: m.l,\n      mapY: m.t,\n      mapWidth: svgWidth - m.l - m.r,\n      mapHeight: svgHeight - m.t - m.b\n    }\n  }\n\n  async getData() {\n    try {\n      const module = await import('./world-map-data');\n      let caseMax = 0;\n      const mapData: any = module.default;\n      mapData.features.forEach((obj: any) => {\n        if (!obj.properties) return;\n        obj.properties.case = this.data.case.countries[obj.properties.name] ?\n          Object.assign({}, this.data.case.countries[obj.properties.name]) :\n          null;\n\n        this.data.case.countries[obj.properties.name]?.cases.forEach(num => {\n          if (num > caseMax) caseMax = num\n        })\n      });\n      this.data.aggregate = mapData;\n      this.data.caseMax = caseMax;\n      this.state.timeMax = this.data.case.series.length - 1;\n\n      // const casesCountries = Object.keys(this.data.case.countries).sort((a, b) => a.localeCompare(b));\n      // const mapCountries = this.data.map.features.map(obj=>obj.properties!.name).sort((a, b) => a.localeCompare(b));\n      // console.log(casesCountries, mapCountries);\n      //\n      // const casesCountriesFiltered: string[] = [];\n      // const mapCountriesFiltered: string[] = [];\n      //\n      // casesCountries.forEach(str => {\n      //     if (mapCountries.indexOf(str) === -1) {\n      //         casesCountriesFiltered.push(str)\n      //     }\n      // })\n      //\n      // mapCountries.forEach(str => {\n      //     if (casesCountries.indexOf(str) === -1) {\n      //         mapCountriesFiltered.push(str)\n      //     }\n      // })\n      // console.log(casesCountriesFiltered, mapCountriesFiltered)\n    } catch (e) {\n      throw (e)\n    }\n  }\n\n  initSvg() {\n    this.references.svg = d3.select(`#${this.id}`)\n      .append('svg')\n      .attr('width', this.dimension.svgWidth)\n      .attr('height', this.dimension.svgHeight)\n    // .style('background-color', 'rgba(255,0,0,0.5');\n  }\n\n  initTooltip() {\n    if (!this.references.svg) return;\n    const tooltipGroup = this.references.svg.append('g');\n    const bg = tooltipGroup.append('rect');\n    const tooltip = tooltipGroup.append('text');\n    const tspanCountry = tooltip.append('tspan');\n    const tspanDate = tooltip.append('tspan');\n    const tspanCaseAccumulative = tooltip.append('tspan');\n    const tspanCaseNew = tooltip.append('tspan');\n    const tspanDeathAccumulative = tooltip.append('tspan');\n    const tspanDeathNew = tooltip.append('tspan');\n    const tspanRecoveredAccumulative = tooltip.append('tspan');\n    const tspanRecoveredNew = tooltip.append('tspan');\n    const caseLineChart = tooltipGroup.append('path');\n    const deathLineChart = tooltipGroup.append('path');\n    const recoveredLineChart = tooltipGroup.append('path');\n    const stackBarChartGroup = tooltipGroup.append('g');\n    const stackBarChartCase = stackBarChartGroup.append('rect');\n    const stackBarChartDeath = stackBarChartGroup.append('rect');\n    const stackBarChartRecovered = stackBarChartGroup.append('rect');\n    tooltip\n      .style('font-weight', 700)\n      .style('font-size', '0.875rem')\n      .style('fill', '#fff')\n      .attr(\"text-anchor\", \"middle\")\n    // .attr('alignment-baseline', 'bottom')\n    // tspanCountry\n    // tspanDate\n    // tspanCaseAccumulative\n    // tspanDeathAccumulative\n    // tspanRecoveredAccumulative\n    tspanCaseNew\n      .style('fill', this.color.case);\n    tspanDeathNew\n      .style('fill', this.color.death)\n    tspanRecoveredNew\n      .style('fill', this.color.recovered)\n\n    bg\n      .style('fill', 'rgba(0,0,0,0.8)')\n      .attr('rx', '5px');\n\n    [caseLineChart, deathLineChart, recoveredLineChart].forEach(_ => {\n      _\n        .style('stroke-width', 2)\n        .style('fill', 'none')\n    });\n    caseLineChart.style('stroke', this.color.case);\n    deathLineChart.style('stroke', this.color.death);\n    recoveredLineChart.style('stroke', this.color.recovered);\n    //\n    stackBarChartCase.style('fill', this.color.case);\n    stackBarChartDeath.style('fill', this.color.death);\n    stackBarChartRecovered.style('fill', this.color.recovered);\n\n\n    this.references.tooltip = {\n      bg,\n      tooltipGroup,\n      tooltip,\n      tspanCountry,\n      tspanDate,\n      tspanCaseAccumulative,\n      tspanDeathAccumulative,\n      tspanRecoveredAccumulative,\n      tspanCaseNew,\n      tspanDeathNew,\n      tspanRecoveredNew,\n      caseLineChart,\n      deathLineChart,\n      recoveredLineChart,\n      stackBarChartCase,\n      stackBarChartDeath,\n      stackBarChartRecovered\n    };\n    this.updateTooltip()\n\n  }\n\n  updateTooltip() {\n    const {\n      inputX, // top left x of map path rect, used as primary anchor\n      inputXSecondary, // top right x of map path rect, used in case primary anchor causing tooltip overlaps map rect\n      inputY, // top right y of map path rect\n      inputYSecondary, // bottom right y of map path rect\n      data\n    } = this.state.tooltipData;\n    if (!this.references.tooltip) return;\n\n    const currentT = this.state.time;\n    const getNew = (num: number) => {\n      return num >= 0 ? ` (+${num})` : ` (${num})`\n    };\n\n    const getTooltipsDimensions = () => {\n      if (!this.references.tooltip) return;\n\n      const bBox = this.references.tooltip.tooltip.node()?.getBBox();\n      if (!bBox) return;\n      const p = 0.3;\n      const shift = 5;\n      const textWidth = bBox.width;\n      const textHeight = bBox.height;\n      const lineChartHeight = 20;\n      const stackBarChartMarginTop = 10;\n      const stackBarChartHeight = 15;\n      const chartWidth = 150;\n      const tooltipWidth = (1 + p) * Math.max(chartWidth, textWidth);\n      const tooltipHeight = (1 + p) * (textHeight + lineChartHeight * 3 + stackBarChartHeight + stackBarChartMarginTop);\n\n      const xBg = inputX - tooltipWidth - shift;\n      const xBgFloored = Math.max(this.dimension.m.l, xBg);\n      let textX, tooltipX;\n      let _inputY = inputY;\n      if (xBgFloored + tooltipWidth > inputX) {\n        // overlapping with map rect\n        tooltipX = inputXSecondary + shift;\n        if (tooltipX + tooltipWidth > this.dimension.svgWidth) {\n          // tooltip overflows viewport right edge now\n          // fallback to use primary x and use secondary y\n          tooltipX = xBgFloored;\n          textX = tooltipX + 0.5 * tooltipWidth;\n          _inputY = inputYSecondary\n        } else {\n          textX = tooltipX + 0.5 * tooltipWidth\n        }\n      } else {\n        tooltipX = xBgFloored;\n        textX = tooltipX + 0.5 * tooltipWidth\n      }\n\n      let tooltipY = _inputY - p / 2 * bBox.height;\n      tooltipY = Math.min(tooltipY, this.dimension.svgHeight - tooltipHeight);\n      tooltipY = Math.max(tooltipY, 0);\n      const lineChartStartY = tooltipY + 0.5 * p * tooltipHeight + textHeight;\n      const stackBarChartY = lineChartStartY + 3 * lineChartHeight + stackBarChartMarginTop;\n\n      return {\n        tooltipX,\n        tooltipY,\n        tooltipWidth,\n        tooltipHeight,\n        textX,\n        textY: tooltipY + p / 2 * bBox.height,\n        chartX: textX - chartWidth / 2,\n        chartWidth,\n        lineChartStartY,\n        lineChartHeight,\n        stackBarChartY,\n        stackBarChartHeight\n      }\n    };\n\n    const updateTexts = () => {\n      if (!this.references.tooltip) return;\n\n      const date = new Date(this.data.case.series[currentT]);\n      const dateText = `${date.getDate()} ${this.monthStrings[date.getMonth()]}, ${date.getFullYear()}`;\n      const noData = 'Unknown';\n\n      this.references.tooltip.tspanCountry.text(data.country);\n      this.references.tooltip.tspanDate.text(dateText);\n      if (!data.case) {\n        // no data\n        this.references.tooltip.tspanCaseAccumulative.text(`Confirmed: ${noData}`);\n        this.references.tooltip.tspanCaseNew.text('');\n        this.references.tooltip.tspanDeathAccumulative.text(`Death: ${noData}`);\n        this.references.tooltip.tspanDeathNew.text('');\n        this.references.tooltip.tspanRecoveredAccumulative.text(`Recovered: ${noData}`);\n        this.references.tooltip.tspanRecoveredNew.text('');\n      } else {\n        this.references.tooltip.tspanCaseAccumulative.text(`Confirmed: ${data.case.cases[currentT]}`);\n        this.references.tooltip.tspanCaseNew.text(currentT === 0 ? getNew(0) : getNew(data.case.cases[currentT] - data.case.cases[currentT - 1]));\n        this.references.tooltip.tspanDeathAccumulative.text(`Death: ${data.case.deaths[currentT]}`);\n        this.references.tooltip.tspanDeathNew.text(currentT === 0 ? getNew(0) : getNew(data.case.deaths[currentT] - data.case.deaths[currentT - 1]));\n        this.references.tooltip.tspanRecoveredAccumulative.text(`Recovered: ${data.case.recovered[currentT]}`);\n        this.references.tooltip.tspanRecoveredNew.text(currentT === 0 ? getNew(0) : getNew(data.case.recovered[currentT] - data.case.recovered[currentT - 1]));\n      }\n    };\n\n    const updateDimensionAndPosition = (\n      textX: number,\n      textY: number,\n      tooltipX: number,\n      toolTipY: number,\n      tooltipWidth: number,\n      tooltipHeight: number\n    ) => {\n      if (!this.references.tooltip) return;\n\n      this.references.tooltip.tooltip\n        .attr('x', textX)\n        .attr('y', textY);\n      this.references.tooltip.tspanCountry\n        .attr('x', textX)\n        .attr('dy', '0.875em');\n      this.references.tooltip.tspanDate\n        .attr('x', textX)\n        .attr('dy', '1em');\n      this.references.tooltip.tspanCaseAccumulative\n        .attr('x', textX)\n        .attr('dy', '1em');\n\n      this.references.tooltip.tspanDeathAccumulative\n        .attr('x', textX)\n        .attr('dy', '1em');\n\n      this.references.tooltip.tspanRecoveredAccumulative\n        .attr('x', textX)\n        .attr('dy', '1em');\n\n      this.references.tooltip.bg\n        .attr('x', tooltipX)\n        .attr('y', toolTipY)\n        .attr('width', tooltipWidth)\n        .attr('height', tooltipHeight);\n    };\n\n    const updateLineCharts = (\n      chartX: number,\n      chartWidth: number,\n      lineChartStartY: number,\n      lineChartHeight: number\n    ) => {\n      if (!this.references.tooltip) return;\n\n      const updateLineChartsHelper = (\n        dataArray: number[],\n        reference: d3.Selection<SVGPathElement, unknown | [number, number][], HTMLElement, any>,\n        yMax: number,\n        x: number,\n        y: number\n      ) => {\n        const data: [number, number][] = dataArray.map((num, i) => [i, num]);\n        const scaleX = d3.scaleLinear()\n          .domain([0, this.data.case.series.length - 1])\n          .range([0, chartWidth]);\n        const scaleY = d3.scaleLinear()\n          .domain([0, yMax])\n          .range([20, 0]);\n\n        reference\n          .datum(data)\n          .attr('d', d3.line()\n            .x((d) => scaleX(d[0]))\n            .y((d) => scaleY(d[1]))\n            .defined((d, i) => i <= currentT)\n          )\n          .style('transform', `translate(${x}px, ${y}px)`)\n      };\n\n      if (this.state.tooltipData.data.case) {\n        // has data\n        const lineChartYMax = Math.max.apply(Math, this.state.tooltipData.data.case.cases);\n        updateLineChartsHelper(this.state.tooltipData.data.case.cases, this.references.tooltip.caseLineChart, lineChartYMax, chartX, lineChartStartY);\n        updateLineChartsHelper(this.state.tooltipData.data.case.deaths, this.references.tooltip.deathLineChart, lineChartYMax, chartX, lineChartStartY + lineChartHeight);\n        updateLineChartsHelper(this.state.tooltipData.data.case.recovered, this.references.tooltip.recoveredLineChart, lineChartYMax, chartX, lineChartStartY + lineChartHeight * 2);\n      } else {\n        // either no data or mouse is leaving, need to move line chart out\n        const nullData: number[] = [];\n        updateLineChartsHelper(nullData, this.references.tooltip.caseLineChart, 0, chartX, lineChartStartY);\n        updateLineChartsHelper(nullData, this.references.tooltip.deathLineChart, 0, chartX, lineChartStartY + lineChartHeight);\n        updateLineChartsHelper(nullData, this.references.tooltip.recoveredLineChart, 0, chartX, lineChartStartY + lineChartHeight * 2);\n      }\n    };\n\n    const updateStackBarChart = (\n      chartX: number,\n      chartWidth: number,\n      stackBarChartY: number,\n      stackBarChartHeight: number\n    ) => {\n      if (!this.references.tooltip) return;\n\n      if (this.state.tooltipData.data.case) {\n        // has data\n        const currentCase = this.state.tooltipData.data.case.cases[currentT];\n        const currentDeath = this.state.tooltipData.data.case.deaths[currentT];\n        const currentRecovered = this.state.tooltipData.data.case.recovered[currentT];\n        const deathWidth = currentCase === 0 ? 0 : (currentDeath / currentCase) * chartWidth;\n        const recoveredWidth = currentCase === 0 ? 0 : (currentRecovered / currentCase) * chartWidth;\n        this.references.tooltip.stackBarChartCase\n          .attr('x', chartX)\n          .attr('width', () => currentCase === 0 ? 0 : chartWidth)\n          .attr('height', stackBarChartHeight)\n          .attr('y', stackBarChartY);\n        this.references.tooltip.stackBarChartDeath\n          .attr('x', chartX + chartWidth - deathWidth)\n          .attr('width', deathWidth)\n          .attr('height', stackBarChartHeight)\n          .attr('y', stackBarChartY);\n        this.references.tooltip.stackBarChartRecovered\n          .attr('x', chartX)\n          .attr('width', recoveredWidth)\n          .attr('height', stackBarChartHeight)\n          .attr('y', stackBarChartY)\n      } else {\n        // either no data or mouse is leaving, need to move line chart out\n        [this.references.tooltip.stackBarChartCase, this.references.tooltip.stackBarChartDeath, this.references.tooltip.stackBarChartRecovered].forEach(_ => {\n          _\n            .attr('x', chartX)\n            .attr('width', 0)\n            .attr('height', 0)\n            .attr('y', stackBarChartY);\n        });\n      }\n    };\n\n    // update texts first so that the dimensions can change base on the max text width\n    updateTexts();\n    const dimensions = getTooltipsDimensions();\n    if (dimensions) {\n      updateDimensionAndPosition(dimensions.textX, dimensions.textY, dimensions.tooltipX, dimensions.tooltipY, dimensions.tooltipWidth, dimensions.tooltipHeight);\n      updateLineCharts(dimensions.chartX, dimensions.chartWidth, dimensions.lineChartStartY, dimensions.lineChartHeight);\n      updateStackBarChart(dimensions.chartX, dimensions.chartWidth, dimensions.stackBarChartY, dimensions.stackBarChartHeight);\n    }\n  }\n\n  initMap() {\n    if (!this.data.aggregate || !this.references.svg) return;\n\n    const projection = d3.geoNaturalEarth1()\n      .fitExtent([[this.dimension.mapX, this.dimension.mapY], [this.dimension.mapWidth, this.dimension.mapHeight]], this.data.aggregate);\n\n    this.references.map.paths = this.references.svg.append(\"g\")\n      .selectAll(\"path\")\n      .data(this.data.aggregate.features)\n      .enter().append(\"path\")\n      .attr(\"fill\", this.color.grey)\n      .attr(\"d\", d3.geoPath()\n        .projection(projection)\n      )\n      .style(\"stroke\", this.color.mapStrokeNormal)\n      .style(\"stroke-width\", this.getStrokeWidth())\n      .style('opacity', 0)\n      .style('transform', 'scale(5)')\n      .style('transform-origin', '50% 50%');\n\n    this.references.map.pathHighlightGroup = this.references.svg.append(\"g\");\n  }\n\n  mapZoomIn() {\n    if (!this.references.map.paths) return;\n    this.references.map.paths.transition()\n      .delay((d, i) => (i % 10) * 200)\n      .duration(1000)\n      .style('opacity', 1)\n      .style('transform', 'scale(1)');\n\n    // change map color from grey to white\n    this.references.map.paths.transition()\n      .delay(this.animations.changeMapColor.delay)\n      .duration(this.animations.changeMapColor.duration)\n      .style('fill', this.color.getMapColor(0))\n  }\n\n  initTimeControl() {\n    if (!this.references.svg) return;\n    // dimensions\n    const margin = 4;\n    const timeControlStartY = this.dimension.svgHeight - this.dimension.m.b;\n    const timeControlStartX = 0.2 * this.dimension.svgWidth;\n    const dateTextHeight = 16;\n    const timeBarStartY = timeControlStartY + dateTextHeight + margin;\n    const timeBarHeight = 10;\n    const buttonStartY = timeBarStartY + timeBarHeight + margin;\n    const buttonHeight = 16;\n    //\n    const dateArray = this.data.case.series;\n    this.scales.timeBarXScale = d3.scaleBand()\n      .domain(dateArray)\n      .range([timeControlStartX, 0.8 * this.dimension.svgWidth]);\n\n    const group = this.references.svg.append(\"g\");\n    const dateText = group.append(\"text\")\n      .attr('x', timeControlStartX)\n      .attr('y', timeControlStartY + dateTextHeight)\n      .attr('font-size', `${dateTextHeight}px`)\n      .attr('font-weight', 700)\n      .style('fill', this.color.timeBarHighlight);\n    const [timeBarBg, timeBar] = [0, 1].map(_ => {\n      const selection = group.append('g')\n        .selectAll('rect')\n        .data(dateArray)\n        .enter()\n        .append('rect')\n        .style('cursor', 'pointer')\n        .attr('y', timeBarStartY)\n        .attr('x', (d) => `${this.scales.timeBarXScale(d)}`)\n        .attr('width', this.scales.timeBarXScale.bandwidth())\n        .attr('height', timeBarHeight)\n        .style('opacity', 0);\n      selection\n        .transition()\n        .delay(2000)\n        .duration(1000)\n        .style('opacity', 1);\n      return selection\n    });\n    timeBarBg\n      .style('fill', this.color.timeBarLight)\n      .style('stroke', `#fff`)\n      .style('stroke-width', 1);\n    timeBar\n      .style('fill', this.color.transparent);\n\n    const buttonGroup = group.append('g');\n    const [playButton, startOverButton] = [\n      {\n        y: buttonStartY + buttonHeight,\n        text: 'Pause'\n      },\n      {\n        y: buttonStartY + buttonHeight * 2,\n        text: 'Start Over'\n      }\n    ].map(_ => {\n      const selection = buttonGroup\n        .append('text')\n        .style('cursor', 'pointer')\n        .style('opacity', '0')\n        .style('fill', this.color.timeBarNormal)\n        .attr('font-weight', 700)\n        .attr('x', timeControlStartX)\n        .attr('y', _.y)\n        .text(_.text);\n      selection.transition()\n        .delay(this.animations.timeLapse.delay)\n        .duration(1000)\n        .style('opacity', 1);\n      selection\n        .on('mouseenter', () => {\n          selection.style('fill', this.color.timeBarHighlight)\n        })\n        .on('mouseleave', () => {\n          selection.style('fill', this.color.timeBarNormal)\n        });\n      return selection\n    });\n    this.references.timeControl = {\n      group,\n      dateText,\n      timeBarBg,\n      timeBar,\n      playButton,\n      startOverButton\n    };\n  }\n\n  updateTimeControl() {\n    if (!this.references.timeControl) return;\n\n    const currentT = this.state.time;\n    const date = new Date(this.data.case.series[currentT]);\n    this.references.timeControl.dateText.text(`${date.getDate()} ${this.monthStrings[date.getMonth()]}, ${date.getFullYear()}`)\n\n    this.references.timeControl.timeBar\n      .style('fill', (d, i) => i <= this.state.time ? this.color.timeBarNormal : this.color.transparent)\n    // .style('stroke', this.color.transparent)\n    this.references.timeControl.timeBar.filter((d, i) => i === this.state.time)\n      .transition()\n      .duration(this.animations.timeLapseGap)\n      .attrTween('width', (d) => (t: number) => `${t * this.scales.timeBarXScale.bandwidth()}px`)\n      .ease(d3.easeLinear)\n  }\n\n  updateMap() {\n    const caseMaxLog = Math.log(this.data.caseMax);\n    const emptyColor = this.color.getMapColor(0);\n\n    if (!this.references.map.paths) return;\n    this.references.map.paths\n      .style('fill', (d) => {\n        if (!d.properties.case) {\n          // no data\n          return emptyColor\n        } else {\n          const currentCases = d.properties.case.cases[this.state.time];\n          if (currentCases < 1) {\n            return emptyColor\n          } else {\n            return this.color.getMapColor(Math.log(currentCases) / caseMaxLog)\n          }\n        }\n      })\n  }\n\n  setTimeState(time: number) {\n    this.state.time = time;\n    this.updateMap();\n    this.updateTimeControl();\n    this.updateTooltip();\n  }\n\n  setToolTipDataState(\n    x: number,\n    xSecondary: number,\n    y: number,\n    ySecondary: number,\n    country: string,\n    newCase: typeof WorldMapD3.prototype.state.tooltipData.data.case\n  ) {\n    let _case = null;\n    if (newCase) {\n      _case = {\n        cases: newCase.cases.slice(),\n        deaths: newCase.deaths.slice(),\n        recovered: newCase.recovered.slice()\n      }\n    }\n    this.state.tooltipData = Object.assign(\n      this.state.tooltipData,\n      {\n        inputX: x,\n        inputXSecondary: xSecondary,\n        inputY: y,\n        inputYSecondary: ySecondary,\n        data: {\n          country: country,\n          case: _case\n        }\n      })\n  }\n\n  startTimeLapse(isWaitFirstTick?: boolean) {\n    const tick = () => {\n      if (this.state.time < this.state.timeMax) {\n        this.setTimeState(this.state.time + 1);\n        this.timeLapse.timeoutID = window.setTimeout(tick, this.animations.timeLapseGap)\n      } else {\n        this.stopTimeLapse()\n      }\n    };\n\n    this.references.timeControl?.playButton.text('Pause');\n    if (isWaitFirstTick) {\n      this.timeLapse.timeoutID = window.setTimeout(() => tick(), this.animations.timeLapseGap)\n    } else {\n      tick();\n    }\n  }\n\n  stopTimeLapse() {\n    this.references.timeControl?.playButton.text('Start');\n\n    if (this.timeLapse.timeoutID !== null) {\n      window.clearTimeout(this.timeLapse.timeoutID);\n      this.timeLapse.timeoutID = null;\n    }\n  }\n\n  appendTimeBarMouseEvent() {\n    if (!this.references.timeControl) return;\n\n    const thisClass = this;\n    this.references.timeControl.timeBar\n      .on('mouseenter', function () {\n        d3.select(this).style('fill', thisClass.color.timeBarHighlight)\n      })\n      .on('mouseleave', function (d, i) {\n        d3.select(this).style('fill', parseFloat(i) <= thisClass.state.time ? thisClass.color.timeBarNormal : thisClass.color.transparent)\n      })\n      .on('click', function (d, i) {\n        thisClass.stopTimeLapse();\n        thisClass.setTimeState(parseFloat(i))\n      })\n  }\n\n  appendTimeControlButtonEvent() {\n    if (!this.references.timeControl) return;\n\n    this.references.timeControl.playButton.on('click', () => {\n      if (this.timeLapse.timeoutID !== null) {\n        this.stopTimeLapse();\n      } else {\n        this.startTimeLapse();\n      }\n    });\n\n    this.references.timeControl.startOverButton.on('click', () => {\n      this.stopTimeLapse();\n      this.setTimeState(0);\n      this.startTimeLapse(true);\n    });\n  }\n\n  appendMapPathMouseEvent() {\n    // when mouse enter a country:\n    // 1. use d3.selection.clone() to clone the country path, the cloned path will be append right after the original path.\n    // 2. remove this path and append it into the pathHighlightGroup using d3.selection.append(() => clonedNode.node())\n    // 3. the cloned the path will be on the top of all the paths therefore the stroke on it will be totally visible.\n    // 4. however this cloned path is on the top of is origin too, therefore will trigger it's origin's mouseleave listener\n    // 5. remove the clone in the clone's mouseleave listener\n    // 6. sometimes the mouseover listener will be triggered before clone's mouseleave listener, therefore always remove the clone at the beginning of mouseover listener\n\n    // TODO: Known bug: on smaller screen, the tooltips may overlaps current mouse position, therefore the mouse is never gonna enter the cloned map path,\n    //  so the mouseleave will never be triggered and tooltips won't be repositioned.\n\n    if (!this.references.map.paths) return;\n    const thisClass = this;\n\n    const removeHighlightAndMoveTooltip = () => {\n      thisClass.setToolTipDataState(-1000, -1000, -1000, -1000, '', null);\n      thisClass.updateTooltip();\n      thisClass.references.map.pathHighlight?.remove();\n    };\n\n    this.references.map.paths.on('mouseenter', function (d) {\n      removeHighlightAndMoveTooltip();\n\n      const bBox = this.getBBox();\n      const x = bBox.x;\n      const y = bBox.y;\n      const xSecondary = bBox.x + bBox.width;\n      const ySecondary = bBox.y + bBox.height;\n\n      // tooltip\n      if (!d.properties.case) {\n        // no data for this country\n        thisClass.setToolTipDataState(x, xSecondary, y, ySecondary, d.properties.name, null);\n      } else {\n        thisClass.setToolTipDataState(x, xSecondary, y, ySecondary, d.properties.name, {...d.properties.case});\n      }\n      thisClass.updateTooltip();\n\n      // country path\n      const clonedNode = d3.select(this).clone().remove();\n      if (thisClass.references.map.pathHighlightGroup) {\n        const movedClonedNode = thisClass.references.map.pathHighlightGroup.append(() => clonedNode.node());\n        if (movedClonedNode) {\n          thisClass.references.map.pathHighlight = movedClonedNode;\n          movedClonedNode\n            .style('stroke', thisClass.color.mapStrokeHoverHighlight)\n            .style('stroke-width', thisClass.getStrokeWidth() * 2)\n            .style('fill', thisClass.color.transparent);\n          movedClonedNode.on('mouseleave', function () {\n            removeHighlightAndMoveTooltip()\n          })\n        }\n      }\n    })\n  }\n\n  async main() {\n    try {\n      await this.getData();\n      this.initSvg();\n      this.initMap();\n      this.initTimeControl();\n      this.initTooltip();\n      this.mapZoomIn();\n      this.appendMapPathMouseEvent();\n      this.appendTimeBarMouseEvent();\n      setTimeout(\n        () => {\n          this.startTimeLapse();\n          this.appendTimeControlButtonEvent();\n        }, this.animations.timeLapse.delay);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n\nexport default WorldMapD3\n","import React, {useEffect, useRef} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport WorldMapD3 from \"../../d3-charts/world-map-d3\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\n\nconst id = 'topic-covid19-map';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    // paddingBottom: '200px',\n    // position: 'relative',\n    // [theme.breakpoints.down('sm')]: {\n    //     paddingBottom: '250px',\n    // }\n  }\n}));\n\ninterface TopicCovid19MapProps {\n\n}\n\nconst TopicCovid19Map: React.FC<TopicCovid19MapProps> = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const height = window.innerHeight - 240;\n\n  useEffect(() => {\n    import('./data/topic-covid19-data').then((dataFile) => {\n      if (!containerRef.current) return;\n      const map = new WorldMapD3(id, containerRef.current.getBoundingClientRect().width, containerRef.current.getBoundingClientRect().height, theme.palette.secondary.main, dataFile.default);\n      map.main();\n    });\n  }, []);\n\n  return (\n    <div className={classes.root} ref={containerRef} style={{height: `${height}px`}}>\n      <div id={id}></div>\n    </div>\n  )\n};\n\nexport default TopicCovid19Map\n","import React, {useEffect, useRef, useState} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport TopicCovid19Map from \"./topic-covid19-map\";\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport {Box} from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    padding: theme.spacing(2, 0, 10, 0),\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(2, 0, 20, 0)\n    }\n\n  },\n  widthWrapper: {\n    width: '1000px',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    [theme.breakpoints.down('sm')]: {\n      width: '100%'\n    }\n  },\n  heading: {\n    fontFamily: 'Open Sans,sans-serif',\n    fontSize: '1.25rem',\n    textTransform: 'capitalize',\n    color: theme.palette.primary.main,\n    margin: theme.spacing(0, 0, 2, 0)\n  }\n}));\n\ninterface TopicProps {\n\n}\n\nconst Topic: React.FC<TopicProps> = () => {\n  const classes = useStyles();\n\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.widthWrapper}>\n        <h1 className={classes.heading}>The spread of COVID-19</h1>\n      </div>\n      <TopicCovid19Map/>\n      <div className={classes.widthWrapper}>\n        <Box mx={5}>\n          <p>\n            <span>Data retrieved from </span>\n            <span>\n                            <Link href='https://graphics.reuters.com/CHINA-HEALTH-MAP/0100B59S39E/index.html'\n                                  target='_blank' rel=\"noopener noreferrer\" style={{color: '#f35c19'}}>\n                                Reuters.com\n                            </Link>\n                        </span>\n            <span>, not updated in realtime.</span>\n          </p>\n        </Box>\n      </div>\n    </div>\n  )\n};\n\nexport default Topic\n","function useDebounce(debounceInterval: number) {\n  let lastExecuted = Date.now();\n\n  function shouldBeExecuted() {\n    const now = Date.now();\n    if (now - lastExecuted > debounceInterval) {\n      lastExecuted = now;\n      return true\n    } else {\n      return false\n    }\n  }\n\n  return shouldBeExecuted;\n}\n\nexport default useDebounce;\n","import {useState, CSSProperties, useEffect, RefObject} from \"react\";\nimport useDebounce from \"./use-debounce\";\n\n\nenum Style {\n  FIXED = 'FIXED',\n  RELATIVE = 'RELATIVE'\n}\n\nconst getStyle = (styleName: Style) => {\n  const style = {\n    FIXED: {\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      width: \"100%\"\n    } as CSSProperties,\n    RELATIVE: {\n      position: \"relative\",\n      width: \"100%\"\n    } as CSSProperties,\n  };\n\n  return {...style[styleName]};\n};\n\n// set sticky when scroll passed ref element's bottom\nfunction useSticky(anchorRef: RefObject<HTMLElement>) {\n  const [style, setStyle] = useState(Style.RELATIVE);\n  const shouldBeExecuted = useDebounce(10);\n\n  function scrollHandler() {\n    const scrolled = window.scrollY;\n    if (scrolled === 0 && style !== Style.RELATIVE) {\n      // don't debounce when fast scrolling to top\n      setStyle(Style.RELATIVE);\n      return;\n    }\n\n    if (!anchorRef.current) return;\n    const fixedStartHeight = anchorRef.current.offsetTop + anchorRef.current.offsetHeight;\n\n    if (!shouldBeExecuted()) return;\n    if (scrolled >= fixedStartHeight && style !== Style.FIXED) {\n      setStyle(Style.FIXED);\n    } else if (scrolled < fixedStartHeight && style !== Style.RELATIVE) {\n      setStyle(Style.RELATIVE);\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener('scroll', scrollHandler);\n\n    return () => {\n      document.removeEventListener('scroll', scrollHandler);\n    }\n  }, [style, anchorRef]);\n\n  return {\n    style: getStyle(style),\n    isFixed: style === Style.FIXED\n  };\n}\n\nexport default useSticky;\n","import {RefObject, useEffect, useState} from \"react\";\nimport useDebounce from \"./use-debounce\";\n\nexport enum UseSwipeableDirections {\n  NULL = 'NULL',\n  LEFT = 'LEFT',\n  RIGHT = 'RIGHT'\n}\n\nenum UserAction {\n  NULL = 'NULL',\n  SWIPE = 'SWIPE',\n  SCROLL = 'SCROLL'\n}\n\nconst DEBOUNCER = 10;\n\nfunction useSwipeable(ref: RefObject<HTMLInputElement>, threshholdPx: number) {\n  const [x1, setX1] = useState(0);\n  const [y1, setY1] = useState(0);\n  const [userAction, setUserAction] = useState(UserAction.NULL);\n  const [direction, setDirection] = useState(UseSwipeableDirections.NULL);\n  const [dragDistance, setDragDistance] = useState(0);\n  const shouldBeExecuted = useDebounce(DEBOUNCER);\n\n  function touchStartHandler(e: TouchEvent) {\n    setX1(e.changedTouches[0].clientX);\n    setY1(e.changedTouches[0].clientY)\n  }\n\n  function touchMoveHandler(e: TouchEvent) {\n    if (!shouldBeExecuted()) return;\n    const currentX = e.changedTouches[0].clientX;\n    const currentY = e.changedTouches[0].clientY;\n\n    if (userAction === 'SWIPE') {\n      if (e.cancelable) e.preventDefault();\n      setDragDistance(e.changedTouches[0].clientX - x1);\n    } else if (userAction === 'NULL' && Math.abs(currentX - x1) > Math.abs(currentY - y1)) {\n      setUserAction(UserAction.SWIPE)\n    } else if (userAction === 'NULL' && Math.abs(currentX - x1) <= Math.abs(currentY - y1)) {\n      setUserAction(UserAction.SCROLL)\n    }\n\n  }\n\n  function touchEndHandler(e: TouchEvent) {\n    const currentX = e.changedTouches[0].clientX;\n    const currentY = e.changedTouches[0].clientY;\n    if (\n      Math.abs(currentX - x1) > Math.abs(currentY - y1) &&\n      Math.abs(currentX - x1) > threshholdPx &&\n      userAction === UserAction.SWIPE\n    ) {\n      setDirection(currentX > x1 ? UseSwipeableDirections.RIGHT : UseSwipeableDirections.LEFT);\n    }\n    setDragDistance(0);\n    setUserAction(UserAction.NULL)\n  }\n\n  function resetSwipeStatus() {\n    setDirection(UseSwipeableDirections.NULL);\n  }\n\n  useEffect(() => {\n    const currentElement = ref.current;\n    if (!currentElement) return;\n    currentElement.addEventListener('touchstart', touchStartHandler);\n\n    return () => {\n      currentElement.removeEventListener('touchstart', touchStartHandler);\n    }\n  }, [ref]);\n\n  useEffect(() => {\n    const currentElement = ref.current;\n    if (!currentElement) return;\n    currentElement.addEventListener('touchmove', touchMoveHandler);\n\n    return () => {\n      currentElement.removeEventListener('touchmove', touchMoveHandler);\n    }\n  }, [y1, userAction, ref, touchMoveHandler]);\n\n  useEffect(() => {\n    const currentElement = ref.current;\n    if (!currentElement) return;\n    currentElement.addEventListener('touchend', touchEndHandler);\n\n    return () => {\n      currentElement.removeEventListener('touchend', touchEndHandler);\n    }\n  }, [y1, userAction, ref, touchEndHandler]);\n\n  return {\n    direction,\n    dragDistance,\n    resetSwipeStatus\n  }\n}\n\nexport default useSwipeable\n","import React, {RefObject, useRef} from \"react\";\nimport useSticky from \"../../tools/use-sticky\";\n\ninterface StickyComponentProps {\n  anchorRef: RefObject<HTMLDivElement>,\n  zIndex?: number,\n}\n\nconst StickyComponent: React.FC<StickyComponentProps> = (props) => {\n  const {\n    style,\n    isFixed\n  } = useSticky(props.anchorRef);\n\n  const elementRef = useRef<HTMLDivElement>(null);\n\n  return (\n    <>\n      {\n        isFixed && elementRef.current &&\n        <div style={{\n          width: `${elementRef.current.offsetWidth}px`,\n          height: `${elementRef.current.offsetHeight}px`\n        }}>\n        </div>\n      }\n      <div style={{...style, zIndex: props.zIndex ? props.zIndex : 'auto'}} ref={elementRef}>\n        {props.children}\n      </div>\n    </>\n  )\n};\n\nexport default StickyComponent;\n","import {useMemo} from \"react\";\nimport * as queryString from \"query-string\";\nimport {useLocation} from \"react-router-dom\";\nimport routers from \"../../routers\";\n\n// main page use only\nconst useGetCategoryFromQuery = (): null | string => {\n  const location = useLocation();\n  return useMemo(() => {\n    if (location.pathname !== routers.root.path) {\n      return null\n    }\n    const qs = queryString.parse(location.search);\n    return !qs.category ? null : Array.isArray(qs.category) ? qs.category[0] : qs.category;\n  }, [location.pathname, location.search])\n}\n\nexport default useGetCategoryFromQuery\n","import React, {useMemo} from \"react\";\nimport {AppBar, makeStyles, Tab, Tabs} from \"@material-ui/core\";\nimport {Link} from 'react-router-dom';\nimport {newsCategories} from \"../../routers\";\nimport useGetCategoryFromQuery from \"../articles/use-get-category-from-query\";\n\nconst useStyles = makeStyles((theme) => ({\n  tab: {\n    flexShrink: 0,\n    flexGrow: 1,\n    color: theme.palette.primary.contrastText\n  },\n  appBarBottomBoxShadow: {\n    boxShadow: '0px 4px 4px -1px rgba(0,0,0,0.2), 0px 5px 5px 0px rgba(0,0,0,0.14), 0px 10px 10px 0px rgba(0,0,0,0.12)'\n  },\n}));\n\ninterface HeaderTabsProps {\n}\n\nconst HeaderTabs = () => {\n  const classes = useStyles();\n  const category = useGetCategoryFromQuery() || '';\n  const categoryIndex = useMemo(() => (newsCategories as string[]).indexOf(category), [category]);\n\n  return (\n    <AppBar color=\"primary\" position={'static'} className={classes.appBarBottomBoxShadow}>\n      <Tabs\n        value={categoryIndex === -1 ? false : categoryIndex}\n        indicatorColor=\"secondary\"\n        textColor=\"secondary\"\n        variant=\"scrollable\"\n        scrollButtons=\"auto\"\n      >\n        {\n          newsCategories.map((category, i) =>\n            <Tab\n              label={category}\n              key={category}\n              className={classes.tab}\n              component={Link}\n              to={`/?category=${category}`}\n            />)\n        }\n      </Tabs>\n    </AppBar>\n  )\n};\n\nexport default HeaderTabs\n","import React, {useRef} from \"react\";\nimport {AppBar, Theme, Toolbar, Tooltip, Typography} from \"@material-ui/core\";\nimport {makeStyles} from '@material-ui/core/styles';\nimport StickyComponent from \"../utility-components/sticky-component\";\nimport IconButton from '@material-ui/core/IconButton';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport CollectionsBookmarkIcon from '@material-ui/icons/CollectionsBookmark';\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Zoom from \"@material-ui/core/Zoom\";\nimport useTheme from \"@material-ui/core/styles/useTheme\";\nimport {Link} from 'react-router-dom';\nimport HeaderTabs from \"./header-tabs\";\nimport routers from \"../../routers\";\nimport {MOBILE} from \"../../theme/theme\";\n\nconst headerLinks = [\n  {\n    title: 'Search',\n    link: routers.search.path,\n    icon: <SearchIcon/>\n  },\n  {\n    title: 'Topic: COVID-19',\n    link: routers.topic.path,\n    icon: <CollectionsBookmarkIcon/>\n  },\n  {\n    title: 'Analytics',\n    link: routers.analytics.path,\n    icon: <AssessmentIcon/>\n  },\n]\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  appBarNoBoxShadow: {\n    boxShadow: 'none'\n  },\n  trendIcon: {\n    color: '#FFF'\n  },\n  toolbar: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n  },\n  toolbarTitle: {\n    flex: '1 1 auto',\n    textTransform: 'uppercase',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    whiteSpace: 'nowrap',\n    lineHeight: 1,\n    fontWeight: 900,\n    [MOBILE(theme)]: {\n      fontSize: theme.typography.h6.fontSize\n    }\n  },\n  toolbarButton: {\n    flex: '0 0 auto'\n  }\n}));\n\ninterface HeaderProps {\n}\n\nconst Header: React.FC<HeaderProps> = () => {\n  const classes = useStyles();\n  const appBarRef = useRef<HTMLDivElement>(null);\n  const theme = useTheme();\n\n  return (\n    <>\n      <AppBar color=\"primary\" position={'static'} ref={appBarRef} className={classes.appBarNoBoxShadow}>\n        <Toolbar className={classes.toolbar}>\n          <Typography align={\"center\"} className={classes.toolbarTitle} variant={\"h4\"} component={'h1'}>\n            News Canada\n          </Typography>\n          {\n            headerLinks.map(data => (\n              <div key={data.title} className={classes.toolbarButton}>\n                <Tooltip title={data.title} TransitionComponent={Zoom}>\n                  <IconButton aria-label={data.title} color={\"inherit\"} component={Link} to={data.link}>\n                    {data.icon}\n                  </IconButton>\n                </Tooltip>\n              </div>\n            ))\n          }\n        </Toolbar>\n      </AppBar>\n      <StickyComponent\n        anchorRef={appBarRef}\n        zIndex={theme.zIndex.appBar}>\n        <HeaderTabs/>\n      </StickyComponent>\n    </>\n  )\n}\n\nexport default Header;\n","import React, {useEffect, useRef} from \"react\";\nimport useSwipeable, {UseSwipeableDirections} from \"../../tools/use-swipeable\";\n\ninterface SwipeableProps {\n  goPrevious: () => void,\n  goNext: () => void,\n}\n\nconst Swipeable: React.FC<SwipeableProps> = (props) => {\n  const containerRef = useRef(null);\n  const {\n    direction,\n    dragDistance,\n    resetSwipeStatus\n  } = useSwipeable(containerRef, 50);\n\n  useEffect(() => {\n    if (direction === UseSwipeableDirections.RIGHT) {\n      props.goPrevious()\n    } else if (direction === UseSwipeableDirections.LEFT) {\n      props.goNext()\n    }\n    return () => {\n      resetSwipeStatus();\n    }\n  }, [direction, props, resetSwipeStatus]);\n\n  return (\n    <div\n      style={{\n        width: '100%',\n        transform: `translateX(${dragDistance}px)`,\n        // it affects snackbar fixed behavior\n        // left: `${dragDistance}px`,\n        // position: 'relative'\n      }}\n      ref={containerRef}\n    >\n      {props.children}\n    </div>\n  )\n};\n\nexport default Swipeable\n","import useRequestState from \"../../tools/use-request-state\";\nimport {useCallback} from \"react\";\nimport axios from \"axios\";\nimport {useMount} from \"react-use\";\nimport {getBaseAPI} from \"../../routers\";\n\nexport interface ArticleData {\n  id: string,\n  source: string,\n  author: string,\n  title: string,\n  description: string,\n  url: string,\n  urlToImage: string,\n  publishedAt: string,\n  content: string\n}\n\nconst useLoadArticles = (category: string) => {\n  const requestState = useRequestState<ArticleData[]>();\n\n  const loadNewsInCategory = useCallback(async () => {\n    try {\n      requestState.resetAll();\n      requestState.setIsLoading(true);\n      const query = `\n        {\n            getNews(category: ${category.toUpperCase()}) {\n                id,\n                source,\n                author,\n                title,\n                description,\n                url,\n                urlToImage,\n                publishedAt,\n                content\n            }\n        }\n    `;\n      const res = await axios.get(`${getBaseAPI()}/api/news?query=${encodeURIComponent(query)}`);\n      const data = res.data;\n      requestState.setData(data.data.getNews);\n    } catch (e) {\n      requestState.setGenericErrorMessage();\n    } finally {\n      requestState.setIsLoading(false);\n    }\n  }, [category, requestState]);\n\n  useMount(loadNewsInCategory);\n\n  return requestState\n}\n\nexport default useLoadArticles\n","import React from \"react\";\nimport {CardMedia, makeStyles} from \"@material-ui/core\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    minWidth: '100%',\n    minHeight: '100%',\n    width: '100%',\n    height: '100%',\n    objectFit: 'cover',\n    overflow: 'hidden'\n  }\n}));\n\ninterface ArticleCardImageProps {\n  url: string,\n  title: string,\n  isVisible: boolean\n}\n\nconst ArticleCardImage = ({url, title, isVisible}: ArticleCardImageProps) => {\n  const classes = useStyles();\n  const _url = url || process.env.PUBLIC_URL + '/xiaoxihome-news.jpg';\n\n  if (_url && isVisible) {\n    return <CardMedia\n      component=\"img\"\n      alt={title}\n      className={classes.root}\n      image={_url}\n      title={title}\n    />\n  } else {\n    return <Skeleton variant={\"rect\"} className={classes.root}/>\n  }\n};\n\nexport default ArticleCardImage\n","import React, {useEffect, useState} from \"react\";\n\n// @param triggerPoint in range (0, 1)\nexport default function useLazyLoad(ref: React.RefObject<HTMLDivElement>, triggerPoint?: number) {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (isVisible) return;\n\n    const checkIsVisible = () => {\n      if (!ref.current) return;\n\n      const rect = ref.current.getBoundingClientRect();\n      const isBefore = rect.top + rect.height < 0;\n      const isAfter = triggerPoint ?\n        rect.top > window.innerHeight * triggerPoint :\n        rect.top > window.innerHeight;\n      if (!isBefore && !isAfter) setIsVisible(true);\n    }\n\n    checkIsVisible();\n    document.addEventListener('scroll', checkIsVisible);\n    return () => {\n      document.removeEventListener('scroll', checkIsVisible);\n    }\n  }, [isVisible, ref, triggerPoint]);\n\n  return isVisible\n}\n","export default function getPublishTime(date: Date): string {\n  const timePast = Date.now() - date.getTime();\n  if (timePast < 0) {\n    return 'now'\n  }\n  const minutes = Math.floor(timePast / (60 * 1000));\n  if (minutes <= 59) {\n    return `${minutes} ${minutes === 1 ? 'minute' : 'minutes'} ago`\n  }\n  const hours = Math.floor(timePast / (60 * 60 * 1000));\n  if (hours <= 23) {\n    return `${hours} ${hours === 1 ? 'hour' : 'hours'} ago`\n  }\n  const days = Math.floor(timePast / (24 * 60 * 60 * 1000));\n  if (days <= 30) {\n    return `${days} ${days === 1 ? 'day' : 'days'} ago`\n  }\n  const months = Math.floor(timePast / (30 * 24 * 60 * 60 * 1000));\n  if (months <= 12) {\n    return `${months} ${months === 1 ? 'month' : 'months'} ago`\n  }\n  const years = Math.floor(timePast / (365 * 24 * 60 * 60 * 1000));\n  return `${years} ${years === 1 ? 'year' : 'years'} ago`\n}\n","const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\nconst getDateStringFromISOString = (ISOString: string) => {\n  const date = new Date(ISOString);\n  const hour = date.getHours() < 10 ? `0${date.getHours()}` : date.getHours();\n  const minute = date.getMinutes() < 10 ? `0${date.getMinutes()}` : date.getMinutes();\n  return `${date.getDate()} ${months[date.getMonth()]}, ${date.getFullYear()} - ${hour}:${minute}`\n};\n\nexport default function getDateStringFromMs(ms: number) {\n  const date = new Date(ms);\n  return `${date.getUTCFullYear()}/${date.getUTCMonth() + 1}/${date.getUTCDate()}`\n}\n\nexport {getDateStringFromISOString, getDateStringFromMs}\n","import React, {useMemo} from \"react\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {createStyles} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => createStyles({\n  highlight: {\n    backgroundColor: theme.palette.secondary.light,\n  }\n}));\n\ninterface HighlightedContentProps {\n  content: string,\n  keyword: string\n}\n\nconst HighlightedContent: React.FC<HighlightedContentProps> = ({content, keyword}) => {\n\n  const classes = useStyles();\n\n  const contentArray = useMemo(() => {\n    const escapedKeyword = keyword.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n    const re = new RegExp('(' + escapedKeyword + ')', 'gi');\n    return content.split(re);\n  }, [content, keyword]);\n\n  return (\n    <>\n      {contentArray.map((content, i) => {\n        const isKeyword = i % 2 === 1;\n        return isKeyword ?\n          <span className={classes.highlight} key={i}>{content}</span> :\n          <span key={i}>{content}</span>\n      })}\n    </>\n  )\n};\n\nexport default HighlightedContent\n","import React, {useMemo} from \"react\";\nimport {makeStyles, Tooltip, Typography} from \"@material-ui/core\";\nimport {ArticleData} from \"../use-load-articles\";\nimport getPublishTime from \"../../../tools/get-publish-time\";\nimport {getDateStringFromISOString as getDateString} from \"../../../tools/get-date-string\";\nimport HighlightedContent from \"./highlighted-content\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%'\n  },\n  title: {\n    lineHeight: 1.25,\n  },\n  subtitle: {\n    width: '100%',\n    margin: theme.spacing(1, 0),\n    color: theme.palette.primary.light,\n    '& span': {\n      fontWeight: 700\n    }\n  },\n  date: {\n    borderBottom: 'dotted 1px rgba(0,0,0,0.32)',\n    cursor: 'help'\n  },\n  content: {\n    color: theme.palette.primary.light,\n  }\n}));\n\ninterface ArticleCardContentProps {\n  data: ArticleData,\n  keyword?: string\n}\n\nconst ArticleCardContent = ({data, keyword}: ArticleCardContentProps) => {\n  const classes = useStyles();\n  const content = useMemo(() => {\n    return data.content ? data.content.replace(/\\[\\+[0-9]+\\schars\\]/ig, '') : ''\n  }, [data.content])\n\n  return (\n    <div className={classes.root}>\n      <Typography variant={'h6'} component={'h2'} className={classes.title}>\n        {\n          keyword ?\n            <HighlightedContent content={data.title} keyword={keyword}/> :\n            data.title\n        }\n      </Typography>\n      <div className={classes.subtitle}>\n        <Typography variant={'body2'} component={'span'}>\n          {data.source ? data.source + ' - ' : data.author ? data.author + ' - ' : ''}\n        </Typography>\n        <Tooltip title={getDateString(data.publishedAt)}>\n          <Typography variant={'body2'} component={'span'} className={classes.date}>\n            {getPublishTime(new Date(data.publishedAt))}\n          </Typography>\n        </Tooltip>\n      </div>\n      <Typography variant={'body2'} component={'p'} className={classes.content}>\n        {\n          keyword ?\n            <HighlightedContent content={data.content} keyword={keyword}/> :\n            data.content && data.content.replace(/\\[\\+[0-9]+\\schars\\]/ig, '')\n        }\n      </Typography>\n    </div>\n  )\n};\n\nexport default ArticleCardContent\n","function copyToClipboard(string: string) {\n  const el = document.createElement('textarea');\n  el.value = string;\n  el.setAttribute('readonly', '');\n  el.style.position = 'absolute';\n  el.style.left = '-9999px';\n  document.body.appendChild(el);\n  el.select();\n  document.execCommand('copy');\n  document.body.removeChild(el);\n}\n\nexport default copyToClipboard;\n","import React, {useCallback} from \"react\";\nimport {Button, makeStyles, Link} from \"@material-ui/core\";\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport ShareIcon from '@material-ui/icons/Share';\nimport {ArticleData} from \"../use-load-articles\";\nimport copyToClipboard from \"../../../tools/copy-to-clipboard\";\nimport {useDispatch} from \"react-redux\";\nimport {openCopyLinkSnackBar} from \"../../../redux/actions/copy-link-snackbar\";\nimport routers from \"../../../routers\";\nimport {useLocation} from \"react-use\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    margin: theme.spacing(-1),\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    flexWrap: 'wrap'\n  },\n  button: {\n    margin: theme.spacing(1)\n  }\n}));\n\ninterface ArticleCardActionsProps {\n  data: ArticleData\n}\n\nconst ArticleCardActions = ({data}: ArticleCardActionsProps) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const location = useLocation();\n\n  const handleShare = useCallback(() => {\n    const link = `${location.origin}${process.env.PUBLIC_URL}${routers.article.getPathWithId(data.id)}`\n    copyToClipboard(link);\n    dispatch(openCopyLinkSnackBar(link));\n  }, [data.id, dispatch, location.origin])\n\n  return (\n    <div className={classes.root}>\n      <Button\n        className={classes.button}\n        startIcon={<OpenInNewIcon/>}\n        component={Link}\n        href={data.url}\n        target={'_blank'}\n        rel={'noopener'}\n      >\n        Learn More\n      </Button>\n      <Button className={classes.button} startIcon={<ShareIcon/>} onClick={handleShare}>\n        Share\n      </Button>\n    </div>\n  )\n};\n\nexport default ArticleCardActions\n","import React, {useRef} from \"react\";\nimport {makeStyles, Paper, useMediaQuery, Zoom} from \"@material-ui/core\";\nimport {ArticleData} from \"../use-load-articles\";\nimport clsx from 'clsx';\nimport ArticleCardImage from \"./article-card-image\";\nimport useLazyLoad from \"../../../tools/use-lazy-load\";\nimport ArticleCardContent from \"./article-card-content\";\nimport ArticleCardActions from \"./article-card-actions\";\nimport {MOBILE} from \"../../../theme/theme\";\nimport {useTheme} from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n    [MOBILE(theme)]: {\n      padding: theme.spacing(0.5),\n    }\n  },\n  rootBig: {\n    flex: '0 0 50%',\n    [MOBILE(theme)]: {\n      flex: '0 0 100%',\n    }\n  },\n  rootNormal: {\n    flex: '0 0 25%',\n    [MOBILE(theme)]: {\n      flex: '0 0 100%',\n    }\n  },\n  paper: {\n    overflow: 'hidden',\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  image: {\n    width: '100%',\n    flex: '0 0 auto'\n  },\n  imageNormal: {\n    height: 300,\n    [MOBILE(theme)]: {\n      height: 200,\n    }\n  },\n  imageBig: {\n    height: 500,\n    [MOBILE(theme)]: {\n      height: 200,\n    }\n  },\n  content: {\n    padding: theme.spacing(2),\n    flex: '1 1 auto',\n    width: '100%',\n  },\n  action: {\n    flex: '0 0 auto',\n    padding: theme.spacing(2),\n    width: '100%',\n  }\n}));\n\ninterface ArticleCardProps {\n  data: ArticleData\n  variant: 'big' | 'normal'\n}\n\nconst ArticleCard = ({data, variant}: ArticleCardProps) => {\n  const classes = useStyles();\n  const rootRef = useRef<HTMLDivElement>(null);\n  const isVisible = useLazyLoad(rootRef);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(MOBILE(theme));\n\n  return (\n    <Zoom in={isMobile || isVisible}>\n      <div\n        className={clsx(classes.root, variant === 'big' && classes.rootBig, variant === 'normal' && classes.rootNormal)}\n        ref={rootRef}>\n        <Paper className={classes.paper}>\n          <div\n            className={clsx(classes.image, variant === 'big' && classes.imageBig, variant === 'normal' && classes.imageNormal)}>\n            <ArticleCardImage url={data.urlToImage} title={data.title} isVisible={isVisible}/>\n          </div>\n          <div className={classes.content}>\n            <ArticleCardContent data={data}/>\n          </div>\n          <div className={classes.action}>\n            <ArticleCardActions data={data}/>\n          </div>\n        </Paper>\n      </div>\n    </Zoom>\n  )\n};\n\nexport default ArticleCard\n","import React from \"react\";\nimport {Box, makeStyles} from \"@material-ui/core\";\nimport {useMount} from \"react-use\";\nimport useLoadArticles, {ArticleData} from \"./use-load-articles\";\nimport {Skeleton} from \"@material-ui/lab\";\nimport InfoIcon from '@material-ui/icons/Info';\nimport MessageWithIcon from \"../utility-components/message-with-icon\";\nimport ArticleCard from \"./article-card/article-card\";\nimport useRequestState from \"../../tools/use-request-state\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'stretch',\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    padding: theme.spacing(2),\n    [theme.breakpoints.down(\"sm\")]: {\n      padding: theme.spacing(1),\n    }\n  },\n  skeletonCardWrapper: {\n    margin: theme.spacing(2),\n    width: 'fit-content',\n  },\n  skeleton: {\n    maxWidth: '100%'\n  }\n}));\n\nconst useRequestStateForArticleData = () => useRequestState<ArticleData[]>();\ninterface ArticlesProps {\n  requestState: ReturnType<typeof useRequestStateForArticleData>\n}\n\nconst Articles = ({requestState}: ArticlesProps) => {\n  const classes = useStyles();\n  useMount(() => window.scrollTo(0, 0));\n\n  return (\n    <div className={classes.root}>\n      {\n        requestState.isLoading &&\n        new Array(10).fill(1).map((_, i) => {\n          return (\n            <Box width={500} maxWidth={'100%'} className={classes.skeletonCardWrapper} key={i}>\n              <Skeleton variant={\"rect\"} width={500} height={200} className={classes.skeleton}/>\n              <Skeleton width={500} className={classes.skeleton}/>\n              <Skeleton width={500} className={classes.skeleton}/>\n            </Box>\n          )\n        })\n      }\n      {\n        !requestState.isLoading && requestState.isError &&\n        <MessageWithIcon icon={<InfoIcon/>} title={'Ooops'} text={'We met an error, please try again later'}/>\n      }\n      {\n        !requestState.isLoading && !requestState.isError && !requestState.data &&\n        <MessageWithIcon icon={<InfoIcon/>} title={'Ooops'} text={'No news article found'}/>\n      }\n      {\n        !requestState.isLoading && !requestState.isError && !!requestState.data &&\n        requestState.data.map((article, i) => (\n          <ArticleCard key={i} variant={i === 0 || i === 1 ? 'big' : 'normal'} data={article}/>\n        ))\n      }\n    </div>\n  )\n};\n\nexport default Articles\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport useLoadArticles from \"./use-load-articles\";\nimport Articles from \"./articles\";\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\ninterface ArticlesWithCategoryLoaderProps {\n  category: string\n}\n\nconst ArticlesWithCategoryLoader = ({category}: ArticlesWithCategoryLoaderProps) => {\n  const classes = useStyles();\n  const requestState = useLoadArticles(category);\n\n  return <Articles requestState={requestState} />\n};\n\nexport default ArticlesWithCategoryLoader\n","import React, {useCallback, useMemo} from \"react\";\nimport useGetCategoryFromQuery from \"./use-get-category-from-query\";\nimport {newsCategories, NewsCategory} from \"../../routers\";\nimport {Redirect, useHistory} from \"react-router-dom\";\nimport Swipeable from \"../utility-components/swipeable\";\nimport ArticlesWithCategoryLoader from \"./articles-with-category-loader\";\n\ninterface ArticlesContainerProps {\n}\n\nconst ArticlesContainer = () => {\n  const category = useGetCategoryFromQuery();\n  const history = useHistory();\n  const willRedirect = useMemo(() => {\n    return !category || !(newsCategories as string[]).includes(category)\n  }, [category])\n\n  const goNextCategory = useCallback(() => {\n    if (willRedirect) return;\n    const index = newsCategories.indexOf(category as NewsCategory);\n    const nextIndex = index + 1 >= newsCategories.length ? 0 : index + 1;\n    history.replace(`/?category=${newsCategories[nextIndex]}`)\n  }, [category, history, willRedirect]);\n\n  const goPreviousCategory = useCallback(() => {\n    if (willRedirect) return;\n    const index = newsCategories.indexOf(category as NewsCategory);\n    const nextIndex = index - 1 < 0 ? newsCategories.length - 1 : index - 1;\n    history.replace(`/?category=${newsCategories[nextIndex]}`)\n  }, [category, history, willRedirect]);\n\n  if (willRedirect) {\n    return <Redirect to={`/?category=${newsCategories[0]}`}/>\n  } else return (\n    <Swipeable goNext={goNextCategory} goPrevious={goPreviousCategory}>\n      <ArticlesWithCategoryLoader\n        category={category as string}\n        key={category}\n      />\n    </Swipeable>\n  )\n};\n\nexport default ArticlesContainer\n","import React, {useRef, useState} from \"react\";\nimport {FormControl, InputLabel, makeStyles, MenuItem, OutlinedInput, Select, useMediaQuery} from \"@material-ui/core\";\nimport useSelectFilter from \"./use-search/use-select-filter\";\nimport {useTheme} from \"@material-ui/core/styles\";\nimport {MOBILE} from \"../../theme/theme\";\nimport {useMount} from \"react-use\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    minWidth: 150,\n    position: 'relative'\n  },\n  menuItem: {\n    textTransform: 'capitalize'\n  },\n  label: {\n    textTransform: 'capitalize'\n  },\n  select: {\n    textTransform: 'capitalize'\n  }\n}));\n\ninterface SelectFilterProps {\n  label: string,\n  data: ReturnType<typeof useSelectFilter>\n}\n\nconst SelectFilter = ({label, data}: SelectFilterProps) => {\n  const classes = useStyles();\n  const anchorRef = useRef<HTMLDivElement>(null);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(MOBILE(theme));\n\n  const [mounted, setMounted] = useState(false);\n  useMount(() => setMounted(true))\n\n  return (\n    <FormControl variant={'outlined'} className={classes.root} size={'small'} ref={anchorRef}>\n      {\n        mounted &&\n        <>\n          <InputLabel id={`${label}-select-label`} className={classes.label}>{label}</InputLabel>\n          <Select\n            labelId={`${label}-select-label`}\n            id={`${label}-select`}\n            value={data.value}\n            onChange={data.handleChange}\n            native={isMobile}\n            input={<OutlinedInput notched label={label}/>}\n            MenuProps={{\n              anchorEl: anchorRef.current,\n              getContentAnchorEl: null,\n              anchorOrigin: {vertical: \"bottom\", horizontal: \"left\"},\n              transformOrigin: {vertical: \"top\", horizontal: \"left\"},\n            }}\n            classes={{\n              select: classes.select,\n            }}\n          >\n            {\n              data.options.map(option => (\n                React.createElement(isMobile ? 'option' : MenuItem, {\n                  value: option.key,\n                  key: option.key,\n                  classes: {root: classes.menuItem},\n                  children: option.displayName\n                })\n              ))\n            }\n          </Select>\n        </>\n      }\n    </FormControl>\n  )\n};\n\nexport default SelectFilter\n","import React from \"react\";\nimport {makeStyles, Paper} from \"@material-ui/core\";\nimport {MOBILE} from \"../../theme/theme\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    padding: theme.spacing(2, 4),\n    margin: theme.spacing(1, 0),\n    [MOBILE(theme)]: {\n      padding: theme.spacing(1),\n    }\n  },\n}));\n\ninterface PaperWrapperProps {\n  children: JSX.Element\n}\n\nconst PaperWrapper = ({children}: PaperWrapperProps) => {\n  const classes = useStyles();\n\n  return (\n    <Paper className={classes.root} elevation={0}>\n      {children}\n    </Paper>\n  )\n};\n\nexport default PaperWrapper\n","import {ChangeEvent, useCallback, useState} from \"react\";\n\nconst useInputFilter = (initValue = '') => {\n  const [value, setValue] = useState(initValue);\n\n  const handleChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setValue(e.currentTarget.value)\n  }, []);\n\n  return {\n    value,\n    _setValue: setValue,\n    handleChange\n  }\n}\n\nexport default useInputFilter\n","import {useCallback, useState} from \"react\";\nimport {MaterialUiPickersDate} from \"@material-ui/pickers/typings/date\";\n\nconst useDatePickerFilter = (initValue = new Date()) => {\n  const [value, setValue] = useState<MaterialUiPickersDate>(initValue);\n\n  const handleChange = useCallback((date: MaterialUiPickersDate) => {\n    setValue(date);\n  }, []);\n\n  return {\n    value,\n    _setValue: setValue,\n    handleChange\n  }\n}\n\nexport default useDatePickerFilter\n","import {ChangeEvent, useCallback, useState} from \"react\";\n\ninterface Option {\n  key: string,\n  displayName: string\n}\n\nconst useSelectFilter = (initValue: string, options: Option[]) => {\n  const [value, setValue] = useState(initValue);\n\n  const handleChange = useCallback((e: ChangeEvent<{ name?: string | undefined; value: unknown; }>) => {\n    setValue(e.target.value as string)\n  }, []);\n\n  return {\n    value,\n    _setValue: setValue,\n    handleChange,\n    options\n  }\n}\n\nexport default useSelectFilter\n","import {useCallback, useState} from \"react\";\nimport {useMount, usePrevious} from \"react-use\";\nimport useInputFilter from \"./use-input-filter\";\nimport useDatePickerFilter from \"./use-date-picker-filter\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport routers, {newsCategories} from \"../../../routers\";\nimport useSelectFilter from \"./use-select-filter\";\nimport useCallbackOnValueChange from \"../../../tools/use-callback-on-value-change\";\n\nconst queryString = require('query-string');\n\nconst categoryOptions = [\n  {\n    key: 'all',\n    displayName: 'all'\n  },\n  ...newsCategories.map(c => ({\n    key: c,\n    displayName: c\n  }))\n];\n\nconst sortByOptions = [\n  {\n    key: 'relevance',\n    displayName: 'relevance'\n  },\n  {\n    key: 'date',\n    displayName: 'date'\n  }\n];\n\nconst sortOrderOptions = [\n  {\n    key: 'desc',\n    displayName: 'descending'\n  },\n  {\n    key: 'asc',\n    displayName: 'ascending'\n  }\n]\n\nconst dateToYyyymmdd = (date: Date) => `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;\nconst yyyymmddToDate = (yyyymmdd: string) => {\n  const array = yyyymmdd.split('-');\n  // @ts-ignore\n  return new Date(...array)\n}\n\nconst DEFAULT_START_DATE = new Date('2020-01-04T00:00:00');\n\nexport const getPathWithKeyword = (keyword: string) => {\n  const params = {\n    keyword,\n    startDate: dateToYyyymmdd(DEFAULT_START_DATE),\n    endDate: dateToYyyymmdd(new Date()),\n    category: categoryOptions[0].key,\n    sortBy: sortByOptions[0].key,\n    sortOrder: sortOrderOptions[0].key\n  };\n  return `${routers.search.path}?${queryString.stringify(params)}`\n}\n\nconst useSearchFilters = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const [redirectCounter, setRedirectCounter] = useState(0);\n  const previousRedirectCounter = usePrevious(redirectCounter);\n\n  const keyword = useInputFilter('');\n  const startDate = useDatePickerFilter(DEFAULT_START_DATE);\n  const endDate = useDatePickerFilter();\n  const category = useSelectFilter(categoryOptions[0].key, categoryOptions);\n  const sortBy = useSelectFilter(sortByOptions[0].key, sortByOptions);\n  const sortOrder = useSelectFilter(sortOrderOptions[0].key, sortOrderOptions);\n\n  const [globalErrorMessage, setGlobalErrorMessage] = useState('');\n  const resetGlobalErrorMessage = useCallback(() => setGlobalErrorMessage(''), []);\n\n  const [dateHasError, _setDateHasError] = useState(false);\n  const setDateHasError = useCallback(() => {_setDateHasError(true)}, []);\n  const resetDateHasError = useCallback(() => {_setDateHasError(false)}, []);\n\n  if (previousRedirectCounter !== undefined && previousRedirectCounter !== redirectCounter) {\n    const params = {\n      keyword: keyword.value,\n      startDate: dateToYyyymmdd(startDate.value as Date),\n      endDate: dateToYyyymmdd(endDate.value as Date),\n      category: category.value,\n      sortBy: sortBy.value,\n      sortOrder: sortOrder.value\n    };\n    history.push(`${routers.search.path}?${queryString.stringify(params)}`);\n  }\n\n  const parseStateFromQueryParam = () => {\n    const parsed = queryString.parse(location.search);\n    const filters: { [key: string]: any } = {\n      keyword,\n      startDate,\n      endDate,\n      category,\n      sortBy,\n      sortOrder\n    }\n    Object.keys(parsed).forEach(key => {\n      if (key === 'startDate' || key === 'endDate') {\n        filters[key]._setValue(yyyymmddToDate(parsed[key]))\n      } else if (filters[key] !== undefined) {\n        filters[key]._setValue(parsed[key])\n      }\n    });\n\n    if (location.search.length > 0) {\n      setRedirectCounter(prev => prev + 1);\n    }\n  }\n\n  const submitSearch = async () => {\n    try {\n      if (dateHasError) {\n        setGlobalErrorMessage('Please select a valid date');\n        return\n      } else if (startDate.value === null || endDate.value === null) {\n        setGlobalErrorMessage('Date cannot be empty');\n        return\n      } else if (new Date(startDate.value).getTime() > new Date(endDate.value).getTime()) {\n        setGlobalErrorMessage('End date cannot be earlier than start date');\n        return\n      } else if (!keyword.value) {\n        setGlobalErrorMessage('Keyword cannot be empty');\n        return\n      }\n    } catch (e) {\n      setGlobalErrorMessage('Please select a valid date');\n      return\n    }\n\n    setRedirectCounter(prev => prev + 1);\n  };\n\n  useCallbackOnValueChange(startDate.value, resetGlobalErrorMessage);\n  useCallbackOnValueChange(endDate.value, resetGlobalErrorMessage);\n  useCallbackOnValueChange(keyword.value, resetGlobalErrorMessage);\n\n  useMount(() => parseStateFromQueryParam());\n\n  return {\n    keyword,\n    startDate,\n    endDate,\n    category,\n    sortBy,\n    sortOrder,\n    submitSearch,\n    globalErrorMessage,\n    setDateHasError,\n    resetDateHasError\n  }\n}\n\nexport default useSearchFilters\n","import React, {useState} from \"react\";\nimport {Collapse, lighten, makeStyles, Typography} from \"@material-ui/core\";\nimport {useMount} from \"react-use\";\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'stretch',\n    justifyContent: 'flex-start',\n    backgroundColor: lighten(theme.palette.error.main, 0.9),\n    borderRadius: theme.shape.borderRadius,\n    overflow: 'hidden',\n  },\n  iconWrapper: {\n    backgroundColor: theme.palette.error.main,\n    padding: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  icon: {\n    color: 'rgba(255, 255, 255, 0.9)',\n    fontWeight: 900\n  },\n  messageWrapper: {\n    color: 'rgba(0,0,0,0.64)',\n    padding: theme.spacing(2),\n    '& span': {\n      fontWeight: 700\n    }\n  }\n}));\n\ninterface ErrorMessageProps {\n  message: string\n}\n\nconst ErrorMessage = ({message}: ErrorMessageProps) => {\n  const classes = useStyles();\n  const [mounted, setMounted] = useState(false);\n  useMount(() => setMounted(true));\n\n  return (\n    <Collapse in={mounted}>\n      <div className={classes.root}>\n        <div className={classes.iconWrapper}>\n          <ErrorOutlineIcon className={classes.icon}/>\n        </div>\n        <div className={classes.messageWrapper}>\n          <Typography variant={'body1'} component={'span'} color={'inherit'}>\n            {message}\n          </Typography>\n        </div>\n      </div>\n    </Collapse>\n  )\n};\n\nexport default ErrorMessage\n","import React, {ChangeEvent, useCallback, useMemo, useRef} from \"react\";\nimport {\n  alpha,\n  Button,\n  CircularProgress, IconButton, InputAdornment,\n  makeStyles,\n  TextField,\n  useMediaQuery\n} from \"@material-ui/core\";\nimport {KeyboardDatePicker, KeyboardDatePickerProps, MuiPickersUtilsProvider} from \"@material-ui/pickers\";\nimport DateFnsUtils from '@date-io/date-fns';\nimport {MOBILE} from \"../../theme/theme\";\nimport {useTheme} from \"@material-ui/core/styles\";\nimport SelectFilter from \"./select-filter\";\nimport {useMount} from \"react-use\";\nimport PaperWrapper from \"./paper-wrapper\";\nimport useSearchFilters from \"./use-search/use-search-filters\";\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport ErrorMessage from \"./error-message\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    position: 'relative'\n  },\n  inputRow: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    margin: theme.spacing(1, -1),\n    [MOBILE(theme)]: {\n      margin: theme.spacing(-0.5),\n    },\n    '& > div': {\n      margin: theme.spacing(1),\n      [MOBILE(theme)]: {\n        margin: theme.spacing(0.5),\n      }\n    },\n    '& div:first-child': {\n      flex: '1 1 auto'\n    },\n    '& div:last-child': {\n      flex: '0 0 auto'\n    }\n  },\n  inputLabel: {\n    display: 'none'\n  },\n  errorMessageRow: {\n    width: '100%',\n    margin: theme.spacing(1, 0)\n  },\n  filterRow: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    flexWrap: 'wrap',\n    margin: theme.spacing(2, -1, 1, -1),\n    [MOBILE(theme)]: {\n      margin: theme.spacing(1, -0.5),\n      // flexDirection: 'column',\n      // alignItems: 'flex-start',\n      // justifyContent: 'flex-start',\n    },\n    '& > div': {\n      margin: theme.spacing(1),\n      [MOBILE(theme)]: {\n        margin: theme.spacing(0.5),\n      }\n    },\n  },\n  submitButton: {\n    width: '12ch',\n    fontSize: theme.typography.h6.fontSize,\n    height: 56,\n    fontWeight: 700,\n    '&:disabled': {\n      backgroundColor: alpha(theme.palette.secondary.main, 0.3)\n    },\n    [MOBILE(theme)]: {\n      width: '10ch',\n      height: 40,\n      fontSize: theme.typography.body2.fontSize,\n    }\n  },\n  datePicker: {\n    width: 180,\n    margin: 0,\n  }\n}));\n\ninterface SearchInputProps {\n}\n\nconst SearchInput = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(MOBILE(theme));\n  const keywordRef = useRef<HTMLInputElement>(null);\n  const searchFilter = useSearchFilters();\n  const disabled = false;\n\n  const datePickerProps = useMemo<Partial<KeyboardDatePickerProps>>(() => ({\n    minDate: '2020-01-01',\n    maxDate: new Date(),\n    variant: \"inline\",\n    format: \"MM/dd/yyyy\",\n    margin: \"dense\",\n    inputVariant: 'outlined',\n    className: classes.datePicker,\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    onError: (error) => {\n      !error ? searchFilter.resetDateHasError() : searchFilter.setDateHasError()\n    },\n  }), [classes.datePicker, searchFilter]);\n\n  useMount(() => {\n    keywordRef.current?.focus();\n  });\n\n  const handleSubmit = useCallback((e: ChangeEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    searchFilter.submitSearch()\n  }, [searchFilter]);\n\n  const handleClearKeyword = useCallback(() => {\n    searchFilter.keyword._setValue('')\n  }, [searchFilter.keyword])\n\n  return (\n    <PaperWrapper>\n      <form className={classes.root} onSubmit={handleSubmit}>\n        <div className={classes.inputRow}>\n          <div>\n            <TextField\n              value={searchFilter.keyword.value}\n              onChange={searchFilter.keyword.handleChange}\n              id={'news-search-text-field'}\n              label={'Keyword'}\n              variant={'outlined'}\n              InputLabelProps={{shrink: false, classes: {root: classes.inputLabel}}}\n              inputRef={keywordRef}\n              size={isMobile ? 'small' : 'medium'}\n              fullWidth={true}\n              disabled={disabled}\n              InputProps={{\n                endAdornment: searchFilter.keyword.value.length > 0 ?\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      aria-label=\"clear keyword\"\n                      onClick={handleClearKeyword}\n                      edge=\"end\"\n                    >\n                      <CancelIcon/>\n                    </IconButton>\n                  </InputAdornment> :\n                  <></>\n              }}\n            />\n          </div>\n          <div>\n            <Button\n              variant={'contained'}\n              disableElevation\n              color={'secondary'}\n              type={'submit'}\n              disabled={disabled}\n              className={classes.submitButton}\n            >\n              {\n                disabled ?\n                  <CircularProgress size={15}/> :\n                  'Search'\n              }\n            </Button>\n          </div>\n        </div>\n\n\n        {\n          !!searchFilter.globalErrorMessage &&\n          <div className={classes.errorMessageRow}>\n            <ErrorMessage message={searchFilter.globalErrorMessage} />\n          </div>\n        }\n\n        <div className={classes.filterRow}>\n          <MuiPickersUtilsProvider utils={DateFnsUtils}>\n            <div>\n              <KeyboardDatePicker\n                id=\"date-picker-start-date\"\n                label=\"Start Date\"\n                value={searchFilter.startDate.value}\n                onChange={searchFilter.startDate.handleChange}\n                disabled={disabled}\n                {...datePickerProps}\n              />\n            </div>\n            <div>\n              <KeyboardDatePicker\n                id=\"date-picker-end-date\"\n                label=\"End Date\"\n                value={searchFilter.endDate.value}\n                onChange={searchFilter.endDate.handleChange}\n                disabled={disabled}\n                {...datePickerProps}\n              />\n            </div>\n          </MuiPickersUtilsProvider>\n          <div>\n            <SelectFilter label={'category'} data={searchFilter.category}/>\n          </div>\n          <div>\n            <SelectFilter label={'sort by'} data={searchFilter.sortBy}/>\n          </div>\n          <div>\n            <SelectFilter label={'sort order'} data={searchFilter.sortOrder}/>\n          </div>\n        </div>\n\n      </form>\n    </PaperWrapper>\n  )\n};\n\nexport default SearchInput\n","import useRequestState from \"../../../tools/use-request-state\";\nimport {useMount} from \"react-use\";\nimport axios from \"axios\";\nimport {getBaseAPI} from \"../../../routers\";\n\nexport interface TrendingItem {\n  \"key\": string,\n  \"doc_count\": number\n}\n\ninterface TrendingSearchData {\n  lastWeek: Array<TrendingItem>,\n  allTime: Array<TrendingItem>\n}\n\nconst useTrendingSearch = () => {\n  const request = useRequestState<TrendingSearchData>();\n\n  useMount(async () => {\n    try {\n      request.setIsLoading(true);\n      const res = await axios.get(`${getBaseAPI()}/api/search-news/trending`);\n      const data = res.data;\n      if (data.status !== 'ok') {\n        throw new Error()\n      }\n      request.setData({\n        lastWeek: data.lastWeek.slice(),\n        allTime: data.allTime.slice()\n      })\n    } catch (e) {\n      request.setGenericErrorMessage()\n    } finally {\n      request.setIsLoading(false)\n    }\n  });\n\n  return {request}\n}\n\nexport default useTrendingSearch\n","import React from \"react\";\nimport {alpha, Button, makeStyles, Typography} from \"@material-ui/core\";\nimport {TrendingItem} from \"./use-trending-search\";\nimport {Link} from \"react-router-dom\";\nimport routers from \"../../../routers\";\nimport {orange} from \"@material-ui/core/colors\";\nimport {getPathWithKeyword} from \"../use-search/use-search-filters\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    flexWrap: 'wrap'\n  },\n  buttonWrapper: {\n    flex: '1 1 auto',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    flexWrap: 'wrap',\n    margin: theme.spacing(0, -0.5)\n  },\n  button: {\n    margin: theme.spacing(0.5),\n    padding: theme.spacing(0.25, 1),\n    textTransform: 'none',\n    fontWeight: 700,\n    backgroundColor: alpha(orange[600], 0.08),\n    borderLeft: `solid 8px ${alpha(orange[600], 0.64)}`,\n    color: 'rgba(0,0,0,0.7)',\n    '&:hover, &:focus': {\n      backgroundColor: orange[600],\n      color: '#fff',\n    },\n    '& .MuiButton-endIcon': {\n      marginLeft: theme.spacing(2),\n      display: 'block'\n    }\n  },\n  buttonText: {\n    maxWidth: '10ch',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    wordBreak: 'break-all',\n    overflow: 'hidden',\n    display: 'block'\n  },\n  title: {\n    fontWeight: 900,\n    whiteSpace: 'pre',\n    width: '10ch',\n    textTransform: 'capitalize',\n    fontSize: theme.typography.caption.fontSize,\n    color: theme.palette.grey[600]\n  }\n}));\n\ninterface TrendingRowProps {\n  data: TrendingItem[] | null,\n  title: string\n}\n\nconst TrendingRow = ({data, title}: TrendingRowProps) => {\n  const classes = useStyles();\n\n  if (data === null) return <></>\n\n  return (\n    <div className={classes.root}>\n      <Typography variant={'h5'} component={'div'} className={classes.title}>\n        <span>{`${title}: `}</span>\n      </Typography>\n      <div className={classes.buttonWrapper}>\n        {\n          data.length ?\n            data.map(item => (\n              <Button\n                key={item.key}\n                className={classes.button}\n                component={Link}\n                to={getPathWithKeyword(item.key)}\n                size={'small'}\n                endIcon={<>{item.doc_count}</>}\n              >\n                <span className={classes.buttonText}>{item.key}</span>\n              </Button>\n            )) :\n            'Not enough searches'\n        }\n      </div>\n    </div>\n  )\n};\n\nexport default TrendingRow\n","import React from \"react\";\nimport {makeStyles, Typography, CircularProgress} from \"@material-ui/core\";\nimport WhatshotIcon from '@material-ui/icons/Whatshot';\nimport PaperWrapper from \"../paper-wrapper\";\nimport useTrendingSearch from \"./use-trending-search\";\nimport TrendingRow from \"./trending-row\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    flexWrap: 'wrap'\n  },\n  title: {\n    fontWeight: 700,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingRight: '1ch',\n  },\n  rowWrapper: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    marginBottom: theme.spacing(1)\n  },\n}));\n\ninterface TrendingSearchProps {\n}\n\nconst TrendingSearch = () => {\n  const classes = useStyles();\n  const trending = useTrendingSearch();\n\n  return (\n    <PaperWrapper>\n      <div className={classes.root}>\n        <div className={classes.rowWrapper}>\n          <Typography variant={'h6'} component={'div'} className={classes.title}>\n            <span style={{marginRight: 8}}>Trending Searches</span>\n            <WhatshotIcon style={{color: '#f57c00'}}/>\n          </Typography>\n\n          {\n            trending.request.isLoading &&\n            <CircularProgress size={25}/>\n          }\n\n          {\n            trending.request.isError &&\n            trending.request.errorMessage\n          }\n        </div>\n\n        {\n          trending.request.data !== null &&\n          <>\n            <TrendingRow data={trending.request.data.lastWeek} title={'Last week'} />\n            <TrendingRow data={trending.request.data.allTime} title={'All time'} />\n          </>\n        }\n      </div>\n    </PaperWrapper>\n  )\n};\n\nexport default TrendingSearch\n","import React, {useRef} from \"react\";\nimport {makeStyles, Paper} from \"@material-ui/core\";\nimport {SearchedArticle} from \"./use-search/use-search\";\nimport ArticleCardContent from \"../articles/article-card/article-card-content\";\nimport ArticleCardActions from \"../articles/article-card/article-card-actions\";\nimport {MOBILE} from \"../../theme/theme\";\nimport ArticleCardImage from \"../articles/article-card/article-card-image\";\nimport useLazyLoad from \"../../tools/use-lazy-load\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: theme.spacing(1, 0),\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'stretch',\n    justifyContent: 'flex-start',\n    minHeight: 200,\n    overflow: 'hidden'\n  },\n  image: {\n    width: 200,\n    overflow: 'hidden',\n    position: 'relative',\n    flex: '0 0 auto',\n    [MOBILE(theme)]: {\n      width: 50\n    }\n  },\n  imageInnerWrapper: {\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    '& img': {\n      width: '100%',\n      height: '100%',\n      objectFit: 'cover'\n    }\n  },\n  contentArea: {\n    flex: '1 1 auto',\n    padding: theme.spacing(2, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    [MOBILE(theme)]: {\n      padding: theme.spacing(0.5, 1.5),\n    }\n  },\n  content: {\n    flex: '1 1 auto'\n  },\n  action: {\n    margin: theme.spacing(1, -0.5, 0, -0.5),\n    flex: '0 0 auto'\n  }\n}));\n\ninterface SearchedArticleCardProps {\n  data: SearchedArticle\n}\n\nconst SearchedArticleCard = ({data}: SearchedArticleCardProps) => {\n  const classes = useStyles();\n  const rootRef = useRef<HTMLDivElement>(null);\n  const isVisible = useLazyLoad(rootRef);\n\n  return (\n    <Paper elevation={0} className={classes.root} ref={rootRef}>\n      <div className={classes.image}>\n        <div className={classes.imageInnerWrapper}>\n          <ArticleCardImage url={data.urlToImage} title={data.title} isVisible={isVisible}/>\n          {/*<img src={data.urlToImage} alt={data.title} />*/}\n        </div>\n      </div>\n      <div className={classes.contentArea}>\n        <div className={classes.content}>\n          <ArticleCardContent data={data}/>\n        </div>\n        <div className={classes.action}>\n          <ArticleCardActions data={data}/>\n        </div>\n      </div>\n    </Paper>\n  )\n};\n\nexport default SearchedArticleCard\n","import {useLocation} from \"react-router-dom\";\nimport useRequestState from \"../../../tools/use-request-state\";\nimport {useCallback, useEffect, useRef} from \"react\";\nimport axios from \"axios\";\nimport queryString from \"query-string\";\nimport {usePrevious} from \"react-use\";\nimport {getBaseAPI} from \"../../../routers\";\n\nexport interface SearchedArticle {\n  id: string,\n  author: string\n  category: string,\n  content: string,\n  description: string,\n  publishedAt: string\n  source: string\n  title: string,\n  url: string,\n  urlToImage: string\n}\n\ninterface SearchResponse {\n  docs: SearchedArticle[],\n  histogram: Array<{\n    doc_count: number,\n    key: number,\n  }>,\n  total: number,\n  hasNext: boolean\n}\n\nconst useSearch = () => {\n  const location = useLocation();\n  const previousLocationSearch = usePrevious(location.search);\n  const requestState = useRequestState<SearchResponse>();\n  const pageRef = useRef(1);\n\n  const doSearch = useCallback(async () => {\n    try {\n      if (requestState.isLoading) {\n        return\n      }\n\n      requestState.resetError();\n      requestState.setIsLoading(true);\n      const res = await axios.get(`${getBaseAPI()}/api/search-news`, {\n        params: {\n          ...queryString.parse(location.search),\n          page: pageRef.current\n        }\n      });\n      const data = res.data;\n      if (data.status === 'ok') {\n        requestState.setData(prev => {\n          const newDocs = prev === null ? data.docs : [...prev.docs, ...data.docs];\n          return {\n            docs: newDocs,\n            histogram: data.histogram,\n            total: data.total,\n            hasNext: data.hasNext,\n          }\n        });\n      } else {\n        requestState.setErrorMessage(res.data.message)\n      }\n      pageRef.current = pageRef.current + 1;\n    } catch (e) {\n      requestState.setGenericErrorMessage()\n    } finally {\n      requestState.setIsLoading(false)\n    }\n  }, [location.search, requestState]);\n\n  useEffect(() => {\n    if (location.search !== previousLocationSearch && location.search.length > 0) {\n      pageRef.current = 1;\n      requestState.setData(null)\n      doSearch()\n    }\n  }, [doSearch, location.search, previousLocationSearch, requestState]);\n\n  return {\n    requestState,\n    doSearch\n  }\n}\n\nexport default useSearch\n","import React, {useEffect, useState} from \"react\";\nimport {IconButton} from \"@material-ui/core\";\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Fade from \"@material-ui/core/Fade\";\n// @ts-ignore\nimport smoothscroll from 'smoothscroll-polyfill';\n\n// kick off the polyfill!\nsmoothscroll.polyfill();\n\nconst useActivateByScrollY = () => {\n  const [isActive, setIsActive] = useState(false);\n\n  const handleScroll = () => {\n    if (window.scrollY > window.innerHeight && !isActive) {\n      setIsActive(true);\n    } else if (window.scrollY < window.innerHeight && isActive) {\n      setIsActive(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('scroll', handleScroll);\n\n    return () => {\n      document.removeEventListener('scroll', handleScroll);\n    }\n  }, [isActive]);\n\n  return isActive\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'fixed',\n    zIndex: theme.zIndex.modal,\n    bottom: '50px',\n    right: '50px',\n    backgroundColor: theme.palette.secondary.main,\n    color: '#FFF',\n    transition: theme.transitions.create('background-color opacity'),\n    transform: 'rotate(-90deg)',\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.light,\n    },\n    [theme.breakpoints.down('md')]: {\n      bottom: '15px',\n      right: '15px',\n    }\n  }\n}));\n\ninterface ScrollToTopButtonProps {\n\n}\n\nconst ScrollToTopButton: React.FC<ScrollToTopButtonProps> = () => {\n\n  const classes = useStyles();\n\n  const isActive = useActivateByScrollY();\n  const scrollToTop = () => {\n    window.scroll({top: 0, left: 0, behavior: 'smooth'});\n  };\n\n  return (\n    <Fade in={isActive}>\n      <Tooltip title=\"Scroll to Top\" className={classes.root}>\n        <IconButton aria-label=\"Scroll to Top\" onClick={scrollToTop}>\n          <PlayArrowIcon/>\n        </IconButton>\n      </Tooltip>\n    </Fade>\n  )\n};\n\nexport default ScrollToTopButton\n","import {lighten, Theme} from \"@material-ui/core\";\nimport * as d3 from \"d3\";\nimport {getDateStringFromMs as getDateString} from \"../tools/get-date-string\";\n\nclass FrequencyChartD3 {\n  dataArray: {\n    bin: number[],\n    frequency: number[]\n  };\n\n  auxArray: {\n    binDate: string[],\n    barTransitionDelay: number[]\n  };\n\n  params: {\n    lightColor: string,\n    darkColor: string,\n    primaryColor: string,\n    backgroundColor: string,\n    TRANSITION_DELAY: number,\n    BAR_TRANSITION_DURATION: number,\n    maxFrequency: number,\n    binLength: number,\n    argWidth: number,\n    selector: string\n  };\n\n  dimension: {\n    svgWidth: number,\n    svgHeight: number,\n    m: { t: number, r: number, b: number, l: number },\n    chartWidth: number,\n    chartHeight: number,\n    chartX: number,\n    chartY: number\n  };\n\n  scales: {\n    x: d3.ScaleBand<string>,\n    y: d3.ScaleLinear<number, number>\n  };\n\n  svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>;\n\n  references: {\n    svg: d3.Selection<SVGSVGElement, unknown, HTMLElement, any>,\n    bars: d3.Selection<SVGRectElement, number, SVGGElement, unknown>,\n    axisX: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    axisY: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    axisXHoverDate: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    axisXHoverFrequency: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    axisYHover: d3.Selection<SVGGElement, unknown, HTMLElement, any>,\n    hoverDetection: d3.Selection<SVGRectElement, number, SVGGElement, unknown>,\n  };\n\n  axis: {\n    x: d3.Axis<string>,\n    y: d3.Axis<number | { valueOf(): number; }>,\n    xHoverDate: d3.Axis<string>,\n    xHoverFrequency: d3.Axis<string>,\n    yHover: d3.Axis<number | { valueOf(): number; }>,\n  };\n\n  constructor(theme: Theme, bin: number[], frequency: number[], width: number, selector: string) {\n    this.dataArray = {\n      bin,\n      frequency\n    };\n    this.auxArray = {\n      binDate: this.getBinDateArray(bin),\n      barTransitionDelay: this.getBarTransitionDelayArray(500, frequency)\n    };\n    this.params = {\n      lightColor: theme.palette.secondary.light,\n      darkColor: theme.palette.secondary.dark,\n      primaryColor: theme.palette.primary.light,\n      backgroundColor: 'fff',\n      TRANSITION_DELAY: 500,\n      BAR_TRANSITION_DURATION: 2000,\n      maxFrequency: Math.max.apply(Math, this.dataArray.frequency),\n      binLength: this.dataArray.bin.length,\n      argWidth: width,\n      selector\n    };\n    this.dimension = this.getDimensions(width);\n    this.svg = d3.select(`#${this.params.selector}`).append('svg');\n    this.references = {\n      svg: this.svg,\n      bars: this.svg\n        .append('g')\n        .selectAll('rect').data(this.dataArray.frequency)\n        .enter().append('rect'),\n      axisX: this.svg.append('g'),\n      axisY: this.svg.append('g'),\n      axisXHoverDate: this.svg.append('g'),\n      axisXHoverFrequency: this.svg.append('g'),\n      axisYHover: this.svg.append('g'),\n      hoverDetection: this.svg\n        .append('g')\n        .selectAll('rect').data(this.dataArray.frequency)\n        .enter().append('rect'),\n    };\n    this.scales = {\n      x: d3.scaleBand()\n        .domain(this.dataArray.frequency.map((_, i) => i.toString()))\n        .range([0, this.dimension.chartWidth]),\n      y: d3.scaleLinear()\n        .domain([0, this.params.maxFrequency])\n        .range([this.dimension.chartHeight, 0])\n    };\n    this.axis = {\n      x: d3.axisBottom(this.scales.x),\n      y: d3.axisLeft(this.scales.y),\n      xHoverDate: d3.axisBottom(this.scales.x),\n      xHoverFrequency: d3.axisBottom(this.scales.x),\n      yHover: d3.axisLeft(this.scales.y)\n    };\n    this.setHoverDetectionEventHandlers = this.setHoverDetectionEventHandlers.bind(this);\n    this.getBarColor = this.getBarColor.bind(this);\n  }\n\n  getBinDateArray(binArray: number[]) {\n    return binArray.map(getDateString)\n  }\n\n  getBarTransitionDelayArray(transitionDelay: number, frequencyDataArray: number[]) {\n    const array = [];\n    let delay = transitionDelay;\n    let step = 20;\n    for (let i = 0; i < frequencyDataArray.length; i++) {\n      if (frequencyDataArray[i] === 0) {\n        array.push(delay)\n      } else {\n        array.push(delay += step);\n      }\n    }\n    return array\n  }\n\n  getDimensions(width: number) {\n    const svgWidth = width;\n    const svgHeight = Math.min(Math.round(svgWidth / 3), 100);\n    const m = {t: 20, r: 20, b: 20, l: 40}; // margin\n    const chartWidth = svgWidth - m.l - m.r;\n    const chartHeight = svgHeight - m.t - m.b;\n    const chartX = m.l;\n    const chartY = m.t;\n\n    return {\n      svgWidth,\n      svgHeight,\n      m,\n      chartWidth,\n      chartHeight,\n      chartX,\n      chartY\n    }\n  }\n\n  setSvg() {\n    this.references.svg\n      .attr('width', this.dimension.svgWidth)\n      .attr('height', this.dimension.svgHeight)\n      .style('background', this.params.backgroundColor);\n\n  }\n\n  getBarColor(d: number) {\n    const percentage = parseFloat((d / this.params.maxFrequency).toFixed(2));\n    const scaledMax = 0.5;\n    const scaled = scaledMax - (scaledMax * percentage);\n    return lighten(this.params.lightColor, scaled);\n  }\n\n  setBars() {\n    const barWidth = this.scales.x.bandwidth();\n    const barHeight = (d: number) => this.dimension.chartHeight - this.scales.y(d);\n    const barX = (d: number, i: number) => this.dimension.chartX + (this.scales.x(i.toString()) || 0);\n    const barY = (d: number) => this.dimension.chartY + this.dimension.chartHeight - barHeight(d);\n\n    this.references.bars\n      .style('fill', this.getBarColor)\n      .attr('width', barWidth)\n      .attr('height', 0)\n      .attr('x', barX)\n      .attr('y', this.dimension.chartY + this.dimension.chartHeight);\n\n    this.references.bars\n      .transition()\n      .attr('height', barHeight)\n      .attr('y', barY)\n      .delay((d: number, i: number) => this.auxArray.barTransitionDelay[i])\n      .duration(this.params.BAR_TRANSITION_DURATION)\n      .ease(d3.easeElastic);\n  }\n\n  setAxisX() {\n    this.axis.x\n      .tickSizeOuter(0)\n      .tickFormat((d, i) => this.auxArray.binDate[parseInt(d)])\n      .tickValues([0, Math.floor(this.params.binLength * 0.25), Math.floor(this.params.binLength * 0.5), Math.floor(this.params.binLength * 0.75), this.params.binLength - 1].map(_ => `${_}`));\n    this.references.axisX\n      .style('transform', `translate(${-0.5 * this.dimension.svgWidth}px, ${this.dimension.svgHeight + this.dimension.chartY}px)`)\n      .style('opacity', 0)\n      .style('color', this.params.darkColor);\n\n    this.references.axisX.transition()\n      .style('opacity', 1)\n      .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartHeight + this.dimension.chartY}px)`)\n      .delay(this.params.TRANSITION_DELAY)\n      .duration(1000)\n      .ease(d3.easeElastic);\n\n    this.axis.x(this.references.axisX);\n  }\n\n  setAxisY() {\n    this.axis.y\n      .tickSizeOuter(0)\n      .tickFormat(d3.format(\"d\"))\n      .tickValues([0, Math.floor(this.params.maxFrequency * 0.5), this.params.maxFrequency]);\n    this.references.axisY\n      .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartHeight}px)`)\n      .style('opacity', 0)\n      .style('color', this.params.darkColor);\n\n    this.references.axisY.transition()\n      .style('opacity', 1)\n      .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartY}px)`)\n      .delay(this.params.TRANSITION_DELAY)\n      .duration(1000)\n      .ease(d3.easeElastic);\n\n    this.axis.y(this.references.axisY);\n  }\n\n  setAxisXHoverDate() {\n    this.references.axisXHoverDate.style('opacity', 0)\n      .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartHeight + this.dimension.chartY}px)`);\n    this.axis.xHoverDate\n      .tickFormat((d) => this.auxArray.binDate[parseInt(d)]);\n  }\n\n  setAxisXHoverFrequency() {\n    this.references.axisXHoverFrequency.style('opacity', 0);\n    this.axis.xHoverFrequency\n      .tickFormat((d) => `${this.dataArray.frequency[parseInt(d)]}`)\n      .tickSize(0)\n      .tickPadding(-9);\n  }\n\n  setAxisYHover() {\n    this.references.axisYHover.style('opacity', 0)\n      .style('transform', `translate(${this.dimension.chartX}px, ${this.dimension.chartY}px)`);\n    this.axis.yHover\n      .tickFormat(d3.format(\"d\"))\n      .tickSizeInner(-this.dimension.chartWidth - 6)\n      .tickSizeOuter(0)\n      .tickPadding(9);\n  }\n\n  setHoverDetection() {\n    const barWidth = this.scales.x.bandwidth();\n    const barX = (d: number, i: number) => this.dimension.chartX + (this.scales.x(i.toString()) || 0);\n\n    this.references.hoverDetection\n      .style('opacity', 0)\n      .attr('width', barWidth)\n      .attr('height', this.dimension.svgHeight)\n      .attr('x', barX)\n      .attr('y', 0);\n\n    this.setHoverDetectionEventHandlers()\n  }\n\n  setHoverDetectionEventHandlers() {\n    this.references.hoverDetection\n      .on('mouseover', (d, i) => {\n        this.axis.yHover.tickValues([d]);\n        this.axis.yHover(this.references.axisYHover);\n\n        this.references.axisYHover\n          .selectAll(\".tick line\")\n          .style('transform', `translate(-6px, 0)`)\n          .style('color', this.params.primaryColor);\n        this.references.axisYHover.selectAll(\".domain\").remove();\n        this.references.axisYHover.style('opacity', 1);\n\n        const gridTextBox = this.references.axisYHover.select<SVGTextElement>('text').node()?.getBBox();\n        if (gridTextBox) {\n          this.references.axisYHover.selectAll('g.tick').insert('rect',\n            ':first-child')\n            .attr('width', gridTextBox.width)\n            .attr('height', gridTextBox.height)\n            .attr('x', gridTextBox.x)\n            .attr('y', gridTextBox.y)\n            .style('fill', this.params.backgroundColor);\n        }\n\n        this.axis.xHoverDate\n          .tickValues([`${i}`]);\n        this.axis.xHoverDate(this.references.axisXHoverDate);\n        this.references.axisXHoverDate.selectAll(\".domain\").remove();\n        this.references.axisXHoverDate.style('opacity', 1);\n\n        const hoverDateTextBox = this.references.axisXHoverDate.select<SVGTextElement>('text').node()?.getBBox();\n        if (hoverDateTextBox) {\n          this.references.axisXHoverDate.selectAll('g.tick').insert('rect',\n            ':first-child')\n            .attr('width', hoverDateTextBox.width * 1.2)\n            .attr('height', hoverDateTextBox.height)\n            .attr('x', hoverDateTextBox.x - 0.1 * hoverDateTextBox.width)\n            .attr('y', hoverDateTextBox.y)\n            .style('fill', this.params.backgroundColor);\n        }\n\n        this.axis.xHoverFrequency\n          .tickValues([`${i}`]);\n        this.axis.xHoverFrequency(this.references.axisXHoverFrequency);\n        this.references.axisXHoverFrequency.selectAll(\".domain\").remove();\n        this.references.axisXHoverFrequency\n          .style('transform', `translate(${this.dimension.chartX}px, ${this.scales.y(d) + this.dimension.chartY}px)`)\n          .style('opacity', 1);\n\n        const bar = this.references.bars.filter((d, index) => index === i);\n        bar.style('fill', this.params.primaryColor);\n      })\n      .on('mouseout', (d, i) => {\n        this.references.axisYHover.style('opacity', 0);\n        this.references.axisXHoverFrequency.style('opacity', 0);\n        this.references.axisXHoverDate.style('opacity', 0);\n\n        this.references.bars.filter((d, index) => index === i)\n          .style('fill', this.getBarColor);\n\n      })\n  }\n\n  bindSetDate(setDate: (date: number) => void) {\n    this.references.hoverDetection\n      .on('click', (d, i) => {\n        setDate(this.dataArray.bin[i])\n      })\n  }\n\n  draw() {\n    this.setSvg();\n    this.setBars();\n    this.setAxisX();\n    this.setAxisY();\n    this.setAxisXHoverDate();\n    this.setAxisXHoverFrequency();\n    this.setAxisYHover();\n    this.setHoverDetection();\n  }\n\n  main() {\n    this.draw();\n  }\n}\n\nexport default FrequencyChartD3\n","import React, {useRef} from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport {useTheme} from '@material-ui/core/styles';\nimport FrequencyChartD3 from \"../../d3-charts/frequency-chart-d3\";\nimport {useMount} from \"react-use\";\n\nconst id = 'keyword-frequency-chart';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%'\n  }\n}));\n\ninterface KeywordFrequencyProps {\n  bin: number[], // epoch ms time\n  frequency: number[],\n  setDate: (date: number) => void,\n}\n\nconst KeywordFrequency: React.FC<KeywordFrequencyProps> = ({bin, frequency, setDate}) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const classes = useStyles();\n  const theme = useTheme();\n\n  useMount(() => {\n    if (!wrapperRef.current) return;\n\n    const chart = new FrequencyChartD3(\n      theme,\n      bin,\n      frequency,\n      wrapperRef.current.getBoundingClientRect().width,\n      id\n    );\n    chart.main();\n    chart.bindSetDate(setDate);\n  })\n\n  return (\n    <div ref={wrapperRef} className={classes.root} id={id} />\n  )\n};\n\nexport default KeywordFrequency\n","import React from \"react\";\nimport {Button, CircularProgress, makeStyles, Typography} from \"@material-ui/core\";\nimport SearchedArticleCard from \"./searched-article-card\";\nimport useSearch from \"./use-search/use-search\";\nimport {MOBILE} from \"../../theme/theme\";\nimport MessageWithIcon from \"../utility-components/message-with-icon\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport ScrollToTopButton from \"./scroll-to-top-button\";\nimport clsx from 'clsx';\nimport PaperWrapper from \"./paper-wrapper\";\nimport KeywordFrequency from \"./keyword-frequency\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    margin: theme.spacing(4, 0),\n    [MOBILE(theme)]: {\n      margin: theme.spacing(2, 0),\n    }\n  },\n  centeringWrapper: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: theme.spacing(4, 2),\n    [MOBILE(theme)]: {\n      padding: theme.spacing(1),\n    }\n  },\n  loadMoreButton: {\n    maxWidth: '100%',\n    width: 400,\n    height: 40,\n    margin: theme.spacing(1, 0)\n  },\n  totalCountRow: {\n    width: '100%',\n    margin: theme.spacing(1, 0),\n    '& span': {\n      display: 'block',\n      width: 'fit-content',\n      marginLeft: 'auto',\n      fontWeight: 700,\n      [MOBILE(theme)]: {\n        marginLeft: 0,\n        width: '100%',\n        textAlign: 'center'\n      }\n    },\n  },\n  endOfResult: {\n    '& span': {\n      borderBottom: '1px solid rgba(0,0,0,0.32)',\n      color: 'rgba(0,0,0,0.32)',\n      fontWeight: 700,\n      width: '100%',\n      textAlign: 'center'\n    }\n  }\n}));\n\ninterface SearchedArticlesProps {\n}\n\nconst SearchedArticles = () => {\n  const classes = useStyles();\n  const search = useSearch();\n\n  return (\n    <div className={classes.root}>\n      {\n        search.requestState.data &&\n        <>\n          <div className={classes.totalCountRow}>\n            <Typography variant={'body2'} component={'span'}>\n              {`Found ${search.requestState.data.total} news articles, showing ${Math.min(1, search.requestState.data.docs.length)} - ${search.requestState.data.docs.length}`}\n            </Typography>\n          </div>\n          {\n            !!search.requestState.data.docs.length &&\n            <PaperWrapper>\n              <KeywordFrequency\n                bin={search.requestState.data.histogram.map(obj => obj.key)}\n                frequency={search.requestState.data.histogram.map(obj => obj.doc_count)}\n                setDate={() => false}\n              />\n            </PaperWrapper>\n          }\n          {\n            search.requestState.data.docs.map(doc => (\n              <SearchedArticleCard data={doc} key={doc.id}/>\n            ))\n          }\n        </>\n      }\n      {\n        !search.requestState.isLoading && search.requestState.isError &&\n        <MessageWithIcon icon={<InfoIcon/>} title={'Ooops'} text={search.requestState.errorMessage}/>\n      }\n      {\n        !search.requestState.isLoading && !search.requestState.isError && search.requestState.data && !search.requestState.data.docs.length &&\n        <MessageWithIcon icon={<InfoIcon/>} title={'No news article found'}\n                         text={'Please try again with different keyword and filters'}/>\n      }\n\n      {\n        search.requestState.isLoading &&\n        <div className={classes.centeringWrapper}>\n          <CircularProgress size={25}/>\n        </div>\n      }\n      {\n        !search.requestState.isLoading && !search.requestState.isError && search.requestState.data?.hasNext &&\n        <Button className={classes.loadMoreButton} variant={'contained'} disableElevation color={'secondary'}\n                onClick={search.doSearch}>\n          Load more\n        </Button>\n      }\n      {\n        !search.requestState.isLoading && !search.requestState.isError && !search.requestState.data?.hasNext && !!search.requestState.data?.docs.length &&\n        <div className={clsx(classes.centeringWrapper, classes.endOfResult)}>\n          <Typography variant={'body2'} component={'span'}>\n            END OF RESULT\n          </Typography>\n        </div>\n      }\n\n      <ScrollToTopButton/>\n    </div>\n  )\n};\n\nexport default SearchedArticles\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport SearchInput from \"./search-input\";\nimport {MOBILE} from \"../../theme/theme\";\nimport TrendingSearch from \"./trending-search/trending-search\";\nimport SearchedArticles from \"./searched-articles\";\nimport {useLocation} from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start'\n  },\n  widthWrapper: {\n    maxWidth: theme.breakpoints.values['lg'],\n    width: '100%',\n    padding: theme.spacing(2),\n    margin: theme.spacing(2, 0),\n    [MOBILE(theme)]: {\n      padding: theme.spacing(1),\n      margin: theme.spacing(1, 0),\n    }\n  }\n}));\n\ninterface SearchProps {\n}\n\nconst Search = () => {\n  const classes = useStyles();\n  const locationSearch = useLocation().search;\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.widthWrapper}>\n        <SearchInput/>\n        <TrendingSearch/>\n        <SearchedArticles key={locationSearch}/>\n      </div>\n    </div>\n  )\n};\n\nexport default Search\n","import useRequestState from \"../../tools/use-request-state\";\nimport {useMount} from \"react-use\";\nimport {ArticleData} from \"../articles/use-load-articles\";\nimport axios from \"axios\";\nimport {getBaseAPI} from \"../../routers\";\n\nconst useGetArticleById = (id: string) => {\n  const request = useRequestState<ArticleData[]>();\n\n  useMount(async () => {\n    try {\n      if (!id) return;\n      request.setIsLoading(true);\n      const res = await axios.get(`${getBaseAPI()}/api/search-news/id`, {\n        params: {id}\n      });\n      request.setData(res.data.doc)\n    } catch (e) {\n      request.setGenericErrorMessage()\n    } finally {\n      request.setIsLoading(false);\n    }\n  })\n\n  return request\n}\n\nexport default useGetArticleById\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport useGetArticleById from \"./use-get-article-by-id\";\nimport Articles from \"../articles/articles\";\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\ninterface ArticleByIdProps {\n  id: string\n}\n\nconst ArticleById = ({id}: ArticleByIdProps) => {\n  const classes = useStyles();\n  const article = useGetArticleById(id);\n\n  return (\n    <Articles requestState={article} />\n  )\n};\n\nexport default ArticleById\n","import React from \"react\";\nimport {makeStyles} from \"@material-ui/core\";\nimport {useParams} from \"react-router-dom\";\nimport ArticleById from \"./article-by-id\";\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\ninterface ArticleByIdContainerProps {}\n\nconst ArticleByIdContainer = () => {\n  const classes = useStyles();\n  const {id} = useParams<{id: string}>();\n\n  return (\n    <ArticleById id={id} key={id} />\n  )\n};\n\nexport default ArticleByIdContainer\n","import React from \"react\";\nimport {Box, makeStyles} from \"@material-ui/core\";\nimport Attribution from \"./components/attribution\";\nimport CopyLinkSnackBarContainer from \"./containers/copy-link-snackbar-container\";\nimport Analytics from \"./components/analytics/analytics\";\nimport Topic from \"./components/topic/topic\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport Header from \"./components/header/header\";\nimport ArticlesContainer from \"./components/articles/articles-container\";\nimport Search from \"./components/search/search\";\nimport routers from \"./routers\";\nimport ArticleByIdContainer from \"./components/article-by-id/article-by-id-container\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100vw',\n    maxWidth: '100%',\n    // overflowX: 'hidden',\n    // paddingBottom: '10px',\n    // overflowX is causing y-axis scroll problem, pb do the hack,\n    position: 'relative',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start'\n  },\n  header: {\n    width: '100%',\n    flex: '0 0 auto'\n  },\n  mainArea: {\n    width: '100%',\n    flex: '1 1 auto'\n  },\n  attribution: {\n    width: '100%',\n    flex: '0 0 auto'\n  }\n}));\n\ninterface InnerAppProps {\n}\n\nfunction InnerApp(props: InnerAppProps) {\n  const classes = useStyles();\n\n  return (\n    <Router basename={'/news-app'}>\n      <Box className={classes.root} style={{minHeight: `${window.innerHeight}px`}}>\n        <div className={classes.header}>\n          <Header/>\n        </div>\n        <div className={classes.mainArea}>\n          <Switch>\n            <Route path={routers.root.path} exact render={() => <ArticlesContainer/>}/>\n            <Route path={routers.search.path} exact render={() => <Search/>}/>\n            <Route path={routers.topic.path} exact component={Topic}/>\n            <Route path={routers.analytics.path} exact component={Analytics}/>\n            <Route path={routers.article.path} exact component={ArticleByIdContainer}/>\n          </Switch>\n        </div>\n        <div className={classes.attribution}>\n          <Attribution/>\n        </div>\n        <CopyLinkSnackBarContainer/>\n      </Box>\n    </Router>\n  )\n}\n\nexport default InnerApp;\n","import React from 'react';\nimport {Provider} from 'react-redux';\nimport configureStore from \"./redux/configureStore\";\nimport {CssBaseline} from \"@material-ui/core\";\nimport {ThemeProvider} from '@material-ui/core/styles';\nimport theme from \"./theme/theme\";\nimport InnerApp from \"./inner-app\";\n\nconst store = configureStore();\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline/>\n        <InnerApp/>\n      </ThemeProvider>\n    </Provider>\n  )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: {'Service-Worker': 'script'}\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}