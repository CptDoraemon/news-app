(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(15),i=a.n(o),l=(a(91),a(5)),s=a(57),u=a(27),h=a(73);!function(e){e.HEADLINE="HEADLINE",e.BUSINESS="BUSINESS",e.ENTERTAINMENT="ENTERTAINMENT",e.HEALTH="HEALTH",e.SCIENCE="SCIENCE",e.SPORTS="SPORTS",e.TECHNOLOGY="TECHNOLOGY"}(n||(n={}));var m,E,d=["HEADLINE","BUSINESS","ENTERTAINMENT","HEALTH","SCIENCE","SPORTS","TECHNOLOGY"];function f(e){return function(t,a){t(function(e){return{type:m.SET_CATEGORY,category:e}}(e)),t(g(e))}}!function(e){e.SET_CATEGORY="SET_CATEGORY"}(m||(m={})),function(e){e.IS_ERROR="IS_ERROR",e.REQUEST_ARTICLES="REQUEST_ARTICLES",e.RECEIVE_ARTICLES="RECEIVE_ARTICLES"}(E||(E={}));var b,p="https://www.xiaoxihome.com/api/news?query=";function g(e){var t="\n        {\n            getNews(category: ".concat(e,") {\n                source,\n                author,\n                title,\n                description,\n                url,\n                urlToImage,\n                publishedAt,\n                content\n            }\n        }\n    ");return function(e){return e({type:E.REQUEST_ARTICLES}),fetch(p+encodeURIComponent(t)).then((function(e){return e.json()})).then((function(t){t.errors?e({type:E.IS_ERROR}):e(function(e){return{type:E.RECEIVE_ARTICLES,articles:e.slice()}}(t.data.getNews))}))}}!function(e){e.CLOSE_SNACKBAR="CLOSE_SNACKBAR",e.OPEN_SNACKBAR="OPEN_SNACKBAR"}(b||(b={}));var v={category:n.HEADLINE,articles:{isError:!1,isFetching:!0,articles:[]},isCopyLinkSnackbarActive:!1};var O=Object(u.c)({category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.category,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_CATEGORY:return n[t.category];default:return e}},articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.articles,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.IS_ERROR:return Object.assign({},e,{isError:!0});case E.REQUEST_ARTICLES:return Object.assign({},e,{isError:!1,isFetching:!0});case E.RECEIVE_ARTICLES:return Object.assign({},{isError:!1,isFetching:!1,articles:t.articles.slice()});default:return e}},isCopyLinkSnackbarActive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.isCopyLinkSnackbarActive;switch((arguments.length>1?arguments[1]:void 0).type){case b.CLOSE_SNACKBAR:return!1;case b.OPEN_SNACKBAR:return!0;default:return e}}}),y=v;var S=a(74),j=a(141),w=a(157),T=a(156),C=a(80),N=a(160),R=a(153),A=a(137),L=a(138),k=a(139),I=a(122),x=a(158),_=a(140),H=Object(S.a)((function(e){return{tab:{flexShrink:0,flexGrow:1,color:e.palette.primary.contrastText},toolbar:{textTransform:"uppercase"}}}));var B=function(e){var t=H(),a=function(t){e.dispatcher(function(e){return function(t,a){a().category!==e&&t(f(e))}}(t))};return c.a.createElement(A.a,{color:"primary",position:"static"},c.a.createElement(L.a,null,c.a.createElement(k.a,null,c.a.createElement(I.a,{align:"center",className:t.toolbar,variant:"h1",component:"h1"},"News Canada"))),c.a.createElement(x.a,{value:e.headers.indexOf(e.category),indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto"},e.headers.map((function(e,r){return c.a.createElement(_.a,{label:e,key:r,className:t.tab,onClick:function(){return a(n[e])}})}))))},D=a(16),M=a(14),G=a(142),U=a(143),F=a(144),Y=a(145),K=a(34),P=a(146),X=a(147),z=a(148),W=a(150),Q=a(152),V=a(149);var J,q=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};!function(e){e.NULL="NULL",e.LEFT="LEFT",e.RIGHT="RIGHT"}(J||(J={}));var $=20;var Z=function(e,t){var a=Object(r.useState)(0),n=Object(D.a)(a,2),c=n[0],o=n[1],i=Object(r.useState)(0),l=Object(D.a)(i,2),s=l[0],u=l[1],h=Object(r.useState)(J.NULL),m=Object(D.a)(h,2),E=m[0],d=m[1],f=Object(r.useState)(0),b=Object(D.a)(f,2),p=b[0],g=b[1],v=Object(r.useState)(Date.now()),O=Object(D.a)(v,2),y=O[0],S=O[1];function j(e){o(e.changedTouches[0].clientX),u(e.changedTouches[0].clientY)}function w(e){var t=Date.now();if(!(t-y<$)){var a=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;Math.abs(a-c)>Math.abs(n-s)&&g(e.changedTouches[0].clientX-c),S(t)}}function T(e){var a=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;Math.abs(a-c)>Math.abs(n-s)&&Math.abs(a-c)>t&&d(a>c?J.RIGHT:J.LEFT),g(0)}return Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchstart",j),t.addEventListener("touchend",T),t.addEventListener("touchmove",w),function(){t.removeEventListener("touchstart",j),t.removeEventListener("touchend",T),t.removeEventListener("touchmove",w)}})),{direction:E,dragDistance:p,resetSwipeStatus:function(){d(J.NULL)}}},ee=Object(S.a)((function(e){return Object(j.a)(Object(l.a)({wrapper:{width:"calc(100% - 40px)",margin:"20px"}},e.breakpoints.down("sm"),{wrapper:{width:"calc(100% - 16px)",margin:"8px"}}))}));function te(e,t,a){return"calc(".concat(e," * ").concat(a.typography[t].fontSize," * ").concat(a.typography[t].lineHeight,")")}function ae(e,t){return Object(j.a)({root:{position:"relative","&:after":{content:"''",position:"absolute",bottom:0,right:0,width:"20%",height:te(1,e,t),backgroundImage:"linear-gradient(to right, rgba(255, 255, 255, 0) , rgba(255, 255, 255, 1))",zIndex:10}}})}var ne={width:"100%",overflow:"hidden",position:"relative"},re=Object(S.a)((function(e){return Object(j.a)(Object(l.a)({media:Object(M.a)({height:"550px"},ne),skeleton:Object(M.a)({height:"550px"},ne),title:Object(M.a)({height:te(1,"body1",e)},ae("body1",e).root,{},ne),source:Object(M.a)({height:te(1,"body2",e)},ne),articleContent:Object(M.a)({height:te(2,"body2",e)},ae("body2",e).root,{},ne),buttons:Object(M.a)({},ne)},e.breakpoints.down("sm"),{media:{height:"200px"},skeleton:{height:"200px"}}))})),ce=Object(S.a)((function(e){return Object(j.a)(Object(l.a)({media:Object(M.a)({height:"200px"},ne),skeleton:Object(M.a)({height:"200px"},ne),title:Object(M.a)({height:te(2,"body1",e)},ae("body1",e).root,{},ne),source:Object(M.a)({height:te(1,"body2",e)},ne),articleContent:Object(M.a)({height:te(3,"body2",e)},ae("body2",e).root,{},ne),buttons:Object(M.a)({},ne)},e.breakpoints.down("sm"),{}))}));function oe(e){return c.a.createElement(G.a,{className:e.className},c.a.createElement(U.a,{href:e.url,target:"_blank",rel:"noopener",underline:"none"},c.a.createElement(F.a,{size:"small",color:"primary"},"Learn more")),c.a.createElement(F.a,{size:"small",color:"primary",onClick:function(){q(e.url),e.dispatcher((console.log("called"),{type:b.OPEN_SNACKBAR}))}},"Share"))}function ie(e){var t=Object(r.useRef)(null),a=function(e){var t=Object(r.useState)(!1),a=Object(D.a)(t,2),n=a[0],c=a[1],o=Date.now()-1e3;function i(){var t=Date.now();if(!(t-o<20)&&(o=t,e.current)){var a=e.current.getBoundingClientRect(),n=a.top+a.height<0,r=a.top>window.innerHeight;n||r||c(!0)}}return Object(r.useEffect)((function(){if(!n)return i(),document.addEventListener("scroll",i),function(){document.removeEventListener("scroll",i)}})),n}(t),n=Object(r.useState)(!1),o=Object(D.a)(n,2),i=o[0],l=o[1],s=!Object(Y.a)(Object(K.a)().breakpoints.down("sm")),u=0===e.id||1===e.id,h=re(),m=ce(),E=u?h:m;Object(r.useEffect)((function(){s&&setTimeout((function(){return l(!0)}),225)}),[]);var d=c.a.createElement(P.a,{item:!0,xs:12,md:u?6:3,ref:t},c.a.createElement(X.a,{raised:!0},a&&e.urlToImage?c.a.createElement(z.a,{component:"img",alt:e.title,className:E.media,image:e.urlToImage,title:e.title}):c.a.createElement(V.a,{variant:"rect",className:E.skeleton}),c.a.createElement(W.a,null,c.a.createElement(I.a,{gutterBottom:!0,variant:"body1",component:"h2",className:E.title},c.a.createElement(w.a,{fontWeight:700},e.title)),c.a.createElement(I.a,{variant:"body2",color:"textSecondary",component:"p",className:E.source},c.a.createElement(w.a,{component:"span",fontWeight:700},e.source?e.source+" - ":e.author?e.author+" - ":"",function(e){var t=Date.now()-e.getTime();if(t<0)return"now";var a=Math.floor(t/6e4);if(a<=59)return"".concat(a," ").concat(1===a?"minute":"minutes"," ago");var n=Math.floor(t/36e5);if(n<=23)return"".concat(n," ").concat(1===n?"hour":"hours"," ago");var r=Math.floor(t/864e5);if(r<=30)return"".concat(r," ").concat(1===r?"day":"days"," ago");var c=Math.floor(t/2592e6);if(c<=12)return"".concat(c," ").concat(1===c?"month":"months"," ago");var o=Math.floor(t/31536e6);return"".concat(o," ").concat(1===o?"year":"years"," ago")}(new Date(e.publishedAt)))),c.a.createElement(I.a,{variant:"body2",color:"textSecondary",component:"p",className:E.articleContent},e.content&&e.content.replace(/\[\+[0-9]+\schars\]/gi,""))),c.a.createElement(oe,{url:e.url,className:E.buttons,dispatcher:e.dispatcher})));return s?c.a.createElement(Q.a,{in:!i||a},d):d}function le(e){return c.a.createElement(c.a.Fragment,null,e.articles.map((function(t,a){return c.a.createElement(ie,Object.assign({},t,{key:a,id:a,dispatcher:e.dispatcher}))})))}var se=function(e){var t,a=ee(),o=Object(r.useRef)(null),i=Z(o,50),l=i.direction,s=i.dragDistance,u=i.resetSwipeStatus;return Object(r.useEffect)((function(){return l===J.RIGHT?e.dispatcher((function(e,t){var a=t().category,r=d.indexOf(a);e(f(0===r?n[d[d.length-1]]:n[d[r-1]]))})):l===J.LEFT&&e.dispatcher((function(e,t){var a=t().category,r=d.indexOf(a);e(f(r===d.length-1?n[d[0]]:n[d[r+1]]))})),function(){u()}}),[l]),t=e.articles.isError?c.a.createElement("div",{style:{width:"100%",minHeight:"100vh"}},"error"):e.articles.isFetching?c.a.createElement(c.a.Fragment,null,Array.from(Array(10),(function(e,t){return c.a.createElement(P.a,{item:!0,key:t},c.a.createElement(w.a,{width:500,height:300,maxWidth:"100%"},c.a.createElement(V.a,{variant:"rect",width:500,height:200}),c.a.createElement(V.a,{width:500}),c.a.createElement(V.a,{width:500})))}))):c.a.createElement(le,{articles:e.articles.articles,dispatcher:e.dispatcher}),c.a.createElement("div",{style:{width:"100%",transform:"translateX(".concat(s,"px)")}},c.a.createElement(w.a,{className:a.wrapper},c.a.createElement(P.a,{container:!0,direction:"row",alignContent:"center",justify:"center",spacing:2,ref:o},t)))},ue=a(161),he=a(162);var me=function(){return c.a.createElement(w.a,{mt:10,mb:2,mx:2},c.a.createElement(P.a,{container:!0,direction:"row",spacing:2},c.a.createElement(P.a,{item:!0},c.a.createElement(U.a,{href:"https://www.xiaoxihome.com/",target:"_blank",rel:"noopener",underline:"none"},c.a.createElement(ue.a,{avatar:c.a.createElement(he.a,null,"X"),label:"\ud83d\udd27 with \u2764\ufe0f by XiaoxiHome",color:"primary",clickable:!0}))),c.a.createElement(P.a,{item:!0},c.a.createElement(U.a,{href:"https://newsapi.org/",target:"_blank",rel:"noopener",underline:"none"},c.a.createElement(ue.a,{avatar:c.a.createElement(he.a,null,"N"),label:"News data courtesy of NewsAPI.org",color:"secondary",clickable:!0})))))},Ee=a(159),de=a(154),fe=a(155),be=a(79),pe=a.n(be),ge=a(51),ve=a(78),Oe=a.n(ve)()((function(){return Object(j.a)({successSnackBar:{backgroundColor:ge.a[600]}})}));var ye,Se=function(e){var t=Oe();function a(){e.dispatcher({type:b.CLOSE_SNACKBAR})}return c.a.createElement(Ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.isCopyLinkSnackbarActive,autoHideDuration:3e3,onClose:a},c.a.createElement(de.a,{className:t.successSnackBar,message:c.a.createElement("span",{id:"client-snackbar"},"Link copied to clipboard"),action:[c.a.createElement(fe.a,{key:"close","aria-label":"close",color:"inherit",onClick:a},c.a.createElement(pe.a,null))]}))},je=Object(u.d)(O,y,Object(u.a)(h.a)),we=Object(S.a)((function(e){return Object(j.a)({root:{width:"100vw",maxWidth:"100%",minHeight:"100vh",overflowX:"hidden",paddingBottom:"10px"}})}));var Te=Object(s.b)((function(e){return e}))((function(e){var t=we();return Object(r.useEffect)((function(){e.dispatch(g(n.HEADLINE))}),[]),console.log(e),c.a.createElement(w.a,{className:t.root},c.a.createElement(B,{headers:d,dispatcher:e.dispatch,category:e.category}),c.a.createElement(se,{articles:e.articles,dispatcher:e.dispatch}),c.a.createElement(me,null),c.a.createElement(Se,{dispatcher:e.dispatch,isCopyLinkSnackbarActive:e.isCopyLinkSnackbarActive}))})),Ce=Object(C.a)({palette:{primary:{main:"#333333",contrastText:"#fff"},secondary:{main:"#1EB980",contrastText:"#fff"}}});(Ce=Object(N.a)(Ce)).typography.h1=(ye={fontFamily:["Anton","sans-serif"].join(","),fontWeight:400,fontSize:"2rem"},Object(l.a)(ye,Ce.breakpoints.up("md"),{fontSize:"2.5rem"}),Object(l.a)(ye,"fontStyle","normal"),Object(l.a)(ye,"color","inherit"),ye);var Ne=function(){return c.a.createElement(s.a,{store:je},c.a.createElement(R.a,{theme:Ce},c.a.createElement(T.a,null),c.a.createElement(Te,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e,t,a){e.exports=a(119)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.5af166ee.chunk.js.map