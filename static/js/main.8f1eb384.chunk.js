(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{152:function(e,t,a){e.exports=a(184)},157:function(e,t,a){},184:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(11),o=a.n(i),s=(a(157),a(18)),l=a(42),u=a(114);!function(e){e.IS_ERROR="IS_ERROR",e.REQUEST_ARTICLES="REQUEST_ARTICLES",e.RECEIVE_ARTICLES="RECEIVE_ARTICLES"}(n||(n={}));var h,d=function(e){var t="\n        {\n            getNews(category: ".concat(e,") {\n                source,\n                author,\n                title,\n                description,\n                url,\n                urlToImage,\n                publishedAt,\n                content\n            }\n        }\n    ");return function(e){return e({type:n.REQUEST_ARTICLES}),fetch("https://www.xiaoxihome.com/api/news?query="+encodeURIComponent(t)).then((function(e){return e.json()})).then((function(t){t.errors?e({type:n.IS_ERROR}):e(function(e){return{type:n.RECEIVE_ARTICLES,articles:e.slice()}}(t.data.getNews))}))}};!function(e){e.HEADLINE="HEADLINE",e.BUSINESS="BUSINESS",e.ENTERTAINMENT="ENTERTAINMENT",e.HEALTH="HEALTH",e.SCIENCE="SCIENCE",e.SPORTS="SPORTS",e.TECHNOLOGY="TECHNOLOGY",e.SEARCH="SEARCH"}(h||(h={}));var m,f=["HEADLINE","BUSINESS","ENTERTAINMENT","HEALTH","SCIENCE","SPORTS","TECHNOLOGY"];!function(e){e.SET_CATEGORY="SET_CATEGORY"}(m||(m={}));var p=function(e){return function(t){t(function(e){return{type:m.SET_CATEGORY,category:e}}(e)),t(d(e))}};var E={category:h.HEADLINE,articles:{isError:!1,isFetching:!0,articles:[]},copyLinkSnackBar:{isActive:!1},searchKeyword:""};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.category,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_CATEGORY:return h[t.category];default:return e}};var g,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.articles,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.IS_ERROR:return Object.assign({},e,{isError:!0});case n.REQUEST_ARTICLES:return Object.assign({},e,{isError:!1,isFetching:!0});case n.RECEIVE_ARTICLES:return Object.assign({},{isError:!1,isFetching:!1,articles:t.articles.slice()});default:return e}};!function(e){e.CLOSE_SNACKBAR="CLOSE_SNACKBAR",e.OPEN_SNACKBAR="OPEN_SNACKBAR"}(g||(g={}));var b,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.copyLinkSnackBar;switch((arguments.length>1?arguments[1]:void 0).type){case g.CLOSE_SNACKBAR:return{isActive:!1};case g.OPEN_SNACKBAR:return{isActive:!0};default:return e}};!function(e){e.SET_KEYWORD="SET_KEYWORD"}(b||(b={}));var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.searchKeyword,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.SET_KEYWORD:return t.keyword;default:return e}},w=Object(l.c)({category:v,articles:y,copyLinkSnackBar:x,searchKeyword:O}),S=E;var A,k=a(247),j=a(219),L=a(6),R=a(124),C=a(252),N=Object(R.a)({palette:{primary:{main:"#333333",contrastText:"#fff"},secondary:{main:"#1EB980",contrastText:"#fff"}}});(N=Object(C.a)(N)).typography.h1=(A={fontFamily:["Anton","sans-serif"].join(","),fontWeight:400,fontSize:"2rem"},Object(L.a)(A,N.breakpoints.up("md"),{fontSize:"2.5rem"}),Object(L.a)(A,"fontStyle","normal"),Object(L.a)(A,"color","inherit"),A);var D=N,T=a(120),I=a(248),H=a(232),B=a(233),_=a(234),F=a(126),Y=a(253),X=a(250),M=a(235),W=a(16),q=a(12);var P,G=function(e){var t=Date.now();return function(){var a=Date.now();return a-t>e&&(t=a,!0)}};!function(e){e.FIXED="FIXED",e.RELATIVE="RELATIVE"}(P||(P={}));var U=function(e){return Object(W.a)({},{FIXED:{position:"fixed",top:0,left:0,width:"100%"},RELATIVE:{position:"relative",width:"100%"}}[e])};var K=function(e){var t=Object(r.useState)(P.RELATIVE),a=Object(q.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(!1),o=Object(q.a)(i,2),s=o[0],l=o[1],u=G(10);function h(){var t=window.scrollY;if(0===t&&n!==P.RELATIVE)return c(P.RELATIVE),void l(!1);u()&&(t>=e&&n!==P.FIXED?(c(P.FIXED),l(!0)):t<e&&n!==P.RELATIVE&&(c(P.RELATIVE),l(!1)))}return Object(r.useEffect)((function(){return document.addEventListener("scroll",h),function(){document.removeEventListener("scroll",h)}}),[n]),{style:U(n),isFixed:s}},V=function(e){var t=K(e.fixedStartHeight),a=t.style,n=t.isFixed,i=Object(r.useRef)(document.createElement("div"));return c.a.createElement(c.a.Fragment,null,n&&c.a.createElement("div",{style:{visibility:"hidden"}},e.children),c.a.createElement("div",{style:Object(W.a)({},a,{zIndex:e.zIndex?e.zIndex:"auto"}),ref:i},e.children))},z=a(223),Q=a(121),J=a.n(Q),$=a(119),Z=a.n($),ee=a(255),te=a(254),ae=a(230),ne=a(226),re=a(225),ce=a(231),ie=a(17),oe=a.n(ie),se=a(222),le=oe()((function(e){return{dialog:{minWidth:"50vw"}}})),ue=function(e){var t=e.search,a=(le(),Object(r.useState)(!1)),n=Object(q.a)(a,2),i=n[0],o=n[1],s=Object(r.useState)(""),l=Object(q.a)(s,2),u=l[0],h=l[1],d=Object(r.useState)(!1),m=Object(q.a)(d,2),f=m[0],p=m[1],E=function(){h(""),o(!1)};return c.a.createElement("div",null,c.a.createElement(Y.a,{title:"Search",TransitionComponent:se.a},c.a.createElement(z.a,{"aria-label":"search",color:"inherit",onClick:function(){o(!0)}},c.a.createElement(Z.a,null))),c.a.createElement(te.a,{open:i,onClose:E,fullWidth:!0,maxWidth:"sm"},c.a.createElement("form",{action:"/",onSubmit:function(e){e.preventDefault(),u.length?(t(u),E()):p(!0)}},c.a.createElement(re.a,null,"Search from archived news"),c.a.createElement(ne.a,null,c.a.createElement(ee.a,{error:f,autoFocus:!0,margin:"dense",label:"Keywords",type:"news keyword",fullWidth:!0,value:u,onChange:function(e){f&&p(!1),h(e.target.value)},helperText:f?"Keyword cannot be empty.":" "})),c.a.createElement(ae.a,null,c.a.createElement(ce.a,{onClick:E,color:"primary","aria-label":"cancel"},"Cancel"),c.a.createElement(ce.a,{type:"submit",color:"primary","aria-label":"submit search"},"Search")))))};var he=Object(s.b)(null,(function(e){return{search:function(t){e(function(e){return{type:b.SET_KEYWORD,keyword:e}}(t)),e({type:m.SET_CATEGORY,category:h.SEARCH})}}}))(ue),de=Object(T.a)((function(e){return{tab:{flexShrink:0,flexGrow:1,color:e.palette.primary.contrastText},heading:{textTransform:"uppercase",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},appBarNoBoxShadow:{boxShadow:"none"},appBarBottomBoxShadow:{boxShadow:"0px 4px 4px -1px rgba(0,0,0,0.2), 0px 5px 5px 0px rgba(0,0,0,0.14), 0px 10px 10px 0px rgba(0,0,0,0.12)"},trendIcon:{color:"#FFF"}}}));var me=function(e){var t=de(),a=Object(s.c)(),n=Object(r.useRef)(document.createElement("div")),i=function(e){a(function(e){return function(t,a){a().category!==e&&t(p(e))}}(e))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{color:"primary",position:"static",ref:n,className:t.appBarNoBoxShadow},c.a.createElement(B.a,null,c.a.createElement(_.a,{container:!0},c.a.createElement(_.a,{item:!0,xs:1,md:3}),c.a.createElement(_.a,{item:!0,xs:7,md:6},c.a.createElement(F.a,{align:"center",className:t.heading,variant:"h1",component:"h1"},"News Canada")),c.a.createElement(_.a,{item:!0,xs:4,md:3},c.a.createElement(_.a,{container:!0,alignItems:"center",justify:"flex-end"},c.a.createElement(_.a,{item:!0},c.a.createElement(he,null)),c.a.createElement(_.a,{item:!0},c.a.createElement(Y.a,{title:"Analytics",TransitionComponent:se.a},c.a.createElement(z.a,{"aria-label":"news trend",color:"inherit"},c.a.createElement(J.a,null))))))))),c.a.createElement(V,{fixedStartHeight:null!==n?n.current.offsetTop+n.current.offsetHeight:50,zIndex:1100},c.a.createElement(H.a,{color:"primary",position:"static",className:t.appBarBottomBoxShadow},c.a.createElement(X.a,{value:-1!==e.headers.indexOf(e.category)&&e.headers.indexOf(e.category),indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto"},e.headers.map((function(e,a){return c.a.createElement(M.a,{label:e,key:a,className:t.tab,onClick:function(){return i(h[e])}})}))))))},fe=a(236),pe=a(237),Ee=a(238),ve=a(239),ge=a(22),ye=a(240),be=a(241),xe=a(243),Oe=a(242);var we,Se,Ae=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};!function(e){e.NULL="NULL",e.LEFT="LEFT",e.RIGHT="RIGHT"}(we||(we={})),function(e){e.NULL="NULL",e.SWIPE="SWIPE",e.SCROLL="SCROLL"}(Se||(Se={}));var ke=10;var je=function(e,t){var a=Object(r.useState)(0),n=Object(q.a)(a,2),c=n[0],i=n[1],o=Object(r.useState)(0),s=Object(q.a)(o,2),l=s[0],u=s[1],h=Object(r.useState)(Se.NULL),d=Object(q.a)(h,2),m=d[0],f=d[1],p=Object(r.useState)(we.NULL),E=Object(q.a)(p,2),v=E[0],g=E[1],y=Object(r.useState)(0),b=Object(q.a)(y,2),x=b[0],O=b[1],w=G(ke);function S(e){i(e.changedTouches[0].clientX),u(e.changedTouches[0].clientY)}function A(e){if(w()){var t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY;"SWIPE"===m?(e.cancelable&&e.preventDefault(),O(e.changedTouches[0].clientX-c)):"NULL"===m&&Math.abs(t-c)>Math.abs(a-l)?f(Se.SWIPE):"NULL"===m&&Math.abs(t-c)<=Math.abs(a-l)&&f(Se.SCROLL)}}function k(e){var a=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;Math.abs(a-c)>Math.abs(n-l)&&Math.abs(a-c)>t&&m===Se.SWIPE&&g(a>c?we.RIGHT:we.LEFT),O(0),f(Se.NULL)}return Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchstart",S),function(){t.removeEventListener("touchstart",S)}}),[e]),Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchmove",A),function(){t.removeEventListener("touchmove",A)}}),[l,m,e]),Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchend",k),function(){t.removeEventListener("touchend",k)}}),[l,m,e]),{direction:v,dragDistance:x,resetSwipeStatus:function(){g(we.NULL)}}};var Le=Object(s.b)(null,(function(e){return{goPrevious:function(){return e((function(e,t){var a=t().category,n=f.indexOf(a);e(p(0===n?h[f[f.length-1]]:h[f[n-1]]))}))},goNext:function(){return e((function(e,t){var a=t().category,n=f.indexOf(a),r=n===f.length-1;e(p(r?h[f[0]]:h[f[n+1]]))}))}}}))((function(e){var t=Object(r.useRef)(null),a=je(t,50),n=a.direction,i=a.dragDistance,o=a.resetSwipeStatus;return Object(r.useEffect)((function(){return n===we.RIGHT?e.goPrevious():n===we.LEFT&&e.goNext(),function(){o()}}),[n]),c.a.createElement("div",{style:{width:"100%",transform:"translateX(".concat(i,"px)")},ref:t},e.children)})),Re=Object(T.a)((function(e){return Object(fe.a)(Object(L.a)({wrapper:{width:"calc(100% - 40px)",margin:"20px"}},e.breakpoints.down("sm"),{wrapper:{width:"calc(100% - 16px)",margin:"8px"}}))}));function Ce(e,t,a){return"calc(".concat(e," * ").concat(a.typography[t].fontSize," * ").concat(a.typography[t].lineHeight,")")}function Ne(e,t){return Object(fe.a)({root:{position:"relative","&:after":{content:"''",position:"absolute",bottom:0,right:0,width:"20%",height:Ce(1,e,t),backgroundImage:"linear-gradient(to right, rgba(255, 255, 255, 0) , rgba(255, 255, 255, 1))",zIndex:10}}})}var De={width:"100%",overflow:"hidden",position:"relative"},Te=Object(T.a)((function(e){return Object(fe.a)(Object(L.a)({media:Object(W.a)({height:"550px"},De),skeleton:Object(W.a)({height:"550px"},De),title:Object(W.a)({height:Ce(1,"body1",e)},Ne("body1",e).root,{},De),source:Object(W.a)({height:Ce(1,"body2",e)},De),articleContent:Object(W.a)({height:Ce(2,"body2",e)},Ne("body2",e).root,{},De),buttons:Object(W.a)({},De)},e.breakpoints.down("sm"),{media:{height:"200px"},skeleton:{height:"200px"}}))})),Ie=Object(T.a)((function(e){return Object(fe.a)(Object(L.a)({media:Object(W.a)({height:"200px"},De),skeleton:Object(W.a)({height:"200px"},De),title:Object(W.a)({height:Ce(2,"body1",e)},Ne("body1",e).root,{},De),source:Object(W.a)({height:Ce(1,"body2",e)},De),articleContent:Object(W.a)({height:Ce(3,"body2",e)},Ne("body2",e).root,{},De),buttons:Object(W.a)({},De)},e.breakpoints.down("sm"),{}))}));function He(e){return c.a.createElement(pe.a,{className:e.className},c.a.createElement(Ee.a,{href:e.url,target:"_blank",rel:"noopener",underline:"none"},c.a.createElement(ce.a,{size:"small",color:"primary"},"Learn more")),c.a.createElement(ce.a,{size:"small",color:"primary",onClick:function(){Ae(e.url),e.openCopyLinkSnackBar()}},"Share"))}function Be(e){var t=Object(r.useRef)(null),a=function(e){var t=Object(r.useState)(!1),a=Object(q.a)(t,2),n=a[0],c=a[1],i=Date.now()-1e3;function o(){var t=Date.now();if(!(t-i<20)&&(i=t,e.current)){var a=e.current.getBoundingClientRect(),n=a.top+a.height<0,r=a.top>window.innerHeight;n||r||c(!0)}}return Object(r.useEffect)((function(){if(!n)return o(),document.addEventListener("scroll",o),function(){document.removeEventListener("scroll",o)}})),n}(t),n=Object(r.useState)(!1),i=Object(q.a)(n,2),o=i[0],s=i[1],l=!Object(ve.a)(Object(ge.a)().breakpoints.down("sm")),u=0===e.id||1===e.id,h=Te(),d=Ie(),m=u?h:d;Object(r.useEffect)((function(){l&&setTimeout((function(){return s(!0)}),225)}),[]);var f=c.a.createElement(_.a,{item:!0,xs:12,md:u?6:3,ref:t},c.a.createElement(ye.a,{raised:!0},a&&e.urlToImage?c.a.createElement(be.a,{component:"img",alt:e.title,className:m.media,image:e.urlToImage,title:e.title}):c.a.createElement(Oe.a,{variant:"rect",className:m.skeleton}),c.a.createElement(xe.a,null,c.a.createElement(F.a,{gutterBottom:!0,variant:"body1",component:"h2",className:m.title},c.a.createElement(I.a,{fontWeight:700},e.title)),c.a.createElement(F.a,{variant:"body2",color:"textSecondary",component:"p",className:m.source},c.a.createElement(I.a,{component:"span",fontWeight:700},e.source?e.source+" - ":e.author?e.author+" - ":"",function(e){var t=Date.now()-e.getTime();if(t<0)return"now";var a=Math.floor(t/6e4);if(a<=59)return"".concat(a," ").concat(1===a?"minute":"minutes"," ago");var n=Math.floor(t/36e5);if(n<=23)return"".concat(n," ").concat(1===n?"hour":"hours"," ago");var r=Math.floor(t/864e5);if(r<=30)return"".concat(r," ").concat(1===r?"day":"days"," ago");var c=Math.floor(t/2592e6);if(c<=12)return"".concat(c," ").concat(1===c?"month":"months"," ago");var i=Math.floor(t/31536e6);return"".concat(i," ").concat(1===i?"year":"years"," ago")}(new Date(e.publishedAt)))),c.a.createElement(F.a,{variant:"body2",color:"textSecondary",component:"p",className:m.articleContent},e.content&&e.content.replace(/\[\+[0-9]+\schars\]/gi,""))),c.a.createElement(He,{url:e.url,className:m.buttons,openCopyLinkSnackBar:e.openCopyLinkSnackBar})));return l?c.a.createElement(se.a,{in:!o||a},f):f}function _e(e){return c.a.createElement(c.a.Fragment,null,e.articles.map((function(t,a){return c.a.createElement(Be,Object.assign({},t,{key:a,id:a,openCopyLinkSnackBar:e.openCopyLinkSnackBar}))})))}var Fe=Object(s.b)(null,(function(e){return{openCopyLinkSnackBar:function(){return e({type:g.OPEN_SNACKBAR})}}}))((function(e){var t,a=Re();return Object(r.useEffect)((function(){window.scrollTo(0,0)})),t=e.articles.isError?c.a.createElement("div",{style:{width:"100%",minHeight:"100vh"}},"error"):e.articles.isFetching?c.a.createElement(c.a.Fragment,null,Array.from(Array(10),(function(e,t){return c.a.createElement(_.a,{item:!0,key:t},c.a.createElement(I.a,{width:500,height:300,maxWidth:"100%"},c.a.createElement(Oe.a,{variant:"rect",width:500,height:200}),c.a.createElement(Oe.a,{width:500}),c.a.createElement(Oe.a,{width:500})))}))):c.a.createElement(_e,{articles:e.articles.articles,openCopyLinkSnackBar:e.openCopyLinkSnackBar}),c.a.createElement(Le,null,c.a.createElement(I.a,{className:a.wrapper},c.a.createElement(_.a,{container:!0,direction:"row",alignContent:"center",justify:"center",spacing:2},t)))})),Ye=a(258),Xe=a(259);var Me=function(){return c.a.createElement(I.a,{mt:10,mb:2,mx:2},c.a.createElement(_.a,{container:!0,direction:"row",spacing:2},c.a.createElement(_.a,{item:!0},c.a.createElement(Ee.a,{href:"https://www.xiaoxihome.com/",target:"_blank",rel:"noopener",underline:"none"},c.a.createElement(Ye.a,{avatar:c.a.createElement(Xe.a,null,"X"),label:"\ud83d\udd27 with \u2764\ufe0f by XiaoxiHome",color:"primary",clickable:!0}))),c.a.createElement(_.a,{item:!0},c.a.createElement(Ee.a,{href:"https://newsapi.org/",target:"_blank",rel:"noopener",underline:"none"},c.a.createElement(Ye.a,{avatar:c.a.createElement(Xe.a,null,"N"),label:"News data courtesy of NewsAPI.org",color:"secondary",clickable:!0})))))},We=a(260),qe=a(244),Pe=a(122),Ge=a.n(Pe),Ue=a(83),Ke=oe()((function(){return Object(fe.a)({successSnackBar:{backgroundColor:Ue.a[600]}})}));var Ve=function(e){var t=Ke();function a(){e.closeCopyLinkSnackBar()}return c.a.createElement(We.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.isActive,autoHideDuration:3e3,onClose:a},c.a.createElement(qe.a,{className:t.successSnackBar,message:c.a.createElement("span",{id:"client-snackbar"},"Link copied to clipboard"),action:[c.a.createElement(z.a,{key:"close","aria-label":"close",color:"inherit",onClick:a},c.a.createElement(Ge.a,null))]}))};var ze,Qe=Object(s.b)((function(e){return{isActive:e.copyLinkSnackBar.isActive}}),(function(e){return{closeCopyLinkSnackBar:function(){return e({type:g.CLOSE_SNACKBAR})}}}))(Ve),Je=a(20),$e=a(48),Ze=a.n($e);!function(e){e.relevance="relevance",e.date="date"}(ze||(ze={}));var et,tt=ze,at=function(e,t,a,n,r){return new Promise((function(c,i){var o=r?"&date=".concat(r):"";n=n||tt.relevance;var s="".concat("https://www.xiaoxihome.com/api/search-news","?keyword=").concat(e,"&frequency=").concat(a,"&skip=").concat(t,"&sort=").concat(n).concat(o);fetch(s).then((function(e){return e.json()})).then((function(e){"ok"===e.status?c(e):(console.log(e),i(e))})).catch((function(e){console.log(e),i(e)}))}))};!function(e){e.LOADING="LOADING",e.LOADED_NORMAL="LOADED_NORMAL",e.LOADED_EMPTY="LOADED_EMPTY",e.LOADED_NO_MORE="LOADED_NO_MORE",e.ERROR="ERROR"}(et||(et={}));var nt=et,rt=function(e){var t=Object(r.useState)(nt.LOADING),a=Object(q.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)([]),o=Object(q.a)(i,2),s=o[0],l=o[1],u=Object(r.useState)(tt.relevance),h=Object(q.a)(u,2),d=h[0],m=h[1],f=Object(r.useState)(0),p=Object(q.a)(f,2),E=p[0],v=p[1],g=Object(r.useState)(null),y=Object(q.a)(g,2),b=y[0],x=y[1],O=Object(r.useState)(0),w=Object(q.a)(O,2),S=w[0],A=(w[1],function(e){e.data.length===e.totalCount?c(nt.LOADED_NO_MORE):0===e.totalCount?c(nt.LOADED_EMPTY):c(nt.LOADED_NORMAL)});return Object(r.useEffect)((function(){!function(){var t;Ze.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l([]),x(null),v(0),m(tt.relevance),c(nt.LOADING),a.next=8,Ze.a.awrap(at(e,0,!0));case 8:t=a.sent,l(t.data),x(t.frequency),v(t.totalCount),A(t),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(0),c(nt.ERROR);case 18:case"end":return a.stop()}}),null,null,[[0,15]])}()}),[e]),{status:n,data:s,frequencyData:b,sortType:d,totalCount:E,toggleSort:function(t){var a;return Ze.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,console.log(t,d),n!==nt.LOADING){r.next=4;break}return r.abrupt("return");case 4:if(t!==d){r.next=6;break}return r.abrupt("return");case 6:return l([]),m(t),c(nt.LOADING),r.next=11,Ze.a.awrap(at(e,0,!1,t));case 11:a=r.sent,l(a.data),A(a),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(0),c(nt.ERROR);case 19:case"end":return r.stop()}}),null,null,[[0,16]])},loadMore:function(){var t;return Ze.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n!==nt.LOADING){a.next=3;break}return a.abrupt("return");case 3:return c(nt.LOADING),a.next=6,Ze.a.awrap(at(e,s.length,!1,d,S));case 6:t=a.sent,l((function(e){return[].concat(Object(Je.a)(e),Object(Je.a)(t.data))})),A(t),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),c(nt.ERROR);case 14:case"end":return a.stop()}}),null,null,[[0,11]])}}},ct=oe()((function(e){return{root:{margin:e.spacing(2,0)}}})),it=function(e){var t=e.count,a=e.keyword,n=e.currentLength,r=1===t?"article":"articles",i=ct();return c.a.createElement(F.a,{variant:"body1",component:"div",className:i.root},c.a.createElement(I.a,{fontWeight:700},"".concat(t," news ").concat(r,' found related to "').concat(a,'", displaying 1 - ').concat(n)))},ot=function(){return c.a.createElement(Oe.a,{variant:"rect",width:"100%",height:200,animation:"wave"})},st=oe()((function(e){return{root:{margin:e.spacing(5,0),width:300}}})),lt=function(e){var t=e.onClick,a=st();return c.a.createElement(ce.a,{variant:"contained",disableElevation:!0,color:"secondary",onClick:t,className:a.root},"Load more")},ut=a(257),ht=a(229),dt=a(249),mt=a(261),ft=function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},pt=oe()((function(e){return{root:{margin:e.spacing(2,0),minWidth:200}}})),Et=function(e){var t=e.toggleSort,a=e.sortType,n=pt();return c.a.createElement(ht.a,{className:n.root,color:"secondary"},c.a.createElement(ut.a,{htmlFor:"searched-article-sort"},"Sort By"),c.a.createElement(dt.a,{value:a,onChange:function(e){var n=e.target.value;n!==a&&t(n)},inputProps:{name:"sort",id:"searched-article-sort"}},c.a.createElement(mt.a,{value:tt.relevance},ft(tt.relevance)),c.a.createElement(mt.a,{value:tt.date},ft(tt.date))))},vt=a(245),gt=oe()((function(e){return{root:{margin:e.spacing(2,0)}}})),yt=function(e){var t=e.message,a=e.divider,n=gt();return c.a.createElement(c.a.Fragment,null,c.a.createElement(F.a,{variant:"body1",component:"div",className:n.root},c.a.createElement(I.a,{fontWeight:700},t)),a&&c.a.createElement(vt.a,{style:{width:"100%"}}))},bt=a(246),xt=oe()((function(e){return Object(fe.a)({highlight:{backgroundColor:e.palette.secondary.light}})})),Ot=function(e){var t=e.content,a=e.keyword,n=new RegExp("("+a+")","gi"),r=t.split(n),i=xt();return c.a.createElement(c.a.Fragment,null,r.map((function(e,t){return t%2===1?c.a.createElement("span",{className:i.highlight,key:t},e):c.a.createElement("span",{key:t},e)})))},wt=Object(T.a)((function(e){return{cardRoot:{width:"100%",margin:e.spacing(2,0)},cardActionArea:{width:"100%",height:"100%","& a":{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center","&:visited, &:link":{textDecoration:"inherit",color:"inherit",cursor:"pointer"}}},cardMedia:{width:"20%",height:"100%"},cardContent:{width:"80%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),St=function(e){var t=e.article,a=e.keyword,n=wt(),i=function(){var e=Object(r.useState)(0),t=Object(q.a)(e,2),a=t[0],n=t[1],c=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(c.current){var e=c.current.getBoundingClientRect().height;n(e)}}),[c]),{cardHeight:a,heightRef:c}}(),o=i.cardHeight,s=i.heightRef;return c.a.createElement(ye.a,{className:n.cardRoot,style:{height:o?"".concat(o,"px"):"auto"}},c.a.createElement(bt.a,{className:n.cardActionArea},c.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.urlToImage?c.a.createElement(be.a,{component:"img",alt:t.title,className:n.cardMedia,image:t.urlToImage,title:t.title}):c.a.createElement(Oe.a,{variant:"rect",className:n.cardMedia}),c.a.createElement(xe.a,{className:n.cardContent,ref:s},c.a.createElement(F.a,{variant:"body1",component:"h2"},c.a.createElement(I.a,{fontWeight:700},c.a.createElement(Ot,{content:t.title,keyword:a}))),c.a.createElement(F.a,{variant:"body2",component:"div",color:"textSecondary"},c.a.createElement(I.a,{fontWeight:700},new Date(t.publishedAt).toDateString())),c.a.createElement(F.a,{variant:"body2",color:"textSecondary",component:"p"},c.a.createElement(Ot,{content:t.content.replace(/\[\+[0-9]+\schars\]/gi,""),keyword:a}))))))},At=a(123),kt=a.n(At),jt=a(224),Lt=oe()((function(e){return{root:Object(L.a)({position:"fixed",bottom:"50px",right:"50px",backgroundColor:e.palette.secondary.main,color:"#FFF",transition:e.transitions.create("background-color opacity"),transform:"rotate(-90deg)","&:hover":{backgroundColor:e.palette.secondary.light}},e.breakpoints.down("md"),{bottom:"15px",right:"15px"})}})),Rt=function(){var e=Lt(),t=function(){var e=Object(r.useState)(!1),t=Object(q.a)(e,2),a=t[0],n=t[1],c=function(){window.scrollY>window.innerHeight&&!a?n(!0):window.scrollY<window.innerHeight&&a&&n(!1)};return Object(r.useEffect)((function(){return document.addEventListener("scroll",c),function(){document.removeEventListener("scroll",c)}}),[a]),a}();return c.a.createElement(jt.a,{in:t},c.a.createElement(Y.a,{title:"Scroll to Top",className:e.root},c.a.createElement(z.a,{"aria-label":"Scroll to Top",onClick:function(){window.scrollTo(0,0)}},c.a.createElement(kt.a,null))))},Ct=a(52),Nt=a(33),Dt=a(25),Tt=function(){function e(t,a,n,r,c){Object(Ct.a)(this,e),this.dataArray=void 0,this.auxArray=void 0,this.params=void 0,this.dimension=void 0,this.scales=void 0,this.svg=void 0,this.references=void 0,this.axis=void 0,this.dataArray={bin:a,frequency:n},this.auxArray={binDate:this.getBinDateArray(a),barTransitionDelay:this.getBarTransitionDelayArray(500,n)},this.params={lightColor:t.palette.secondary.light,darkColor:t.palette.secondary.dark,primaryColor:t.palette.primary.light,backgroundColor:"#EEE",TRANSITION_DELAY:500,BAR_TRANSITION_DURATION:2e3,maxFrequency:Math.max.apply(Math,this.dataArray.frequency),binLength:this.dataArray.bin.length,argWidth:r,selector:c},this.dimension=this.getDimensions(r),this.svg=Dt.g("#".concat(this.params.selector)).append("svg"),this.references={svg:this.svg,bars:this.svg.append("g").selectAll("rect").data(this.dataArray.frequency).enter().append("rect"),axisX:this.svg.append("g"),axisY:this.svg.append("g"),axisXHoverDate:this.svg.append("g"),axisXHoverFrequency:this.svg.append("g"),axisYHover:this.svg.append("g"),hoverDetection:this.svg.append("g").selectAll("rect").data(this.dataArray.frequency).enter().append("rect")},this.scales={x:Dt.e().domain(this.dataArray.frequency.map((function(e,t){return t.toString()}))).range([0,this.dimension.chartWidth]),y:Dt.f().domain([0,this.params.maxFrequency]).range([this.dimension.chartHeight,0])},this.axis={x:Dt.a(this.scales.x),y:Dt.b(this.scales.y),xHoverDate:Dt.a(this.scales.x),xHoverFrequency:Dt.a(this.scales.x),yHover:Dt.b(this.scales.y)},this.setHoverDetectionEventHandlers=this.setHoverDetectionEventHandlers.bind(this)}return Object(Nt.a)(e,[{key:"getBinDateArray",value:function(e){return e.map((function(e){var t=new Date(e);return"".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate())}))}},{key:"getBarTransitionDelayArray",value:function(e,t){for(var a=[],n=e,r=0;r<t.length;r++)0===t[r]?a.push(n):a.push(n+=20);return a}},{key:"getDimensions",value:function(e){var t=e,a=Math.min(Math.round(t/3),200),n={t:10,r:30,b:30,l:30};return{svgWidth:t,svgHeight:a,m:n,chartWidth:t-n.l-n.r,chartHeight:a-n.t-n.b,chartX:n.l,chartY:n.t}}},{key:"setSvg",value:function(){this.references.svg.attr("width",this.dimension.svgWidth).attr("height",this.dimension.svgHeight).style("background",this.params.backgroundColor)}},{key:"setBars",value:function(){var e=this,t=this.scales.x.bandwidth(),a=function(t){return e.dimension.chartHeight-e.scales.y(t)};this.references.bars.style("fill",this.params.lightColor).style("opacity",.8).attr("width",t).attr("height",0).attr("x",(function(t,a){return e.dimension.chartX+(e.scales.x(a.toString())||0)})).attr("y",this.dimension.chartY+this.dimension.chartHeight),this.references.bars.transition().attr("height",a).attr("y",(function(t){return e.dimension.chartY+e.dimension.chartHeight-a(t)})).delay((function(t,a){return e.auxArray.barTransitionDelay[a]})).duration(this.params.BAR_TRANSITION_DURATION).ease(Dt.c)}},{key:"setAxisX",value:function(){var e=this;this.axis.x.tickSizeOuter(0).tickFormat((function(t,a){return e.auxArray.binDate[parseInt(t)]})).tickValues([0,Math.floor(.25*this.params.binLength),Math.floor(.5*this.params.binLength),Math.floor(.75*this.params.binLength),this.params.binLength-1].map((function(e){return"".concat(e)}))),this.references.axisX.style("transform","translate(".concat(-.5*this.dimension.svgWidth,"px, ").concat(this.dimension.svgHeight+this.dimension.chartY,"px)")).style("opacity",0).style("color",this.params.darkColor),this.references.axisX.transition().style("opacity",1).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight+this.dimension.chartY,"px)")).delay(this.params.TRANSITION_DELAY).duration(1e3).ease(Dt.c),this.axis.x(this.references.axisX)}},{key:"setAxisY",value:function(){this.axis.y.tickSizeOuter(0).tickFormat(Dt.d("d")).tickValues([0,Math.floor(.5*this.params.maxFrequency),this.params.maxFrequency]),this.references.axisY.style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight,"px)")).style("opacity",0).style("color",this.params.darkColor),this.references.axisY.transition().style("opacity",1).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartY,"px)")).delay(this.params.TRANSITION_DELAY).duration(1e3).ease(Dt.c),this.axis.y(this.references.axisY)}},{key:"setAxisXHoverDate",value:function(){var e=this;this.references.axisXHoverDate.style("opacity",0).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight+this.dimension.chartY,"px)")),this.axis.xHoverDate.tickFormat((function(t){return e.auxArray.binDate[parseInt(t)]}))}},{key:"setAxisXHoverFrequency",value:function(){var e=this;this.references.axisXHoverFrequency.style("opacity",0),this.axis.xHoverFrequency.tickFormat((function(t){return"".concat(e.dataArray.frequency[parseInt(t)])})).tickSize(0).tickPadding(-9)}},{key:"setAxisYHover",value:function(){this.references.axisYHover.style("opacity",0).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartY,"px)")),this.axis.yHover.tickFormat(Dt.d("d")).tickSizeInner(-this.dimension.chartWidth-6).tickSizeOuter(0).tickPadding(9)}},{key:"setHoverDetection",value:function(){var e=this,t=this.scales.x.bandwidth();this.references.hoverDetection.style("opacity",0).attr("width",t).attr("height",this.dimension.svgHeight).attr("x",(function(t,a){return e.dimension.chartX+(e.scales.x(a.toString())||0)})).attr("y",0),this.setHoverDetectionEventHandlers()}},{key:"setHoverDetectionEventHandlers",value:function(){var e=this;this.references.hoverDetection.on("mouseover",(function(t,a){var n,r;e.axis.yHover.tickValues([t]),e.axis.yHover(e.references.axisYHover),e.references.axisYHover.selectAll(".tick line").style("transform","translate(-6px, 0)").style("color",e.params.primaryColor),e.references.axisYHover.selectAll(".domain").remove(),e.references.axisYHover.style("opacity",1);var c=null===(n=e.references.axisYHover.select("text").node())||void 0===n?void 0:n.getBBox();c&&e.references.axisYHover.selectAll("g.tick").insert("rect",":first-child").attr("width",c.width).attr("height",c.height).attr("x",c.x).attr("y",c.y).style("fill",e.params.backgroundColor),e.axis.xHoverDate.tickValues(["".concat(a)]),e.axis.xHoverDate(e.references.axisXHoverDate),e.references.axisXHoverDate.selectAll(".domain").remove(),e.references.axisXHoverDate.style("opacity",1);var i=null===(r=e.references.axisXHoverDate.select("text").node())||void 0===r?void 0:r.getBBox();i&&e.references.axisXHoverDate.selectAll("g.tick").insert("rect",":first-child").attr("width",1.2*i.width).attr("height",i.height).attr("x",i.x-.1*i.width).attr("y",i.y).style("fill",e.params.backgroundColor),e.axis.xHoverFrequency.tickValues(["".concat(a)]),e.axis.xHoverFrequency(e.references.axisXHoverFrequency),e.references.axisXHoverFrequency.selectAll(".domain").remove(),e.references.axisXHoverFrequency.style("transform","translate(".concat(e.dimension.chartX,"px, ").concat(e.scales.y(t)+e.dimension.chartY,"px)")).style("opacity",1),e.references.bars.filter((function(e,t){return t===a})).style("fill",e.params.primaryColor)})).on("mouseout",(function(t,a){e.references.axisYHover.style("opacity",0),e.references.axisXHoverFrequency.style("opacity",0),e.references.axisXHoverDate.style("opacity",0),e.references.bars.filter((function(e,t){return t===a})).style("fill",e.params.lightColor)}))}},{key:"draw",value:function(){this.setSvg(),this.setBars(),this.setAxisX(),this.setAxisY(),this.setAxisXHoverDate(),this.setAxisXHoverFrequency(),this.setAxisYHover(),this.setHoverDetection()}},{key:"main",value:function(){this.draw()}}]),e}(),It="keyword-frequency-chart",Ht=Object(T.a)((function(e){return{root:{width:"100%"}}})),Bt=function(e){var t=e.bin,a=e.frequency,n=Object(r.useRef)(null),i=Ht(),o=Object(ge.a)();return Object(r.useEffect)((function(){n.current&&new Tt(o,t.map((function(e){return e.ms})),a.slice(),n.current.getBoundingClientRect().width,It).main()}),[n,t,a]),c.a.createElement("div",{ref:n,className:i.root,id:It})},_t=Object(T.a)((function(e){return{root:{width:"100%",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},widthWrapper:Object(L.a)({width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:e.spacing(2)},e.breakpoints.down("md"),{width:"100%"}),cardRoot:{width:"100%",margin:e.spacing(2,0)},cardActionArea:{width:"100%",height:"100%","& a":{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center","&:visited, &:link":{textDecoration:"inherit",color:"inherit",cursor:"pointer"}}},cardMedia:{width:"20%",height:"100%"},cardContent:{width:"80%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),Ft=function(e){var t=e.keyword,a=rt(t),n=a.data,r=a.frequencyData,i=a.status,o=a.sortType,s=a.totalCount,l=a.loadMore,u=a.toggleSort,h=_t(),d=n.length>0;return c.a.createElement("div",{className:h.root},c.a.createElement("div",{className:h.widthWrapper},d&&c.a.createElement(it,{count:s,keyword:t,currentLength:n.length}),d&&r&&c.a.createElement(Bt,{bin:r.bin,frequency:r.frequency}),d&&c.a.createElement(Et,{sortType:o,toggleSort:u}),i===nt.LOADED_EMPTY&&c.a.createElement(yt,{message:'No news article related to "'.concat(t,'" was found')}),i===nt.ERROR&&c.a.createElement(yt,{message:"Server error please try later"}),d&&n.map((function(e){return c.a.createElement(St,{article:e,keyword:t,key:e._id})})),i===nt.LOADING&&c.a.createElement(ot,null),i===nt.LOADED_NORMAL&&c.a.createElement(lt,{onClick:l}),i===nt.LOADED_NO_MORE&&c.a.createElement(yt,{message:"End of results",divider:!0})),c.a.createElement(Rt,null))};var Yt=Object(s.b)((function(e){return{keyword:e.searchKeyword}}))(Ft),Xt=Object(T.a)((function(){return{root:{width:"100vw",maxWidth:"100%",minHeight:"100vh",overflowX:"hidden",paddingBottom:"10px"}}}));var Mt=Object(s.b)((function(e){var t=e.category===h.SEARCH;return{category:e.category,articles:e.articles,isSearching:t}}),(function(e){return{fetchArticlesAfterMount:function(){return e(d(h.HEADLINE))}}}))((function(e){var t=Xt();return Object(r.useEffect)((function(){e.fetchArticlesAfterMount()}),[]),c.a.createElement(I.a,{className:t.root},c.a.createElement(me,{headers:f,category:e.category}),e.isSearching?c.a.createElement(Yt,null):c.a.createElement(Fe,{articles:e.articles}),c.a.createElement(Me,null),c.a.createElement(Qe,null))})),Wt=Object(l.d)(w,S,Object(l.a)(u.a));var qt=function(){return c.a.createElement(s.a,{store:Wt},c.a.createElement(j.a,{theme:D},c.a.createElement(k.a,null),c.a.createElement(Mt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(qt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[152,1,2]]]);
//# sourceMappingURL=main.8f1eb384.chunk.js.map