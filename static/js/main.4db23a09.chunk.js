(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{227:function(e,t,a){e.exports=a(260)},232:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var n,r=a(0),i=a.n(r),o=a(15),s=a.n(o),c=(a(232),a(31)),l=a(46),u=a(145);!function(e){e.IS_ERROR="IS_ERROR",e.REQUEST_ARTICLES="REQUEST_ARTICLES",e.RECEIVE_ARTICLES="RECEIVE_ARTICLES"}(n||(n={}));var h,d=function(e){var t="\n        {\n            getNews(category: ".concat(e,") {\n                source,\n                author,\n                title,\n                description,\n                url,\n                urlToImage,\n                publishedAt,\n                content\n            }\n        }\n    ");return function(e){return e({type:n.REQUEST_ARTICLES}),fetch("https://www.xiaoxihome.com/api/news?query="+encodeURIComponent(t)).then((function(e){return e.json()})).then((function(t){t.errors?e({type:n.IS_ERROR}):e(function(e){return{type:n.RECEIVE_ARTICLES,articles:e.slice()}}(t.data.getNews))}))}};!function(e){e.HEADLINE="HEADLINE",e.BUSINESS="BUSINESS",e.ENTERTAINMENT="ENTERTAINMENT",e.HEALTH="HEALTH",e.SCIENCE="SCIENCE",e.SPORTS="SPORTS",e.TECHNOLOGY="TECHNOLOGY",e.SEARCH="SEARCH",e.ANALYTICS="ANALYTICS",e.TOPIC="TOPIC"}(h||(h={}));var f,m=[h.HEADLINE,h.BUSINESS,h.ENTERTAINMENT,h.HEALTH,h.SCIENCE,h.SPORTS,h.TECHNOLOGY];!function(e){e.SET_CATEGORY="SET_CATEGORY"}(f||(f={}));var p=function(e){return function(t){t(function(e){return{type:f.SET_CATEGORY,category:e}}(e)),t(d(e))}};var g={category:h.HEADLINE,articles:{isError:!1,isFetching:!0,articles:[]},copyLinkSnackBar:{isActive:!1},searchKeyword:""};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.category,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.SET_CATEGORY:return h[t.category];default:return e}};var y,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.articles,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.IS_ERROR:return Object.assign({},e,{isError:!0});case n.REQUEST_ARTICLES:return Object.assign({},e,{isError:!1,isFetching:!0});case n.RECEIVE_ARTICLES:return Object.assign({},{isError:!1,isFetching:!1,articles:t.articles.slice()});default:return e}};!function(e){e.CLOSE_SNACKBAR="CLOSE_SNACKBAR",e.OPEN_SNACKBAR="OPEN_SNACKBAR"}(y||(y={}));var E,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.copyLinkSnackBar;switch((arguments.length>1?arguments[1]:void 0).type){case y.CLOSE_SNACKBAR:return{isActive:!1};case y.OPEN_SNACKBAR:return{isActive:!0};default:return e}};!function(e){e.SET_KEYWORD="SET_KEYWORD"}(E||(E={}));var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.searchKeyword,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.SET_KEYWORD:return t.keyword;default:return e}},O=Object(l.c)({category:v,articles:x,copyLinkSnackBar:b,searchKeyword:w}),k=g;var S,C=a(328),A=a(309),D=a(6),T=a(157),j=a(333),H=Object(T.a)({palette:{primary:{main:"#333333",contrastText:"#fff"},secondary:{main:"#1EB980",contrastText:"#fff"}}});(H=Object(j.a)(H)).typography.h1=(S={fontFamily:["Anton","sans-serif"].join(","),fontWeight:400,fontSize:"2rem"},Object(D.a)(S,H.breakpoints.up("md"),{fontSize:"2.5rem"}),Object(D.a)(S,"fontStyle","normal"),Object(D.a)(S,"color","inherit"),S);var L=H,R=a(8),N=a(146),I=a(329),B=a(14),M=a(297),Y=a(298),F=a(299),X=a(300),W=a(301),z=a(22),P=a(302),_=a(304),U=a(305),q=a(306),G=a(159),V=a(308),K=a(303);function J(e,t){var a=Object(r.useState)(!1),n=Object(R.a)(a,2),i=n[0],o=n[1],s=Date.now()-1e3;function c(){var a=Date.now();if(!(a-s<20)&&(s=a,e.current)){var n=e.current.getBoundingClientRect(),r=n.top+n.height<0,i=t?n.top>window.innerHeight*t:n.top>window.innerHeight;r||i||o(!0)}}return Object(r.useEffect)((function(){if(!i)return c(),document.addEventListener("scroll",c),function(){document.removeEventListener("scroll",c)}}),[i,e]),i}var Q=function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)};var Z,$,ee=function(e){var t=Date.now();return function(){var a=Date.now();return a-t>e&&(t=a,!0)}};!function(e){e.NULL="NULL",e.LEFT="LEFT",e.RIGHT="RIGHT"}(Z||(Z={})),function(e){e.NULL="NULL",e.SWIPE="SWIPE",e.SCROLL="SCROLL"}($||($={}));var te=10;var ae=function(e,t){var a=Object(r.useState)(0),n=Object(R.a)(a,2),i=n[0],o=n[1],s=Object(r.useState)(0),c=Object(R.a)(s,2),l=c[0],u=c[1],h=Object(r.useState)($.NULL),d=Object(R.a)(h,2),f=d[0],m=d[1],p=Object(r.useState)(Z.NULL),g=Object(R.a)(p,2),v=g[0],y=g[1],x=Object(r.useState)(0),E=Object(R.a)(x,2),b=E[0],w=E[1],O=ee(te);function k(e){o(e.changedTouches[0].clientX),u(e.changedTouches[0].clientY)}function S(e){if(O()){var t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY;"SWIPE"===f?(e.cancelable&&e.preventDefault(),w(e.changedTouches[0].clientX-i)):"NULL"===f&&Math.abs(t-i)>Math.abs(a-l)?m($.SWIPE):"NULL"===f&&Math.abs(t-i)<=Math.abs(a-l)&&m($.SCROLL)}}function C(e){var a=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;Math.abs(a-i)>Math.abs(n-l)&&Math.abs(a-i)>t&&f===$.SWIPE&&y(a>i?Z.RIGHT:Z.LEFT),w(0),m($.NULL)}return Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchstart",k),function(){t.removeEventListener("touchstart",k)}}),[e]),Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchmove",S),function(){t.removeEventListener("touchmove",S)}}),[l,f,e]),Object(r.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("touchend",C),function(){t.removeEventListener("touchend",C)}}),[l,f,e]),{direction:v,dragDistance:b,resetSwipeStatus:function(){y(Z.NULL)}}};var ne=Object(c.b)(null,(function(e){return{goPrevious:function(){return e((function(e,t){var a=t().category,n=m.indexOf(a);e(p(0===n?h[m[m.length-1]]:h[m[n-1]]))}))},goNext:function(){return e((function(e,t){var a=t().category,n=m.indexOf(a),r=n===m.length-1;e(p(r?h[m[0]]:h[m[n+1]]))}))}}}))((function(e){var t=Object(r.useRef)(null),a=ae(t,50),n=a.direction,o=a.dragDistance,s=a.resetSwipeStatus;return Object(r.useEffect)((function(){return n===Z.RIGHT?e.goPrevious():n===Z.LEFT&&e.goNext(),function(){s()}}),[n]),i.a.createElement("div",{style:{width:"100%",transform:"translateX(".concat(o,"px)")},ref:t},e.children)})),re=Object(N.a)((function(e){return Object(M.a)(Object(D.a)({wrapper:{width:"100%",padding:"20px 20px 150px 20px"}},e.breakpoints.down("sm"),{wrapper:{padding:"8px 8px 150px 8px"}}))}));function ie(e,t,a){return"calc(".concat(e," * ").concat(a.typography[t].fontSize," * ").concat(a.typography[t].lineHeight,")")}function oe(e,t){return Object(M.a)({root:{position:"relative","&:after":{content:"''",position:"absolute",bottom:0,right:0,width:"20%",height:ie(1,e,t),backgroundImage:"linear-gradient(to right, rgba(255, 255, 255, 0) , rgba(255, 255, 255, 1))",zIndex:10}}})}var se={width:"100%",overflow:"hidden",position:"relative"},ce=function(e){return{buttons:Object(B.a)({},se),imageContain:{backgroundSize:"contain",backgroundColor:e.palette.primary.main}}},le=Object(N.a)((function(e){return Object(M.a)(Object(B.a)({},ce(e),Object(D.a)({media:Object(B.a)({height:"550px"},se),skeleton:Object(B.a)({height:"550px"},se),title:Object(B.a)({height:ie(1,"body1",e)},oe("body1",e).root,{},se),source:Object(B.a)({height:ie(1,"body2",e)},se),articleContent:Object(B.a)({height:ie(2,"body2",e)},oe("body2",e).root,{},se)},e.breakpoints.down("sm"),{media:{height:"200px"},skeleton:{height:"200px"}})))})),ue=Object(N.a)((function(e){return Object(M.a)(Object(B.a)({},ce(e),Object(D.a)({media:Object(B.a)({height:"200px"},se),skeleton:Object(B.a)({height:"200px"},se),title:Object(B.a)({height:ie(2,"body1",e)},oe("body1",e).root,{},se),source:Object(B.a)({height:ie(1,"body2",e)},se),articleContent:Object(B.a)({height:ie(3,"body2",e)},oe("body2",e).root,{},se),buttons:Object(B.a)({},se),imageContain:{backgroundSize:"contain",backgroundColor:e.palette.primary.main}},e.breakpoints.down("sm"),{})))}));function he(e){return i.a.createElement(Y.a,{className:e.className},i.a.createElement(F.a,{href:e.url,target:"_blank",rel:"noopener",underline:"none"},i.a.createElement(X.a,{size:"small",color:"primary"},"Learn more")),i.a.createElement(X.a,{size:"small",color:"primary",onClick:function(){Q(e.url),e.openCopyLinkSnackBar()}},"Share"))}function de(e){var t=Object(r.useRef)(null),a=J(t),n=!Object(W.a)(Object(z.a)().breakpoints.down("sm")),o=0===e.id||1===e.id,s=le(),c=ue(),l=o?s:c,u=Object(r.useMemo)((function(){var n;return n=e.urlToImage?a?i.a.createElement(P.a,{component:"img",alt:e.title,className:l.media,image:e.urlToImage,title:e.title}):i.a.createElement(K.a,{variant:"rect",className:l.skeleton}):i.a.createElement(P.a,{className:"".concat(l.media," ").concat(l.imageContain),image:"/news-app/xiaoxihome-news.jpg",title:"No image"}),i.a.createElement(_.a,{item:!0,xs:12,md:o?6:3,ref:t},i.a.createElement(U.a,{raised:!0},n,i.a.createElement(q.a,null,i.a.createElement(G.a,{gutterBottom:!0,variant:"body1",component:"h2",className:l.title},i.a.createElement(I.a,{fontWeight:700},e.title)),i.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p",className:l.source},i.a.createElement(I.a,{component:"span",fontWeight:700},e.source?e.source+" - ":e.author?e.author+" - ":"",function(e){var t=Date.now()-e.getTime();if(t<0)return"now";var a=Math.floor(t/6e4);if(a<=59)return"".concat(a," ").concat(1===a?"minute":"minutes"," ago");var n=Math.floor(t/36e5);if(n<=23)return"".concat(n," ").concat(1===n?"hour":"hours"," ago");var r=Math.floor(t/864e5);if(r<=30)return"".concat(r," ").concat(1===r?"day":"days"," ago");var i=Math.floor(t/2592e6);if(i<=12)return"".concat(i," ").concat(1===i?"month":"months"," ago");var o=Math.floor(t/31536e6);return"".concat(o," ").concat(1===o?"year":"years"," ago")}(new Date(e.publishedAt)))),i.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p",className:l.articleContent},e.content&&e.content.replace(/\[\+[0-9]+\schars\]/gi,""))),i.a.createElement(he,{url:e.url,className:l.buttons,openCopyLinkSnackBar:e.openCopyLinkSnackBar})))}),[e,a]);return n?i.a.createElement(V.a,{in:a},u):u}function fe(e){return i.a.createElement(i.a.Fragment,null,e.articles.map((function(t,a){return i.a.createElement(de,Object.assign({},t,{key:a,id:a,openCopyLinkSnackBar:e.openCopyLinkSnackBar}))})))}var me=Object(c.b)(null,(function(e){return{openCopyLinkSnackBar:function(){return e({type:y.OPEN_SNACKBAR})}}}))((function(e){var t,a=re();return Object(r.useEffect)((function(){window.scrollTo(0,0)})),t=e.articles.isError?i.a.createElement("div",{style:{width:"100%"}},"error"):e.articles.isFetching?i.a.createElement(i.a.Fragment,null,Array.from(Array(10),(function(e,t){return i.a.createElement(_.a,{item:!0,key:t},i.a.createElement(I.a,{width:500,height:300,maxWidth:"100%"},i.a.createElement(K.a,{variant:"rect",width:500,height:200}),i.a.createElement(K.a,{width:500}),i.a.createElement(K.a,{width:500})))}))):i.a.createElement(fe,{articles:e.articles.articles,openCopyLinkSnackBar:e.openCopyLinkSnackBar}),i.a.createElement(ne,null,i.a.createElement(I.a,{className:a.wrapper},i.a.createElement(_.a,{container:!0,direction:"row",alignContent:"center",justify:"center",spacing:2},t)))})),pe=a(335),ge=a(336);var ve=function(){return i.a.createElement(I.a,{m:2},i.a.createElement(_.a,{container:!0,direction:"row",spacing:2},i.a.createElement(_.a,{item:!0},i.a.createElement(F.a,{href:"https://www.xiaoxihome.com/",target:"_blank",rel:"noopener",underline:"none"},i.a.createElement(pe.a,{avatar:i.a.createElement(ge.a,null,"X"),label:"\ud83d\udd27 with \u2764\ufe0f by XiaoxiHome",color:"primary",clickable:!0}))),i.a.createElement(_.a,{item:!0},i.a.createElement(F.a,{href:"https://newsapi.org/",target:"_blank",rel:"noopener",underline:"none"},i.a.createElement(pe.a,{avatar:i.a.createElement(ge.a,null,"N"),label:"News data courtesy of NewsAPI.org",color:"secondary",clickable:!0})))))},ye=a(337),xe=a(311),Ee=a(264),be=a(147),we=a.n(be),Oe=a(90),ke=a(10),Se=a.n(ke),Ce=Se()((function(){return Object(M.a)({successSnackBar:{backgroundColor:Oe.a[600]}})}));var Ae=function(e){var t=Ce();function a(){e.closeCopyLinkSnackBar()}return i.a.createElement(ye.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:e.isActive,autoHideDuration:3e3,onClose:a},i.a.createElement(xe.a,{className:t.successSnackBar,message:i.a.createElement("span",{id:"client-snackbar"},"Link copied to clipboard"),action:[i.a.createElement(Ee.a,{key:"close","aria-label":"close",color:"inherit",onClick:a},i.a.createElement(we.a,null))]}))};var De,Te=Object(c.b)((function(e){return{isActive:e.copyLinkSnackBar.isActive}}),(function(e){return{closeCopyLinkSnackBar:function(){return e({type:y.CLOSE_SNACKBAR})}}}))(Ae);!function(e){e.loading="loading",e.loaded="loaded",e.error="error"}(De||(De={}));var je,He=function(){var e=Object(r.useState)(De.loading),t=Object(R.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(null),o=Object(R.a)(i,2),s=o[0],c=o[1];return Object(r.useEffect)((function(){fetch("https://www.xiaoxihome.com/api/news-analytics").then((function(e){return e.json()})).then((function(e){"ok"!==e.status?(console.log(e),n(De.error)):(c({totalDocuments:e.summaryStatistics.totalDocuments,earliestDocumentDate:e.summaryStatistics.earliestDocumentDate,latestDocumentDate:e.summaryStatistics.latestDocumentDate,documentsCountByCategory:e.summaryStatistics.documentsCountByCategory,documentsCountByDay:{time:e.summaryStatistics.series.map((function(e){return new Date(e).getTime()})),count:e.summaryStatistics.documentsCountByDay},wordCloud:e.summaryStatistics.wordCloud,documentsCountByDayAndCategory:{documentCount:e.summaryStatistics.documentsCountByDayAndCategory.documentCount,series:e.summaryStatistics.series,category:e.summaryStatistics.documentsCountByDayAndCategory.category}}),n(De.loaded))})).catch((function(e){console.log(e),n(De.error)}))}),[]),{status:a,summaryStatisticsData:s}},Le=a(314),Re=Se()((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),Ne=function(e){var t=e.children,a=Re(),n=Object(r.useRef)(null),o=Object(r.useState)(window.innerHeight-100),s=Object(R.a)(o,2),c=s[0];s[1];return i.a.createElement("div",{className:a.root,ref:n,style:{minHeight:"".concat(c,"px")}},t)},Ie=a(23),Be=a(16),Me=a(7),Ye=function(){function e(t,a,n){Object(Ie.a)(this,e),this.getColor=function(e){var t=["#ffa600","#ff764a","#ef5675","#bc5090","#7a5195","#374c80","#003f5c"];return t[e>t.length-1?0:e]},this.hasAnimated=!1,this.id=void 0,this.params=void 0,this.svg=void 0,this.references=void 0,this.data=void 0,this.id=t,this.params=this.getParams(n),this.svg=Me.t("#".concat(t)).append("svg"),this.data={pieZero:this.getPieData(a.map((function(e,t){return{value:0===t?100:0,title:e.title}}))),pie:this.getPieData(a),totalValue:this.getPieData(a).reduce((function(e,t){return e+t.data.value}),0)},this.references=this.createReferences()}return Object(Be.a)(e,[{key:"getParams",value:function(e){var t=.6*e;return{width:e,height:t,startAngle:Math.PI,endAngle:3*Math.PI,rx:e/2*.8,ry:t/2-.1*t,h:.1*t,ir:.4}}},{key:"getPieData",value:function(e){return Me.o().value((function(e){return e.value})).sort((function(e,t){return-e.value+t.value})).startAngle(this.params.startAngle).endAngle(this.params.endAngle)(e)}},{key:"createReferences",value:function(){var e=this.svg.append("g"),t=e.selectAll().data(this.data.pie).enter().append("path"),a=e.selectAll().data(this.data.pie).enter().append("path"),n=e.selectAll().data(this.data.pie).enter().append("path"),r=e.selectAll().data(this.data.pie).enter().append("text"),i=r.append("tspan"),o=r.append("tspan");return{pie:e,innerSlice:t,topSlice:a,outerSlice:n,text:r,text1:i,text2:o}}},{key:"drawPie",value:function(e,t,a,n,r,i){var o=this;this.references.pie.attr("transform","translate("+e+","+t+")"),this.references.innerSlice.style("fill",(function(e){return Me.l(o.getColor(e.index)).darker().toString()})).attr("d",(function(e){return o.pieInner(o.data.pieZero.filter((function(t){return t.index===e.index}))[0],a+.5,n+.5,0,i)})),this.references.topSlice.style("fill",(function(e){return o.getColor(e.index)})).attr("d",(function(e){return o.pieTop(o.data.pieZero.filter((function(t){return t.index===e.index}))[0],a,n,i)})),this.references.outerSlice.style("fill",(function(e){return Me.l(o.getColor(e.index)).darker().toString()})).attr("d",(function(e){return o.pieOuter(o.data.pieZero.filter((function(t){return t.index===e.index}))[0],a-.5,n-.5,0)})),this.references.text.attr("x","0").attr("y","0").attr("text-anchor","middle").style("fill","white").style("opacity",0),this.references.text1.attr("dy",0).style("font-weight",700).text((function(e){return e.data.title.toUpperCase()})),this.references.text2.attr("dy","1.2em").text((function(e){return(e.data.value/o.data.totalValue*100).toFixed(2)+"%"}))}},{key:"pieTransition",value:function(e,t,a,n,r,i){var o=this,s=Me.m(0,a);function c(t){var a=Me.m(r.filter((function(e){return e.index===t.index}))[0],i.filter((function(e){return e.index===t.index}))[0]);return function(t){return"".concat(.5*(1+n)*e*Math.cos(.5*(a(t).startAngle+a(t).endAngle)))}}this.references.innerSlice.transition().duration(2e3).delay(2e3).attrTween("d",(function(a){return function(r){return o.pieInner(a,e+.5,t+.5,s(r),n)}})),this.references.topSlice.transition().duration(2e3).attrTween("d",(function(a){var s=Me.m(r.filter((function(e){return e.index===a.index}))[0],i.filter((function(e){return e.index===a.index}))[0]);return function(a){return o.pieTop(s(a),e,t,n)}})),this.references.outerSlice.transition().duration(2e3).delay(2e3).attrTween("d",(function(a){return function(n){return o.pieOuter(a,e-.5,t-.5,s(n))}})),this.references.text.style("opacity",0),this.references.text.transition().duration(2e3).attrTween("x",c).attrTween("y",(function(e){var a=Me.m(r.filter((function(t){return t.index===e.index}))[0],i.filter((function(t){return t.index===e.index}))[0]);return function(e){return"".concat(.5*(1+n)*t*Math.sin(.5*(a(e).startAngle+a(e).endAngle)))}})).style("opacity",1),this.references.text1.transition().duration(2e3).attrTween("x",c),this.references.text2.transition().duration(2e3).attrTween("x",c)}},{key:"pieTop",value:function(e,t,a,n){if(e.endAngle-e.startAngle===0)return"M 0 0";var r=t*Math.cos(e.startAngle),i=a*Math.sin(e.startAngle),o=t*Math.cos(e.endAngle),s=a*Math.sin(e.endAngle),c=[];return c.push("M",r,i,"A",t,a,"0",e.endAngle-e.startAngle>Math.PI?1:0,"1",o,s,"L",n*o,n*s),c.push("A",n*t,n*a,"0",e.endAngle-e.startAngle>Math.PI?1:0,"0",n*r,n*i,"z"),c.join(" ")}},{key:"pieOuter",value:function(e,t,a,n){var r=e.startAngle<2*Math.PI?2*Math.PI:e.startAngle,i=e.endAngle<2*Math.PI?2*Math.PI:e.endAngle,o=t*Math.cos(r),s=a*Math.sin(r),c=t*Math.cos(i),l=a*Math.sin(i),u=[];return u.push("M",o,n+s,"A",t,a,"0 0 1",c,n+l,"L",c,l,"A",t,a,"0 0 0",o,s,"z"),u.join(" ")}},{key:"pieInner",value:function(e,t,a,n,r){var i=e.startAngle<Math.PI?Math.PI:e.startAngle,o=e.endAngle<Math.PI?Math.PI:e.endAngle,s=r*t*Math.cos(i),c=r*a*Math.sin(i),l=r*t*Math.cos(o),u=r*a*Math.sin(o),h=[];return h.push("M",s,c,"A",r*t,r*a,"0 0 1",l,u,"L",l,n+u,"A",r*t,r*a,"0 0 0",s,n+c,"z"),h.join(" ")}},{key:"styleSvg",value:function(){this.svg.attr("width",this.params.width).attr("height",this.params.height)}},{key:"animate",value:function(){this.hasAnimated||(this.pieTransition(this.params.rx,this.params.ry,this.params.h,this.params.ir,this.data.pieZero,this.data.pie),this.hasAnimated=!0)}},{key:"main",value:function(){this.styleSvg(),this.drawPie(this.params.width/2,this.params.height/2,this.params.rx,this.params.ry,this.params.h,this.params.ir)}}]),e}(),Fe=function(e){return Object(D.a)({width:"100%",fontFamily:"Open Sans,sans-serif",fontSize:"6rem",fontWeight:800,margin:0,lineHeight:1},e.breakpoints.down("sm"),{fontSize:"3rem"})},Xe=function(e){return Object(D.a)({textAlign:"start",width:"70%",fontFamily:"Open Sans,sans-serif",textTransform:"uppercase",fontSize:"2rem",fontWeight:800,margin:e.spacing(0,0),lineHeight:1},e.breakpoints.down("sm"),{fontSize:"1rem"})},We=function(e){return Object(D.a)({color:"grey",textAlign:"start",width:"70%",fontFamily:"Open Sans,sans-serif",fontSize:"1rem",fontWeight:800,margin:e.spacing(2,0)},e.breakpoints.down("sm"),{fontSize:"0.875rem"})},ze=function(e){return Object(D.a)({width:"100%",fontFamily:"Open Sans,sans-serif",fontSize:"1rem",fontWeight:800,margin:0},e.breakpoints.down("sm"),{fontSize:"0.875rem"})},Pe=Se()((function(e){return{title:Object(B.a)({},Xe(e))}})),_e=function(e){var t=e.value,a=Pe();return Array.isArray(t)?i.a.createElement(i.a.Fragment,null,t.map((function(e,t){return i.a.createElement("h2",{className:a.title,key:t},e)}))):i.a.createElement(i.a.Fragment,null,t.split(" ").map((function(e,t){return i.a.createElement("h2",{className:a.title,key:t},e)})))},Ue=Se()((function(e){return{content:Object(B.a)({},We(e))}})),qe=function(e){var t=e.value,a=Ue();return i.a.createElement("p",{className:a.content},t)},Ge=(Se()((function(e){return{}})),function(e){var t=e.isLoaded,a=e.data,n=e.animate,o=e.width,s=Object(r.useRef)(null),c=Object(r.useState)(null),l=Object(R.a)(c,2),u=l[0],h=l[1];return Object(r.useEffect)((function(){if(t&&a&&o&&null===u){var e=new Ye("analytics-documents-count-by-category-pie-chart",a,o);e.main(),h(e)}}),[t,a,o]),Object(r.useEffect)((function(){u&&n&&u.animate()}),[u,n]),i.a.createElement(i.a.Fragment,null,i.a.createElement(_e,{value:"News archived by category"}),i.a.createElement(qe,{value:"Overall I'd say the news are pretty well balanced."}),i.a.createElement("div",{id:"analytics-documents-count-by-category-pie-chart",ref:s}))}),Ve=function(){function e(t,a,n){Object(Ie.a)(this,e),this.getColor=function(e){var t=["#FFF3E0","#FFE0B2","#FFB74D","#FB8C00","#E65100"];return t[e>t.length-1?0:e]},this.dayOfWeekStrings=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.targetRectSize=70,this.rectPadding=.1,this.id=void 0,this.params=void 0,this.svg=void 0,this.references=void 0,this.data=void 0,this.scales=void 0,this.axis=void 0,this.id=t,this.data=this.getData(a),this.params=this.getParams(n),this.svg=Me.t("#".concat(t)).append("svg"),this.references=this.createReferences(),this.scales=this.getScales(),this.axis=this.getAxis()}return Object(Be.a)(e,[{key:"getParams",value:function(e){var t={t:50,r:20,b:10,l:50},a=this.data.xScaleDomain.length,n=Math.floor((e-t.l-t.r)/a),r=Math.min(n,this.targetRectSize),i={width:this.data.xScaleDomain.length*r,height:7*r,x:t.l,y:t.t};return{width:i.width+t.l+t.r,height:i.height+t.t+t.b,m:t,chart:i}}},{key:"getScales",value:function(){return{x:Me.p().domain(this.data.xScaleDomain).range([0,this.params.chart.width]).padding(this.rectPadding),y:Me.p().domain(this.data.yScaleDomain).range([0,this.params.chart.height]).padding(this.rectPadding),color:Me.s().domain([0,this.data.maxCount]).range([0,1,2,3,4])}}},{key:"getAxis",value:function(){var e=this;return{x:Me.e(this.scales.x).tickFormat((function(t,a){if(0===a)return e.monthStrings[new Date(e.data.xScaleGuide[a]).getUTCMonth()];var n=e.monthStrings[new Date(e.data.xScaleGuide[a]).getUTCMonth()];return n===e.monthStrings[new Date(e.data.xScaleGuide[a-1]).getUTCMonth()]?"":n})).tickSize(0).tickPadding(5),y:Me.c(this.scales.y).tickFormat((function(t){return e.dayOfWeekStrings[parseInt(t)]})).tickValues(["1","3","5"]).tickSize(0).tickPadding(5)}}},{key:"getData",value:function(e){for(var t=e.time.map((function(t,a){return{count:e.count[a],time:t}})),a=new Date(t[0].time).getUTCDay(),n=t[0].time;a>0;)a--,n-=864e5,t.unshift({count:0,time:n});for(var r=t.map((function(e){return e.time})),i=function(e){return e.map((function(e,t){return Math.floor(t/7)}))}(r),o=[],s=[],c=0;c<=i[i.length-1];c++)o.push(c.toString()),s.push(t[7*c].time);for(var l=function(e){return e.map((function(e){return new Date(e).getUTCDay()}))}(r),u=[],h=0;h<7;h++)u.push(h.toString());var d=Math.max.apply(Math,t.map((function(e){return e.count})));return{x:i,y:l,xScaleDomain:o,xScaleGuide:s,yScaleDomain:u,data:t,maxCount:d}}},{key:"createReferences",value:function(){var e=this.svg.append("g"),t=this.svg.append("g"),a=this.svg.append("g").selectAll("rect").data(this.data.data).enter().append("rect"),n=this.svg.append("g"),r=n.append("rect"),i=n.append("text");return{xAxis:e,yAxis:t,rects:a,tooltipBackground:r,tooltip:i,tooltipText1:i.append("tspan"),tooltipText2:i.append("tspan")}}},{key:"styleSvg",value:function(){this.svg.attr("width",this.params.width).attr("height",this.params.height)}},{key:"styleAxisX",value:function(){this.axis.x(this.references.xAxis),this.references.xAxis.selectAll(".domain").remove(),this.references.xAxis.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).style("font-size","0.875rem").style("font-weight","700"),this.references.xAxis.selectAll("text").style("fill","grey")}},{key:"styleAxisY",value:function(){this.axis.y(this.references.yAxis),this.references.yAxis.selectAll(".domain").remove(),this.references.yAxis.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).style("font-size","0.875rem").style("font-weight","700"),this.references.yAxis.selectAll("text").style("fill","grey")}},{key:"styleRects",value:function(){var e=this;this.references.rects.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).attr("width",this.scales.x.bandwidth()).attr("height",this.scales.y.bandwidth()).attr("x",(function(t,a){return e.scales.x(e.data.x[a].toString())||0})).attr("y",(function(t,a){return e.scales.y(e.data.y[a].toString())||0}))}},{key:"styleTooltip",value:function(){this.references.tooltip.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).attr("text-anchor","middle").attr("alignment-baseline","middle"),this.references.tooltipText1.style("font-weight",700).style("fill","white"),this.references.tooltipText2.style("fill","white"),this.references.tooltipBackground.style("transform","translate(".concat(this.params.chart.x,"px, ").concat(this.params.chart.y,"px)")).style("fill","#000").style("opacity",.8).attr("rx","5").attr("ry","5")}},{key:"addMouseEventToRects",value:function(){var e=this;this.references.rects.on("mouseover",(function(t){var a,n=parseInt(this.getAttribute("x")||"0"),r=parseInt(this.getAttribute("y")||"0"),i=parseInt(this.getAttribute("width")||"0");parseInt(this.getAttribute("height")||"0");e.references.tooltipText1.text("".concat(t.count," news archived on "));var o=new Date(t.time);e.references.tooltipText2.text("".concat(e.monthStrings[o.getUTCMonth()]," ").concat(o.getUTCDate(),", ").concat(o.getUTCFullYear()));var s=null===(a=e.references.tooltip.node())||void 0===a?void 0:a.getBBox(),c=(null===s||void 0===s?void 0:s.width)||0,l=(null===s||void 0===s?void 0:s.height)||0,u=1.2*c,h=2.5*l,d=n+.5*i,f=r-.5*h,m=-e.params.m.l,p=e.params.width-e.params.m.l,g=-e.params.m.t,v=e.params.height-e.params.m.t;d-.5*u<m?d=m+.5*u:d+.5*u>p&&(d=p-.5*u),f-h<g?f=g+h:f+h>v&&(f=v-.5*h),e.references.tooltip.attr("x",d).attr("y",f),e.references.tooltipBackground.attr("x",d-.5*u).attr("y",f-.4*l-.5*h).attr("width",u).attr("height",h)})).on("mouseleave",(function(t){e.references.tooltip.attr("x",-1e3).attr("y",-1e3),e.references.tooltipBackground.attr("x",-1e3).attr("y",-1e3)}))}},{key:"prepareForAnimation",value:function(){this.references.rects.style("fill",this.getColor(3))}},{key:"animate",value:function(){var e=this;this.references.rects.transition().style("fill","rgba(255, 255, 255, 0)").duration(500),this.references.rects.transition().style("fill",(function(t){return e.getColor(e.scales.color(t.count))})).delay((function(t){return 500+1e3*e.scales.color(t.count)})).duration(800)}},{key:"main",value:function(){this.styleSvg(),this.styleAxisX(),this.styleAxisY(),this.styleRects(),this.styleTooltip(),this.addMouseEventToRects(),this.prepareForAnimation()}}]),e}(),Ke=(Se()((function(e){return{}})),function(e){var t=e.isLoaded,a=e.data,n=e.width,o=Object(r.useRef)(null),s=J(o,.5),c=Object(r.useState)(null),l=Object(R.a)(c,2),u=l[0],h=l[1];return Object(r.useEffect)((function(){if(t&&a&&null===u){var e=new Ve("analytics-documents-heat-map",a,n);e.main(),h(e)}}),[t,a]),Object(r.useEffect)((function(){u&&s&&u.animate()}),[u,s]),i.a.createElement(i.a.Fragment,null,i.a.createElement(_e,{value:"News archived each day"}),i.a.createElement(qe,{value:"Glad to see that people enjoyed their weekends."}),i.a.createElement("div",{id:"analytics-documents-heat-map",ref:o}))}),Je=a(91),Qe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ze=Se()((function(e){return{root:{textAlign:"center",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#F2F2F2"},section:Object(D.a)({margin:e.spacing(5,0)},e.breakpoints.down("sm"),{margin:e.spacing(2,0)}),title:Object(B.a)({},ze(e)),number:Object(B.a)({},Fe(e))}})),$e=i.a.forwardRef((function(e,t){var a=e.totalDocuments,n=e.earliestDocumentDate,o=e.latestDocumentDate,s=Ze(),c=Object(r.useState)(window.innerHeight-100),l=Object(R.a)(c,2),u=l[0],h=(l[1],Object(Je.useCountUp)({start:.9*a,end:a,duration:5})),d=new Date(n).getTime(),f=new Date(o).getTime(),m=Object(Je.useCountUp)({start:.9*d,end:d,duration:5}),p=Object(Je.useCountUp)({start:.9*f,end:f,duration:5}),g=function(e){return i.a.createElement("h2",{className:s.title},e)},v=function(e){var t=new Date(e);return i.a.createElement("p",{className:s.number},t.getUTCDate()," ",Qe[t.getUTCMonth()],", ",t.getUTCFullYear())};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:s.root,style:{minHeight:"".concat(u,"px")}},i.a.createElement("div",{className:s.section},g("Total news articles archived"),i.a.createElement("p",{className:s.number},h.countUp)),i.a.createElement("div",{className:s.section},g("First news article archived"),v(+m.countUp)),i.a.createElement("div",{className:s.section},g("Most recent news article archived"),v(+p.countUp)),i.a.createElement("div",{ref:t}," ")))})),et=a(315);!function(e){e.left="left",e.right="right"}(je||(je={}));var tt,at=Se()((function(e){return{root:{position:"relative",zIndex:1,width:"100%"},children:{position:"absolute",zIndex:-1,top:0,left:0,willChange:"transform",width:"100%"},placeholder:{position:"relative",zIndex:-2}}})),nt=function(e){var t=e.children,a=e.direction,n=at(),o=Object(r.useRef)(null),s=Object(r.useRef)(null),c=Object(r.useRef)(null),l=Object(r.useState)({width:"0px",height:"0px"}),u=Object(R.a)(l,2),h=u[0],d=u[1],f=Object(r.useState)({start:0,end:0}),m=Object(R.a)(f,2),p=m[0],g=m[1],v=Object(r.useState)({xMax:0,x:0,y:0}),y=Object(R.a)(v,2),x=y[0],E=y[1],b=function(){var e=window.scrollY+window.innerHeight<p.start,t=window.scrollY+.5*window.innerHeight>p.end;if(e||t)e?x.x!==x.xMax&&E((function(e){return Object(B.a)({},e,{x:e.xMax})})):t&&0!==x.x&&E((function(e){return Object(B.a)({},e,{x:0})}));else{var a=(window.scrollY-p.start+window.innerHeight)/(p.end-p.start+.5*window.innerHeight);E((function(e){return Object(B.a)({},e,{x:e.xMax*(t=1-a,t*t)});var t}))}};return Object(r.useEffect)((function(){s.current&&c.current&&"0px"===h.width&&d({width:"".concat(s.current.getBoundingClientRect().width,"px"),height:"".concat(s.current.getBoundingClientRect().height,"px")})}),[h]),Object(r.useEffect)((function(){if(o.current&&"0px"!==h.width&&0===p.start){var e=o.current.getBoundingClientRect();g({start:window.scrollY+e.top,end:window.scrollY+e.top+.5*e.height});var t=a===je.left?-(e.left+e.width):e.right+e.width;E({xMax:t,x:t,y:0})}}),[h,p,x]),Object(r.useEffect)((function(){return document.addEventListener("scroll",b),function(){return document.removeEventListener("scroll",b)}}),[p,x]),i.a.createElement("div",{className:n.root,ref:o},i.a.createElement("div",{className:n.children,ref:s,style:{transform:"translate(".concat(x.x,"px, ").concat(x.y,"px)")}},t),i.a.createElement("div",{className:n.placeholder,ref:c,style:Object(B.a)({},h)}))},rt=a(148),it=a.n(rt),ot=function(){function e(t,a,n){Object(Ie.a)(this,e),this.colors=["#003f5c","#374c80","#7a5195","#bc5090","#ef5675","#ff764a","#ffa600"],this.id=void 0,this.data=void 0,this.params=void 0,this.scale=void 0,this.id=n,this.data=this.getData(t),this.params={width:a,height:.6*a},this.scale=this.getScale(),this.styleSvg=this.styleSvg.bind(this)}return Object(Be.a)(e,[{key:"getData",value:function(e){var t=e.map((function(e){return e.count}));return{data:e,words:e.map((function(e){return e.word})),counts:t,maxCount:Math.max.apply(Math,t)}}},{key:"getScale",value:function(){return Me.q().domain([0,this.data.maxCount]).range([10,this.params.width>=1e3?100:this.params.width>=800?70:36])}},{key:"draw",value:function(){var e=this;it()().size([this.params.width,this.params.height]).timeInterval(20).words(this.data.data.map((function(t){return{text:t.word,size:e.scale(t.count)}}))).fontSize((function(e){return e.size})).rotate((function(){return 90*~~(2*Math.random())})).font("Anton").on("end",this.styleSvg).start()}},{key:"styleSvg",value:function(e){var t=this;Me.t("#".concat(this.id)).append("svg").attr("width",this.params.width).attr("height",this.params.height).append("g").attr("transform","translate("+[this.params.width>>1,this.params.height>>1]+")").selectAll("text").data(e).enter().append("text").style("font-size",(function(e){return e.size+"px"})).style("font-family","Anton").style("fill",(function(){return t.colors[Math.floor(Math.random()*t.colors.length)]})).attr("text-anchor","middle").attr("transform",(function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"})).text((function(e){return e.text}))}},{key:"main",value:function(){this.draw()}}]),e}(),st=(Se()((function(e){return{}})),function(e){var t=e.isLoaded,a=e.data,n=e.width,o=Object(r.useRef)(null),s=(J(o,.5),Object(r.useState)(null)),c=Object(R.a)(s,2),l=c[0],u=c[1];return Object(r.useEffect)((function(){if(t&&a&&n&&null===l){var e=new ot(a,n,"analytics-documents-word-cloud");e.main(),u(e)}}),[t,a,n]),i.a.createElement(i.a.Fragment,null,i.a.createElement(_e,{value:"Word it out"}),i.a.createElement(qe,{value:"The power of words."}),i.a.createElement("div",{id:"analytics-documents-word-cloud",ref:o}))}),ct=Se()((function(e){return{root:{position:"relative",width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},fixedWrapper:{position:"relative",overflow:"hidden",width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",willChange:"transform"},children:{width:"100%",position:"absolute",minHeight:800,willChange:"transform"},childrenSize:{width:"100%"},placeholder:{position:"relative"}}})),lt=function(e){var t=e.children,a=ct(),n=Object(r.useRef)(null),o=Object(r.useRef)(null),s=Object(r.useRef)(null),c=Object(r.useRef)(null),l=Object(r.useState)({isSet:!1,width:"0",height:"0",left:"0"}),u=Object(R.a)(l,2),h=u[0],d=u[1],f=Object(r.useState)({isSet:!1,start:0,end:0}),m=Object(R.a)(f,2),p=m[0],g=m[1],v=Object(r.useState)(!1),y=Object(R.a)(v,2),x=y[0],E=y[1],b=function(){if(c.current&&s.current&&o.current){var e=window.scrollY+window.innerHeight<p.start,t=window.scrollY>p.end;if(e||t){if(e){if(!x)return;c.current.style.top="".concat(window.scrollY+s.current.getBoundingClientRect().top,"px"),E(!0)}else if(t){if(!x)return;c.current.style.top="".concat(window.scrollY+s.current.getBoundingClientRect().bottom,"px"),E(!0)}}else{var a=s.current.getBoundingClientRect().top;o.current.style.top="".concat(a,"px"),c.current.style.top="".concat(a,"px"),x&&E(!1)}}};Object(r.useEffect)((function(){o.current&&!h.isSet&&(d({isSet:!0,width:"".concat(o.current.getBoundingClientRect().width,"px"),height:"".concat(o.current.getBoundingClientRect().height,"px"),left:"".concat(o.current.getBoundingClientRect().left,"px")}),b())}),[h]),Object(r.useEffect)((function(){if(s.current&&h.isSet&&!p.isSet){var e=s.current.getBoundingClientRect();g({isSet:!0,start:window.scrollY+e.top,end:window.scrollY+e.top+e.height})}}),[h,p]),Object(r.useEffect)((function(){return document.addEventListener("scroll",b),function(){return document.removeEventListener("scroll",b)}}),[p,x]);var w={left:h.left,height:h.height,width:h.width,position:"fixed"};return i.a.createElement("div",{className:a.root,ref:n},i.a.createElement("div",{className:a.fixedWrapper,ref:c,style:h.isSet?w:{}},i.a.createElement("div",{className:a.children,ref:o},t)),i.a.createElement("div",{className:a.placeholder,ref:s,style:{width:h.width,height:h.height}}))},ut=function(e){var t=[],a={};return e.forEach((function(e,n,r){for(var i=n-1,o=0;i>=0;){if(void 0!==a[i]){o+=a[i];break}o+=r[i],i--}a[n-1]=o,t.push(o)})),t},ht=function(){function e(t,a,n,r){Object(Ie.a)(this,e),this.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.colors={getAreaColor:function(e){var t=["#003f5c","#374c80","#7a5195","#bc5090","#ef5675","#ff764a","#ffa600"];return t[e>t.length-1?0:e]},textColor:"#555",domainColor:"red"},this.svg=void 0,this.dimensions=void 0,this.scales=void 0,this.axes=void 0,this.references=void 0,this.data=void 0,this.shapes=void 0,this.svg=Me.t("#".concat(t)).append("svg"),this.data=this.getData(a,!0),this.dimensions=this.getDimension(n,r),this.scales=this.getScales(),this.references={axisX:null,axisY:null,axisYAreaTitle:null,axisXHover:null,axisYHoverText:null,axisYHoverLines:null,paths:null,detectionRects:null},this.shapes=this.getShapes(),this.axes=this.getAxes()}return Object(Be.a)(e,[{key:"getData",value:function(e,t){var a;if(t){var n=e.quantity.map((function(e){var t=e.length,a=e.reduce((function(e,t){return e+t}));return e.map((function(e){return 0===a?1/t:e/a}))}));e=Object.assign({},e,{quantity:n}),a=1}else{var r=e.quantity.map((function(e){return e.reduce((function(e,t){return e+t}))}));a=Math.max.apply(Math,r)}var i=e.quantity.map((function(e){var t={};return e.forEach((function(e,a){return t["".concat(a)]=e})),t}));return Object(B.a)({},e,{stackData:i,maxQuantity:a})}},{key:"getDimension",value:function(e,t){var a={t:10,r:150,b:50,l:60};return{svgWidth:e,svgHeight:t,m:a,chartWidth:e-a.l-a.r,chartHeight:t-a.t-a.b}}},{key:"getScales",value:function(){var e=[this.dimensions.m.l,this.dimensions.m.l+this.dimensions.chartWidth];return{x:Me.q().domain([0,this.data.series.length-1]).range(e),y:Me.q().domain([0,this.data.maxQuantity]).range([this.dimensions.chartHeight+this.dimensions.m.t,this.dimensions.m.t]),xBand:Me.p().domain(this.data.quantity.map((function(e,t){return t.toString()}))).range(e),xPoint:Me.r().domain(this.data.quantity.map((function(e,t){return"".concat(t)}))).range(e)}}},{key:"getAxes",value:function(){var e=this,t=this.dimensions.chartWidth>=300?[0,Math.floor(.25*this.data.series.length),Math.floor(.5*this.data.series.length),Math.floor(.75*this.data.series.length),this.data.series.length-1].map((function(e){return"".concat(e)})):[0,this.data.series.length-1].map((function(e){return"".concat(e)})),a=Me.b(this.scales.xBand).tickValues(t).tickFormat((function(t,a){var n=e.data.series[parseInt("".concat(t))],r=new Date(n);return"".concat(r.getUTCDate()," ").concat(e.monthStrings[r.getUTCMonth()],", ").concat(r.getUTCFullYear())})),n=Me.c(this.scales.y).tickValues([0,this.data.maxQuantity]).tickFormat((function(e){return["0%","100%"][parseInt("".concat(e))]})),r=this.data.quantity[this.data.quantity.length-1].slice(),i=ut(r);i.forEach((function(e,t,a){return a[t]=e+.5*r[t]}));var o=Me.d(this.scales.y).tickValues(i).tickFormat((function(t,a){return e.data.order[parseInt("".concat(a))]})),s=Me.b(this.scales.xPoint).tickValues([]).tickFormat((function(t,a){var n=e.data.series[parseInt("".concat(t))],r=new Date(n);return"".concat(r.getUTCDate()," ").concat(e.monthStrings[r.getUTCMonth()],", ").concat(r.getUTCFullYear())}));return[a,n,o,s].forEach((function(e){e.tickPadding(10),e.tickSize(0)})),{x:a,y:n,yAreaTitle:o,xHover:s,yHoverText:Me.c(this.scales.y).tickValues([]),yHoverLines:Me.c(this.scales.y).tickValues([])}}},{key:"initAxes",value:function(){var e=this;this.references.axisX=this.svg.append("g"),this.references.axisY=this.svg.append("g"),this.references.axisYAreaTitle=this.svg.append("g"),this.references.axisXHover=this.svg.append("g"),this.references.axisYHoverText=this.svg.append("g"),this.references.axisYHoverLines=this.svg.append("g"),this.axes.x(this.references.axisX),this.axes.y(this.references.axisY),this.axes.yAreaTitle(this.references.axisYAreaTitle),this.axes.xHover(this.references.axisXHover),this.axes.yHoverText(this.references.axisYHoverText),this.axes.yHoverLines(this.references.axisYHoverLines),this.references.axisX.style("transform","translate(0px, ".concat(this.dimensions.m.t+this.dimensions.chartHeight,"px)")),this.references.axisY.style("transform","translate(".concat(this.dimensions.m.l,"px, 0px)")),this.references.axisYAreaTitle.style("transform","translate(".concat(this.dimensions.m.l+this.dimensions.chartWidth,"px, 0px)")),this.references.axisXHover.style("transform","translate(0px, ".concat(this.dimensions.m.t+this.dimensions.chartHeight,"px)")),this.references.axisYHoverText.style("transform","translate(".concat(this.dimensions.m.l,"px, 0px)")),this.references.axisYHoverLines.style("transform","translate(".concat(this.dimensions.m.l,"px, 0px)"));var t=[this.references.axisX,this.references.axisY,this.references.axisYAreaTitle,this.references.axisXHover,this.references.axisYHoverText,this.references.axisYHoverLines];t.forEach((function(t){t.selectAll("text").style("font-size","0.875rem").style("font-weight",700).style("fill",e.colors.textColor)})),t.forEach((function(e){e.selectAll(".domain").remove()})),t.forEach((function(e){e.style("opacity",1)})),this.references.axisYAreaTitle.selectAll("text").style("fill",(function(t,a){return e.colors.getAreaColor(a)})).style("text-transform","uppercase")}},{key:"getShapes",value:function(){var e=this,t=this.data.order.map((function(e,t){return"".concat(t)}));return{stack:Me.u().keys(t).order(Me.w).offset(Me.v),getArea:function(t){return Me.a().x((function(t,a){return e.scales.xPoint("".concat(a))||0})).y0((function(a){return e.scales.y(a[0]+e.data.maxQuantity*(1-t))})).y1((function(a){return e.scales.y(a[1]+e.data.maxQuantity*(1-t))}))}}}},{key:"initSvg",value:function(){this.svg.attr("width",this.dimensions.svgWidth).attr("height",this.dimensions.svgHeight)}},{key:"initLineChart",value:function(){var e=this;this.references.paths=this.svg.append("g").selectAll("path").data(this.shapes.stack(this.data.stackData)).enter().append("path").attr("d",(function(t){return e.shapes.getArea(0)(t)})).attr("fill",(function(t,a){return e.colors.getAreaColor(a)})).style("transform","translateX(".concat(this.scales.xBand.bandwidth(),")"))}},{key:"initDetectionRects",value:function(){var e=this;this.references.detectionRects=this.svg.append("g").selectAll("rect").data(this.data.quantity).enter().append("rect").attr("x",(function(t,a){return(e.scales.xPoint(a.toString())||0)-.5*e.scales.xBand.bandwidth()})).attr("y",this.dimensions.m.t).attr("width",this.scales.xBand.bandwidth).attr("height",this.dimensions.chartHeight).style("fill","#fff").style("opacity",0)}},{key:"animate",value:function(){var e=this;this.references.paths&&(this.references.paths.transition().delay((function(e,t){return 100*t})).duration(1200).attrTween("d",(function(t){return function(a){return e.shapes.getArea(a)(t)||""}})).ease(Me.f),setTimeout((function(){e.toggleAllAxes(!0)}),200*this.data.order.length+1e3+200))}},{key:"toggleAllAxes",value:function(e){var t=e?1:0;[this.references.axisYAreaTitle,this.references.axisX,this.references.axisY].forEach((function(e){null===e||void 0===e||e.transition().duration(500).style("opacity",t)}))}},{key:"appendMouseEventToSvg",value:function(){var e=this;this.svg.on("mouseover",(function(){e.toggleAllAxes(!0)})).on("mouseleave",(function(){e.toggleAllAxes(!1)}))}},{key:"appendMouseEventToDetectionRects",value:function(){var e,t=this,a=this,n=function(e,n){if(void 0!==e&&void 0!==n){var r=ut(e),i=r.map((function(t,a){return t+.5*e[a]}));t.axes.yHoverText.tickValues(i).tickFormat((function(t,a){return"".concat((100*e[a]).toFixed(2),"%")})),t.axes.yHoverLines.tickValues(r.slice(1)).tickFormat((function(){return""})).tickSizeInner(-a.dimensions.chartWidth),t.axes.xHover.tickValues(["".concat(n)]),t.references.axisXHover&&t.references.axisYHoverText&&t.references.axisYHoverLines&&(t.axes.xHover(t.references.axisXHover),t.axes.yHoverText(t.references.axisYHoverText),t.axes.yHoverLines(t.references.axisYHoverLines),t.references.axisYHoverLines.selectAll("line").style("stroke","rgba(255,255,255,0.6)").style("stroke-width",2),t.references.axisYHoverText.selectAll("text").style("font-size","0.875rem").style("font-weight","700").style("fill",(function(e,a){return t.colors.getAreaColor(a)})),t.references.axisYHoverText.select(".domain").remove(),t.references.axisYHoverText.selectAll("line").style("stroke",(function(e,a){return t.colors.getAreaColor(a)})).style("stroke-width",5),t.references.axisXHover.selectAll("text").style("font-size","0.875rem").style("font-weight","700").style("fill",t.colors.textColor),function(){var e;if(t.references.axisXHover){var a=null===(e=t.references.axisXHover.select("text").node())||void 0===e?void 0:e.getBBox();a&&t.references.axisXHover.selectAll("g.tick").insert("rect",":first-child").attr("width",1.2*a.width).attr("height",a.height).attr("x",a.x-.1*a.width).attr("y",a.y).style("fill","#fefefe")}}())}else[t.axes.xHover,t.axes.yHoverText,t.axes.yHoverLines].forEach((function(e){e.tickValues([])})),t.references.axisXHover&&t.references.axisYHoverText&&t.references.axisYHoverLines&&(t.axes.xHover(t.references.axisXHover),t.axes.yHoverText(t.references.axisYHoverText),t.axes.yHoverLines(t.references.axisYHoverLines));t.references.axisXHover&&t.references.axisYHoverText&&t.references.axisYHoverLines&&[t.references.axisXHover,t.references.axisYHoverText,t.references.axisYHoverLines].forEach((function(e){e.select(".domain").remove()}))};null===(e=this.references.detectionRects)||void 0===e||e.on("mouseover",(function(e,t){Me.t(this).style("opacity",.3),n(e,t)})).on("mouseleave",(function(e,t){Me.t(this).style("opacity",0),n()}))}},{key:"main",value:function(){this.initSvg(),this.initLineChart(),this.initAxes(),this.initDetectionRects(),this.appendMouseEventToDetectionRects()}}]),e}(),dt=(Se()((function(e){return{}})),function(e){var t=e.isLoaded,a=e.data,n=e.width,o=e.height,s=Object(r.useRef)(null),c=J(s,.5),l=Object(r.useState)(null),u=Object(R.a)(l,2),h=u[0],d=u[1];return Object(r.useEffect)((function(){if(t&&a&&null===h){var e=new ht("analytics-documents-count-stacked-bar-chart",a,n,o);e.main(),d(e)}}),[t,a]),Object(r.useEffect)((function(){h&&c&&h.animate()}),[h,c]),i.a.createElement(i.a.Fragment,null,i.a.createElement(_e,{value:["News","archived","by","day & category"]}),i.a.createElement(qe,{value:"Art made of data."}),i.a.createElement("div",{id:"analytics-documents-count-stacked-bar-chart",ref:s}))}),ft=a(4),mt=a(312),pt=a(334),gt=a(313),vt=a(149),yt=a.n(vt),xt=["The band height of each category is the percentage of news count in that category to the total news count in that day. Given the number of news archived each day often fluctuates and follows a weekly pattern, the percentage tells a better story that how people's interests in different news change over time.","Some patterns can be observed from the graph: due to the spreading of the novel coronavirus at the beginning of 2020, more and more health news were being reported.","Since the early March of 2020, many countries and cities in Europe and North America starts to lockdown, at the same time we see a decline in sport and entertainment news."],Et=Se()((function(e){return{root:{width:"100%",boxShadow:"none",backgroundColor:"transparent","&:before":{height:0},"&$rootExpanded":{margin:0}},rootExpanded:{},summaryWrapper:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"2rem"},line:{width:"30%",height:2,margin:"0 12px",backgroundColor:"#999"},detailWrapper:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),bt=Object(ft.a)((function(){return{root:{minHeight:48,"&$expanded":{minHeight:48}},expanded:{},content:{margin:"12px 0","&$expanded":{margin:"12px 0"}}}}))(mt.a),wt=function(){var e=Et(),t=Object(r.useState)(!1),a=Object(R.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)((function(){setTimeout((function(){window.scrollTo(window.scrollX,window.scrollY+1),window.scrollTo(window.scrollX,window.scrollY-1)}),300)}),[n]),i.a.createElement(pt.a,{expanded:n,onChange:function(){o((function(e){return!e}))},classes:{root:e.root,expanded:e.rootExpanded}},i.a.createElement(bt,null,i.a.createElement("div",{className:e.summaryWrapper},i.a.createElement("div",{className:e.line}," "),i.a.createElement(yt.a,{style:{fontSize:"2rem",transition:"transform 0.3s",transform:n?"rotate(135deg)":"rotate(0deg)"}}),i.a.createElement("div",{className:e.line}," "))),i.a.createElement(gt.a,{className:e.detailWrapper},i.a.createElement(_e,{value:["How to use this graph?"]}),xt.map((function(e,t){return i.a.createElement(qe,{value:e,key:t})}))))},Ot=Se()((function(e){return{root:Object(D.a)({overflowX:"hidden",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",paddingBottom:"200px",position:"relative"},e.breakpoints.down("sm"),{paddingBottom:"250px"}),widthWrapper:Object(D.a)({width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},e.breakpoints.down("sm"),{width:"100%"})}})),kt=function(){var e,t=Ot(),a=Object(r.useRef)(null),n=He(),o=n.status,s=n.summaryStatisticsData,c=Object(r.useRef)(null),l=Object(r.useState)(!1),u=Object(R.a)(l,2),h=u[0],d=u[1],f=function(){if(c.current){var e=c.current.getBoundingClientRect().top-100;e<=0&&h?(d(!1),document.body.style.backgroundColor=""):e>0&&!h&&(d(!0),document.body.style.backgroundColor="black")}};Object(r.useEffect)((function(){return f(),document.addEventListener("scroll",f),function(){document.removeEventListener("scroll",f)}}),[o,h]),Object(r.useEffect)((function(){return function(){document.body.style.backgroundColor=""}}),[]);var m=o===De.loaded,p=(null===a||void 0===a?void 0:null===(e=a.current)||void 0===e?void 0:e.getBoundingClientRect().width)||100;return i.a.createElement("div",{className:t.root},i.a.createElement("div",{className:t.widthWrapper,ref:a},o===De.loading&&i.a.createElement(Ne,null,i.a.createElement(Le.a,{color:"secondary"})),o===De.loaded&&s&&i.a.createElement(i.a.Fragment,null,i.a.createElement($e,{totalDocuments:s.totalDocuments,earliestDocumentDate:s.earliestDocumentDate,latestDocumentDate:s.latestDocumentDate,ref:c}),i.a.createElement(et.a,{in:!h,timeout:2e3},i.a.createElement(Ne,null,i.a.createElement(Ge,{isLoaded:m,data:s.documentsCountByCategory.map((function(e){return{title:e.category,value:e.count}})),animate:!h,width:p}))),i.a.createElement(nt,{direction:je.left},i.a.createElement(Ne,null,i.a.createElement(Ke,{isLoaded:m,data:s.documentsCountByDay,width:p}))),i.a.createElement(nt,{direction:je.right},i.a.createElement(Ne,null,i.a.createElement(dt,{isLoaded:m,data:{quantity:s.documentsCountByDayAndCategory.documentCount,series:s.documentsCountByDayAndCategory.series,order:s.documentsCountByDayAndCategory.category},width:p,height:p>=1e3?600:p/2}))),i.a.createElement(wt,null),i.a.createElement(lt,null,i.a.createElement(Ne,null,i.a.createElement(st,{isLoaded:m,data:s.wordCloud,width:p})))),o===De.error&&i.a.createElement(G.a,{variant:"body2",component:"h1"},i.a.createElement(I.a,{fontWeight:700},"Server error, please try again later"))))},St=a(323),Ct=a(324),At=a(338),Dt=a(331),Tt=a(325);!function(e){e.FIXED="FIXED",e.RELATIVE="RELATIVE"}(tt||(tt={}));var jt=function(e){return Object(B.a)({},{FIXED:{position:"fixed",top:0,left:0,width:"100%"},RELATIVE:{position:"relative",width:"100%"}}[e])};var Ht=function(e){var t=Object(r.useState)(tt.RELATIVE),a=Object(R.a)(t,2),n=a[0],i=a[1],o=ee(10);function s(){var t=window.scrollY;if(0!==t||n===tt.RELATIVE){if(e.current){var a=e.current.offsetTop+e.current.offsetHeight;o()&&(t>=a&&n!==tt.FIXED?i(tt.FIXED):t<a&&n!==tt.RELATIVE&&i(tt.RELATIVE))}}else i(tt.RELATIVE)}return Object(r.useEffect)((function(){return document.addEventListener("scroll",s),function(){document.removeEventListener("scroll",s)}}),[n,e]),{style:jt(n),isFixed:n===tt.FIXED}},Lt=function(e){var t=Ht(e.anchorRef),a=t.style,n=t.isFixed,o=Object(r.useRef)(null);return i.a.createElement(i.a.Fragment,null,n&&o.current&&i.a.createElement("div",{style:{width:"".concat(o.current.offsetWidth,"px"),height:"".concat(o.current.offsetHeight,"px")}}),i.a.createElement("div",{style:Object(B.a)({},a,{zIndex:e.zIndex?e.zIndex:"auto"}),ref:o},e.children))},Rt=a(153),Nt=a.n(Rt),It=a(152),Bt=a.n(It),Mt=a(151),Yt=a.n(Mt),Ft=a(340),Xt=a(339),Wt=a(322),zt=a(318),Pt=a(317),_t=Se()((function(e){return{dialog:{minWidth:"50vw"}}})),Ut=function(e){var t=e.goToSearch,a=(_t(),Object(r.useState)(!1)),n=Object(R.a)(a,2),o=n[0],s=n[1],c=Object(r.useState)(""),l=Object(R.a)(c,2),u=l[0],h=l[1],d=Object(r.useState)(!1),f=Object(R.a)(d,2),m=f[0],p=f[1],g=function(){h(""),s(!1)};return i.a.createElement("div",null,i.a.createElement(At.a,{title:"Search",TransitionComponent:V.a},i.a.createElement(Ee.a,{"aria-label":"search",color:"inherit",onClick:function(){s(!0)}},i.a.createElement(Yt.a,null))),i.a.createElement(Xt.a,{open:o,onClose:g,fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",{action:"/",onSubmit:function(e){e.preventDefault(),u.length?(t(u),g()):p(!0)}},i.a.createElement(Pt.a,null,"Search from archived news"),i.a.createElement(zt.a,null,i.a.createElement(Ft.a,{error:m,autoFocus:!0,margin:"dense",label:"Keywords",type:"news keyword",fullWidth:!0,value:u,onChange:function(e){m&&p(!1),h(e.target.value)},helperText:m?"Keyword cannot be empty.":" "})),i.a.createElement(Wt.a,null,i.a.createElement(X.a,{onClick:g,color:"primary","aria-label":"cancel"},"Cancel"),i.a.createElement(X.a,{type:"submit",color:"primary","aria-label":"submit search"},"Search")))))},qt=a(89),Gt=a.n(qt),Vt=Object(N.a)((function(e){return{tab:{flexShrink:0,flexGrow:1,color:e.palette.primary.contrastText},heading:{textTransform:"uppercase",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap"},appBarNoBoxShadow:{boxShadow:"none"},appBarBottomBoxShadow:{boxShadow:"0px 4px 4px -1px rgba(0,0,0,0.2), 0px 5px 5px 0px rgba(0,0,0,0.14), 0px 10px 10px 0px rgba(0,0,0,0.12)"},trendIcon:{color:"#FFF"}}})),Kt=function(e){var t=e.headers,a=e.category,n=e.goToSearch,o=e.goToAnalytics,s=e.setCategory,c=e.goToTopic,l=Vt(),u=Object(r.useRef)(null),d=Gt()();return i.a.createElement(i.a.Fragment,null,i.a.createElement(St.a,{color:"primary",position:"static",ref:u,className:l.appBarNoBoxShadow},i.a.createElement(Ct.a,null,i.a.createElement(_.a,{container:!0},i.a.createElement(_.a,{item:!0,xs:1,md:3}),i.a.createElement(_.a,{item:!0,xs:5,md:6},i.a.createElement(G.a,{align:"center",className:l.heading,variant:"h1",component:"h1"},"News Canada")),i.a.createElement(_.a,{item:!0,xs:6,md:3},i.a.createElement(_.a,{container:!0,alignItems:"center",justify:"flex-end"},i.a.createElement(_.a,{item:!0},i.a.createElement(Ut,{goToSearch:n})),i.a.createElement(_.a,{item:!0},i.a.createElement(At.a,{title:"Topic: COVID-19",TransitionComponent:V.a},i.a.createElement(Ee.a,{"aria-label":"Topic: COVID-19",color:"inherit",onClick:c},i.a.createElement(Bt.a,null)))),i.a.createElement(_.a,{item:!0},i.a.createElement(At.a,{title:"Analytics",TransitionComponent:V.a},i.a.createElement(Ee.a,{"aria-label":"news trend",color:"inherit",onClick:o},i.a.createElement(Nt.a,null))))))))),i.a.createElement(Lt,{anchorRef:u,zIndex:d.zIndex.appBar},i.a.createElement(St.a,{color:"primary",position:"static",className:l.appBarBottomBoxShadow},i.a.createElement(Dt.a,{value:-1!==t.indexOf(a)&&t.indexOf(a),indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto"},t.map((function(e,t){return i.a.createElement(Tt.a,{label:e,key:t,className:l.tab,onClick:function(){return s(h[e])}})}))))))};var Jt,Qt=Object(c.b)((function(e){return{headers:m,category:e.category}}),(function(e){return{goToSearch:function(t){e(function(e){return{type:E.SET_KEYWORD,keyword:e}}(t)),e({type:f.SET_CATEGORY,category:h.SEARCH})},goToAnalytics:function(){e({type:f.SET_CATEGORY,category:h.ANALYTICS})},goToTopic:function(){e({type:f.SET_CATEGORY,category:h.TOPIC})},setCategory:function(t){e(function(e){return function(t,a){a().category!==e&&t(p(e))}}(t))}}}))(Kt),Zt=a(29),$t=a.n(Zt),ea=function(){function e(t,a,n,r,i){var o=this;Object(Ie.a)(this,e),this.color={red:"#ef5350",transparent:"rgba(0,0,0,0)",getMapColor:function(e){return"rgba(55, 76, 128, ".concat(e.toFixed(1),")")},grey:"#eee",mapStrokeNormal:"#ccc",mapStrokeHoverHighlight:"#222",case:"#ffb140",death:"#f16a67",recovered:"#78c37b",timeBarHighlight:"#7a5195",timeBarNormal:"#af96bf",timeBarLight:"#e4dbe8"},this.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.getStrokeWidth=function(){return o.dimension.svgWidth>=1e3?1:.5},this.animations={zoomIn:{delay:0,duration:3e3},changeMapColor:{delay:3e3,duration:1e3},timeLapse:{delay:4e3},timeLapseGap:500},this.id=void 0,this.dimension=void 0,this.themeColor=void 0,this.data=void 0,this.references=void 0,this.scales=void 0,this.state=void 0,this.timeLapse=void 0,this.id=t,this.dimension=this.getDimension(a,n),this.themeColor=r,this.data={aggregate:null,case:i,caseMax:0},this.references={svg:null,map:{paths:null,pathHighlightGroup:null,pathHighlight:null},tooltip:null,timeControl:null},this.scales={timeBarXScale:Me.p()},this.state={time:0,timeMax:0,tooltipData:{inputX:-1e3,inputXSecondary:-1e3,inputY:-1e3,inputYSecondary:-1e3,data:{country:"",case:void 0}}},this.timeLapse={timeoutID:null}}return Object(Be.a)(e,[{key:"getDimension",value:function(e,t){var a={t:0,r:10,b:75,l:10};return{svgWidth:e,svgHeight:t,m:a,mapX:a.l,mapY:a.t,mapWidth:e-a.l-a.r,mapHeight:t-a.t-a.b}}},{key:"getData",value:function(){var e,t,n,r=this;return $t.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$t.a.awrap(a.e(4).then(a.bind(null,345)));case 3:e=i.sent,t=0,(n=e.default).features.forEach((function(e){var a;e.properties&&(e.properties.case=r.data.case.countries[e.properties.name]?Object.assign({},r.data.case.countries[e.properties.name]):null,null===(a=r.data.case.countries[e.properties.name])||void 0===a||a.cases.forEach((function(e){e>t&&(t=e)})))})),this.data.aggregate=n,this.data.caseMax=t,this.state.timeMax=this.data.case.series.length-1,i.next=15;break;case 12:throw i.prev=12,i.t0=i.catch(0),i.t0;case 15:case"end":return i.stop()}}),null,this,[[0,12]])}},{key:"initSvg",value:function(){this.references.svg=Me.t("#".concat(this.id)).append("svg").attr("width",this.dimension.svgWidth).attr("height",this.dimension.svgHeight)}},{key:"initTooltip",value:function(){if(this.references.svg){var e=this.references.svg.append("g"),t=e.append("rect"),a=e.append("text"),n=a.append("tspan"),r=a.append("tspan"),i=a.append("tspan"),o=a.append("tspan"),s=a.append("tspan"),c=a.append("tspan"),l=a.append("tspan"),u=a.append("tspan"),h=e.append("path"),d=e.append("path"),f=e.append("path"),m=e.append("g"),p=m.append("rect"),g=m.append("rect"),v=m.append("rect");a.style("font-weight",700).style("font-size","0.875rem").style("fill","#fff").attr("text-anchor","middle"),o.style("fill",this.color.case),c.style("fill",this.color.death),u.style("fill",this.color.recovered),t.style("fill","rgba(0,0,0,0.8)").attr("rx","5px"),[h,d,f].forEach((function(e){e.style("stroke-width",2).style("fill","none")})),h.style("stroke",this.color.case),d.style("stroke",this.color.death),f.style("stroke",this.color.recovered),p.style("fill",this.color.case),g.style("fill",this.color.death),v.style("fill",this.color.recovered),this.references.tooltip={bg:t,tooltipGroup:e,tooltip:a,tspanCountry:n,tspanDate:r,tspanCaseAccumulative:i,tspanDeathAccumulative:s,tspanRecoveredAccumulative:l,tspanCaseNew:o,tspanDeathNew:c,tspanRecoveredNew:u,caseLineChart:h,deathLineChart:d,recoveredLineChart:f,stackBarChartCase:p,stackBarChartDeath:g,stackBarChartRecovered:v},this.updateTooltip()}}},{key:"updateTooltip",value:function(){var e=this,t=this.state.tooltipData,a=t.inputX,n=t.inputXSecondary,r=t.inputY,i=t.inputYSecondary,o=t.data;if(this.references.tooltip){var s=this.state.time,c=function(e){return e>=0?" (+".concat(e,")"):" (".concat(e,")")};!function(){if(e.references.tooltip){var t=new Date(e.data.case.series[s]),a="".concat(t.getDate()," ").concat(e.monthStrings[t.getMonth()],", ").concat(t.getFullYear());e.references.tooltip.tspanCountry.text(o.country),e.references.tooltip.tspanDate.text(a),o.case?(e.references.tooltip.tspanCaseAccumulative.text("Confirmed: ".concat(o.case.cases[s])),e.references.tooltip.tspanCaseNew.text(c(0===s?0:o.case.cases[s]-o.case.cases[s-1])),e.references.tooltip.tspanDeathAccumulative.text("Death: ".concat(o.case.deaths[s])),e.references.tooltip.tspanDeathNew.text(c(0===s?0:o.case.deaths[s]-o.case.deaths[s-1])),e.references.tooltip.tspanRecoveredAccumulative.text("Recovered: ".concat(o.case.recovered[s])),e.references.tooltip.tspanRecoveredNew.text(c(0===s?0:o.case.recovered[s]-o.case.recovered[s-1]))):(e.references.tooltip.tspanCaseAccumulative.text("Confirmed: ".concat("Unknown")),e.references.tooltip.tspanCaseNew.text(""),e.references.tooltip.tspanDeathAccumulative.text("Death: ".concat("Unknown")),e.references.tooltip.tspanDeathNew.text(""),e.references.tooltip.tspanRecoveredAccumulative.text("Recovered: ".concat("Unknown")),e.references.tooltip.tspanRecoveredNew.text(""))}}();var l,u,h,d,f,m,p=function(){var t;if(e.references.tooltip){var o=null===(t=e.references.tooltip.tooltip.node())||void 0===t?void 0:t.getBBox();if(o){var s,c,l=o.width,u=o.height,h=1.3*Math.max(150,l),d=1.3*(u+60+15+10),f=a-h-5,m=Math.max(e.dimension.m.l,f),p=r;m+h>a?(c=n+5)+h>e.dimension.svgWidth?(s=(c=m)+.5*h,p=i):s=c+.5*h:s=(c=m)+.5*h;var g=p-.15*o.height;g=Math.min(g,e.dimension.svgHeight-d);var v=(g=Math.max(g,0))+.15*d+u,y=v+60+10;return{tooltipX:c,tooltipY:g,tooltipWidth:h,tooltipHeight:d,textX:s,textY:g+.15*o.height,chartX:s-75,chartWidth:150,lineChartStartY:v,lineChartHeight:20,stackBarChartY:y,stackBarChartHeight:15}}}}();p&&(l=p.textX,u=p.textY,h=p.tooltipX,d=p.tooltipY,f=p.tooltipWidth,m=p.tooltipHeight,e.references.tooltip&&(e.references.tooltip.tooltip.attr("x",l).attr("y",u),e.references.tooltip.tspanCountry.attr("x",l).attr("dy","0.875em"),e.references.tooltip.tspanDate.attr("x",l).attr("dy","1em"),e.references.tooltip.tspanCaseAccumulative.attr("x",l).attr("dy","1em"),e.references.tooltip.tspanDeathAccumulative.attr("x",l).attr("dy","1em"),e.references.tooltip.tspanRecoveredAccumulative.attr("x",l).attr("dy","1em"),e.references.tooltip.bg.attr("x",h).attr("y",d).attr("width",f).attr("height",m)),function(t,a,n,r){if(e.references.tooltip){var i=function(t,n,r,i,o){var c=t.map((function(e,t){return[t,e]})),l=Me.q().domain([0,e.data.case.series.length-1]).range([0,a]),u=Me.q().domain([0,r]).range([20,0]);n.datum(c).attr("d",Me.n().x((function(e){return l(e[0])})).y((function(e){return u(e[1])})).defined((function(e,t){return t<=s}))).style("transform","translate(".concat(i,"px, ").concat(o,"px)"))};if(e.state.tooltipData.data.case){var o=Math.max.apply(Math,e.state.tooltipData.data.case.cases);i(e.state.tooltipData.data.case.cases,e.references.tooltip.caseLineChart,o,t,n),i(e.state.tooltipData.data.case.deaths,e.references.tooltip.deathLineChart,o,t,n+r),i(e.state.tooltipData.data.case.recovered,e.references.tooltip.recoveredLineChart,o,t,n+2*r)}else{var c=[];i(c,e.references.tooltip.caseLineChart,0,t,n),i(c,e.references.tooltip.deathLineChart,0,t,n+r),i(c,e.references.tooltip.recoveredLineChart,0,t,n+2*r)}}}(p.chartX,p.chartWidth,p.lineChartStartY,p.lineChartHeight),function(t,a,n,r){if(e.references.tooltip)if(e.state.tooltipData.data.case){var i=e.state.tooltipData.data.case.cases[s],o=e.state.tooltipData.data.case.deaths[s],c=e.state.tooltipData.data.case.recovered[s],l=0===i?0:o/i*a,u=0===i?0:c/i*a;e.references.tooltip.stackBarChartCase.attr("x",t).attr("width",(function(){return 0===i?0:a})).attr("height",r).attr("y",n),e.references.tooltip.stackBarChartDeath.attr("x",t+a-l).attr("width",l).attr("height",r).attr("y",n),e.references.tooltip.stackBarChartRecovered.attr("x",t).attr("width",u).attr("height",r).attr("y",n)}else[e.references.tooltip.stackBarChartCase,e.references.tooltip.stackBarChartDeath,e.references.tooltip.stackBarChartRecovered].forEach((function(e){e.attr("x",t).attr("width",0).attr("height",0).attr("y",n)}))}(p.chartX,p.chartWidth,p.stackBarChartY,p.stackBarChartHeight))}}},{key:"initMap",value:function(){if(this.data.aggregate&&this.references.svg){var e=Me.j().fitExtent([[this.dimension.mapX,this.dimension.mapY],[this.dimension.mapWidth,this.dimension.mapHeight]],this.data.aggregate);this.references.map.paths=this.references.svg.append("g").selectAll("path").data(this.data.aggregate.features).enter().append("path").attr("fill",this.color.grey).attr("d",Me.k().projection(e)).style("stroke",this.color.mapStrokeNormal).style("stroke-width",this.getStrokeWidth()).style("opacity",0).style("transform","scale(5)").style("transform-origin","50% 50%"),this.references.map.pathHighlightGroup=this.references.svg.append("g")}}},{key:"mapZoomIn",value:function(){this.references.map.paths&&(this.references.map.paths.transition().delay((function(e,t){return t%10*200})).duration(1e3).style("opacity",1).style("transform","scale(1)"),this.references.map.paths.transition().delay(this.animations.changeMapColor.delay).duration(this.animations.changeMapColor.duration).style("fill",this.color.getMapColor(0)))}},{key:"initTimeControl",value:function(){var e=this;if(this.references.svg){var t=this.dimension.svgHeight-this.dimension.m.b,a=.2*this.dimension.svgWidth,n=t+16+4,r=n+10+4,i=this.data.case.series;this.scales.timeBarXScale=Me.p().domain(i).range([a,.8*this.dimension.svgWidth]);var o=this.references.svg.append("g"),s=o.append("text").attr("x",a).attr("y",t+16).attr("font-size","".concat(16,"px")).attr("font-weight",700).style("fill",this.color.timeBarHighlight),c=[0,1].map((function(t){var a=o.append("g").selectAll("rect").data(i).enter().append("rect").style("cursor","pointer").attr("y",n).attr("x",(function(t){return"".concat(e.scales.timeBarXScale(t))})).attr("width",e.scales.timeBarXScale.bandwidth()).attr("height",10).style("opacity",0);return a.transition().delay(2e3).duration(1e3).style("opacity",1),a})),l=Object(R.a)(c,2),u=l[0],h=l[1];u.style("fill",this.color.timeBarLight).style("stroke","#fff").style("stroke-width",1),h.style("fill",this.color.transparent);var d=o.append("g"),f=[{y:r+16,text:"Pause"},{y:r+32,text:"Start Over"}].map((function(t){var n=d.append("text").style("cursor","pointer").style("opacity","0").style("fill",e.color.timeBarNormal).attr("font-weight",700).attr("x",a).attr("y",t.y).text(t.text);return n.transition().delay(e.animations.timeLapse.delay).duration(1e3).style("opacity",1),n.on("mouseenter",(function(){n.style("fill",e.color.timeBarHighlight)})).on("mouseleave",(function(){n.style("fill",e.color.timeBarNormal)})),n})),m=Object(R.a)(f,2),p=m[0],g=m[1];this.references.timeControl={group:o,dateText:s,timeBarBg:u,timeBar:h,playButton:p,startOverButton:g}}}},{key:"updateTimeControl",value:function(){var e=this;if(this.references.timeControl){var t=this.state.time,a=new Date(this.data.case.series[t]);this.references.timeControl.dateText.text("".concat(a.getDate()," ").concat(this.monthStrings[a.getMonth()],", ").concat(a.getFullYear())),this.references.timeControl.timeBar.style("fill",(function(t,a){return a<=e.state.time?e.color.timeBarNormal:e.color.transparent})),this.references.timeControl.timeBar.filter((function(t,a){return a===e.state.time})).transition().duration(this.animations.timeLapseGap).attrTween("width",(function(t){return function(t){return"".concat(t*e.scales.timeBarXScale.bandwidth(),"px")}})).ease(Me.h)}}},{key:"updateMap",value:function(){var e=this,t=Math.log(this.data.caseMax),a=this.color.getMapColor(0);this.references.map.paths&&this.references.map.paths.style("fill",(function(n){if(n.properties.case){var r=n.properties.case.cases[e.state.time];return r<1?a:e.color.getMapColor(Math.log(r)/t)}return a}))}},{key:"setTimeState",value:function(e){this.state.time=e,this.updateMap(),this.updateTimeControl(),this.updateTooltip()}},{key:"setToolTipDataState",value:function(e,t,a,n,r,i){var o=null;i&&(o={cases:i.cases.slice(),deaths:i.deaths.slice(),recovered:i.recovered.slice()}),this.state.tooltipData=Object.assign(this.state.tooltipData,{inputX:e,inputXSecondary:t,inputY:a,inputYSecondary:n,data:{country:r,case:o}})}},{key:"startTimeLapse",value:function(e){var t,a=this,n=function e(){a.state.time<a.state.timeMax?(a.setTimeState(a.state.time+1),a.timeLapse.timeoutID=window.setTimeout(e,a.animations.timeLapseGap)):a.stopTimeLapse()};null===(t=this.references.timeControl)||void 0===t||t.playButton.text("Pause"),e?this.timeLapse.timeoutID=window.setTimeout((function(){return n()}),this.animations.timeLapseGap):n()}},{key:"stopTimeLapse",value:function(){var e;null===(e=this.references.timeControl)||void 0===e||e.playButton.text("Start"),null!==this.timeLapse.timeoutID&&(window.clearTimeout(this.timeLapse.timeoutID),this.timeLapse.timeoutID=null)}},{key:"appendTimeBarMouseEvent",value:function(){if(this.references.timeControl){var e=this;this.references.timeControl.timeBar.on("mouseenter",(function(){Me.t(this).style("fill",e.color.timeBarHighlight)})).on("mouseleave",(function(t,a){Me.t(this).style("fill",a<=e.state.time?e.color.timeBarNormal:e.color.transparent)})).on("click",(function(t,a){e.stopTimeLapse(),e.setTimeState(a)}))}}},{key:"appendTimeControlButtonEvent",value:function(){var e=this;this.references.timeControl&&(this.references.timeControl.playButton.on("click",(function(){null!==e.timeLapse.timeoutID?e.stopTimeLapse():e.startTimeLapse()})),this.references.timeControl.startOverButton.on("click",(function(){e.stopTimeLapse(),e.setTimeState(0),e.startTimeLapse(!0)})))}},{key:"appendMapPathMouseEvent",value:function(){if(this.references.map.paths){var e=this,t=function(){var t;e.setToolTipDataState(-1e3,-1e3,-1e3,-1e3,"",null),e.updateTooltip(),null===(t=e.references.map.pathHighlight)||void 0===t||t.remove()};this.references.map.paths.on("mouseenter",(function(a){t();var n=this.getBBox(),r=n.x,i=n.y,o=n.x+n.width,s=n.y+n.height;a.properties.case?e.setToolTipDataState(r,o,i,s,a.properties.name,Object(B.a)({},a.properties.case)):e.setToolTipDataState(r,o,i,s,a.properties.name,null),e.updateTooltip();var c=Me.t(this).clone().remove();if(e.references.map.pathHighlightGroup){var l=e.references.map.pathHighlightGroup.append((function(){return c.node()}));l&&(e.references.map.pathHighlight=l,l.style("stroke",e.color.mapStrokeHoverHighlight).style("stroke-width",2*e.getStrokeWidth()).style("fill",e.color.transparent),l.on("mouseleave",(function(){t()})))}}))}}},{key:"main",value:function(){var e=this;return $t.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$t.a.awrap(this.getData());case 3:this.initSvg(),this.initMap(),this.initTimeControl(),this.initTooltip(),this.mapZoomIn(),this.appendMapPathMouseEvent(),this.appendTimeBarMouseEvent(),setTimeout((function(){e.startTimeLapse(),e.appendTimeControlButtonEvent()}),this.animations.timeLapse.delay),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),null,this,[[0,13]])}}]),e}(),ta=Se()((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"}}})),aa=function(){var e=ta(),t=Gt()(),n=Object(r.useRef)(null),o=window.innerHeight-240;return Object(r.useEffect)((function(){a.e(3).then(a.bind(null,344)).then((function(e){n.current&&new ea("topic-covid19-map",n.current.getBoundingClientRect().width,n.current.getBoundingClientRect().height,t.palette.secondary.main,e.default).main()}))}),[]),i.a.createElement("div",{className:e.root,ref:n,style:{height:"".concat(o,"px")}},i.a.createElement("div",{id:"topic-covid19-map"}," "))},na=Se()((function(e){return{root:Object(D.a)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:e.spacing(2,0,10,0)},e.breakpoints.down("sm"),{padding:e.spacing(2,0,20,0)}),widthWrapper:Object(D.a)({width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},e.breakpoints.down("sm"),{width:"100%"}),heading:{fontFamily:"Open Sans,sans-serif",fontSize:"1.25rem",textTransform:"capitalize",color:e.palette.primary.main,margin:e.spacing(0,0,2,0)}}})),ra=function(){var e=na();return i.a.createElement("div",{className:e.root},i.a.createElement("div",{className:e.widthWrapper},i.a.createElement("h1",{className:e.heading},"The spread of COVID-19")),i.a.createElement(aa,null),i.a.createElement("div",{className:e.widthWrapper},i.a.createElement(I.a,{mx:5},i.a.createElement("p",null,i.a.createElement("span",null,"Data retrieved from "),i.a.createElement("span",null,i.a.createElement(F.a,{href:"https://graphics.reuters.com/CHINA-HEALTH-MAP/0100B59S39E/index.html",target:"_blank",rel:"noopener noreferrer",style:{color:"#f35c19"}},"Reuters.com")),i.a.createElement("span",null,", not updated in realtime.")))))},ia=a(26);!function(e){e.relevance="relevance",e.date="date"}(Jt||(Jt={}));var oa,sa=Jt,ca=function(e,t,a,n,r){return new Promise((function(i,o){var s=r?"&date=".concat(r):"";n=n||sa.relevance;var c="".concat("https://www.xiaoxihome.com/api/search-news","?keyword=").concat(e,"&frequency=").concat(a,"&skip=").concat(t,"&sort=").concat(n).concat(s);fetch(c).then((function(e){return e.json()})).then((function(e){"ok"===e.status?i(e):(console.log(e),o(e))})).catch((function(e){console.log(e),o(e)}))}))};!function(e){e.LOADING="LOADING",e.LOADED_NORMAL="LOADED_NORMAL",e.LOADED_EMPTY="LOADED_EMPTY",e.LOADED_NO_MORE="LOADED_NO_MORE",e.ERROR="ERROR"}(oa||(oa={}));var la=oa,ua=function(e){var t=Object(r.useState)(la.LOADING),a=Object(R.a)(t,2),n=a[0],i=a[1],o=Object(r.useState)([]),s=Object(R.a)(o,2),c=s[0],l=s[1],u=Object(r.useState)(sa.relevance),h=Object(R.a)(u,2),d=h[0],f=h[1],m=Object(r.useState)(0),p=Object(R.a)(m,2),g=p[0],v=p[1],y=Object(r.useState)(null),x=Object(R.a)(y,2),E=x[0],b=x[1],w=Object(r.useState)(0),O=Object(R.a)(w,2),k=O[0],S=O[1],C=Object(r.useState)(0),A=Object(R.a)(C,2),D=A[0],T=A[1],j=function(e,t){i(e===t&&0!==t?la.LOADED_NO_MORE:0===t?la.LOADED_EMPTY:la.LOADED_NORMAL)};return Object(r.useEffect)((function(){!function(){var t;$t.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,l([]),b(null),v(0),f(sa.relevance),S(0),T(0),i(la.LOADING),a.next=10,$t.a.awrap(ca(e,0,!0));case 10:t=a.sent,l(t.data),b({bin:t.series.slice(),frequency:t.frequency.slice()}),v(t.totalCount),j(t.data.length,t.totalCount),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),i(la.ERROR);case 20:case"end":return a.stop()}}),null,null,[[0,17]])}()}),[e]),{status:n,data:c,frequencyData:E,sortType:d,totalCount:g,pendingDateFilter:k,dateFilter:D,toggleSort:function(t){var a;return $t.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n!==la.LOADING){r.next=3;break}return r.abrupt("return");case 3:if(t!==d){r.next=5;break}return r.abrupt("return");case 5:return l([]),f(t),i(la.LOADING),r.next=10,$t.a.awrap(ca(e,0,!1,t,D));case 10:a=r.sent,l(a.data),j(a.data.length,a.totalCount),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),i(la.ERROR);case 18:case"end":return r.stop()}}),null,null,[[0,15]])},loadMore:function(){var t,a;return $t.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n!==la.LOADING){r.next=3;break}return r.abrupt("return");case 3:return i(la.LOADING),r.next=6,$t.a.awrap(ca(e,c.length,!1,d,D));case 6:t=r.sent,a=0,l((function(e){return a=e.length+t.data.length,[].concat(Object(ia.a)(e),Object(ia.a)(t.data))})),j(a,t.totalCount),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),i(la.ERROR);case 15:case"end":return r.stop()}}),null,null,[[0,12]])},setPendingDateFilter:function(e){S(e)},setDateFilter:function(t){var a;return $t.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n!==la.LOADING){r.next=3;break}return r.abrupt("return");case 3:if(t!==D){r.next=5;break}return r.abrupt("return");case 5:return l([]),v(0),S(0),T(t),i(la.LOADING),r.next=12,$t.a.awrap(ca(e,0,!1,d,t));case 12:a=r.sent,l(a.data),v(a.totalCount),j(a.data.length,a.totalCount),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),i(la.ERROR);case 21:case"end":return r.stop()}}),null,null,[[0,18]])}}};function ha(e){var t=new Date(e);return"".concat(t.getUTCFullYear(),"/").concat(t.getUTCMonth()+1,"/").concat(t.getUTCDate())}var da=Se()((function(e){return{root:{margin:e.spacing(1,0)}}})),fa=function(e){var t=e.count,a=e.keyword,n=e.currentLength,r=e.dateFilter,o=1===t?"article":"articles",s=da(),c=r?" on ".concat(ha(r)):"";return i.a.createElement(G.a,{variant:"body1",component:"div",className:s.root},i.a.createElement(I.a,{fontWeight:700,textAlign:"center"},"".concat(t," news ").concat(o,' found related to "').concat(a,'"').concat(c,", displaying 1 - ").concat(n)))},ma=function(){return i.a.createElement(K.a,{variant:"rect",width:"100%",height:200,animation:"wave"})},pa=Se()((function(e){return{root:{margin:e.spacing(5,0),width:300}}})),ga=function(e){var t=e.onClick,a=pa();return i.a.createElement(X.a,{variant:"contained",disableElevation:!0,color:"secondary",onClick:t,className:a.root},"Load more")},va=a(326),ya=Se()((function(e){return{root:{margin:e.spacing(2,0)}}})),xa=function(e){var t=e.message,a=e.divider,n=ya();return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.a,{variant:"body1",component:"div",className:n.root},i.a.createElement(I.a,{fontWeight:700,textAlign:"center"},t)),a&&i.a.createElement(va.a,{style:{width:"100%"}}))},Ea=a(327),ba=Se()((function(e){return Object(M.a)({highlight:{backgroundColor:e.palette.secondary.light}})})),wa=function(e){var t=e.content,a=e.keyword,n=ba(),o=Object(r.useMemo)((function(){var e=a.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),n=new RegExp("("+e+")","gi");return t.split(n)}),[t,a]);return i.a.createElement(i.a.Fragment,null,o.map((function(e,t){return t%2===1?i.a.createElement("span",{className:n.highlight,key:t},e):i.a.createElement("span",{key:t},e)})))},Oa=Object(N.a)((function(e){return{cardRoot:{width:"100%",margin:e.spacing(2,0)},cardActionArea:{width:"100%",height:"100%","& a":{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center","&:visited, &:link":{textDecoration:"inherit",color:"inherit",cursor:"pointer"}}},cardMedia:{width:"20%",height:"100%"},imageContain:{backgroundSize:"contain",backgroundColor:e.palette.primary.main},cardContent:{width:"80%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),ka=function(e){var t=e.article,a=e.keyword,n=Oa(),o=function(){var e=Object(r.useState)(0),t=Object(R.a)(e,2),a=t[0],n=t[1],i=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(i.current){var e=i.current.getBoundingClientRect().height;n(e)}}),[i]),{cardHeight:a,heightRef:i}}(),s=o.cardHeight,c=o.heightRef;return i.a.createElement(U.a,{className:n.cardRoot,style:{height:s?"".concat(s,"px"):"auto"}},i.a.createElement(Ea.a,{className:n.cardActionArea},i.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},t.urlToImage?i.a.createElement(P.a,{component:"img",alt:t.title,className:n.cardMedia,image:t.urlToImage,title:t.title}):i.a.createElement(P.a,{className:"".concat(n.cardMedia," ").concat(n.imageContain),image:"/news-app/xiaoxihome-news.jpg",title:"No image"}),i.a.createElement(q.a,{className:n.cardContent,ref:c},i.a.createElement(G.a,{variant:"body1",component:"h2"},i.a.createElement(I.a,{fontWeight:700},i.a.createElement(wa,{content:t.title,keyword:a}))),i.a.createElement(G.a,{variant:"body2",component:"div",color:"textSecondary"},i.a.createElement(I.a,{fontWeight:700},new Date(t.publishedAt).toDateString())),i.a.createElement(G.a,{variant:"body2",color:"textSecondary",component:"p"},i.a.createElement(wa,{content:t.content.replace(/\[\+[0-9]+\schars\]/gi,""),keyword:a}))))))},Sa=a(155),Ca=a.n(Sa),Aa=a(154);a.n(Aa).a.polyfill();var Da=Se()((function(e){return{root:Object(D.a)({position:"fixed",zIndex:e.zIndex.modal,bottom:"50px",right:"50px",backgroundColor:e.palette.secondary.main,color:"#FFF",transition:e.transitions.create("background-color opacity"),transform:"rotate(-90deg)","&:hover":{backgroundColor:e.palette.secondary.light}},e.breakpoints.down("md"),{bottom:"15px",right:"15px"})}})),Ta=function(){var e=Da(),t=function(){var e=Object(r.useState)(!1),t=Object(R.a)(e,2),a=t[0],n=t[1],i=function(){window.scrollY>window.innerHeight&&!a?n(!0):window.scrollY<window.innerHeight&&a&&n(!1)};return Object(r.useEffect)((function(){return document.addEventListener("scroll",i),function(){document.removeEventListener("scroll",i)}}),[a]),a}();return i.a.createElement(et.a,{in:t},i.a.createElement(At.a,{title:"Scroll to Top",className:e.root},i.a.createElement(Ee.a,{"aria-label":"Scroll to Top",onClick:function(){window.scroll({top:0,left:0,behavior:"smooth"})}},i.a.createElement(Ca.a,null))))},ja=function(){function e(t,a,n,r,i){Object(Ie.a)(this,e),this.dataArray=void 0,this.auxArray=void 0,this.params=void 0,this.dimension=void 0,this.scales=void 0,this.svg=void 0,this.references=void 0,this.axis=void 0,this.dataArray={bin:a,frequency:n},this.auxArray={binDate:this.getBinDateArray(a),barTransitionDelay:this.getBarTransitionDelayArray(500,n)},this.params={lightColor:t.palette.secondary.light,darkColor:t.palette.secondary.dark,primaryColor:t.palette.primary.light,backgroundColor:"#EEE",TRANSITION_DELAY:500,BAR_TRANSITION_DURATION:2e3,maxFrequency:Math.max.apply(Math,this.dataArray.frequency),binLength:this.dataArray.bin.length,argWidth:r,selector:i},this.dimension=this.getDimensions(r),this.svg=Me.t("#".concat(this.params.selector)).append("svg"),this.references={svg:this.svg,bars:this.svg.append("g").selectAll("rect").data(this.dataArray.frequency).enter().append("rect"),axisX:this.svg.append("g"),axisY:this.svg.append("g"),axisXHoverDate:this.svg.append("g"),axisXHoverFrequency:this.svg.append("g"),axisYHover:this.svg.append("g"),hoverDetection:this.svg.append("g").selectAll("rect").data(this.dataArray.frequency).enter().append("rect")},this.scales={x:Me.p().domain(this.dataArray.frequency.map((function(e,t){return t.toString()}))).range([0,this.dimension.chartWidth]),y:Me.q().domain([0,this.params.maxFrequency]).range([this.dimension.chartHeight,0])},this.axis={x:Me.b(this.scales.x),y:Me.c(this.scales.y),xHoverDate:Me.b(this.scales.x),xHoverFrequency:Me.b(this.scales.x),yHover:Me.c(this.scales.y)},this.setHoverDetectionEventHandlers=this.setHoverDetectionEventHandlers.bind(this)}return Object(Be.a)(e,[{key:"getBinDateArray",value:function(e){return e.map(ha)}},{key:"getBarTransitionDelayArray",value:function(e,t){for(var a=[],n=e,r=0;r<t.length;r++)0===t[r]?a.push(n):a.push(n+=20);return a}},{key:"getDimensions",value:function(e){var t=e,a=Math.min(Math.round(t/3),200),n={t:10,r:30,b:30,l:30};return{svgWidth:t,svgHeight:a,m:n,chartWidth:t-n.l-n.r,chartHeight:a-n.t-n.b,chartX:n.l,chartY:n.t}}},{key:"setSvg",value:function(){this.references.svg.attr("width",this.dimension.svgWidth).attr("height",this.dimension.svgHeight).style("background",this.params.backgroundColor)}},{key:"setBars",value:function(){var e=this,t=this.scales.x.bandwidth(),a=function(t){return e.dimension.chartHeight-e.scales.y(t)};this.references.bars.style("fill",this.params.lightColor).style("opacity",.8).attr("width",t).attr("height",0).attr("x",(function(t,a){return e.dimension.chartX+(e.scales.x(a.toString())||0)})).attr("y",this.dimension.chartY+this.dimension.chartHeight),this.references.bars.transition().attr("height",a).attr("y",(function(t){return e.dimension.chartY+e.dimension.chartHeight-a(t)})).delay((function(t,a){return e.auxArray.barTransitionDelay[a]})).duration(this.params.BAR_TRANSITION_DURATION).ease(Me.g)}},{key:"setAxisX",value:function(){var e=this;this.axis.x.tickSizeOuter(0).tickFormat((function(t,a){return e.auxArray.binDate[parseInt(t)]})).tickValues([0,Math.floor(.25*this.params.binLength),Math.floor(.5*this.params.binLength),Math.floor(.75*this.params.binLength),this.params.binLength-1].map((function(e){return"".concat(e)}))),this.references.axisX.style("transform","translate(".concat(-.5*this.dimension.svgWidth,"px, ").concat(this.dimension.svgHeight+this.dimension.chartY,"px)")).style("opacity",0).style("color",this.params.darkColor),this.references.axisX.transition().style("opacity",1).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight+this.dimension.chartY,"px)")).delay(this.params.TRANSITION_DELAY).duration(1e3).ease(Me.g),this.axis.x(this.references.axisX)}},{key:"setAxisY",value:function(){this.axis.y.tickSizeOuter(0).tickFormat(Me.i("d")).tickValues([0,Math.floor(.5*this.params.maxFrequency),this.params.maxFrequency]),this.references.axisY.style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight,"px)")).style("opacity",0).style("color",this.params.darkColor),this.references.axisY.transition().style("opacity",1).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartY,"px)")).delay(this.params.TRANSITION_DELAY).duration(1e3).ease(Me.g),this.axis.y(this.references.axisY)}},{key:"setAxisXHoverDate",value:function(){var e=this;this.references.axisXHoverDate.style("opacity",0).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartHeight+this.dimension.chartY,"px)")),this.axis.xHoverDate.tickFormat((function(t){return e.auxArray.binDate[parseInt(t)]}))}},{key:"setAxisXHoverFrequency",value:function(){var e=this;this.references.axisXHoverFrequency.style("opacity",0),this.axis.xHoverFrequency.tickFormat((function(t){return"".concat(e.dataArray.frequency[parseInt(t)])})).tickSize(0).tickPadding(-9)}},{key:"setAxisYHover",value:function(){this.references.axisYHover.style("opacity",0).style("transform","translate(".concat(this.dimension.chartX,"px, ").concat(this.dimension.chartY,"px)")),this.axis.yHover.tickFormat(Me.i("d")).tickSizeInner(-this.dimension.chartWidth-6).tickSizeOuter(0).tickPadding(9)}},{key:"setHoverDetection",value:function(){var e=this,t=this.scales.x.bandwidth();this.references.hoverDetection.style("opacity",0).attr("width",t).attr("height",this.dimension.svgHeight).attr("x",(function(t,a){return e.dimension.chartX+(e.scales.x(a.toString())||0)})).attr("y",0),this.setHoverDetectionEventHandlers()}},{key:"setHoverDetectionEventHandlers",value:function(){var e=this;this.references.hoverDetection.on("mouseover",(function(t,a){var n,r;e.axis.yHover.tickValues([t]),e.axis.yHover(e.references.axisYHover),e.references.axisYHover.selectAll(".tick line").style("transform","translate(-6px, 0)").style("color",e.params.primaryColor),e.references.axisYHover.selectAll(".domain").remove(),e.references.axisYHover.style("opacity",1);var i=null===(n=e.references.axisYHover.select("text").node())||void 0===n?void 0:n.getBBox();i&&e.references.axisYHover.selectAll("g.tick").insert("rect",":first-child").attr("width",i.width).attr("height",i.height).attr("x",i.x).attr("y",i.y).style("fill",e.params.backgroundColor),e.axis.xHoverDate.tickValues(["".concat(a)]),e.axis.xHoverDate(e.references.axisXHoverDate),e.references.axisXHoverDate.selectAll(".domain").remove(),e.references.axisXHoverDate.style("opacity",1);var o=null===(r=e.references.axisXHoverDate.select("text").node())||void 0===r?void 0:r.getBBox();o&&e.references.axisXHoverDate.selectAll("g.tick").insert("rect",":first-child").attr("width",1.2*o.width).attr("height",o.height).attr("x",o.x-.1*o.width).attr("y",o.y).style("fill",e.params.backgroundColor),e.axis.xHoverFrequency.tickValues(["".concat(a)]),e.axis.xHoverFrequency(e.references.axisXHoverFrequency),e.references.axisXHoverFrequency.selectAll(".domain").remove(),e.references.axisXHoverFrequency.style("transform","translate(".concat(e.dimension.chartX,"px, ").concat(e.scales.y(t)+e.dimension.chartY,"px)")).style("opacity",1),e.references.bars.filter((function(e,t){return t===a})).style("fill",e.params.primaryColor)})).on("mouseout",(function(t,a){e.references.axisYHover.style("opacity",0),e.references.axisXHoverFrequency.style("opacity",0),e.references.axisXHoverDate.style("opacity",0),e.references.bars.filter((function(e,t){return t===a})).style("fill",e.params.lightColor)}))}},{key:"bindSetDate",value:function(e){var t=this;this.references.hoverDetection.on("click",(function(a,n){e(t.dataArray.bin[n])}))}},{key:"draw",value:function(){this.setSvg(),this.setBars(),this.setAxisX(),this.setAxisY(),this.setAxisXHoverDate(),this.setAxisXHoverFrequency(),this.setAxisYHover(),this.setHoverDetection()}},{key:"main",value:function(){this.draw()}}]),e}(),Ha=Object(N.a)((function(e){return{root:{width:"100%"}}})),La=function(e){var t=e.bin,a=e.frequency,n=e.setDate,o=Object(r.useRef)(null),s=Ha(),c=Object(z.a)();return Object(r.useEffect)((function(){if(o.current){var e=new ja(c,t.map((function(e){return new Date(e).getTime()})),a.slice(),o.current.getBoundingClientRect().width,"keyword-frequency-chart");e.main(),e.bindSetDate(n)}}),[o,t,a]),i.a.createElement("div",{ref:o,className:s.root,id:"keyword-frequency-chart"})},Ra=a(342),Na=a(321),Ia=a(330),Ba=a(343),Ma=function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},Ya=Se()((function(e){return{root:{minWidth:200},resetFontSize:{fontSize:e.typography.fontSize}}})),Fa=function(e){var t=e.toggleSort,a=e.sortType,n=Ya();return i.a.createElement(Na.a,{className:n.root,color:"secondary"},i.a.createElement(Ra.a,{htmlFor:"searched-article-sort"},"Sort by"),i.a.createElement(Ia.a,{value:a,onChange:function(e){var n=e.target.value;n!==a&&t(n)},inputProps:{name:"sort",id:"searched-article-sort"},className:n.resetFontSize},i.a.createElement(Ba.a,{value:sa.relevance,className:n.resetFontSize},Ma(sa.relevance)),i.a.createElement(Ba.a,{value:sa.date,className:n.resetFontSize},Ma(sa.date))))},Xa=a(156),Wa=a.n(Xa),za=Se()((function(e){return{root:{minWidth:200,borderRadius:0,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},cancelIcon:{position:"absolute",right:5}}})),Pa=function(e){var t,a=e.pendingDateFilter,n=e.dateFilter,r=e.setDateFilter,o=za();return t=n?i.a.createElement(pe.a,{label:"".concat(ha(n)),onDelete:function(){return r(0)},classes:{root:o.root},color:"secondary",deleteIcon:i.a.createElement(Wa.a,{className:o.cancelIcon})}):a?i.a.createElement(pe.a,{label:"".concat(ha(a)),onClick:function(){return r(a)},className:o.root,variant:"outlined",color:"secondary"}):i.a.createElement(pe.a,{label:"Use chart to set date",variant:"outlined",disabled:!0,className:o.root}),i.a.createElement(i.a.Fragment,null,i.a.createElement(Ra.a,{shrink:!0},"Filter by date:"),t)},_a=Se()((function(e){return{root:Object(D.a)({width:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"center"},e.breakpoints.down("md"),{flexDirection:"column",alignItems:"center"}),itemWrapper:Object(D.a)({padding:e.spacing(2)},e.breakpoints.down("md"),{padding:e.spacing(1)})}})),Ua=function(e){var t=e.toggleSort,a=e.sortType,n=e.pendingDateFilter,r=e.dateFilter,o=e.setDateFilter,s=_a();return i.a.createElement("div",{className:s.root},i.a.createElement("div",{className:s.itemWrapper},i.a.createElement(Fa,{toggleSort:t,sortType:a})),i.a.createElement("div",{className:s.itemWrapper},i.a.createElement(Pa,{pendingDateFilter:n,dateFilter:r,setDateFilter:o})))},qa=function(e){return{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:e.spacing(2,0,15,0)}},Ga=function(e){return Object(D.a)({width:"1000px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",padding:e.spacing(2)},e.breakpoints.down("sm"),{width:"100%"})},Va=Object(N.a)((function(e){return{root:Object(B.a)({},qa(e)),widthWrapper:Object(B.a)({},Ga(e)),cardRoot:{width:"100%",margin:e.spacing(2,0)},cardActionArea:{width:"100%",height:"100%","& a":{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center","&:visited, &:link":{textDecoration:"inherit",color:"inherit",cursor:"pointer"}}},cardMedia:{width:"20%",height:"100%"},cardContent:{width:"80%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),Ka=function(e){var t=e.keyword,a=ua(t),n=a.data,o=a.frequencyData,s=a.status,c=a.sortType,l=a.totalCount,u=a.pendingDateFilter,h=a.dateFilter,d=a.setPendingDateFilter,f=a.setDateFilter,m=a.loadMore,p=a.toggleSort,g=Va(),v=n.length>0,y='No news article related to "'.concat(t,'"').concat(h?" on "+ha(h):""," was found"),x=function(e,t,a){var n=Object(r.useState)(!1),i=Object(R.a)(n,2),o=i[0],s=i[1];return Object(r.useEffect)((function(){e.length>0&&t&&s(!0)}),[e,t]),Object(r.useEffect)((function(){s(!1)}),[a]),o}(n,o,t);return i.a.createElement("div",{className:g.root},i.a.createElement("div",{className:g.widthWrapper},x&&o&&i.a.createElement(La,{bin:o.bin,frequency:o.frequency,setDate:d}),x&&i.a.createElement(Ua,{sortType:c,toggleSort:p,pendingDateFilter:u,dateFilter:h,setDateFilter:f}),v&&i.a.createElement(fa,{count:l,keyword:t,currentLength:n.length,dateFilter:h}),s===la.LOADED_EMPTY&&i.a.createElement(xa,{message:y}),s===la.ERROR&&i.a.createElement(xa,{message:"Server error please try later"}),v&&n.map((function(e){return i.a.createElement(ka,{article:e,keyword:t,key:e._id})})),s===la.LOADING&&i.a.createElement(ma,null),s===la.LOADED_NORMAL&&i.a.createElement(ga,{onClick:m}),s===la.LOADED_NO_MORE&&i.a.createElement(xa,{message:"End of results",divider:!0})),i.a.createElement(Ta,null))},Ja=Object(N.a)((function(e){return{root:{width:"100vw",maxWidth:"100%",position:"relative"},attribution:{position:"absolute",zIndex:e.zIndex.appBar,left:10,bottom:10}}}));var Qa=Object(c.b)((function(e){return{category:e.category,articles:e.articles,keyword:e.searchKeyword}}),(function(e){return{fetchArticlesAfterMount:function(){return e(d(h.HEADLINE))}}}))((function(e){var t=Ja(),a=Object(r.useState)(window.innerHeight),n=Object(R.a)(a,2),o=n[0];return n[1],Object(r.useEffect)((function(){e.fetchArticlesAfterMount()}),[]),i.a.createElement(I.a,{className:t.root,style:{minHeight:"".concat(o,"px")}},i.a.createElement(Qt,null),function(){var t;switch(e.category){case h.ANALYTICS:t=i.a.createElement(kt,null);break;case h.SEARCH:t=i.a.createElement(Ka,{keyword:e.keyword,key:e.keyword});break;case h.TOPIC:t=i.a.createElement(ra,null);break;default:t=i.a.createElement(me,{articles:e.articles})}return t}(),i.a.createElement("div",{className:t.attribution},i.a.createElement(ve,null)),i.a.createElement(Te,null))})),Za=Object(l.d)(O,k,Object(l.a)(u.a));var $a=function(){return i.a.createElement(c.a,{store:Za},i.a.createElement(A.a,{theme:L},i.a.createElement(C.a,null),i.a.createElement(Qa,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement($a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[227,1,2]]]);
//# sourceMappingURL=main.4db23a09.chunk.js.map